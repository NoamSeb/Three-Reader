{"ast":null,"code":"import _regeneratorRuntime from\"/Users/noamsebahoun/Documents/MMI/MMI_3/karl/three-reader-live/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/noamsebahoun/Documents/MMI/MMI_3/karl/three-reader-live/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/noamsebahoun/Documents/MMI/MMI_3/karl/three-reader-live/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import s from\"./Search.module.scss\";import fetchJsonp from\"fetch-jsonp\";import useCustomStore from\"../../customStore\";import{useEffect,useState}from\"react\";import AudioController from\"../utils/AudioController\";import{jsx as _jsx}from\"react/jsx-runtime\";var Search=function Search(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),artist=_useState2[0],setArtist=_useState2[1];var setSongs=useCustomStore(function(state){return state.setSongs;});useEffect(function(){AudioController.setup();},[]);var onKeyDown=function onKeyDown(e){if(e.keyCode===13&&e.target.value!==\"\"){getSongs();}};var getSongs=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetchJsonp(\"https://api.deezer.com/search?q=\".concat(artist,\"&output=jsonp\"));case 2:response=_context.sent;_context.next=5;return response.json();case 5:response=_context.sent;data=response.data.slice(0,10);AudioController.ctx.resume();setSongs(data);setArtist('');case 10:case\"end\":return _context.stop();}},_callee);}));return function getSongs(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:s.searchWrapper,children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:artist,placeholder:\"Search\",onChange:function onChange(e){return setArtist(e.target.value);},onKeyDown:onKeyDown})});};export default Search;","map":{"version":3,"names":["s","fetchJsonp","useCustomStore","useEffect","useState","AudioController","jsx","_jsx","Search","_useState","_useState2","_slicedToArray","artist","setArtist","setSongs","state","setup","onKeyDown","e","keyCode","target","value","getSongs","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","concat","sent","json","slice","ctx","resume","stop","apply","arguments","className","searchWrapper","children","type","placeholder","onChange"],"sources":["/Users/noamsebahoun/Documents/MMI/MMI_3/karl/three-reader-live/src/components/search/Search.jsx"],"sourcesContent":["import s from \"./Search.module.scss\";\nimport fetchJsonp from \"fetch-jsonp\";\nimport useCustomStore from \"../../customStore\";\nimport { useEffect, useState } from \"react\";\nimport AudioController from \"../utils/AudioController\";\n\nconst Search = () => {\n  const [artist, setArtist] = useState(\"\");\n  const setSongs = useCustomStore((state) => state.setSongs);\n\n  useEffect(() => {\n    AudioController.setup();\n  }, [])\n\n  const onKeyDown = (e) => {\n    if (e.keyCode === 13 && e.target.value !== \"\") {\n      getSongs();\n    }\n  };\n\n  const getSongs = async () => {\n    let response = await fetchJsonp(\n      `https://api.deezer.com/search?q=${artist}&output=jsonp`\n    );\n\n    response = await response.json();\n\n    const data = response.data.slice(0,10)\n    AudioController.ctx.resume()\n    setSongs(data);\n    setArtist('')\n  };\n\n  return (\n    <div className={s.searchWrapper}>\n      <input\n        type=\"text\"\n        value={artist}\n        placeholder=\"Search\"\n        onChange={(e) => setArtist(e.target.value)}\n        onKeyDown={onKeyDown}\n      />\n    </div>\n  );\n};\nexport default Search;\n"],"mappings":"4cAAA,MAAO,CAAAA,CAAC,KAAM,sBAAsB,CACpC,MAAO,CAAAC,UAAU,KAAM,aAAa,CACpC,MAAO,CAAAC,cAAc,KAAM,mBAAmB,CAC9C,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAO,CAAAC,eAAe,KAAM,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEvD,GAAM,CAAAC,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAA,CAAS,CACnB,IAAAC,SAAA,CAA4BL,QAAQ,CAAC,EAAE,CAAC,CAAAM,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAjCG,MAAM,CAAAF,UAAA,IAAEG,SAAS,CAAAH,UAAA,IACxB,GAAM,CAAAI,QAAQ,CAAGZ,cAAc,CAAC,SAACa,KAAK,QAAK,CAAAA,KAAK,CAACD,QAAQ,GAAC,CAE1DX,SAAS,CAAC,UAAM,CACdE,eAAe,CAACW,KAAK,CAAC,CAAC,CACzB,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAAC,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAIC,CAAC,CAAK,CACvB,GAAIA,CAAC,CAACC,OAAO,GAAK,EAAE,EAAID,CAAC,CAACE,MAAM,CAACC,KAAK,GAAK,EAAE,CAAE,CAC7CC,QAAQ,CAAC,CAAC,CACZ,CACF,CAAC,CAED,GAAM,CAAAA,QAAQ,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,CAAAC,IAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SACM,CAAAjC,UAAU,oCAAAkC,MAAA,CACMvB,MAAM,iBAC3C,CAAC,QAFGgB,QAAQ,CAAAI,QAAA,CAAAI,IAAA,CAAAJ,QAAA,CAAAE,IAAA,SAIK,CAAAN,QAAQ,CAACS,IAAI,CAAC,CAAC,QAAhCT,QAAQ,CAAAI,QAAA,CAAAI,IAAA,CAEFP,IAAI,CAAGD,QAAQ,CAACC,IAAI,CAACS,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CACtCjC,eAAe,CAACkC,GAAG,CAACC,MAAM,CAAC,CAAC,CAC5B1B,QAAQ,CAACe,IAAI,CAAC,CACdhB,SAAS,CAAC,EAAE,CAAC,0BAAAmB,QAAA,CAAAS,IAAA,MAAAd,OAAA,GACd,kBAXK,CAAAL,QAAQA,CAAA,SAAAC,IAAA,CAAAmB,KAAA,MAAAC,SAAA,OAWb,CAED,mBACEpC,IAAA,QAAKqC,SAAS,CAAE5C,CAAC,CAAC6C,aAAc,CAAAC,QAAA,cAC9BvC,IAAA,UACEwC,IAAI,CAAC,MAAM,CACX1B,KAAK,CAAET,MAAO,CACdoC,WAAW,CAAC,QAAQ,CACpBC,QAAQ,CAAE,SAAAA,SAAC/B,CAAC,QAAK,CAAAL,SAAS,CAACK,CAAC,CAACE,MAAM,CAACC,KAAK,CAAC,EAAC,CAC3CJ,SAAS,CAAEA,SAAU,CACtB,CAAC,CACC,CAAC,CAEV,CAAC,CACD,cAAe,CAAAT,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}