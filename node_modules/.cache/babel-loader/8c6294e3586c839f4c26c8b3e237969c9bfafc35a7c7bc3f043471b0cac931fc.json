{"ast":null,"code":"/*! Tweakpane 4.0.1 (c) 2016 cocopon, licensed under the MIT license. */\nfunction forceCast(v) {\n  return v;\n}\nfunction isEmpty(value) {\n  return value === null || value === undefined;\n}\nfunction isObject$1(value) {\n  return value !== null && typeof value === 'object';\n}\nfunction isRecord(value) {\n  return value !== null && typeof value === 'object';\n}\nfunction deepEqualsArray(a1, a2) {\n  if (a1.length !== a2.length) {\n    return false;\n  }\n  for (let i = 0; i < a1.length; i++) {\n    if (a1[i] !== a2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction deepMerge(r1, r2) {\n  const keys = Array.from(new Set([...Object.keys(r1), ...Object.keys(r2)]));\n  return keys.reduce((result, key) => {\n    const v1 = r1[key];\n    const v2 = r2[key];\n    return isRecord(v1) && isRecord(v2) ? Object.assign(Object.assign({}, result), {\n      [key]: deepMerge(v1, v2)\n    }) : Object.assign(Object.assign({}, result), {\n      [key]: key in r2 ? v2 : v1\n    });\n  }, {});\n}\nfunction isBinding(value) {\n  if (!isObject$1(value)) {\n    return false;\n  }\n  return 'target' in value;\n}\nconst CREATE_MESSAGE_MAP = {\n  alreadydisposed: () => 'View has been already disposed',\n  invalidparams: context => `Invalid parameters for '${context.name}'`,\n  nomatchingcontroller: context => `No matching controller for '${context.key}'`,\n  nomatchingview: context => `No matching view for '${JSON.stringify(context.params)}'`,\n  notbindable: () => `Value is not bindable`,\n  notcompatible: context => `Not compatible with  plugin '${context.id}'`,\n  propertynotfound: context => `Property '${context.name}' not found`,\n  shouldneverhappen: () => 'This error should never happen'\n};\nclass TpError {\n  static alreadyDisposed() {\n    return new TpError({\n      type: 'alreadydisposed'\n    });\n  }\n  static notBindable() {\n    return new TpError({\n      type: 'notbindable'\n    });\n  }\n  static notCompatible(bundleId, id) {\n    return new TpError({\n      type: 'notcompatible',\n      context: {\n        id: `${bundleId}.${id}`\n      }\n    });\n  }\n  static propertyNotFound(name) {\n    return new TpError({\n      type: 'propertynotfound',\n      context: {\n        name: name\n      }\n    });\n  }\n  static shouldNeverHappen() {\n    return new TpError({\n      type: 'shouldneverhappen'\n    });\n  }\n  constructor(config) {\n    var _a;\n    this.message = (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n    this.name = this.constructor.name;\n    this.stack = new Error(this.message).stack;\n    this.type = config.type;\n  }\n  toString() {\n    return this.message;\n  }\n}\nclass BindingTarget {\n  constructor(obj, key) {\n    this.obj_ = obj;\n    this.key = key;\n  }\n  static isBindable(obj) {\n    if (obj === null) {\n      return false;\n    }\n    if (typeof obj !== 'object' && typeof obj !== 'function') {\n      return false;\n    }\n    return true;\n  }\n  read() {\n    return this.obj_[this.key];\n  }\n  write(value) {\n    this.obj_[this.key] = value;\n  }\n  writeProperty(name, value) {\n    const valueObj = this.read();\n    if (!BindingTarget.isBindable(valueObj)) {\n      throw TpError.notBindable();\n    }\n    if (!(name in valueObj)) {\n      throw TpError.propertyNotFound(name);\n    }\n    valueObj[name] = value;\n  }\n}\nclass Emitter {\n  constructor() {\n    this.observers_ = {};\n  }\n  on(eventName, handler) {\n    let observers = this.observers_[eventName];\n    if (!observers) {\n      observers = this.observers_[eventName] = [];\n    }\n    observers.push({\n      handler: handler\n    });\n    return this;\n  }\n  off(eventName, handler) {\n    const observers = this.observers_[eventName];\n    if (observers) {\n      this.observers_[eventName] = observers.filter(observer => {\n        return observer.handler !== handler;\n      });\n    }\n    return this;\n  }\n  emit(eventName, event) {\n    const observers = this.observers_[eventName];\n    if (!observers) {\n      return;\n    }\n    observers.forEach(observer => {\n      observer.handler(event);\n    });\n  }\n}\nclass ComplexValue {\n  constructor(initialValue, config) {\n    var _a;\n    this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n    this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : (v1, v2) => v1 === v2;\n    this.emitter = new Emitter();\n    this.rawValue_ = initialValue;\n  }\n  get constraint() {\n    return this.constraint_;\n  }\n  get rawValue() {\n    return this.rawValue_;\n  }\n  set rawValue(rawValue) {\n    this.setRawValue(rawValue, {\n      forceEmit: false,\n      last: true\n    });\n  }\n  setRawValue(rawValue, options) {\n    const opts = options !== null && options !== void 0 ? options : {\n      forceEmit: false,\n      last: true\n    };\n    const constrainedValue = this.constraint_ ? this.constraint_.constrain(rawValue) : rawValue;\n    const prevValue = this.rawValue_;\n    const changed = !this.equals_(prevValue, constrainedValue);\n    if (!changed && !opts.forceEmit) {\n      return;\n    }\n    this.emitter.emit('beforechange', {\n      sender: this\n    });\n    this.rawValue_ = constrainedValue;\n    this.emitter.emit('change', {\n      options: opts,\n      previousRawValue: prevValue,\n      rawValue: constrainedValue,\n      sender: this\n    });\n  }\n}\nclass PrimitiveValue {\n  constructor(initialValue) {\n    this.emitter = new Emitter();\n    this.value_ = initialValue;\n  }\n  get rawValue() {\n    return this.value_;\n  }\n  set rawValue(value) {\n    this.setRawValue(value, {\n      forceEmit: false,\n      last: true\n    });\n  }\n  setRawValue(value, options) {\n    const opts = options !== null && options !== void 0 ? options : {\n      forceEmit: false,\n      last: true\n    };\n    const prevValue = this.value_;\n    if (prevValue === value && !opts.forceEmit) {\n      return;\n    }\n    this.emitter.emit('beforechange', {\n      sender: this\n    });\n    this.value_ = value;\n    this.emitter.emit('change', {\n      options: opts,\n      previousRawValue: prevValue,\n      rawValue: this.value_,\n      sender: this\n    });\n  }\n}\nclass ReadonlyPrimitiveValue {\n  constructor(value) {\n    this.emitter = new Emitter();\n    this.onValueBeforeChange_ = this.onValueBeforeChange_.bind(this);\n    this.onValueChange_ = this.onValueChange_.bind(this);\n    this.value_ = value;\n    this.value_.emitter.on('beforechange', this.onValueBeforeChange_);\n    this.value_.emitter.on('change', this.onValueChange_);\n  }\n  get rawValue() {\n    return this.value_.rawValue;\n  }\n  onValueBeforeChange_(ev) {\n    this.emitter.emit('beforechange', Object.assign(Object.assign({}, ev), {\n      sender: this\n    }));\n  }\n  onValueChange_(ev) {\n    this.emitter.emit('change', Object.assign(Object.assign({}, ev), {\n      sender: this\n    }));\n  }\n}\nfunction createValue(initialValue, config) {\n  const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n  const equals = config === null || config === void 0 ? void 0 : config.equals;\n  if (!constraint && !equals) {\n    return new PrimitiveValue(initialValue);\n  }\n  return new ComplexValue(initialValue, config);\n}\nfunction createReadonlyValue(value) {\n  return [new ReadonlyPrimitiveValue(value), (rawValue, options) => {\n    value.setRawValue(rawValue, options);\n  }];\n}\nclass ValueMap {\n  constructor(valueMap) {\n    this.emitter = new Emitter();\n    this.valMap_ = valueMap;\n    for (const key in this.valMap_) {\n      const v = this.valMap_[key];\n      v.emitter.on('change', () => {\n        this.emitter.emit('change', {\n          key: key,\n          sender: this\n        });\n      });\n    }\n  }\n  static createCore(initialValue) {\n    const keys = Object.keys(initialValue);\n    return keys.reduce((o, key) => {\n      return Object.assign(o, {\n        [key]: createValue(initialValue[key])\n      });\n    }, {});\n  }\n  static fromObject(initialValue) {\n    const core = this.createCore(initialValue);\n    return new ValueMap(core);\n  }\n  get(key) {\n    return this.valMap_[key].rawValue;\n  }\n  set(key, value) {\n    this.valMap_[key].rawValue = value;\n  }\n  value(key) {\n    return this.valMap_[key];\n  }\n}\nclass DefiniteRangeConstraint {\n  constructor(config) {\n    this.values = ValueMap.fromObject({\n      max: config.max,\n      min: config.min\n    });\n  }\n  constrain(value) {\n    const max = this.values.get('max');\n    const min = this.values.get('min');\n    return Math.min(Math.max(value, min), max);\n  }\n}\nclass RangeConstraint {\n  constructor(config) {\n    this.values = ValueMap.fromObject({\n      max: config.max,\n      min: config.min\n    });\n  }\n  constrain(value) {\n    const max = this.values.get('max');\n    const min = this.values.get('min');\n    let result = value;\n    if (!isEmpty(min)) {\n      result = Math.max(result, min);\n    }\n    if (!isEmpty(max)) {\n      result = Math.min(result, max);\n    }\n    return result;\n  }\n}\nclass StepConstraint {\n  constructor(step, origin = 0) {\n    this.step = step;\n    this.origin = origin;\n  }\n  constrain(value) {\n    const o = this.origin % this.step;\n    const r = Math.round((value - o) / this.step);\n    return o + r * this.step;\n  }\n}\nclass NumberLiteralNode {\n  constructor(text) {\n    this.text = text;\n  }\n  evaluate() {\n    return Number(this.text);\n  }\n  toString() {\n    return this.text;\n  }\n}\nconst BINARY_OPERATION_MAP = {\n  '**': (v1, v2) => Math.pow(v1, v2),\n  '*': (v1, v2) => v1 * v2,\n  '/': (v1, v2) => v1 / v2,\n  '%': (v1, v2) => v1 % v2,\n  '+': (v1, v2) => v1 + v2,\n  '-': (v1, v2) => v1 - v2,\n  '<<': (v1, v2) => v1 << v2,\n  '>>': (v1, v2) => v1 >> v2,\n  '>>>': (v1, v2) => v1 >>> v2,\n  '&': (v1, v2) => v1 & v2,\n  '^': (v1, v2) => v1 ^ v2,\n  '|': (v1, v2) => v1 | v2\n};\nclass BinaryOperationNode {\n  constructor(operator, left, right) {\n    this.left = left;\n    this.operator = operator;\n    this.right = right;\n  }\n  evaluate() {\n    const op = BINARY_OPERATION_MAP[this.operator];\n    if (!op) {\n      throw new Error(`unexpected binary operator: '${this.operator}`);\n    }\n    return op(this.left.evaluate(), this.right.evaluate());\n  }\n  toString() {\n    return ['b(', this.left.toString(), this.operator, this.right.toString(), ')'].join(' ');\n  }\n}\nconst UNARY_OPERATION_MAP = {\n  '+': v => v,\n  '-': v => -v,\n  '~': v => ~v\n};\nclass UnaryOperationNode {\n  constructor(operator, expr) {\n    this.operator = operator;\n    this.expression = expr;\n  }\n  evaluate() {\n    const op = UNARY_OPERATION_MAP[this.operator];\n    if (!op) {\n      throw new Error(`unexpected unary operator: '${this.operator}`);\n    }\n    return op(this.expression.evaluate());\n  }\n  toString() {\n    return ['u(', this.operator, this.expression.toString(), ')'].join(' ');\n  }\n}\nfunction combineReader(parsers) {\n  return (text, cursor) => {\n    for (let i = 0; i < parsers.length; i++) {\n      const result = parsers[i](text, cursor);\n      if (result !== '') {\n        return result;\n      }\n    }\n    return '';\n  };\n}\nfunction readWhitespace(text, cursor) {\n  var _a;\n  const m = text.substr(cursor).match(/^\\s+/);\n  return (_a = m && m[0]) !== null && _a !== void 0 ? _a : '';\n}\nfunction readNonZeroDigit(text, cursor) {\n  const ch = text.substr(cursor, 1);\n  return ch.match(/^[1-9]$/) ? ch : '';\n}\nfunction readDecimalDigits(text, cursor) {\n  var _a;\n  const m = text.substr(cursor).match(/^[0-9]+/);\n  return (_a = m && m[0]) !== null && _a !== void 0 ? _a : '';\n}\nfunction readSignedInteger(text, cursor) {\n  const ds = readDecimalDigits(text, cursor);\n  if (ds !== '') {\n    return ds;\n  }\n  const sign = text.substr(cursor, 1);\n  cursor += 1;\n  if (sign !== '-' && sign !== '+') {\n    return '';\n  }\n  const sds = readDecimalDigits(text, cursor);\n  if (sds === '') {\n    return '';\n  }\n  return sign + sds;\n}\nfunction readExponentPart(text, cursor) {\n  const e = text.substr(cursor, 1);\n  cursor += 1;\n  if (e.toLowerCase() !== 'e') {\n    return '';\n  }\n  const si = readSignedInteger(text, cursor);\n  if (si === '') {\n    return '';\n  }\n  return e + si;\n}\nfunction readDecimalIntegerLiteral(text, cursor) {\n  const ch = text.substr(cursor, 1);\n  if (ch === '0') {\n    return ch;\n  }\n  const nzd = readNonZeroDigit(text, cursor);\n  cursor += nzd.length;\n  if (nzd === '') {\n    return '';\n  }\n  return nzd + readDecimalDigits(text, cursor);\n}\nfunction readDecimalLiteral1(text, cursor) {\n  const dil = readDecimalIntegerLiteral(text, cursor);\n  cursor += dil.length;\n  if (dil === '') {\n    return '';\n  }\n  const dot = text.substr(cursor, 1);\n  cursor += dot.length;\n  if (dot !== '.') {\n    return '';\n  }\n  const dds = readDecimalDigits(text, cursor);\n  cursor += dds.length;\n  return dil + dot + dds + readExponentPart(text, cursor);\n}\nfunction readDecimalLiteral2(text, cursor) {\n  const dot = text.substr(cursor, 1);\n  cursor += dot.length;\n  if (dot !== '.') {\n    return '';\n  }\n  const dds = readDecimalDigits(text, cursor);\n  cursor += dds.length;\n  if (dds === '') {\n    return '';\n  }\n  return dot + dds + readExponentPart(text, cursor);\n}\nfunction readDecimalLiteral3(text, cursor) {\n  const dil = readDecimalIntegerLiteral(text, cursor);\n  cursor += dil.length;\n  if (dil === '') {\n    return '';\n  }\n  return dil + readExponentPart(text, cursor);\n}\nconst readDecimalLiteral = combineReader([readDecimalLiteral1, readDecimalLiteral2, readDecimalLiteral3]);\nfunction parseBinaryDigits(text, cursor) {\n  var _a;\n  const m = text.substr(cursor).match(/^[01]+/);\n  return (_a = m && m[0]) !== null && _a !== void 0 ? _a : '';\n}\nfunction readBinaryIntegerLiteral(text, cursor) {\n  const prefix = text.substr(cursor, 2);\n  cursor += prefix.length;\n  if (prefix.toLowerCase() !== '0b') {\n    return '';\n  }\n  const bds = parseBinaryDigits(text, cursor);\n  if (bds === '') {\n    return '';\n  }\n  return prefix + bds;\n}\nfunction readOctalDigits(text, cursor) {\n  var _a;\n  const m = text.substr(cursor).match(/^[0-7]+/);\n  return (_a = m && m[0]) !== null && _a !== void 0 ? _a : '';\n}\nfunction readOctalIntegerLiteral(text, cursor) {\n  const prefix = text.substr(cursor, 2);\n  cursor += prefix.length;\n  if (prefix.toLowerCase() !== '0o') {\n    return '';\n  }\n  const ods = readOctalDigits(text, cursor);\n  if (ods === '') {\n    return '';\n  }\n  return prefix + ods;\n}\nfunction readHexDigits(text, cursor) {\n  var _a;\n  const m = text.substr(cursor).match(/^[0-9a-f]+/i);\n  return (_a = m && m[0]) !== null && _a !== void 0 ? _a : '';\n}\nfunction readHexIntegerLiteral(text, cursor) {\n  const prefix = text.substr(cursor, 2);\n  cursor += prefix.length;\n  if (prefix.toLowerCase() !== '0x') {\n    return '';\n  }\n  const hds = readHexDigits(text, cursor);\n  if (hds === '') {\n    return '';\n  }\n  return prefix + hds;\n}\nconst readNonDecimalIntegerLiteral = combineReader([readBinaryIntegerLiteral, readOctalIntegerLiteral, readHexIntegerLiteral]);\nconst readNumericLiteral = combineReader([readNonDecimalIntegerLiteral, readDecimalLiteral]);\nfunction parseLiteral(text, cursor) {\n  const num = readNumericLiteral(text, cursor);\n  cursor += num.length;\n  if (num === '') {\n    return null;\n  }\n  return {\n    evaluable: new NumberLiteralNode(num),\n    cursor: cursor\n  };\n}\nfunction parseParenthesizedExpression(text, cursor) {\n  const op = text.substr(cursor, 1);\n  cursor += op.length;\n  if (op !== '(') {\n    return null;\n  }\n  const expr = parseExpression(text, cursor);\n  if (!expr) {\n    return null;\n  }\n  cursor = expr.cursor;\n  cursor += readWhitespace(text, cursor).length;\n  const cl = text.substr(cursor, 1);\n  cursor += cl.length;\n  if (cl !== ')') {\n    return null;\n  }\n  return {\n    evaluable: expr.evaluable,\n    cursor: cursor\n  };\n}\nfunction parsePrimaryExpression(text, cursor) {\n  var _a;\n  return (_a = parseLiteral(text, cursor)) !== null && _a !== void 0 ? _a : parseParenthesizedExpression(text, cursor);\n}\nfunction parseUnaryExpression(text, cursor) {\n  const expr = parsePrimaryExpression(text, cursor);\n  if (expr) {\n    return expr;\n  }\n  const op = text.substr(cursor, 1);\n  cursor += op.length;\n  if (op !== '+' && op !== '-' && op !== '~') {\n    return null;\n  }\n  const num = parseUnaryExpression(text, cursor);\n  if (!num) {\n    return null;\n  }\n  cursor = num.cursor;\n  return {\n    cursor: cursor,\n    evaluable: new UnaryOperationNode(op, num.evaluable)\n  };\n}\nfunction readBinaryOperator(ops, text, cursor) {\n  cursor += readWhitespace(text, cursor).length;\n  const op = ops.filter(op => text.startsWith(op, cursor))[0];\n  if (!op) {\n    return null;\n  }\n  cursor += op.length;\n  cursor += readWhitespace(text, cursor).length;\n  return {\n    cursor: cursor,\n    operator: op\n  };\n}\nfunction createBinaryOperationExpressionParser(exprParser, ops) {\n  return (text, cursor) => {\n    const firstExpr = exprParser(text, cursor);\n    if (!firstExpr) {\n      return null;\n    }\n    cursor = firstExpr.cursor;\n    let expr = firstExpr.evaluable;\n    for (;;) {\n      const op = readBinaryOperator(ops, text, cursor);\n      if (!op) {\n        break;\n      }\n      cursor = op.cursor;\n      const nextExpr = exprParser(text, cursor);\n      if (!nextExpr) {\n        return null;\n      }\n      cursor = nextExpr.cursor;\n      expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n    }\n    return expr ? {\n      cursor: cursor,\n      evaluable: expr\n    } : null;\n  };\n}\nconst parseBinaryOperationExpression = [['**'], ['*', '/', '%'], ['+', '-'], ['<<', '>>>', '>>'], ['&'], ['^'], ['|']].reduce((parser, ops) => {\n  return createBinaryOperationExpressionParser(parser, ops);\n}, parseUnaryExpression);\nfunction parseExpression(text, cursor) {\n  cursor += readWhitespace(text, cursor).length;\n  return parseBinaryOperationExpression(text, cursor);\n}\nfunction parseEcmaNumberExpression(text) {\n  const expr = parseExpression(text, 0);\n  if (!expr) {\n    return null;\n  }\n  const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n  if (cursor !== text.length) {\n    return null;\n  }\n  return expr.evaluable;\n}\nfunction parseNumber(text) {\n  var _a;\n  const r = parseEcmaNumberExpression(text);\n  return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n}\nfunction numberFromUnknown(value) {\n  if (typeof value === 'number') {\n    return value;\n  }\n  if (typeof value === 'string') {\n    const pv = parseNumber(value);\n    if (!isEmpty(pv)) {\n      return pv;\n    }\n  }\n  return 0;\n}\nfunction numberToString(value) {\n  return String(value);\n}\nfunction createNumberFormatter(digits) {\n  return value => {\n    return value.toFixed(Math.max(Math.min(digits, 20), 0));\n  };\n}\nfunction mapRange(value, start1, end1, start2, end2) {\n  const p = (value - start1) / (end1 - start1);\n  return start2 + p * (end2 - start2);\n}\nfunction getDecimalDigits(value) {\n  const text = String(value.toFixed(10));\n  const frac = text.split('.')[1];\n  return frac.replace(/0+$/, '').length;\n}\nfunction constrainRange(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\nfunction loopRange(value, max) {\n  return (value % max + max) % max;\n}\nfunction getSuitableDecimalDigits(params, rawValue) {\n  return !isEmpty(params.step) ? getDecimalDigits(params.step) : Math.max(getDecimalDigits(rawValue), 2);\n}\nfunction getSuitableKeyScale(params) {\n  var _a;\n  return (_a = params.step) !== null && _a !== void 0 ? _a : 1;\n}\nfunction getSuitablePointerScale(params, rawValue) {\n  var _a;\n  const base = Math.abs((_a = params.step) !== null && _a !== void 0 ? _a : rawValue);\n  return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n}\nfunction createStepConstraint(params, initialValue) {\n  if (!isEmpty(params.step)) {\n    return new StepConstraint(params.step, initialValue);\n  }\n  return null;\n}\nfunction createRangeConstraint(params) {\n  if (!isEmpty(params.max) && !isEmpty(params.min)) {\n    return new DefiniteRangeConstraint({\n      max: params.max,\n      min: params.min\n    });\n  }\n  if (!isEmpty(params.max) || !isEmpty(params.min)) {\n    return new RangeConstraint({\n      max: params.max,\n      min: params.min\n    });\n  }\n  return null;\n}\nfunction createNumberTextPropsObject(params, initialValue) {\n  var _a, _b, _c;\n  return {\n    formatter: (_a = params.format) !== null && _a !== void 0 ? _a : createNumberFormatter(getSuitableDecimalDigits(params, initialValue)),\n    keyScale: (_b = params.keyScale) !== null && _b !== void 0 ? _b : getSuitableKeyScale(params),\n    pointerScale: (_c = params.pointerScale) !== null && _c !== void 0 ? _c : getSuitablePointerScale(params, initialValue)\n  };\n}\nfunction createNumberTextInputParamsParser(p) {\n  return {\n    format: p.optional.function,\n    keyScale: p.optional.number,\n    max: p.optional.number,\n    min: p.optional.number,\n    pointerScale: p.optional.number,\n    step: p.optional.number\n  };\n}\nfunction createPointAxis(config) {\n  return {\n    constraint: config.constraint,\n    textProps: ValueMap.fromObject(createNumberTextPropsObject(config.params, config.initialValue))\n  };\n}\nclass BladeApi {\n  constructor(controller) {\n    this.controller = controller;\n  }\n  get element() {\n    return this.controller.view.element;\n  }\n  get disabled() {\n    return this.controller.viewProps.get('disabled');\n  }\n  set disabled(disabled) {\n    this.controller.viewProps.set('disabled', disabled);\n  }\n  get hidden() {\n    return this.controller.viewProps.get('hidden');\n  }\n  set hidden(hidden) {\n    this.controller.viewProps.set('hidden', hidden);\n  }\n  dispose() {\n    this.controller.viewProps.set('disposed', true);\n  }\n  importState(state) {\n    return this.controller.importState(state);\n  }\n  exportState() {\n    return this.controller.exportState();\n  }\n}\nclass TpEvent {\n  constructor(target) {\n    this.target = target;\n  }\n}\nclass TpChangeEvent extends TpEvent {\n  constructor(target, value, last) {\n    super(target);\n    this.value = value;\n    this.last = last !== null && last !== void 0 ? last : true;\n  }\n}\nclass TpFoldEvent extends TpEvent {\n  constructor(target, expanded) {\n    super(target);\n    this.expanded = expanded;\n  }\n}\nclass TpTabSelectEvent extends TpEvent {\n  constructor(target, index) {\n    super(target);\n    this.index = index;\n  }\n}\nclass BindingApi extends BladeApi {\n  constructor(controller) {\n    super(controller);\n    this.onValueChange_ = this.onValueChange_.bind(this);\n    this.emitter_ = new Emitter();\n    this.controller.value.emitter.on('change', this.onValueChange_);\n  }\n  get label() {\n    return this.controller.labelController.props.get('label');\n  }\n  set label(label) {\n    this.controller.labelController.props.set('label', label);\n  }\n  get key() {\n    return this.controller.value.binding.target.key;\n  }\n  get tag() {\n    return this.controller.tag;\n  }\n  set tag(tag) {\n    this.controller.tag = tag;\n  }\n  on(eventName, handler) {\n    const bh = handler.bind(this);\n    this.emitter_.on(eventName, ev => {\n      bh(ev);\n    });\n    return this;\n  }\n  refresh() {\n    this.controller.value.fetch();\n  }\n  onValueChange_(ev) {\n    const value = this.controller.value;\n    this.emitter_.emit('change', new TpChangeEvent(this, forceCast(value.binding.target.read()), ev.options.last));\n  }\n}\nclass InputBindingValue {\n  constructor(value, binding) {\n    this.onValueBeforeChange_ = this.onValueBeforeChange_.bind(this);\n    this.onValueChange_ = this.onValueChange_.bind(this);\n    this.binding = binding;\n    this.value_ = value;\n    this.value_.emitter.on('beforechange', this.onValueBeforeChange_);\n    this.value_.emitter.on('change', this.onValueChange_);\n    this.emitter = new Emitter();\n  }\n  get rawValue() {\n    return this.value_.rawValue;\n  }\n  set rawValue(rawValue) {\n    this.value_.rawValue = rawValue;\n  }\n  setRawValue(rawValue, options) {\n    this.value_.setRawValue(rawValue, options);\n  }\n  fetch() {\n    this.value_.rawValue = this.binding.read();\n  }\n  push() {\n    this.binding.write(this.value_.rawValue);\n  }\n  onValueBeforeChange_(ev) {\n    this.emitter.emit('beforechange', Object.assign(Object.assign({}, ev), {\n      sender: this\n    }));\n  }\n  onValueChange_(ev) {\n    this.push();\n    this.emitter.emit('change', Object.assign(Object.assign({}, ev), {\n      sender: this\n    }));\n  }\n}\nfunction isInputBindingValue(v) {\n  if (!('binding' in v)) {\n    return false;\n  }\n  const b = v['binding'];\n  return isBinding(b) && 'read' in b && 'write' in b;\n}\nfunction parseObject(value, keyToParserMap) {\n  const keys = Object.keys(keyToParserMap);\n  const result = keys.reduce((tmp, key) => {\n    if (tmp === undefined) {\n      return undefined;\n    }\n    const parser = keyToParserMap[key];\n    const result = parser(value[key]);\n    return result.succeeded ? Object.assign(Object.assign({}, tmp), {\n      [key]: result.value\n    }) : undefined;\n  }, {});\n  return forceCast(result);\n}\nfunction parseArray(value, parseItem) {\n  return value.reduce((tmp, item) => {\n    if (tmp === undefined) {\n      return undefined;\n    }\n    const result = parseItem(item);\n    if (!result.succeeded || result.value === undefined) {\n      return undefined;\n    }\n    return [...tmp, result.value];\n  }, []);\n}\nfunction isObject(value) {\n  if (value === null) {\n    return false;\n  }\n  return typeof value === 'object';\n}\nfunction createMicroParserBuilder(parse) {\n  return optional => v => {\n    if (!optional && v === undefined) {\n      return {\n        succeeded: false,\n        value: undefined\n      };\n    }\n    if (optional && v === undefined) {\n      return {\n        succeeded: true,\n        value: undefined\n      };\n    }\n    const result = parse(v);\n    return result !== undefined ? {\n      succeeded: true,\n      value: result\n    } : {\n      succeeded: false,\n      value: undefined\n    };\n  };\n}\nfunction createMicroParserBuilders(optional) {\n  return {\n    custom: parse => createMicroParserBuilder(parse)(optional),\n    boolean: createMicroParserBuilder(v => typeof v === 'boolean' ? v : undefined)(optional),\n    number: createMicroParserBuilder(v => typeof v === 'number' ? v : undefined)(optional),\n    string: createMicroParserBuilder(v => typeof v === 'string' ? v : undefined)(optional),\n    function: createMicroParserBuilder(v => typeof v === 'function' ? v : undefined)(optional),\n    constant: value => createMicroParserBuilder(v => v === value ? value : undefined)(optional),\n    raw: createMicroParserBuilder(v => v)(optional),\n    object: keyToParserMap => createMicroParserBuilder(v => {\n      if (!isObject(v)) {\n        return undefined;\n      }\n      return parseObject(v, keyToParserMap);\n    })(optional),\n    array: itemParser => createMicroParserBuilder(v => {\n      if (!Array.isArray(v)) {\n        return undefined;\n      }\n      return parseArray(v, itemParser);\n    })(optional)\n  };\n}\nconst MicroParsers = {\n  optional: createMicroParserBuilders(true),\n  required: createMicroParserBuilders(false)\n};\nfunction parseRecord(value, keyToParserMap) {\n  const map = keyToParserMap(MicroParsers);\n  const result = MicroParsers.required.object(map)(value);\n  return result.succeeded ? result.value : undefined;\n}\nfunction importBladeState(state, superImport, parser, callback) {\n  if (superImport && !superImport(state)) {\n    return false;\n  }\n  const result = parseRecord(state, parser);\n  return result ? callback(result) : false;\n}\nfunction exportBladeState(superExport, thisState) {\n  var _a;\n  return deepMerge((_a = superExport === null || superExport === void 0 ? void 0 : superExport()) !== null && _a !== void 0 ? _a : {}, thisState);\n}\nfunction isValueBladeController(bc) {\n  return 'value' in bc;\n}\nfunction isBindingValue(v) {\n  if (!isObject$1(v) || !('binding' in v)) {\n    return false;\n  }\n  const b = v.binding;\n  return isBinding(b);\n}\nconst SVG_NS = 'http://www.w3.org/2000/svg';\nfunction forceReflow(element) {\n  element.offsetHeight;\n}\nfunction disableTransitionTemporarily(element, callback) {\n  const t = element.style.transition;\n  element.style.transition = 'none';\n  callback();\n  element.style.transition = t;\n}\nfunction supportsTouch(doc) {\n  return doc.ontouchstart !== undefined;\n}\nfunction getGlobalObject() {\n  return globalThis;\n}\nfunction getWindowDocument() {\n  const globalObj = forceCast(getGlobalObject());\n  return globalObj.document;\n}\nfunction getCanvasContext(canvasElement) {\n  const win = canvasElement.ownerDocument.defaultView;\n  if (!win) {\n    return null;\n  }\n  const isBrowser = ('document' in win);\n  return isBrowser ? canvasElement.getContext('2d', {\n    willReadFrequently: true\n  }) : null;\n}\nconst ICON_ID_TO_INNER_HTML_MAP = {\n  check: '<path d=\"M2 8l4 4l8 -8\"/>',\n  dropdown: '<path d=\"M5 7h6l-3 3 z\"/>',\n  p2dpad: '<path d=\"M8 4v8\"/><path d=\"M4 8h8\"/><circle cx=\"12\" cy=\"12\" r=\"1.2\"/>'\n};\nfunction createSvgIconElement(document, iconId) {\n  const elem = document.createElementNS(SVG_NS, 'svg');\n  elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];\n  return elem;\n}\nfunction insertElementAt(parentElement, element, index) {\n  parentElement.insertBefore(element, parentElement.children[index]);\n}\nfunction removeElement(element) {\n  if (element.parentElement) {\n    element.parentElement.removeChild(element);\n  }\n}\nfunction removeChildElements(element) {\n  while (element.children.length > 0) {\n    element.removeChild(element.children[0]);\n  }\n}\nfunction removeChildNodes(element) {\n  while (element.childNodes.length > 0) {\n    element.removeChild(element.childNodes[0]);\n  }\n}\nfunction findNextTarget(ev) {\n  if (ev.relatedTarget) {\n    return forceCast(ev.relatedTarget);\n  }\n  if ('explicitOriginalTarget' in ev) {\n    return ev.explicitOriginalTarget;\n  }\n  return null;\n}\nfunction bindValue(value, applyValue) {\n  value.emitter.on('change', ev => {\n    applyValue(ev.rawValue);\n  });\n  applyValue(value.rawValue);\n}\nfunction bindValueMap(valueMap, key, applyValue) {\n  bindValue(valueMap.value(key), applyValue);\n}\nconst PREFIX = 'tp';\nfunction ClassName(viewName) {\n  const fn = (opt_elementName, opt_modifier) => {\n    return [PREFIX, '-', viewName, 'v', opt_elementName ? `_${opt_elementName}` : '', opt_modifier ? `-${opt_modifier}` : ''].join('');\n  };\n  return fn;\n}\nconst cn$r = ClassName('lbl');\nfunction createLabelNode(doc, label) {\n  const frag = doc.createDocumentFragment();\n  const lineNodes = label.split('\\n').map(line => {\n    return doc.createTextNode(line);\n  });\n  lineNodes.forEach((lineNode, index) => {\n    if (index > 0) {\n      frag.appendChild(doc.createElement('br'));\n    }\n    frag.appendChild(lineNode);\n  });\n  return frag;\n}\nclass LabelView {\n  constructor(doc, config) {\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$r());\n    config.viewProps.bindClassModifiers(this.element);\n    const labelElem = doc.createElement('div');\n    labelElem.classList.add(cn$r('l'));\n    bindValueMap(config.props, 'label', value => {\n      if (isEmpty(value)) {\n        this.element.classList.add(cn$r(undefined, 'nol'));\n      } else {\n        this.element.classList.remove(cn$r(undefined, 'nol'));\n        removeChildNodes(labelElem);\n        labelElem.appendChild(createLabelNode(doc, value));\n      }\n    });\n    this.element.appendChild(labelElem);\n    this.labelElement = labelElem;\n    const valueElem = doc.createElement('div');\n    valueElem.classList.add(cn$r('v'));\n    this.element.appendChild(valueElem);\n    this.valueElement = valueElem;\n  }\n}\nclass LabelController {\n  constructor(doc, config) {\n    this.props = config.props;\n    this.valueController = config.valueController;\n    this.viewProps = config.valueController.viewProps;\n    this.view = new LabelView(doc, {\n      props: config.props,\n      viewProps: this.viewProps\n    });\n    this.view.valueElement.appendChild(this.valueController.view.element);\n  }\n  importProps(state) {\n    return importBladeState(state, null, p => ({\n      label: p.optional.string\n    }), result => {\n      this.props.set('label', result.label);\n      return true;\n    });\n  }\n  exportProps() {\n    return exportBladeState(null, {\n      label: this.props.get('label')\n    });\n  }\n}\nfunction getAllBladePositions() {\n  return ['veryfirst', 'first', 'last', 'verylast'];\n}\nconst cn$q = ClassName('');\nconst POS_TO_CLASS_NAME_MAP = {\n  veryfirst: 'vfst',\n  first: 'fst',\n  last: 'lst',\n  verylast: 'vlst'\n};\nclass BladeController {\n  constructor(config) {\n    this.parent_ = null;\n    this.blade = config.blade;\n    this.view = config.view;\n    this.viewProps = config.viewProps;\n    const elem = this.view.element;\n    this.blade.value('positions').emitter.on('change', () => {\n      getAllBladePositions().forEach(pos => {\n        elem.classList.remove(cn$q(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n      });\n      this.blade.get('positions').forEach(pos => {\n        elem.classList.add(cn$q(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n      });\n    });\n    this.viewProps.handleDispose(() => {\n      removeElement(elem);\n    });\n  }\n  get parent() {\n    return this.parent_;\n  }\n  set parent(parent) {\n    this.parent_ = parent;\n    this.viewProps.set('parent', this.parent_ ? this.parent_.viewProps : null);\n  }\n  importState(state) {\n    return importBladeState(state, null, p => ({\n      disabled: p.required.boolean,\n      hidden: p.required.boolean\n    }), result => {\n      this.viewProps.importState(result);\n      return true;\n    });\n  }\n  exportState() {\n    return exportBladeState(null, Object.assign({}, this.viewProps.exportState()));\n  }\n}\nclass LabeledValueBladeController extends BladeController {\n  constructor(doc, config) {\n    if (config.value !== config.valueController.value) {\n      throw TpError.shouldNeverHappen();\n    }\n    const viewProps = config.valueController.viewProps;\n    const lc = new LabelController(doc, {\n      blade: config.blade,\n      props: config.props,\n      valueController: config.valueController\n    });\n    super(Object.assign(Object.assign({}, config), {\n      view: new LabelView(doc, {\n        props: config.props,\n        viewProps: viewProps\n      }),\n      viewProps: viewProps\n    }));\n    this.labelController = lc;\n    this.value = config.value;\n    this.valueController = config.valueController;\n    this.view.valueElement.appendChild(this.valueController.view.element);\n  }\n  importState(state) {\n    return importBladeState(state, s => {\n      var _a, _b, _c;\n      return super.importState(s) && this.labelController.importProps(s) && ((_c = (_b = (_a = this.valueController).importProps) === null || _b === void 0 ? void 0 : _b.call(_a, state)) !== null && _c !== void 0 ? _c : true);\n    }, p => ({\n      value: p.optional.raw\n    }), result => {\n      if (result.value) {\n        this.value.rawValue = result.value;\n      }\n      return true;\n    });\n  }\n  exportState() {\n    var _a, _b, _c;\n    return exportBladeState(() => super.exportState(), Object.assign(Object.assign({\n      value: this.value.rawValue\n    }, this.labelController.exportProps()), (_c = (_b = (_a = this.valueController).exportProps) === null || _b === void 0 ? void 0 : _b.call(_a)) !== null && _c !== void 0 ? _c : {}));\n  }\n}\nfunction excludeValue(state) {\n  const result = Object.assign({}, state);\n  delete result.value;\n  return result;\n}\nclass BindingController extends LabeledValueBladeController {\n  constructor(doc, config) {\n    super(doc, config);\n    this.tag = config.tag;\n  }\n  importState(state) {\n    return importBladeState(state, _s => super.importState(excludeValue(state)), p => ({\n      tag: p.optional.string\n    }), result => {\n      this.tag = result.tag;\n      return true;\n    });\n  }\n  exportState() {\n    return exportBladeState(() => excludeValue(super.exportState()), {\n      binding: {\n        key: this.value.binding.target.key,\n        value: this.value.binding.target.read()\n      },\n      tag: this.tag\n    });\n  }\n}\nfunction isBindingController(bc) {\n  return isValueBladeController(bc) && isBindingValue(bc.value);\n}\nclass InputBindingController extends BindingController {\n  importState(state) {\n    return importBladeState(state, s => super.importState(s), p => ({\n      binding: p.required.object({\n        value: p.required.raw\n      })\n    }), result => {\n      this.value.binding.inject(result.binding.value);\n      this.value.fetch();\n      return true;\n    });\n  }\n}\nfunction isInputBindingController(bc) {\n  return isValueBladeController(bc) && isInputBindingValue(bc.value);\n}\nfunction fillBuffer(buffer, bufferSize) {\n  while (buffer.length < bufferSize) {\n    buffer.push(undefined);\n  }\n}\nfunction initializeBuffer(bufferSize) {\n  const buffer = [];\n  fillBuffer(buffer, bufferSize);\n  return buffer;\n}\nfunction createTrimmedBuffer(buffer) {\n  const index = buffer.indexOf(undefined);\n  return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n}\nfunction createPushedBuffer(buffer, newValue) {\n  const newBuffer = [...createTrimmedBuffer(buffer), newValue];\n  if (newBuffer.length > buffer.length) {\n    newBuffer.splice(0, newBuffer.length - buffer.length);\n  } else {\n    fillBuffer(newBuffer, buffer.length);\n  }\n  return newBuffer;\n}\nclass MonitorBindingValue {\n  constructor(config) {\n    this.emitter = new Emitter();\n    this.onTick_ = this.onTick_.bind(this);\n    this.onValueBeforeChange_ = this.onValueBeforeChange_.bind(this);\n    this.onValueChange_ = this.onValueChange_.bind(this);\n    this.binding = config.binding;\n    this.value_ = createValue(initializeBuffer(config.bufferSize));\n    this.value_.emitter.on('beforechange', this.onValueBeforeChange_);\n    this.value_.emitter.on('change', this.onValueChange_);\n    this.ticker = config.ticker;\n    this.ticker.emitter.on('tick', this.onTick_);\n    this.fetch();\n  }\n  get rawValue() {\n    return this.value_.rawValue;\n  }\n  set rawValue(rawValue) {\n    this.value_.rawValue = rawValue;\n  }\n  setRawValue(rawValue, options) {\n    this.value_.setRawValue(rawValue, options);\n  }\n  fetch() {\n    this.value_.rawValue = createPushedBuffer(this.value_.rawValue, this.binding.read());\n  }\n  onTick_() {\n    this.fetch();\n  }\n  onValueBeforeChange_(ev) {\n    this.emitter.emit('beforechange', Object.assign(Object.assign({}, ev), {\n      sender: this\n    }));\n  }\n  onValueChange_(ev) {\n    this.emitter.emit('change', Object.assign(Object.assign({}, ev), {\n      sender: this\n    }));\n  }\n}\nfunction isMonitorBindingValue(v) {\n  if (!('binding' in v)) {\n    return false;\n  }\n  const b = v['binding'];\n  return isBinding(b) && 'read' in b && !('write' in b);\n}\nclass MonitorBindingController extends BindingController {\n  exportState() {\n    return exportBladeState(() => super.exportState(), {\n      binding: {\n        readonly: true\n      }\n    });\n  }\n}\nfunction isMonitorBindingController(bc) {\n  return isValueBladeController(bc) && isMonitorBindingValue(bc.value);\n}\nclass ButtonApi extends BladeApi {\n  get label() {\n    return this.controller.labelController.props.get('label');\n  }\n  set label(label) {\n    this.controller.labelController.props.set('label', label);\n  }\n  get title() {\n    var _a;\n    return (_a = this.controller.buttonController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n  }\n  set title(title) {\n    this.controller.buttonController.props.set('title', title);\n  }\n  on(eventName, handler) {\n    const bh = handler.bind(this);\n    const emitter = this.controller.buttonController.emitter;\n    emitter.on(eventName, () => {\n      bh(new TpEvent(this));\n    });\n    return this;\n  }\n}\nfunction applyClass(elem, className, active) {\n  if (active) {\n    elem.classList.add(className);\n  } else {\n    elem.classList.remove(className);\n  }\n}\nfunction valueToClassName(elem, className) {\n  return value => {\n    applyClass(elem, className, value);\n  };\n}\nfunction bindValueToTextContent(value, elem) {\n  bindValue(value, text => {\n    elem.textContent = text !== null && text !== void 0 ? text : '';\n  });\n}\nconst cn$p = ClassName('btn');\nclass ButtonView {\n  constructor(doc, config) {\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$p());\n    config.viewProps.bindClassModifiers(this.element);\n    const buttonElem = doc.createElement('button');\n    buttonElem.classList.add(cn$p('b'));\n    config.viewProps.bindDisabled(buttonElem);\n    this.element.appendChild(buttonElem);\n    this.buttonElement = buttonElem;\n    const titleElem = doc.createElement('div');\n    titleElem.classList.add(cn$p('t'));\n    bindValueToTextContent(config.props.value('title'), titleElem);\n    this.buttonElement.appendChild(titleElem);\n  }\n}\nclass ButtonController {\n  constructor(doc, config) {\n    this.emitter = new Emitter();\n    this.onClick_ = this.onClick_.bind(this);\n    this.props = config.props;\n    this.viewProps = config.viewProps;\n    this.view = new ButtonView(doc, {\n      props: this.props,\n      viewProps: this.viewProps\n    });\n    this.view.buttonElement.addEventListener('click', this.onClick_);\n  }\n  importProps(state) {\n    return importBladeState(state, null, p => ({\n      title: p.optional.string\n    }), result => {\n      this.props.set('title', result.title);\n      return true;\n    });\n  }\n  exportProps() {\n    return exportBladeState(null, {\n      title: this.props.get('title')\n    });\n  }\n  onClick_() {\n    this.emitter.emit('click', {\n      sender: this\n    });\n  }\n}\nclass ButtonBladeController extends BladeController {\n  constructor(doc, config) {\n    const bc = new ButtonController(doc, {\n      props: config.buttonProps,\n      viewProps: config.viewProps\n    });\n    const lc = new LabelController(doc, {\n      blade: config.blade,\n      props: config.labelProps,\n      valueController: bc\n    });\n    super({\n      blade: config.blade,\n      view: lc.view,\n      viewProps: config.viewProps\n    });\n    this.buttonController = bc;\n    this.labelController = lc;\n  }\n  importState(state) {\n    return importBladeState(state, s => super.importState(s) && this.buttonController.importProps(s) && this.labelController.importProps(s), () => ({}), () => true);\n  }\n  exportState() {\n    return exportBladeState(() => super.exportState(), Object.assign(Object.assign({}, this.buttonController.exportProps()), this.labelController.exportProps()));\n  }\n}\nclass Semver {\n  constructor(text) {\n    const [core, prerelease] = text.split('-');\n    const coreComps = core.split('.');\n    this.major = parseInt(coreComps[0], 10);\n    this.minor = parseInt(coreComps[1], 10);\n    this.patch = parseInt(coreComps[2], 10);\n    this.prerelease = prerelease !== null && prerelease !== void 0 ? prerelease : null;\n  }\n  toString() {\n    const core = [this.major, this.minor, this.patch].join('.');\n    return this.prerelease !== null ? [core, this.prerelease].join('-') : core;\n  }\n}\nconst VERSION$1 = new Semver('2.0.1');\nfunction createPlugin(plugin) {\n  return Object.assign({\n    core: VERSION$1\n  }, plugin);\n}\nconst ButtonBladePlugin = createPlugin({\n  id: 'button',\n  type: 'blade',\n  accept(params) {\n    const result = parseRecord(params, p => ({\n      title: p.required.string,\n      view: p.required.constant('button'),\n      label: p.optional.string\n    }));\n    return result ? {\n      params: result\n    } : null;\n  },\n  controller(args) {\n    return new ButtonBladeController(args.document, {\n      blade: args.blade,\n      buttonProps: ValueMap.fromObject({\n        title: args.params.title\n      }),\n      labelProps: ValueMap.fromObject({\n        label: args.params.label\n      }),\n      viewProps: args.viewProps\n    });\n  },\n  api(args) {\n    if (args.controller instanceof ButtonBladeController) {\n      return new ButtonApi(args.controller);\n    }\n    return null;\n  }\n});\nfunction addButtonAsBlade(api, params) {\n  return api.addBlade(Object.assign(Object.assign({}, params), {\n    view: 'button'\n  }));\n}\nfunction addFolderAsBlade(api, params) {\n  return api.addBlade(Object.assign(Object.assign({}, params), {\n    view: 'folder'\n  }));\n}\nfunction addTabAsBlade(api, params) {\n  return api.addBlade(Object.assign(Object.assign({}, params), {\n    view: 'tab'\n  }));\n}\nfunction isRefreshable(value) {\n  if (!isObject$1(value)) {\n    return false;\n  }\n  return 'refresh' in value && typeof value.refresh === 'function';\n}\nfunction createBindingTarget(obj, key) {\n  if (!BindingTarget.isBindable(obj)) {\n    throw TpError.notBindable();\n  }\n  return new BindingTarget(obj, key);\n}\nclass RackApi {\n  constructor(controller, pool) {\n    this.onRackValueChange_ = this.onRackValueChange_.bind(this);\n    this.controller_ = controller;\n    this.emitter_ = new Emitter();\n    this.pool_ = pool;\n    const rack = this.controller_.rack;\n    rack.emitter.on('valuechange', this.onRackValueChange_);\n  }\n  get children() {\n    return this.controller_.rack.children.map(bc => this.pool_.createApi(bc));\n  }\n  addBinding(object, key, opt_params) {\n    const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n    const doc = this.controller_.element.ownerDocument;\n    const bc = this.pool_.createBinding(doc, createBindingTarget(object, key), params);\n    const api = this.pool_.createBindingApi(bc);\n    return this.add(api, params.index);\n  }\n  addFolder(params) {\n    return addFolderAsBlade(this, params);\n  }\n  addButton(params) {\n    return addButtonAsBlade(this, params);\n  }\n  addTab(params) {\n    return addTabAsBlade(this, params);\n  }\n  add(api, opt_index) {\n    const bc = api.controller;\n    this.controller_.rack.add(bc, opt_index);\n    return api;\n  }\n  remove(api) {\n    this.controller_.rack.remove(api.controller);\n  }\n  addBlade(params) {\n    const doc = this.controller_.element.ownerDocument;\n    const bc = this.pool_.createBlade(doc, params);\n    const api = this.pool_.createApi(bc);\n    return this.add(api, params.index);\n  }\n  on(eventName, handler) {\n    const bh = handler.bind(this);\n    this.emitter_.on(eventName, ev => {\n      bh(ev);\n    });\n    return this;\n  }\n  refresh() {\n    this.children.forEach(c => {\n      if (isRefreshable(c)) {\n        c.refresh();\n      }\n    });\n  }\n  onRackValueChange_(ev) {\n    const bc = ev.bladeController;\n    const api = this.pool_.createApi(bc);\n    const binding = isBindingValue(bc.value) ? bc.value.binding : null;\n    this.emitter_.emit('change', new TpChangeEvent(api, binding ? binding.target.read() : bc.value.rawValue, ev.options.last));\n  }\n}\nclass ContainerBladeApi extends BladeApi {\n  constructor(controller, pool) {\n    super(controller);\n    this.rackApi_ = new RackApi(controller.rackController, pool);\n  }\n  refresh() {\n    this.rackApi_.refresh();\n  }\n}\nclass ContainerBladeController extends BladeController {\n  constructor(config) {\n    super({\n      blade: config.blade,\n      view: config.view,\n      viewProps: config.rackController.viewProps\n    });\n    this.rackController = config.rackController;\n  }\n  importState(state) {\n    return importBladeState(state, s => super.importState(s), p => ({\n      children: p.required.array(p.required.raw)\n    }), result => {\n      return this.rackController.rack.children.every((c, index) => {\n        return c.importState(result.children[index]);\n      });\n    });\n  }\n  exportState() {\n    return exportBladeState(() => super.exportState(), {\n      children: this.rackController.rack.children.map(c => c.exportState())\n    });\n  }\n}\nfunction isContainerBladeController(bc) {\n  return 'rackController' in bc;\n}\nclass NestedOrderedSet {\n  constructor(extract) {\n    this.emitter = new Emitter();\n    this.items_ = [];\n    this.cache_ = new Set();\n    this.onSubListAdd_ = this.onSubListAdd_.bind(this);\n    this.onSubListRemove_ = this.onSubListRemove_.bind(this);\n    this.extract_ = extract;\n  }\n  get items() {\n    return this.items_;\n  }\n  allItems() {\n    return Array.from(this.cache_);\n  }\n  find(callback) {\n    for (const item of this.allItems()) {\n      if (callback(item)) {\n        return item;\n      }\n    }\n    return null;\n  }\n  includes(item) {\n    return this.cache_.has(item);\n  }\n  add(item, opt_index) {\n    if (this.includes(item)) {\n      throw TpError.shouldNeverHappen();\n    }\n    const index = opt_index !== undefined ? opt_index : this.items_.length;\n    this.items_.splice(index, 0, item);\n    this.cache_.add(item);\n    const subList = this.extract_(item);\n    if (subList) {\n      subList.emitter.on('add', this.onSubListAdd_);\n      subList.emitter.on('remove', this.onSubListRemove_);\n      subList.allItems().forEach(i => {\n        this.cache_.add(i);\n      });\n    }\n    this.emitter.emit('add', {\n      index: index,\n      item: item,\n      root: this,\n      target: this\n    });\n  }\n  remove(item) {\n    const index = this.items_.indexOf(item);\n    if (index < 0) {\n      return;\n    }\n    this.items_.splice(index, 1);\n    this.cache_.delete(item);\n    const subList = this.extract_(item);\n    if (subList) {\n      subList.allItems().forEach(i => {\n        this.cache_.delete(i);\n      });\n      subList.emitter.off('add', this.onSubListAdd_);\n      subList.emitter.off('remove', this.onSubListRemove_);\n    }\n    this.emitter.emit('remove', {\n      index: index,\n      item: item,\n      root: this,\n      target: this\n    });\n  }\n  onSubListAdd_(ev) {\n    this.cache_.add(ev.item);\n    this.emitter.emit('add', {\n      index: ev.index,\n      item: ev.item,\n      root: this,\n      target: ev.target\n    });\n  }\n  onSubListRemove_(ev) {\n    this.cache_.delete(ev.item);\n    this.emitter.emit('remove', {\n      index: ev.index,\n      item: ev.item,\n      root: this,\n      target: ev.target\n    });\n  }\n}\nfunction findValueBladeController(bcs, v) {\n  for (let i = 0; i < bcs.length; i++) {\n    const bc = bcs[i];\n    if (isValueBladeController(bc) && bc.value === v) {\n      return bc;\n    }\n  }\n  return null;\n}\nfunction findSubBladeControllerSet(bc) {\n  return isContainerBladeController(bc) ? bc.rackController.rack['bcSet_'] : null;\n}\nclass Rack {\n  constructor(config) {\n    var _a, _b;\n    this.emitter = new Emitter();\n    this.onBladePositionsChange_ = this.onBladePositionsChange_.bind(this);\n    this.onSetAdd_ = this.onSetAdd_.bind(this);\n    this.onSetRemove_ = this.onSetRemove_.bind(this);\n    this.onChildDispose_ = this.onChildDispose_.bind(this);\n    this.onChildPositionsChange_ = this.onChildPositionsChange_.bind(this);\n    this.onChildValueChange_ = this.onChildValueChange_.bind(this);\n    this.onChildViewPropsChange_ = this.onChildViewPropsChange_.bind(this);\n    this.onRackLayout_ = this.onRackLayout_.bind(this);\n    this.onRackValueChange_ = this.onRackValueChange_.bind(this);\n    this.blade_ = (_a = config.blade) !== null && _a !== void 0 ? _a : null;\n    (_b = this.blade_) === null || _b === void 0 ? void 0 : _b.value('positions').emitter.on('change', this.onBladePositionsChange_);\n    this.viewProps = config.viewProps;\n    this.bcSet_ = new NestedOrderedSet(findSubBladeControllerSet);\n    this.bcSet_.emitter.on('add', this.onSetAdd_);\n    this.bcSet_.emitter.on('remove', this.onSetRemove_);\n  }\n  get children() {\n    return this.bcSet_.items;\n  }\n  add(bc, opt_index) {\n    var _a;\n    (_a = bc.parent) === null || _a === void 0 ? void 0 : _a.remove(bc);\n    bc.parent = this;\n    this.bcSet_.add(bc, opt_index);\n  }\n  remove(bc) {\n    bc.parent = null;\n    this.bcSet_.remove(bc);\n  }\n  find(finder) {\n    return this.bcSet_.allItems().filter(finder);\n  }\n  onSetAdd_(ev) {\n    this.updatePositions_();\n    const root = ev.target === ev.root;\n    this.emitter.emit('add', {\n      bladeController: ev.item,\n      index: ev.index,\n      root: root,\n      sender: this\n    });\n    if (!root) {\n      return;\n    }\n    const bc = ev.item;\n    bc.viewProps.emitter.on('change', this.onChildViewPropsChange_);\n    bc.blade.value('positions').emitter.on('change', this.onChildPositionsChange_);\n    bc.viewProps.handleDispose(this.onChildDispose_);\n    if (isValueBladeController(bc)) {\n      bc.value.emitter.on('change', this.onChildValueChange_);\n    } else if (isContainerBladeController(bc)) {\n      const rack = bc.rackController.rack;\n      if (rack) {\n        const emitter = rack.emitter;\n        emitter.on('layout', this.onRackLayout_);\n        emitter.on('valuechange', this.onRackValueChange_);\n      }\n    }\n  }\n  onSetRemove_(ev) {\n    this.updatePositions_();\n    const root = ev.target === ev.root;\n    this.emitter.emit('remove', {\n      bladeController: ev.item,\n      root: root,\n      sender: this\n    });\n    if (!root) {\n      return;\n    }\n    const bc = ev.item;\n    if (isValueBladeController(bc)) {\n      bc.value.emitter.off('change', this.onChildValueChange_);\n    } else if (isContainerBladeController(bc)) {\n      const rack = bc.rackController.rack;\n      if (rack) {\n        const emitter = rack.emitter;\n        emitter.off('layout', this.onRackLayout_);\n        emitter.off('valuechange', this.onRackValueChange_);\n      }\n    }\n  }\n  updatePositions_() {\n    const visibleItems = this.bcSet_.items.filter(bc => !bc.viewProps.get('hidden'));\n    const firstVisibleItem = visibleItems[0];\n    const lastVisibleItem = visibleItems[visibleItems.length - 1];\n    this.bcSet_.items.forEach(bc => {\n      const ps = [];\n      if (bc === firstVisibleItem) {\n        ps.push('first');\n        if (!this.blade_ || this.blade_.get('positions').includes('veryfirst')) {\n          ps.push('veryfirst');\n        }\n      }\n      if (bc === lastVisibleItem) {\n        ps.push('last');\n        if (!this.blade_ || this.blade_.get('positions').includes('verylast')) {\n          ps.push('verylast');\n        }\n      }\n      bc.blade.set('positions', ps);\n    });\n  }\n  onChildPositionsChange_() {\n    this.updatePositions_();\n    this.emitter.emit('layout', {\n      sender: this\n    });\n  }\n  onChildViewPropsChange_(_ev) {\n    this.updatePositions_();\n    this.emitter.emit('layout', {\n      sender: this\n    });\n  }\n  onChildDispose_() {\n    const disposedUcs = this.bcSet_.items.filter(bc => {\n      return bc.viewProps.get('disposed');\n    });\n    disposedUcs.forEach(bc => {\n      this.bcSet_.remove(bc);\n    });\n  }\n  onChildValueChange_(ev) {\n    const bc = findValueBladeController(this.find(isValueBladeController), ev.sender);\n    if (!bc) {\n      throw TpError.alreadyDisposed();\n    }\n    this.emitter.emit('valuechange', {\n      bladeController: bc,\n      options: ev.options,\n      sender: this\n    });\n  }\n  onRackLayout_(_) {\n    this.updatePositions_();\n    this.emitter.emit('layout', {\n      sender: this\n    });\n  }\n  onRackValueChange_(ev) {\n    this.emitter.emit('valuechange', {\n      bladeController: ev.bladeController,\n      options: ev.options,\n      sender: this\n    });\n  }\n  onBladePositionsChange_() {\n    this.updatePositions_();\n  }\n}\nclass RackController {\n  constructor(config) {\n    this.onRackAdd_ = this.onRackAdd_.bind(this);\n    this.onRackRemove_ = this.onRackRemove_.bind(this);\n    this.element = config.element;\n    this.viewProps = config.viewProps;\n    const rack = new Rack({\n      blade: config.root ? undefined : config.blade,\n      viewProps: config.viewProps\n    });\n    rack.emitter.on('add', this.onRackAdd_);\n    rack.emitter.on('remove', this.onRackRemove_);\n    this.rack = rack;\n    this.viewProps.handleDispose(() => {\n      for (let i = this.rack.children.length - 1; i >= 0; i--) {\n        const bc = this.rack.children[i];\n        bc.viewProps.set('disposed', true);\n      }\n    });\n  }\n  onRackAdd_(ev) {\n    if (!ev.root) {\n      return;\n    }\n    insertElementAt(this.element, ev.bladeController.view.element, ev.index);\n  }\n  onRackRemove_(ev) {\n    if (!ev.root) {\n      return;\n    }\n    removeElement(ev.bladeController.view.element);\n  }\n}\nfunction createBlade() {\n  return new ValueMap({\n    positions: createValue([], {\n      equals: deepEqualsArray\n    })\n  });\n}\nclass Foldable extends ValueMap {\n  constructor(valueMap) {\n    super(valueMap);\n  }\n  static create(expanded) {\n    const coreObj = {\n      completed: true,\n      expanded: expanded,\n      expandedHeight: null,\n      shouldFixHeight: false,\n      temporaryExpanded: null\n    };\n    const core = ValueMap.createCore(coreObj);\n    return new Foldable(core);\n  }\n  get styleExpanded() {\n    var _a;\n    return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\n  }\n  get styleHeight() {\n    if (!this.styleExpanded) {\n      return '0';\n    }\n    const exHeight = this.get('expandedHeight');\n    if (this.get('shouldFixHeight') && !isEmpty(exHeight)) {\n      return `${exHeight}px`;\n    }\n    return 'auto';\n  }\n  bindExpandedClass(elem, expandedClassName) {\n    const onExpand = () => {\n      const expanded = this.styleExpanded;\n      if (expanded) {\n        elem.classList.add(expandedClassName);\n      } else {\n        elem.classList.remove(expandedClassName);\n      }\n    };\n    bindValueMap(this, 'expanded', onExpand);\n    bindValueMap(this, 'temporaryExpanded', onExpand);\n  }\n  cleanUpTransition() {\n    this.set('shouldFixHeight', false);\n    this.set('expandedHeight', null);\n    this.set('completed', true);\n  }\n}\nfunction computeExpandedFolderHeight(folder, containerElement) {\n  let height = 0;\n  disableTransitionTemporarily(containerElement, () => {\n    folder.set('expandedHeight', null);\n    folder.set('temporaryExpanded', true);\n    forceReflow(containerElement);\n    height = containerElement.clientHeight;\n    folder.set('temporaryExpanded', null);\n    forceReflow(containerElement);\n  });\n  return height;\n}\nfunction applyHeight(foldable, elem) {\n  elem.style.height = foldable.styleHeight;\n}\nfunction bindFoldable(foldable, elem) {\n  foldable.value('expanded').emitter.on('beforechange', () => {\n    foldable.set('completed', false);\n    if (isEmpty(foldable.get('expandedHeight'))) {\n      const h = computeExpandedFolderHeight(foldable, elem);\n      if (h > 0) {\n        foldable.set('expandedHeight', h);\n      }\n    }\n    foldable.set('shouldFixHeight', true);\n    forceReflow(elem);\n  });\n  foldable.emitter.on('change', () => {\n    applyHeight(foldable, elem);\n  });\n  applyHeight(foldable, elem);\n  elem.addEventListener('transitionend', ev => {\n    if (ev.propertyName !== 'height') {\n      return;\n    }\n    foldable.cleanUpTransition();\n  });\n}\nclass FolderApi extends ContainerBladeApi {\n  constructor(controller, pool) {\n    super(controller, pool);\n    this.emitter_ = new Emitter();\n    this.controller.foldable.value('expanded').emitter.on('change', ev => {\n      this.emitter_.emit('fold', new TpFoldEvent(this, ev.sender.rawValue));\n    });\n    this.rackApi_.on('change', ev => {\n      this.emitter_.emit('change', ev);\n    });\n  }\n  get expanded() {\n    return this.controller.foldable.get('expanded');\n  }\n  set expanded(expanded) {\n    this.controller.foldable.set('expanded', expanded);\n  }\n  get title() {\n    return this.controller.props.get('title');\n  }\n  set title(title) {\n    this.controller.props.set('title', title);\n  }\n  get children() {\n    return this.rackApi_.children;\n  }\n  addBinding(object, key, opt_params) {\n    return this.rackApi_.addBinding(object, key, opt_params);\n  }\n  addFolder(params) {\n    return this.rackApi_.addFolder(params);\n  }\n  addButton(params) {\n    return this.rackApi_.addButton(params);\n  }\n  addTab(params) {\n    return this.rackApi_.addTab(params);\n  }\n  add(api, opt_index) {\n    return this.rackApi_.add(api, opt_index);\n  }\n  remove(api) {\n    this.rackApi_.remove(api);\n  }\n  addBlade(params) {\n    return this.rackApi_.addBlade(params);\n  }\n  on(eventName, handler) {\n    const bh = handler.bind(this);\n    this.emitter_.on(eventName, ev => {\n      bh(ev);\n    });\n    return this;\n  }\n}\nconst bladeContainerClassName = ClassName('cnt');\nclass FolderView {\n  constructor(doc, config) {\n    var _a;\n    this.className_ = ClassName((_a = config.viewName) !== null && _a !== void 0 ? _a : 'fld');\n    this.element = doc.createElement('div');\n    this.element.classList.add(this.className_(), bladeContainerClassName());\n    config.viewProps.bindClassModifiers(this.element);\n    this.foldable_ = config.foldable;\n    this.foldable_.bindExpandedClass(this.element, this.className_(undefined, 'expanded'));\n    bindValueMap(this.foldable_, 'completed', valueToClassName(this.element, this.className_(undefined, 'cpl')));\n    const buttonElem = doc.createElement('button');\n    buttonElem.classList.add(this.className_('b'));\n    bindValueMap(config.props, 'title', title => {\n      if (isEmpty(title)) {\n        this.element.classList.add(this.className_(undefined, 'not'));\n      } else {\n        this.element.classList.remove(this.className_(undefined, 'not'));\n      }\n    });\n    config.viewProps.bindDisabled(buttonElem);\n    this.element.appendChild(buttonElem);\n    this.buttonElement = buttonElem;\n    const indentElem = doc.createElement('div');\n    indentElem.classList.add(this.className_('i'));\n    this.element.appendChild(indentElem);\n    const titleElem = doc.createElement('div');\n    titleElem.classList.add(this.className_('t'));\n    bindValueToTextContent(config.props.value('title'), titleElem);\n    this.buttonElement.appendChild(titleElem);\n    this.titleElement = titleElem;\n    const markElem = doc.createElement('div');\n    markElem.classList.add(this.className_('m'));\n    this.buttonElement.appendChild(markElem);\n    const containerElem = doc.createElement('div');\n    containerElem.classList.add(this.className_('c'));\n    this.element.appendChild(containerElem);\n    this.containerElement = containerElem;\n  }\n}\nclass FolderController extends ContainerBladeController {\n  constructor(doc, config) {\n    var _a;\n    const foldable = Foldable.create((_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n    const view = new FolderView(doc, {\n      foldable: foldable,\n      props: config.props,\n      viewName: config.root ? 'rot' : undefined,\n      viewProps: config.viewProps\n    });\n    super(Object.assign(Object.assign({}, config), {\n      rackController: new RackController({\n        blade: config.blade,\n        element: view.containerElement,\n        root: config.root,\n        viewProps: config.viewProps\n      }),\n      view: view\n    }));\n    this.onTitleClick_ = this.onTitleClick_.bind(this);\n    this.props = config.props;\n    this.foldable = foldable;\n    bindFoldable(this.foldable, this.view.containerElement);\n    this.rackController.rack.emitter.on('add', () => {\n      this.foldable.cleanUpTransition();\n    });\n    this.rackController.rack.emitter.on('remove', () => {\n      this.foldable.cleanUpTransition();\n    });\n    this.view.buttonElement.addEventListener('click', this.onTitleClick_);\n  }\n  get document() {\n    return this.view.element.ownerDocument;\n  }\n  importState(state) {\n    return importBladeState(state, s => super.importState(s), p => ({\n      expanded: p.required.boolean,\n      title: p.optional.string\n    }), result => {\n      this.foldable.set('expanded', result.expanded);\n      this.props.set('title', result.title);\n      return true;\n    });\n  }\n  exportState() {\n    return exportBladeState(() => super.exportState(), {\n      expanded: this.foldable.get('expanded'),\n      title: this.props.get('title')\n    });\n  }\n  onTitleClick_() {\n    this.foldable.set('expanded', !this.foldable.get('expanded'));\n  }\n}\nconst FolderBladePlugin = createPlugin({\n  id: 'folder',\n  type: 'blade',\n  accept(params) {\n    const result = parseRecord(params, p => ({\n      title: p.required.string,\n      view: p.required.constant('folder'),\n      expanded: p.optional.boolean\n    }));\n    return result ? {\n      params: result\n    } : null;\n  },\n  controller(args) {\n    return new FolderController(args.document, {\n      blade: args.blade,\n      expanded: args.params.expanded,\n      props: ValueMap.fromObject({\n        title: args.params.title\n      }),\n      viewProps: args.viewProps\n    });\n  },\n  api(args) {\n    if (!(args.controller instanceof FolderController)) {\n      return null;\n    }\n    return new FolderApi(args.controller, args.pool);\n  }\n});\nconst cn$o = ClassName('');\nfunction valueToModifier(elem, modifier) {\n  return valueToClassName(elem, cn$o(undefined, modifier));\n}\nclass ViewProps extends ValueMap {\n  constructor(valueMap) {\n    var _a;\n    super(valueMap);\n    this.onDisabledChange_ = this.onDisabledChange_.bind(this);\n    this.onParentChange_ = this.onParentChange_.bind(this);\n    this.onParentGlobalDisabledChange_ = this.onParentGlobalDisabledChange_.bind(this);\n    [this.globalDisabled_, this.setGlobalDisabled_] = createReadonlyValue(createValue(this.getGlobalDisabled_()));\n    this.value('disabled').emitter.on('change', this.onDisabledChange_);\n    this.value('parent').emitter.on('change', this.onParentChange_);\n    (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n  }\n  static create(opt_initialValue) {\n    var _a, _b, _c;\n    const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n    return new ViewProps(ValueMap.createCore({\n      disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n      disposed: false,\n      hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n      parent: (_c = initialValue.parent) !== null && _c !== void 0 ? _c : null\n    }));\n  }\n  get globalDisabled() {\n    return this.globalDisabled_;\n  }\n  bindClassModifiers(elem) {\n    bindValue(this.globalDisabled_, valueToModifier(elem, 'disabled'));\n    bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n  }\n  bindDisabled(target) {\n    bindValue(this.globalDisabled_, disabled => {\n      target.disabled = disabled;\n    });\n  }\n  bindTabIndex(elem) {\n    bindValue(this.globalDisabled_, disabled => {\n      elem.tabIndex = disabled ? -1 : 0;\n    });\n  }\n  handleDispose(callback) {\n    this.value('disposed').emitter.on('change', disposed => {\n      if (disposed) {\n        callback();\n      }\n    });\n  }\n  importState(state) {\n    this.set('disabled', state.disabled);\n    this.set('hidden', state.hidden);\n  }\n  exportState() {\n    return {\n      disabled: this.get('disabled'),\n      hidden: this.get('hidden')\n    };\n  }\n  getGlobalDisabled_() {\n    const parent = this.get('parent');\n    const parentDisabled = parent ? parent.globalDisabled.rawValue : false;\n    return parentDisabled || this.get('disabled');\n  }\n  updateGlobalDisabled_() {\n    this.setGlobalDisabled_(this.getGlobalDisabled_());\n  }\n  onDisabledChange_() {\n    this.updateGlobalDisabled_();\n  }\n  onParentGlobalDisabledChange_() {\n    this.updateGlobalDisabled_();\n  }\n  onParentChange_(ev) {\n    var _a;\n    const prevParent = ev.previousRawValue;\n    prevParent === null || prevParent === void 0 ? void 0 : prevParent.globalDisabled.emitter.off('change', this.onParentGlobalDisabledChange_);\n    (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n    this.updateGlobalDisabled_();\n  }\n}\nconst cn$n = ClassName('tbp');\nclass TabPageView {\n  constructor(doc, config) {\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$n());\n    config.viewProps.bindClassModifiers(this.element);\n    const containerElem = doc.createElement('div');\n    containerElem.classList.add(cn$n('c'));\n    this.element.appendChild(containerElem);\n    this.containerElement = containerElem;\n  }\n}\nconst cn$m = ClassName('tbi');\nclass TabItemView {\n  constructor(doc, config) {\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$m());\n    config.viewProps.bindClassModifiers(this.element);\n    bindValueMap(config.props, 'selected', selected => {\n      if (selected) {\n        this.element.classList.add(cn$m(undefined, 'sel'));\n      } else {\n        this.element.classList.remove(cn$m(undefined, 'sel'));\n      }\n    });\n    const buttonElem = doc.createElement('button');\n    buttonElem.classList.add(cn$m('b'));\n    config.viewProps.bindDisabled(buttonElem);\n    this.element.appendChild(buttonElem);\n    this.buttonElement = buttonElem;\n    const titleElem = doc.createElement('div');\n    titleElem.classList.add(cn$m('t'));\n    bindValueToTextContent(config.props.value('title'), titleElem);\n    this.buttonElement.appendChild(titleElem);\n    this.titleElement = titleElem;\n  }\n}\nclass TabItemController {\n  constructor(doc, config) {\n    this.emitter = new Emitter();\n    this.onClick_ = this.onClick_.bind(this);\n    this.props = config.props;\n    this.viewProps = config.viewProps;\n    this.view = new TabItemView(doc, {\n      props: config.props,\n      viewProps: config.viewProps\n    });\n    this.view.buttonElement.addEventListener('click', this.onClick_);\n  }\n  onClick_() {\n    this.emitter.emit('click', {\n      sender: this\n    });\n  }\n}\nclass TabPageController extends ContainerBladeController {\n  constructor(doc, config) {\n    const view = new TabPageView(doc, {\n      viewProps: config.viewProps\n    });\n    super(Object.assign(Object.assign({}, config), {\n      rackController: new RackController({\n        blade: config.blade,\n        element: view.containerElement,\n        viewProps: config.viewProps\n      }),\n      view: view\n    }));\n    this.onItemClick_ = this.onItemClick_.bind(this);\n    this.ic_ = new TabItemController(doc, {\n      props: config.itemProps,\n      viewProps: ViewProps.create()\n    });\n    this.ic_.emitter.on('click', this.onItemClick_);\n    this.props = config.props;\n    bindValueMap(this.props, 'selected', selected => {\n      this.itemController.props.set('selected', selected);\n      this.viewProps.set('hidden', !selected);\n    });\n  }\n  get itemController() {\n    return this.ic_;\n  }\n  importState(state) {\n    return importBladeState(state, s => super.importState(s), p => ({\n      selected: p.required.boolean,\n      title: p.required.string\n    }), result => {\n      this.ic_.props.set('selected', result.selected);\n      this.ic_.props.set('title', result.title);\n      return true;\n    });\n  }\n  exportState() {\n    return exportBladeState(() => super.exportState(), {\n      selected: this.ic_.props.get('selected'),\n      title: this.ic_.props.get('title')\n    });\n  }\n  onItemClick_() {\n    this.props.set('selected', true);\n  }\n}\nclass TabApi extends ContainerBladeApi {\n  constructor(controller, pool) {\n    super(controller, pool);\n    this.emitter_ = new Emitter();\n    this.onSelect_ = this.onSelect_.bind(this);\n    this.pool_ = pool;\n    this.rackApi_.on('change', ev => {\n      this.emitter_.emit('change', ev);\n    });\n    this.controller.tab.selectedIndex.emitter.on('change', this.onSelect_);\n  }\n  get pages() {\n    return this.rackApi_.children;\n  }\n  addPage(params) {\n    const doc = this.controller.view.element.ownerDocument;\n    const pc = new TabPageController(doc, {\n      blade: createBlade(),\n      itemProps: ValueMap.fromObject({\n        selected: false,\n        title: params.title\n      }),\n      props: ValueMap.fromObject({\n        selected: false\n      }),\n      viewProps: ViewProps.create()\n    });\n    const papi = this.pool_.createApi(pc);\n    return this.rackApi_.add(papi, params.index);\n  }\n  removePage(index) {\n    this.rackApi_.remove(this.rackApi_.children[index]);\n  }\n  on(eventName, handler) {\n    const bh = handler.bind(this);\n    this.emitter_.on(eventName, ev => {\n      bh(ev);\n    });\n    return this;\n  }\n  onSelect_(ev) {\n    this.emitter_.emit('select', new TpTabSelectEvent(this, ev.rawValue));\n  }\n}\nclass TabPageApi extends ContainerBladeApi {\n  get title() {\n    var _a;\n    return (_a = this.controller.itemController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n  }\n  set title(title) {\n    this.controller.itemController.props.set('title', title);\n  }\n  get selected() {\n    return this.controller.props.get('selected');\n  }\n  set selected(selected) {\n    this.controller.props.set('selected', selected);\n  }\n  get children() {\n    return this.rackApi_.children;\n  }\n  addButton(params) {\n    return this.rackApi_.addButton(params);\n  }\n  addFolder(params) {\n    return this.rackApi_.addFolder(params);\n  }\n  addTab(params) {\n    return this.rackApi_.addTab(params);\n  }\n  add(api, opt_index) {\n    this.rackApi_.add(api, opt_index);\n  }\n  remove(api) {\n    this.rackApi_.remove(api);\n  }\n  addBinding(object, key, opt_params) {\n    return this.rackApi_.addBinding(object, key, opt_params);\n  }\n  addBlade(params) {\n    return this.rackApi_.addBlade(params);\n  }\n}\nconst INDEX_NOT_SELECTED = -1;\nclass Tab {\n  constructor() {\n    this.onItemSelectedChange_ = this.onItemSelectedChange_.bind(this);\n    this.empty = createValue(true);\n    this.selectedIndex = createValue(INDEX_NOT_SELECTED);\n    this.items_ = [];\n  }\n  add(item, opt_index) {\n    const index = opt_index !== null && opt_index !== void 0 ? opt_index : this.items_.length;\n    this.items_.splice(index, 0, item);\n    item.emitter.on('change', this.onItemSelectedChange_);\n    this.keepSelection_();\n  }\n  remove(item) {\n    const index = this.items_.indexOf(item);\n    if (index < 0) {\n      return;\n    }\n    this.items_.splice(index, 1);\n    item.emitter.off('change', this.onItemSelectedChange_);\n    this.keepSelection_();\n  }\n  keepSelection_() {\n    if (this.items_.length === 0) {\n      this.selectedIndex.rawValue = INDEX_NOT_SELECTED;\n      this.empty.rawValue = true;\n      return;\n    }\n    const firstSelIndex = this.items_.findIndex(s => s.rawValue);\n    if (firstSelIndex < 0) {\n      this.items_.forEach((s, i) => {\n        s.rawValue = i === 0;\n      });\n      this.selectedIndex.rawValue = 0;\n    } else {\n      this.items_.forEach((s, i) => {\n        s.rawValue = i === firstSelIndex;\n      });\n      this.selectedIndex.rawValue = firstSelIndex;\n    }\n    this.empty.rawValue = false;\n  }\n  onItemSelectedChange_(ev) {\n    if (ev.rawValue) {\n      const index = this.items_.findIndex(s => s === ev.sender);\n      this.items_.forEach((s, i) => {\n        s.rawValue = i === index;\n      });\n      this.selectedIndex.rawValue = index;\n    } else {\n      this.keepSelection_();\n    }\n  }\n}\nconst cn$l = ClassName('tab');\nclass TabView {\n  constructor(doc, config) {\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$l(), bladeContainerClassName());\n    config.viewProps.bindClassModifiers(this.element);\n    bindValue(config.empty, valueToClassName(this.element, cn$l(undefined, 'nop')));\n    const titleElem = doc.createElement('div');\n    titleElem.classList.add(cn$l('t'));\n    this.element.appendChild(titleElem);\n    this.itemsElement = titleElem;\n    const indentElem = doc.createElement('div');\n    indentElem.classList.add(cn$l('i'));\n    this.element.appendChild(indentElem);\n    const contentsElem = doc.createElement('div');\n    contentsElem.classList.add(cn$l('c'));\n    this.element.appendChild(contentsElem);\n    this.contentsElement = contentsElem;\n  }\n}\nclass TabController extends ContainerBladeController {\n  constructor(doc, config) {\n    const tab = new Tab();\n    const view = new TabView(doc, {\n      empty: tab.empty,\n      viewProps: config.viewProps\n    });\n    super({\n      blade: config.blade,\n      rackController: new RackController({\n        blade: config.blade,\n        element: view.contentsElement,\n        viewProps: config.viewProps\n      }),\n      view: view\n    });\n    this.onRackAdd_ = this.onRackAdd_.bind(this);\n    this.onRackRemove_ = this.onRackRemove_.bind(this);\n    const rack = this.rackController.rack;\n    rack.emitter.on('add', this.onRackAdd_);\n    rack.emitter.on('remove', this.onRackRemove_);\n    this.tab = tab;\n  }\n  add(pc, opt_index) {\n    this.rackController.rack.add(pc, opt_index);\n  }\n  remove(index) {\n    this.rackController.rack.remove(this.rackController.rack.children[index]);\n  }\n  onRackAdd_(ev) {\n    if (!ev.root) {\n      return;\n    }\n    const pc = ev.bladeController;\n    insertElementAt(this.view.itemsElement, pc.itemController.view.element, ev.index);\n    pc.itemController.viewProps.set('parent', this.viewProps);\n    this.tab.add(pc.props.value('selected'));\n  }\n  onRackRemove_(ev) {\n    if (!ev.root) {\n      return;\n    }\n    const pc = ev.bladeController;\n    removeElement(pc.itemController.view.element);\n    pc.itemController.viewProps.set('parent', null);\n    this.tab.remove(pc.props.value('selected'));\n  }\n}\nconst TabBladePlugin = createPlugin({\n  id: 'tab',\n  type: 'blade',\n  accept(params) {\n    const result = parseRecord(params, p => ({\n      pages: p.required.array(p.required.object({\n        title: p.required.string\n      })),\n      view: p.required.constant('tab')\n    }));\n    if (!result || result.pages.length === 0) {\n      return null;\n    }\n    return {\n      params: result\n    };\n  },\n  controller(args) {\n    const c = new TabController(args.document, {\n      blade: args.blade,\n      viewProps: args.viewProps\n    });\n    args.params.pages.forEach(p => {\n      const pc = new TabPageController(args.document, {\n        blade: createBlade(),\n        itemProps: ValueMap.fromObject({\n          selected: false,\n          title: p.title\n        }),\n        props: ValueMap.fromObject({\n          selected: false\n        }),\n        viewProps: ViewProps.create()\n      });\n      c.add(pc);\n    });\n    return c;\n  },\n  api(args) {\n    if (args.controller instanceof TabController) {\n      return new TabApi(args.controller, args.pool);\n    }\n    if (args.controller instanceof TabPageController) {\n      return new TabPageApi(args.controller, args.pool);\n    }\n    return null;\n  }\n});\nfunction createBladeController(plugin, args) {\n  const ac = plugin.accept(args.params);\n  if (!ac) {\n    return null;\n  }\n  const params = parseRecord(args.params, p => ({\n    disabled: p.optional.boolean,\n    hidden: p.optional.boolean\n  }));\n  return plugin.controller({\n    blade: createBlade(),\n    document: args.document,\n    params: forceCast(Object.assign(Object.assign({}, ac.params), {\n      disabled: params === null || params === void 0 ? void 0 : params.disabled,\n      hidden: params === null || params === void 0 ? void 0 : params.hidden\n    })),\n    viewProps: ViewProps.create({\n      disabled: params === null || params === void 0 ? void 0 : params.disabled,\n      hidden: params === null || params === void 0 ? void 0 : params.hidden\n    })\n  });\n}\nclass ListInputBindingApi extends BindingApi {\n  get options() {\n    return this.controller.valueController.props.get('options');\n  }\n  set options(options) {\n    this.controller.valueController.props.set('options', options);\n  }\n}\nclass ManualTicker {\n  constructor() {\n    this.disabled = false;\n    this.emitter = new Emitter();\n  }\n  dispose() {}\n  tick() {\n    if (this.disabled) {\n      return;\n    }\n    this.emitter.emit('tick', {\n      sender: this\n    });\n  }\n}\nclass IntervalTicker {\n  constructor(doc, interval) {\n    this.disabled_ = false;\n    this.timerId_ = null;\n    this.onTick_ = this.onTick_.bind(this);\n    this.doc_ = doc;\n    this.emitter = new Emitter();\n    this.interval_ = interval;\n    this.setTimer_();\n  }\n  get disabled() {\n    return this.disabled_;\n  }\n  set disabled(inactive) {\n    this.disabled_ = inactive;\n    if (this.disabled_) {\n      this.clearTimer_();\n    } else {\n      this.setTimer_();\n    }\n  }\n  dispose() {\n    this.clearTimer_();\n  }\n  clearTimer_() {\n    if (this.timerId_ === null) {\n      return;\n    }\n    const win = this.doc_.defaultView;\n    if (win) {\n      win.clearInterval(this.timerId_);\n    }\n    this.timerId_ = null;\n  }\n  setTimer_() {\n    this.clearTimer_();\n    if (this.interval_ <= 0) {\n      return;\n    }\n    const win = this.doc_.defaultView;\n    if (win) {\n      this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n    }\n  }\n  onTick_() {\n    if (this.disabled_) {\n      return;\n    }\n    this.emitter.emit('tick', {\n      sender: this\n    });\n  }\n}\nclass CompositeConstraint {\n  constructor(constraints) {\n    this.constraints = constraints;\n  }\n  constrain(value) {\n    return this.constraints.reduce((result, c) => {\n      return c.constrain(result);\n    }, value);\n  }\n}\nfunction findConstraint(c, constraintClass) {\n  if (c instanceof constraintClass) {\n    return c;\n  }\n  if (c instanceof CompositeConstraint) {\n    const result = c.constraints.reduce((tmpResult, sc) => {\n      if (tmpResult) {\n        return tmpResult;\n      }\n      return sc instanceof constraintClass ? sc : null;\n    }, null);\n    if (result) {\n      return result;\n    }\n  }\n  return null;\n}\nclass ListConstraint {\n  constructor(options) {\n    this.values = ValueMap.fromObject({\n      options: options\n    });\n  }\n  constrain(value) {\n    const opts = this.values.get('options');\n    if (opts.length === 0) {\n      return value;\n    }\n    const matched = opts.filter(item => {\n      return item.value === value;\n    }).length > 0;\n    return matched ? value : opts[0].value;\n  }\n}\nfunction parseListOptions(value) {\n  var _a;\n  const p = MicroParsers;\n  if (Array.isArray(value)) {\n    return (_a = parseRecord({\n      items: value\n    }, p => ({\n      items: p.required.array(p.required.object({\n        text: p.required.string,\n        value: p.required.raw\n      }))\n    }))) === null || _a === void 0 ? void 0 : _a.items;\n  }\n  if (typeof value === 'object') {\n    return p.required.raw(value).value;\n  }\n  return undefined;\n}\nfunction normalizeListOptions(options) {\n  if (Array.isArray(options)) {\n    return options;\n  }\n  const items = [];\n  Object.keys(options).forEach(text => {\n    items.push({\n      text: text,\n      value: options[text]\n    });\n  });\n  return items;\n}\nfunction createListConstraint(options) {\n  return !isEmpty(options) ? new ListConstraint(normalizeListOptions(forceCast(options))) : null;\n}\nconst cn$k = ClassName('lst');\nclass ListView {\n  constructor(doc, config) {\n    this.onValueChange_ = this.onValueChange_.bind(this);\n    this.props_ = config.props;\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$k());\n    config.viewProps.bindClassModifiers(this.element);\n    const selectElem = doc.createElement('select');\n    selectElem.classList.add(cn$k('s'));\n    config.viewProps.bindDisabled(selectElem);\n    this.element.appendChild(selectElem);\n    this.selectElement = selectElem;\n    const markElem = doc.createElement('div');\n    markElem.classList.add(cn$k('m'));\n    markElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n    this.element.appendChild(markElem);\n    config.value.emitter.on('change', this.onValueChange_);\n    this.value_ = config.value;\n    bindValueMap(this.props_, 'options', opts => {\n      removeChildElements(this.selectElement);\n      opts.forEach(item => {\n        const optionElem = doc.createElement('option');\n        optionElem.textContent = item.text;\n        this.selectElement.appendChild(optionElem);\n      });\n      this.update_();\n    });\n  }\n  update_() {\n    const values = this.props_.get('options').map(o => o.value);\n    this.selectElement.selectedIndex = values.indexOf(this.value_.rawValue);\n  }\n  onValueChange_() {\n    this.update_();\n  }\n}\nclass ListController {\n  constructor(doc, config) {\n    this.onSelectChange_ = this.onSelectChange_.bind(this);\n    this.props = config.props;\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.view = new ListView(doc, {\n      props: this.props,\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.view.selectElement.addEventListener('change', this.onSelectChange_);\n  }\n  onSelectChange_(e) {\n    const selectElem = forceCast(e.currentTarget);\n    this.value.rawValue = this.props.get('options')[selectElem.selectedIndex].value;\n  }\n  importProps(state) {\n    return importBladeState(state, null, p => ({\n      options: p.required.custom(parseListOptions)\n    }), result => {\n      this.props.set('options', normalizeListOptions(result.options));\n      return true;\n    });\n  }\n  exportProps() {\n    return exportBladeState(null, {\n      options: this.props.get('options')\n    });\n  }\n}\nconst cn$j = ClassName('pop');\nclass PopupView {\n  constructor(doc, config) {\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$j());\n    config.viewProps.bindClassModifiers(this.element);\n    bindValue(config.shows, valueToClassName(this.element, cn$j(undefined, 'v')));\n  }\n}\nclass PopupController {\n  constructor(doc, config) {\n    this.shows = createValue(false);\n    this.viewProps = config.viewProps;\n    this.view = new PopupView(doc, {\n      shows: this.shows,\n      viewProps: this.viewProps\n    });\n  }\n}\nconst cn$i = ClassName('txt');\nclass TextView {\n  constructor(doc, config) {\n    this.onChange_ = this.onChange_.bind(this);\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$i());\n    config.viewProps.bindClassModifiers(this.element);\n    this.props_ = config.props;\n    this.props_.emitter.on('change', this.onChange_);\n    const inputElem = doc.createElement('input');\n    inputElem.classList.add(cn$i('i'));\n    inputElem.type = 'text';\n    config.viewProps.bindDisabled(inputElem);\n    this.element.appendChild(inputElem);\n    this.inputElement = inputElem;\n    config.value.emitter.on('change', this.onChange_);\n    this.value_ = config.value;\n    this.refresh();\n  }\n  refresh() {\n    const formatter = this.props_.get('formatter');\n    this.inputElement.value = formatter(this.value_.rawValue);\n  }\n  onChange_() {\n    this.refresh();\n  }\n}\nclass TextController {\n  constructor(doc, config) {\n    this.onInputChange_ = this.onInputChange_.bind(this);\n    this.parser_ = config.parser;\n    this.props = config.props;\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.view = new TextView(doc, {\n      props: config.props,\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.view.inputElement.addEventListener('change', this.onInputChange_);\n  }\n  onInputChange_(e) {\n    const inputElem = forceCast(e.currentTarget);\n    const value = inputElem.value;\n    const parsedValue = this.parser_(value);\n    if (!isEmpty(parsedValue)) {\n      this.value.rawValue = parsedValue;\n    }\n    this.view.refresh();\n  }\n}\nfunction boolToString(value) {\n  return String(value);\n}\nfunction boolFromUnknown(value) {\n  if (value === 'false') {\n    return false;\n  }\n  return !!value;\n}\nfunction BooleanFormatter(value) {\n  return boolToString(value);\n}\nfunction composeParsers(parsers) {\n  return text => {\n    return parsers.reduce((result, parser) => {\n      if (result !== null) {\n        return result;\n      }\n      return parser(text);\n    }, null);\n  };\n}\nconst innerFormatter = createNumberFormatter(0);\nfunction formatPercentage(value) {\n  return innerFormatter(value) + '%';\n}\nfunction stringFromUnknown(value) {\n  return String(value);\n}\nfunction formatString(value) {\n  return value;\n}\nfunction connectValues({\n  primary,\n  secondary,\n  forward,\n  backward\n}) {\n  let changing = false;\n  function preventFeedback(callback) {\n    if (changing) {\n      return;\n    }\n    changing = true;\n    callback();\n    changing = false;\n  }\n  primary.emitter.on('change', ev => {\n    preventFeedback(() => {\n      secondary.setRawValue(forward(primary.rawValue, secondary.rawValue), ev.options);\n    });\n  });\n  secondary.emitter.on('change', ev => {\n    preventFeedback(() => {\n      primary.setRawValue(backward(primary.rawValue, secondary.rawValue), ev.options);\n    });\n    preventFeedback(() => {\n      secondary.setRawValue(forward(primary.rawValue, secondary.rawValue), ev.options);\n    });\n  });\n  preventFeedback(() => {\n    secondary.setRawValue(forward(primary.rawValue, secondary.rawValue), {\n      forceEmit: false,\n      last: true\n    });\n  });\n}\nfunction getStepForKey(keyScale, keys) {\n  const step = keyScale * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n  if (keys.upKey) {\n    return +step;\n  } else if (keys.downKey) {\n    return -step;\n  }\n  return 0;\n}\nfunction getVerticalStepKeys(ev) {\n  return {\n    altKey: ev.altKey,\n    downKey: ev.key === 'ArrowDown',\n    shiftKey: ev.shiftKey,\n    upKey: ev.key === 'ArrowUp'\n  };\n}\nfunction getHorizontalStepKeys(ev) {\n  return {\n    altKey: ev.altKey,\n    downKey: ev.key === 'ArrowLeft',\n    shiftKey: ev.shiftKey,\n    upKey: ev.key === 'ArrowRight'\n  };\n}\nfunction isVerticalArrowKey(key) {\n  return key === 'ArrowUp' || key === 'ArrowDown';\n}\nfunction isArrowKey(key) {\n  return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\n}\nfunction computeOffset$1(ev, elem) {\n  var _a, _b;\n  const win = elem.ownerDocument.defaultView;\n  const rect = elem.getBoundingClientRect();\n  return {\n    x: ev.pageX - (((_a = win && win.scrollX) !== null && _a !== void 0 ? _a : 0) + rect.left),\n    y: ev.pageY - (((_b = win && win.scrollY) !== null && _b !== void 0 ? _b : 0) + rect.top)\n  };\n}\nclass PointerHandler {\n  constructor(element) {\n    this.lastTouch_ = null;\n    this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n    this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n    this.onMouseDown_ = this.onMouseDown_.bind(this);\n    this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n    this.onTouchMove_ = this.onTouchMove_.bind(this);\n    this.onTouchStart_ = this.onTouchStart_.bind(this);\n    this.elem_ = element;\n    this.emitter = new Emitter();\n    element.addEventListener('touchstart', this.onTouchStart_, {\n      passive: false\n    });\n    element.addEventListener('touchmove', this.onTouchMove_, {\n      passive: true\n    });\n    element.addEventListener('touchend', this.onTouchEnd_);\n    element.addEventListener('mousedown', this.onMouseDown_);\n  }\n  computePosition_(offset) {\n    const rect = this.elem_.getBoundingClientRect();\n    return {\n      bounds: {\n        width: rect.width,\n        height: rect.height\n      },\n      point: offset ? {\n        x: offset.x,\n        y: offset.y\n      } : null\n    };\n  }\n  onMouseDown_(ev) {\n    var _a;\n    ev.preventDefault();\n    (_a = ev.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n    const doc = this.elem_.ownerDocument;\n    doc.addEventListener('mousemove', this.onDocumentMouseMove_);\n    doc.addEventListener('mouseup', this.onDocumentMouseUp_);\n    this.emitter.emit('down', {\n      altKey: ev.altKey,\n      data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n      sender: this,\n      shiftKey: ev.shiftKey\n    });\n  }\n  onDocumentMouseMove_(ev) {\n    this.emitter.emit('move', {\n      altKey: ev.altKey,\n      data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n      sender: this,\n      shiftKey: ev.shiftKey\n    });\n  }\n  onDocumentMouseUp_(ev) {\n    const doc = this.elem_.ownerDocument;\n    doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\n    doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\n    this.emitter.emit('up', {\n      altKey: ev.altKey,\n      data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n      sender: this,\n      shiftKey: ev.shiftKey\n    });\n  }\n  onTouchStart_(ev) {\n    ev.preventDefault();\n    const touch = ev.targetTouches.item(0);\n    const rect = this.elem_.getBoundingClientRect();\n    this.emitter.emit('down', {\n      altKey: ev.altKey,\n      data: this.computePosition_(touch ? {\n        x: touch.clientX - rect.left,\n        y: touch.clientY - rect.top\n      } : undefined),\n      sender: this,\n      shiftKey: ev.shiftKey\n    });\n    this.lastTouch_ = touch;\n  }\n  onTouchMove_(ev) {\n    const touch = ev.targetTouches.item(0);\n    const rect = this.elem_.getBoundingClientRect();\n    this.emitter.emit('move', {\n      altKey: ev.altKey,\n      data: this.computePosition_(touch ? {\n        x: touch.clientX - rect.left,\n        y: touch.clientY - rect.top\n      } : undefined),\n      sender: this,\n      shiftKey: ev.shiftKey\n    });\n    this.lastTouch_ = touch;\n  }\n  onTouchEnd_(ev) {\n    var _a;\n    const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n    const rect = this.elem_.getBoundingClientRect();\n    this.emitter.emit('up', {\n      altKey: ev.altKey,\n      data: this.computePosition_(touch ? {\n        x: touch.clientX - rect.left,\n        y: touch.clientY - rect.top\n      } : undefined),\n      sender: this,\n      shiftKey: ev.shiftKey\n    });\n  }\n}\nconst cn$h = ClassName('txt');\nclass NumberTextView {\n  constructor(doc, config) {\n    this.onChange_ = this.onChange_.bind(this);\n    this.props_ = config.props;\n    this.props_.emitter.on('change', this.onChange_);\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$h(), cn$h(undefined, 'num'));\n    if (config.arrayPosition) {\n      this.element.classList.add(cn$h(undefined, config.arrayPosition));\n    }\n    config.viewProps.bindClassModifiers(this.element);\n    const inputElem = doc.createElement('input');\n    inputElem.classList.add(cn$h('i'));\n    inputElem.type = 'text';\n    config.viewProps.bindDisabled(inputElem);\n    this.element.appendChild(inputElem);\n    this.inputElement = inputElem;\n    this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n    this.dragging_ = config.dragging;\n    this.dragging_.emitter.on('change', this.onDraggingChange_);\n    this.element.classList.add(cn$h());\n    this.inputElement.classList.add(cn$h('i'));\n    const knobElem = doc.createElement('div');\n    knobElem.classList.add(cn$h('k'));\n    this.element.appendChild(knobElem);\n    this.knobElement = knobElem;\n    const guideElem = doc.createElementNS(SVG_NS, 'svg');\n    guideElem.classList.add(cn$h('g'));\n    this.knobElement.appendChild(guideElem);\n    const bodyElem = doc.createElementNS(SVG_NS, 'path');\n    bodyElem.classList.add(cn$h('gb'));\n    guideElem.appendChild(bodyElem);\n    this.guideBodyElem_ = bodyElem;\n    const headElem = doc.createElementNS(SVG_NS, 'path');\n    headElem.classList.add(cn$h('gh'));\n    guideElem.appendChild(headElem);\n    this.guideHeadElem_ = headElem;\n    const tooltipElem = doc.createElement('div');\n    tooltipElem.classList.add(ClassName('tt')());\n    this.knobElement.appendChild(tooltipElem);\n    this.tooltipElem_ = tooltipElem;\n    config.value.emitter.on('change', this.onChange_);\n    this.value = config.value;\n    this.refresh();\n  }\n  onDraggingChange_(ev) {\n    if (ev.rawValue === null) {\n      this.element.classList.remove(cn$h(undefined, 'drg'));\n      return;\n    }\n    this.element.classList.add(cn$h(undefined, 'drg'));\n    const x = ev.rawValue / this.props_.get('pointerScale');\n    const aox = x + (x > 0 ? -1 : x < 0 ? +1 : 0);\n    const adx = constrainRange(-aox, -4, +4);\n    this.guideHeadElem_.setAttributeNS(null, 'd', [`M ${aox + adx},0 L${aox},4 L${aox + adx},8`, `M ${x},-1 L${x},9`].join(' '));\n    this.guideBodyElem_.setAttributeNS(null, 'd', `M 0,4 L${x},4`);\n    const formatter = this.props_.get('formatter');\n    this.tooltipElem_.textContent = formatter(this.value.rawValue);\n    this.tooltipElem_.style.left = `${x}px`;\n  }\n  refresh() {\n    const formatter = this.props_.get('formatter');\n    this.inputElement.value = formatter(this.value.rawValue);\n  }\n  onChange_() {\n    this.refresh();\n  }\n}\nclass NumberTextController {\n  constructor(doc, config) {\n    var _a;\n    this.originRawValue_ = 0;\n    this.onInputChange_ = this.onInputChange_.bind(this);\n    this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n    this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n    this.onPointerDown_ = this.onPointerDown_.bind(this);\n    this.onPointerMove_ = this.onPointerMove_.bind(this);\n    this.onPointerUp_ = this.onPointerUp_.bind(this);\n    this.parser_ = config.parser;\n    this.props = config.props;\n    this.sliderProps_ = (_a = config.sliderProps) !== null && _a !== void 0 ? _a : null;\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.dragging_ = createValue(null);\n    this.view = new NumberTextView(doc, {\n      arrayPosition: config.arrayPosition,\n      dragging: this.dragging_,\n      props: this.props,\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.view.inputElement.addEventListener('change', this.onInputChange_);\n    this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\n    this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\n    const ph = new PointerHandler(this.view.knobElement);\n    ph.emitter.on('down', this.onPointerDown_);\n    ph.emitter.on('move', this.onPointerMove_);\n    ph.emitter.on('up', this.onPointerUp_);\n  }\n  constrainValue_(value) {\n    var _a, _b;\n    const min = (_a = this.sliderProps_) === null || _a === void 0 ? void 0 : _a.get('min');\n    const max = (_b = this.sliderProps_) === null || _b === void 0 ? void 0 : _b.get('max');\n    let v = value;\n    if (min !== undefined) {\n      v = Math.max(v, min);\n    }\n    if (max !== undefined) {\n      v = Math.min(v, max);\n    }\n    return v;\n  }\n  onInputChange_(e) {\n    const inputElem = forceCast(e.currentTarget);\n    const value = inputElem.value;\n    const parsedValue = this.parser_(value);\n    if (!isEmpty(parsedValue)) {\n      this.value.rawValue = this.constrainValue_(parsedValue);\n    }\n    this.view.refresh();\n  }\n  onInputKeyDown_(ev) {\n    const step = getStepForKey(this.props.get('keyScale'), getVerticalStepKeys(ev));\n    if (step === 0) {\n      return;\n    }\n    this.value.setRawValue(this.constrainValue_(this.value.rawValue + step), {\n      forceEmit: false,\n      last: false\n    });\n  }\n  onInputKeyUp_(ev) {\n    const step = getStepForKey(this.props.get('keyScale'), getVerticalStepKeys(ev));\n    if (step === 0) {\n      return;\n    }\n    this.value.setRawValue(this.value.rawValue, {\n      forceEmit: true,\n      last: true\n    });\n  }\n  onPointerDown_() {\n    this.originRawValue_ = this.value.rawValue;\n    this.dragging_.rawValue = 0;\n  }\n  computeDraggingValue_(data) {\n    if (!data.point) {\n      return null;\n    }\n    const dx = data.point.x - data.bounds.width / 2;\n    return this.constrainValue_(this.originRawValue_ + dx * this.props.get('pointerScale'));\n  }\n  onPointerMove_(ev) {\n    const v = this.computeDraggingValue_(ev.data);\n    if (v === null) {\n      return;\n    }\n    this.value.setRawValue(v, {\n      forceEmit: false,\n      last: false\n    });\n    this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n  }\n  onPointerUp_(ev) {\n    const v = this.computeDraggingValue_(ev.data);\n    if (v === null) {\n      return;\n    }\n    this.value.setRawValue(v, {\n      forceEmit: true,\n      last: true\n    });\n    this.dragging_.rawValue = null;\n  }\n}\nconst cn$g = ClassName('sld');\nclass SliderView {\n  constructor(doc, config) {\n    this.onChange_ = this.onChange_.bind(this);\n    this.props_ = config.props;\n    this.props_.emitter.on('change', this.onChange_);\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$g());\n    config.viewProps.bindClassModifiers(this.element);\n    const trackElem = doc.createElement('div');\n    trackElem.classList.add(cn$g('t'));\n    config.viewProps.bindTabIndex(trackElem);\n    this.element.appendChild(trackElem);\n    this.trackElement = trackElem;\n    const knobElem = doc.createElement('div');\n    knobElem.classList.add(cn$g('k'));\n    this.trackElement.appendChild(knobElem);\n    this.knobElement = knobElem;\n    config.value.emitter.on('change', this.onChange_);\n    this.value = config.value;\n    this.update_();\n  }\n  update_() {\n    const p = constrainRange(mapRange(this.value.rawValue, this.props_.get('min'), this.props_.get('max'), 0, 100), 0, 100);\n    this.knobElement.style.width = `${p}%`;\n  }\n  onChange_() {\n    this.update_();\n  }\n}\nclass SliderController {\n  constructor(doc, config) {\n    this.onKeyDown_ = this.onKeyDown_.bind(this);\n    this.onKeyUp_ = this.onKeyUp_.bind(this);\n    this.onPointerDownOrMove_ = this.onPointerDownOrMove_.bind(this);\n    this.onPointerUp_ = this.onPointerUp_.bind(this);\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.props = config.props;\n    this.view = new SliderView(doc, {\n      props: this.props,\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.ptHandler_ = new PointerHandler(this.view.trackElement);\n    this.ptHandler_.emitter.on('down', this.onPointerDownOrMove_);\n    this.ptHandler_.emitter.on('move', this.onPointerDownOrMove_);\n    this.ptHandler_.emitter.on('up', this.onPointerUp_);\n    this.view.trackElement.addEventListener('keydown', this.onKeyDown_);\n    this.view.trackElement.addEventListener('keyup', this.onKeyUp_);\n  }\n  handlePointerEvent_(d, opts) {\n    if (!d.point) {\n      return;\n    }\n    this.value.setRawValue(mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, this.props.get('min'), this.props.get('max')), opts);\n  }\n  onPointerDownOrMove_(ev) {\n    this.handlePointerEvent_(ev.data, {\n      forceEmit: false,\n      last: false\n    });\n  }\n  onPointerUp_(ev) {\n    this.handlePointerEvent_(ev.data, {\n      forceEmit: true,\n      last: true\n    });\n  }\n  onKeyDown_(ev) {\n    const step = getStepForKey(this.props.get('keyScale'), getHorizontalStepKeys(ev));\n    if (step === 0) {\n      return;\n    }\n    this.value.setRawValue(this.value.rawValue + step, {\n      forceEmit: false,\n      last: false\n    });\n  }\n  onKeyUp_(ev) {\n    const step = getStepForKey(this.props.get('keyScale'), getHorizontalStepKeys(ev));\n    if (step === 0) {\n      return;\n    }\n    this.value.setRawValue(this.value.rawValue, {\n      forceEmit: true,\n      last: true\n    });\n  }\n}\nconst cn$f = ClassName('sldtxt');\nclass SliderTextView {\n  constructor(doc, config) {\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$f());\n    const sliderElem = doc.createElement('div');\n    sliderElem.classList.add(cn$f('s'));\n    this.sliderView_ = config.sliderView;\n    sliderElem.appendChild(this.sliderView_.element);\n    this.element.appendChild(sliderElem);\n    const textElem = doc.createElement('div');\n    textElem.classList.add(cn$f('t'));\n    this.textView_ = config.textView;\n    textElem.appendChild(this.textView_.element);\n    this.element.appendChild(textElem);\n  }\n}\nclass SliderTextController {\n  constructor(doc, config) {\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.sliderC_ = new SliderController(doc, {\n      props: config.sliderProps,\n      value: config.value,\n      viewProps: this.viewProps\n    });\n    this.textC_ = new NumberTextController(doc, {\n      parser: config.parser,\n      props: config.textProps,\n      sliderProps: config.sliderProps,\n      value: config.value,\n      viewProps: config.viewProps\n    });\n    this.view = new SliderTextView(doc, {\n      sliderView: this.sliderC_.view,\n      textView: this.textC_.view\n    });\n  }\n  get sliderController() {\n    return this.sliderC_;\n  }\n  get textController() {\n    return this.textC_;\n  }\n  importProps(state) {\n    return importBladeState(state, null, p => ({\n      max: p.required.number,\n      min: p.required.number\n    }), result => {\n      const sliderProps = this.sliderC_.props;\n      sliderProps.set('max', result.max);\n      sliderProps.set('min', result.min);\n      return true;\n    });\n  }\n  exportProps() {\n    const sliderProps = this.sliderC_.props;\n    return exportBladeState(null, {\n      max: sliderProps.get('max'),\n      min: sliderProps.get('min')\n    });\n  }\n}\nfunction createSliderTextProps(config) {\n  return {\n    sliderProps: new ValueMap({\n      keyScale: config.keyScale,\n      max: config.max,\n      min: config.min\n    }),\n    textProps: new ValueMap({\n      formatter: createValue(config.formatter),\n      keyScale: config.keyScale,\n      pointerScale: createValue(config.pointerScale)\n    })\n  };\n}\nconst CSS_VAR_MAP = {\n  containerUnitSize: 'cnt-usz'\n};\nfunction getCssVar(key) {\n  return `--${CSS_VAR_MAP[key]}`;\n}\nfunction createPointDimensionParser(p) {\n  return createNumberTextInputParamsParser(p);\n}\nfunction parsePointDimensionParams(value) {\n  if (!isRecord(value)) {\n    return undefined;\n  }\n  return parseRecord(value, createPointDimensionParser);\n}\nfunction createDimensionConstraint(params, initialValue) {\n  if (!params) {\n    return undefined;\n  }\n  const constraints = [];\n  const cs = createStepConstraint(params, initialValue);\n  if (cs) {\n    constraints.push(cs);\n  }\n  const rs = createRangeConstraint(params);\n  if (rs) {\n    constraints.push(rs);\n  }\n  return new CompositeConstraint(constraints);\n}\nfunction isCompatible(ver) {\n  if (!ver) {\n    return false;\n  }\n  return ver.major === VERSION$1.major;\n}\nfunction parsePickerLayout(value) {\n  if (value === 'inline' || value === 'popup') {\n    return value;\n  }\n  return undefined;\n}\nfunction writePrimitive(target, value) {\n  target.write(value);\n}\nconst cn$e = ClassName('ckb');\nclass CheckboxView {\n  constructor(doc, config) {\n    this.onValueChange_ = this.onValueChange_.bind(this);\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$e());\n    config.viewProps.bindClassModifiers(this.element);\n    const labelElem = doc.createElement('label');\n    labelElem.classList.add(cn$e('l'));\n    this.element.appendChild(labelElem);\n    const inputElem = doc.createElement('input');\n    inputElem.classList.add(cn$e('i'));\n    inputElem.type = 'checkbox';\n    labelElem.appendChild(inputElem);\n    this.inputElement = inputElem;\n    config.viewProps.bindDisabled(this.inputElement);\n    const wrapperElem = doc.createElement('div');\n    wrapperElem.classList.add(cn$e('w'));\n    labelElem.appendChild(wrapperElem);\n    const markElem = createSvgIconElement(doc, 'check');\n    wrapperElem.appendChild(markElem);\n    config.value.emitter.on('change', this.onValueChange_);\n    this.value = config.value;\n    this.update_();\n  }\n  update_() {\n    this.inputElement.checked = this.value.rawValue;\n  }\n  onValueChange_() {\n    this.update_();\n  }\n}\nclass CheckboxController {\n  constructor(doc, config) {\n    this.onInputChange_ = this.onInputChange_.bind(this);\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.view = new CheckboxView(doc, {\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.view.inputElement.addEventListener('change', this.onInputChange_);\n  }\n  onInputChange_(e) {\n    const inputElem = forceCast(e.currentTarget);\n    this.value.rawValue = inputElem.checked;\n  }\n}\nfunction createConstraint$6(params) {\n  const constraints = [];\n  const lc = createListConstraint(params.options);\n  if (lc) {\n    constraints.push(lc);\n  }\n  return new CompositeConstraint(constraints);\n}\nconst BooleanInputPlugin = createPlugin({\n  id: 'input-bool',\n  type: 'input',\n  accept: (value, params) => {\n    if (typeof value !== 'boolean') {\n      return null;\n    }\n    const result = parseRecord(params, p => ({\n      options: p.optional.custom(parseListOptions),\n      readonly: p.optional.constant(false)\n    }));\n    return result ? {\n      initialValue: value,\n      params: result\n    } : null;\n  },\n  binding: {\n    reader: _args => boolFromUnknown,\n    constraint: args => createConstraint$6(args.params),\n    writer: _args => writePrimitive\n  },\n  controller: args => {\n    const doc = args.document;\n    const value = args.value;\n    const c = args.constraint;\n    const lc = c && findConstraint(c, ListConstraint);\n    if (lc) {\n      return new ListController(doc, {\n        props: new ValueMap({\n          options: lc.values.value('options')\n        }),\n        value: value,\n        viewProps: args.viewProps\n      });\n    }\n    return new CheckboxController(doc, {\n      value: value,\n      viewProps: args.viewProps\n    });\n  },\n  api(args) {\n    if (typeof args.controller.value.rawValue !== 'boolean') {\n      return null;\n    }\n    if (args.controller.valueController instanceof ListController) {\n      return new ListInputBindingApi(args.controller);\n    }\n    return null;\n  }\n});\nconst cn$d = ClassName('col');\nclass ColorView {\n  constructor(doc, config) {\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$d());\n    config.foldable.bindExpandedClass(this.element, cn$d(undefined, 'expanded'));\n    bindValueMap(config.foldable, 'completed', valueToClassName(this.element, cn$d(undefined, 'cpl')));\n    const headElem = doc.createElement('div');\n    headElem.classList.add(cn$d('h'));\n    this.element.appendChild(headElem);\n    const swatchElem = doc.createElement('div');\n    swatchElem.classList.add(cn$d('s'));\n    headElem.appendChild(swatchElem);\n    this.swatchElement = swatchElem;\n    const textElem = doc.createElement('div');\n    textElem.classList.add(cn$d('t'));\n    headElem.appendChild(textElem);\n    this.textElement = textElem;\n    if (config.pickerLayout === 'inline') {\n      const pickerElem = doc.createElement('div');\n      pickerElem.classList.add(cn$d('p'));\n      this.element.appendChild(pickerElem);\n      this.pickerElement = pickerElem;\n    } else {\n      this.pickerElement = null;\n    }\n  }\n}\nfunction rgbToHslInt(r, g, b) {\n  const rp = constrainRange(r / 255, 0, 1);\n  const gp = constrainRange(g / 255, 0, 1);\n  const bp = constrainRange(b / 255, 0, 1);\n  const cmax = Math.max(rp, gp, bp);\n  const cmin = Math.min(rp, gp, bp);\n  const c = cmax - cmin;\n  let h = 0;\n  let s = 0;\n  const l = (cmin + cmax) / 2;\n  if (c !== 0) {\n    s = c / (1 - Math.abs(cmax + cmin - 1));\n    if (rp === cmax) {\n      h = (gp - bp) / c;\n    } else if (gp === cmax) {\n      h = 2 + (bp - rp) / c;\n    } else {\n      h = 4 + (rp - gp) / c;\n    }\n    h = h / 6 + (h < 0 ? 1 : 0);\n  }\n  return [h * 360, s * 100, l * 100];\n}\nfunction hslToRgbInt(h, s, l) {\n  const hp = (h % 360 + 360) % 360;\n  const sp = constrainRange(s / 100, 0, 1);\n  const lp = constrainRange(l / 100, 0, 1);\n  const c = (1 - Math.abs(2 * lp - 1)) * sp;\n  const x = c * (1 - Math.abs(hp / 60 % 2 - 1));\n  const m = lp - c / 2;\n  let rp, gp, bp;\n  if (hp >= 0 && hp < 60) {\n    [rp, gp, bp] = [c, x, 0];\n  } else if (hp >= 60 && hp < 120) {\n    [rp, gp, bp] = [x, c, 0];\n  } else if (hp >= 120 && hp < 180) {\n    [rp, gp, bp] = [0, c, x];\n  } else if (hp >= 180 && hp < 240) {\n    [rp, gp, bp] = [0, x, c];\n  } else if (hp >= 240 && hp < 300) {\n    [rp, gp, bp] = [x, 0, c];\n  } else {\n    [rp, gp, bp] = [c, 0, x];\n  }\n  return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n}\nfunction rgbToHsvInt(r, g, b) {\n  const rp = constrainRange(r / 255, 0, 1);\n  const gp = constrainRange(g / 255, 0, 1);\n  const bp = constrainRange(b / 255, 0, 1);\n  const cmax = Math.max(rp, gp, bp);\n  const cmin = Math.min(rp, gp, bp);\n  const d = cmax - cmin;\n  let h;\n  if (d === 0) {\n    h = 0;\n  } else if (cmax === rp) {\n    h = 60 * (((gp - bp) / d % 6 + 6) % 6);\n  } else if (cmax === gp) {\n    h = 60 * ((bp - rp) / d + 2);\n  } else {\n    h = 60 * ((rp - gp) / d + 4);\n  }\n  const s = cmax === 0 ? 0 : d / cmax;\n  const v = cmax;\n  return [h, s * 100, v * 100];\n}\nfunction hsvToRgbInt(h, s, v) {\n  const hp = loopRange(h, 360);\n  const sp = constrainRange(s / 100, 0, 1);\n  const vp = constrainRange(v / 100, 0, 1);\n  const c = vp * sp;\n  const x = c * (1 - Math.abs(hp / 60 % 2 - 1));\n  const m = vp - c;\n  let rp, gp, bp;\n  if (hp >= 0 && hp < 60) {\n    [rp, gp, bp] = [c, x, 0];\n  } else if (hp >= 60 && hp < 120) {\n    [rp, gp, bp] = [x, c, 0];\n  } else if (hp >= 120 && hp < 180) {\n    [rp, gp, bp] = [0, c, x];\n  } else if (hp >= 180 && hp < 240) {\n    [rp, gp, bp] = [0, x, c];\n  } else if (hp >= 240 && hp < 300) {\n    [rp, gp, bp] = [x, 0, c];\n  } else {\n    [rp, gp, bp] = [c, 0, x];\n  }\n  return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n}\nfunction hslToHsvInt(h, s, l) {\n  const sd = l + s * (100 - Math.abs(2 * l - 100)) / (2 * 100);\n  return [h, sd !== 0 ? s * (100 - Math.abs(2 * l - 100)) / sd : 0, l + s * (100 - Math.abs(2 * l - 100)) / (2 * 100)];\n}\nfunction hsvToHslInt(h, s, v) {\n  const sd = 100 - Math.abs(v * (200 - s) / 100 - 100);\n  return [h, sd !== 0 ? s * v / sd : 0, v * (200 - s) / (2 * 100)];\n}\nfunction removeAlphaComponent(comps) {\n  return [comps[0], comps[1], comps[2]];\n}\nfunction appendAlphaComponent(comps, alpha) {\n  return [comps[0], comps[1], comps[2], alpha];\n}\nconst MODE_CONVERTER_MAP = {\n  hsl: {\n    hsl: (h, s, l) => [h, s, l],\n    hsv: hslToHsvInt,\n    rgb: hslToRgbInt\n  },\n  hsv: {\n    hsl: hsvToHslInt,\n    hsv: (h, s, v) => [h, s, v],\n    rgb: hsvToRgbInt\n  },\n  rgb: {\n    hsl: rgbToHslInt,\n    hsv: rgbToHsvInt,\n    rgb: (r, g, b) => [r, g, b]\n  }\n};\nfunction getColorMaxComponents(mode, type) {\n  return [type === 'float' ? 1 : mode === 'rgb' ? 255 : 360, type === 'float' ? 1 : mode === 'rgb' ? 255 : 100, type === 'float' ? 1 : mode === 'rgb' ? 255 : 100];\n}\nfunction loopHueRange(hue, max) {\n  return hue === max ? max : loopRange(hue, max);\n}\nfunction constrainColorComponents(components, mode, type) {\n  var _a;\n  const ms = getColorMaxComponents(mode, type);\n  return [mode === 'rgb' ? constrainRange(components[0], 0, ms[0]) : loopHueRange(components[0], ms[0]), constrainRange(components[1], 0, ms[1]), constrainRange(components[2], 0, ms[2]), constrainRange((_a = components[3]) !== null && _a !== void 0 ? _a : 1, 0, 1)];\n}\nfunction convertColorType(comps, mode, from, to) {\n  const fms = getColorMaxComponents(mode, from);\n  const tms = getColorMaxComponents(mode, to);\n  return comps.map((c, index) => c / fms[index] * tms[index]);\n}\nfunction convertColor(components, from, to) {\n  const intComps = convertColorType(components, from.mode, from.type, 'int');\n  const result = MODE_CONVERTER_MAP[from.mode][to.mode](...intComps);\n  return convertColorType(result, to.mode, 'int', to.type);\n}\nclass IntColor {\n  static black() {\n    return new IntColor([0, 0, 0], 'rgb');\n  }\n  constructor(comps, mode) {\n    this.type = 'int';\n    this.mode = mode;\n    this.comps_ = constrainColorComponents(comps, mode, this.type);\n  }\n  getComponents(opt_mode) {\n    return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_), {\n      mode: this.mode,\n      type: this.type\n    }, {\n      mode: opt_mode !== null && opt_mode !== void 0 ? opt_mode : this.mode,\n      type: this.type\n    }), this.comps_[3]);\n  }\n  toRgbaObject() {\n    const rgbComps = this.getComponents('rgb');\n    return {\n      r: rgbComps[0],\n      g: rgbComps[1],\n      b: rgbComps[2],\n      a: rgbComps[3]\n    };\n  }\n}\nconst cn$c = ClassName('colp');\nclass ColorPickerView {\n  constructor(doc, config) {\n    this.alphaViews_ = null;\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$c());\n    config.viewProps.bindClassModifiers(this.element);\n    const hsvElem = doc.createElement('div');\n    hsvElem.classList.add(cn$c('hsv'));\n    const svElem = doc.createElement('div');\n    svElem.classList.add(cn$c('sv'));\n    this.svPaletteView_ = config.svPaletteView;\n    svElem.appendChild(this.svPaletteView_.element);\n    hsvElem.appendChild(svElem);\n    const hElem = doc.createElement('div');\n    hElem.classList.add(cn$c('h'));\n    this.hPaletteView_ = config.hPaletteView;\n    hElem.appendChild(this.hPaletteView_.element);\n    hsvElem.appendChild(hElem);\n    this.element.appendChild(hsvElem);\n    const rgbElem = doc.createElement('div');\n    rgbElem.classList.add(cn$c('rgb'));\n    this.textsView_ = config.textsView;\n    rgbElem.appendChild(this.textsView_.element);\n    this.element.appendChild(rgbElem);\n    if (config.alphaViews) {\n      this.alphaViews_ = {\n        palette: config.alphaViews.palette,\n        text: config.alphaViews.text\n      };\n      const aElem = doc.createElement('div');\n      aElem.classList.add(cn$c('a'));\n      const apElem = doc.createElement('div');\n      apElem.classList.add(cn$c('ap'));\n      apElem.appendChild(this.alphaViews_.palette.element);\n      aElem.appendChild(apElem);\n      const atElem = doc.createElement('div');\n      atElem.classList.add(cn$c('at'));\n      atElem.appendChild(this.alphaViews_.text.element);\n      aElem.appendChild(atElem);\n      this.element.appendChild(aElem);\n    }\n  }\n  get allFocusableElements() {\n    const elems = [this.svPaletteView_.element, this.hPaletteView_.element, this.textsView_.modeSelectElement, ...this.textsView_.inputViews.map(v => v.inputElement)];\n    if (this.alphaViews_) {\n      elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);\n    }\n    return elems;\n  }\n}\nfunction parseColorType(value) {\n  return value === 'int' ? 'int' : value === 'float' ? 'float' : undefined;\n}\nfunction parseColorInputParams(params) {\n  return parseRecord(params, p => ({\n    color: p.optional.object({\n      alpha: p.optional.boolean,\n      type: p.optional.custom(parseColorType)\n    }),\n    expanded: p.optional.boolean,\n    picker: p.optional.custom(parsePickerLayout),\n    readonly: p.optional.constant(false)\n  }));\n}\nfunction getKeyScaleForColor(forAlpha) {\n  return forAlpha ? 0.1 : 1;\n}\nfunction extractColorType(params) {\n  var _a;\n  return (_a = params.color) === null || _a === void 0 ? void 0 : _a.type;\n}\nclass FloatColor {\n  constructor(comps, mode) {\n    this.type = 'float';\n    this.mode = mode;\n    this.comps_ = constrainColorComponents(comps, mode, this.type);\n  }\n  getComponents(opt_mode) {\n    return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_), {\n      mode: this.mode,\n      type: this.type\n    }, {\n      mode: opt_mode !== null && opt_mode !== void 0 ? opt_mode : this.mode,\n      type: this.type\n    }), this.comps_[3]);\n  }\n  toRgbaObject() {\n    const rgbComps = this.getComponents('rgb');\n    return {\n      r: rgbComps[0],\n      g: rgbComps[1],\n      b: rgbComps[2],\n      a: rgbComps[3]\n    };\n  }\n}\nconst TYPE_TO_CONSTRUCTOR_MAP = {\n  int: (comps, mode) => new IntColor(comps, mode),\n  float: (comps, mode) => new FloatColor(comps, mode)\n};\nfunction createColor(comps, mode, type) {\n  return TYPE_TO_CONSTRUCTOR_MAP[type](comps, mode);\n}\nfunction isFloatColor(c) {\n  return c.type === 'float';\n}\nfunction isIntColor(c) {\n  return c.type === 'int';\n}\nfunction convertFloatToInt(cf) {\n  const comps = cf.getComponents();\n  const ms = getColorMaxComponents(cf.mode, 'int');\n  return new IntColor([Math.round(mapRange(comps[0], 0, 1, 0, ms[0])), Math.round(mapRange(comps[1], 0, 1, 0, ms[1])), Math.round(mapRange(comps[2], 0, 1, 0, ms[2])), comps[3]], cf.mode);\n}\nfunction convertIntToFloat(ci) {\n  const comps = ci.getComponents();\n  const ms = getColorMaxComponents(ci.mode, 'int');\n  return new FloatColor([mapRange(comps[0], 0, ms[0], 0, 1), mapRange(comps[1], 0, ms[1], 0, 1), mapRange(comps[2], 0, ms[2], 0, 1), comps[3]], ci.mode);\n}\nfunction mapColorType(c, type) {\n  if (c.type === type) {\n    return c;\n  }\n  if (isIntColor(c) && type === 'float') {\n    return convertIntToFloat(c);\n  }\n  if (isFloatColor(c) && type === 'int') {\n    return convertFloatToInt(c);\n  }\n  throw TpError.shouldNeverHappen();\n}\nfunction equalsStringColorFormat(f1, f2) {\n  return f1.alpha === f2.alpha && f1.mode === f2.mode && f1.notation === f2.notation && f1.type === f2.type;\n}\nfunction parseCssNumberOrPercentage(text, max) {\n  const m = text.match(/^(.+)%$/);\n  if (!m) {\n    return Math.min(parseFloat(text), max);\n  }\n  return Math.min(parseFloat(m[1]) * 0.01 * max, max);\n}\nconst ANGLE_TO_DEG_MAP = {\n  deg: angle => angle,\n  grad: angle => angle * 360 / 400,\n  rad: angle => angle * 360 / (2 * Math.PI),\n  turn: angle => angle * 360\n};\nfunction parseCssNumberOrAngle(text) {\n  const m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);\n  if (!m) {\n    return parseFloat(text);\n  }\n  const angle = parseFloat(m[1]);\n  const unit = m[2];\n  return ANGLE_TO_DEG_MAP[unit](angle);\n}\nfunction parseFunctionalRgbColorComponents(text) {\n  const m = text.match(/^rgb\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n  if (!m) {\n    return null;\n  }\n  const comps = [parseCssNumberOrPercentage(m[1], 255), parseCssNumberOrPercentage(m[2], 255), parseCssNumberOrPercentage(m[3], 255)];\n  if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n    return null;\n  }\n  return comps;\n}\nfunction parseFunctionalRgbColor(text) {\n  const comps = parseFunctionalRgbColorComponents(text);\n  return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseFunctionalRgbaColorComponents(text) {\n  const m = text.match(/^rgba\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n  if (!m) {\n    return null;\n  }\n  const comps = [parseCssNumberOrPercentage(m[1], 255), parseCssNumberOrPercentage(m[2], 255), parseCssNumberOrPercentage(m[3], 255), parseCssNumberOrPercentage(m[4], 1)];\n  if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2]) || isNaN(comps[3])) {\n    return null;\n  }\n  return comps;\n}\nfunction parseFunctionalRgbaColor(text) {\n  const comps = parseFunctionalRgbaColorComponents(text);\n  return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseFunctionalHslColorComponents(text) {\n  const m = text.match(/^hsl\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n  if (!m) {\n    return null;\n  }\n  const comps = [parseCssNumberOrAngle(m[1]), parseCssNumberOrPercentage(m[2], 100), parseCssNumberOrPercentage(m[3], 100)];\n  if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n    return null;\n  }\n  return comps;\n}\nfunction parseFunctionalHslColor(text) {\n  const comps = parseFunctionalHslColorComponents(text);\n  return comps ? new IntColor(comps, 'hsl') : null;\n}\nfunction parseHslaColorComponents(text) {\n  const m = text.match(/^hsla\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n  if (!m) {\n    return null;\n  }\n  const comps = [parseCssNumberOrAngle(m[1]), parseCssNumberOrPercentage(m[2], 100), parseCssNumberOrPercentage(m[3], 100), parseCssNumberOrPercentage(m[4], 1)];\n  if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2]) || isNaN(comps[3])) {\n    return null;\n  }\n  return comps;\n}\nfunction parseFunctionalHslaColor(text) {\n  const comps = parseHslaColorComponents(text);\n  return comps ? new IntColor(comps, 'hsl') : null;\n}\nfunction parseHexRgbColorComponents(text) {\n  const mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n  if (mRgb) {\n    return [parseInt(mRgb[1] + mRgb[1], 16), parseInt(mRgb[2] + mRgb[2], 16), parseInt(mRgb[3] + mRgb[3], 16)];\n  }\n  const mRrggbb = text.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n  if (mRrggbb) {\n    return [parseInt(mRrggbb[1], 16), parseInt(mRrggbb[2], 16), parseInt(mRrggbb[3], 16)];\n  }\n  return null;\n}\nfunction parseHexRgbColor(text) {\n  const comps = parseHexRgbColorComponents(text);\n  return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseHexRgbaColorComponents(text) {\n  const mRgb = text.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n  if (mRgb) {\n    return [parseInt(mRgb[1] + mRgb[1], 16), parseInt(mRgb[2] + mRgb[2], 16), parseInt(mRgb[3] + mRgb[3], 16), mapRange(parseInt(mRgb[4] + mRgb[4], 16), 0, 255, 0, 1)];\n  }\n  const mRrggbb = text.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n  if (mRrggbb) {\n    return [parseInt(mRrggbb[1], 16), parseInt(mRrggbb[2], 16), parseInt(mRrggbb[3], 16), mapRange(parseInt(mRrggbb[4], 16), 0, 255, 0, 1)];\n  }\n  return null;\n}\nfunction parseHexRgbaColor(text) {\n  const comps = parseHexRgbaColorComponents(text);\n  return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseObjectRgbColorComponents(text) {\n  const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n  if (!m) {\n    return null;\n  }\n  const comps = [parseFloat(m[1]), parseFloat(m[2]), parseFloat(m[3])];\n  if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n    return null;\n  }\n  return comps;\n}\nfunction createObjectRgbColorParser(type) {\n  return text => {\n    const comps = parseObjectRgbColorComponents(text);\n    return comps ? createColor(comps, 'rgb', type) : null;\n  };\n}\nfunction parseObjectRgbaColorComponents(text) {\n  const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*a\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n  if (!m) {\n    return null;\n  }\n  const comps = [parseFloat(m[1]), parseFloat(m[2]), parseFloat(m[3]), parseFloat(m[4])];\n  if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2]) || isNaN(comps[3])) {\n    return null;\n  }\n  return comps;\n}\nfunction createObjectRgbaColorParser(type) {\n  return text => {\n    const comps = parseObjectRgbaColorComponents(text);\n    return comps ? createColor(comps, 'rgb', type) : null;\n  };\n}\nconst PARSER_AND_RESULT = [{\n  parser: parseHexRgbColorComponents,\n  result: {\n    alpha: false,\n    mode: 'rgb',\n    notation: 'hex'\n  }\n}, {\n  parser: parseHexRgbaColorComponents,\n  result: {\n    alpha: true,\n    mode: 'rgb',\n    notation: 'hex'\n  }\n}, {\n  parser: parseFunctionalRgbColorComponents,\n  result: {\n    alpha: false,\n    mode: 'rgb',\n    notation: 'func'\n  }\n}, {\n  parser: parseFunctionalRgbaColorComponents,\n  result: {\n    alpha: true,\n    mode: 'rgb',\n    notation: 'func'\n  }\n}, {\n  parser: parseFunctionalHslColorComponents,\n  result: {\n    alpha: false,\n    mode: 'hsl',\n    notation: 'func'\n  }\n}, {\n  parser: parseHslaColorComponents,\n  result: {\n    alpha: true,\n    mode: 'hsl',\n    notation: 'func'\n  }\n}, {\n  parser: parseObjectRgbColorComponents,\n  result: {\n    alpha: false,\n    mode: 'rgb',\n    notation: 'object'\n  }\n}, {\n  parser: parseObjectRgbaColorComponents,\n  result: {\n    alpha: true,\n    mode: 'rgb',\n    notation: 'object'\n  }\n}];\nfunction detectStringColor(text) {\n  return PARSER_AND_RESULT.reduce((prev, {\n    parser,\n    result: detection\n  }) => {\n    if (prev) {\n      return prev;\n    }\n    return parser(text) ? detection : null;\n  }, null);\n}\nfunction detectStringColorFormat(text, type = 'int') {\n  const r = detectStringColor(text);\n  if (!r) {\n    return null;\n  }\n  if (r.notation === 'hex' && type !== 'float') {\n    return Object.assign(Object.assign({}, r), {\n      type: 'int'\n    });\n  }\n  if (r.notation === 'func') {\n    return Object.assign(Object.assign({}, r), {\n      type: type\n    });\n  }\n  return null;\n}\nfunction createColorStringParser(type) {\n  const parsers = [parseHexRgbColor, parseHexRgbaColor, parseFunctionalRgbColor, parseFunctionalRgbaColor, parseFunctionalHslColor, parseFunctionalHslaColor];\n  if (type === 'int') {\n    parsers.push(createObjectRgbColorParser('int'), createObjectRgbaColorParser('int'));\n  }\n  if (type === 'float') {\n    parsers.push(createObjectRgbColorParser('float'), createObjectRgbaColorParser('float'));\n  }\n  const parser = composeParsers(parsers);\n  return text => {\n    const result = parser(text);\n    return result ? mapColorType(result, type) : null;\n  };\n}\nfunction readIntColorString(value) {\n  const parser = createColorStringParser('int');\n  if (typeof value !== 'string') {\n    return IntColor.black();\n  }\n  const result = parser(value);\n  return result !== null && result !== void 0 ? result : IntColor.black();\n}\nfunction zerofill(comp) {\n  const hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n  return hex.length === 1 ? `0${hex}` : hex;\n}\nfunction colorToHexRgbString(value, prefix = '#') {\n  const hexes = removeAlphaComponent(value.getComponents('rgb')).map(zerofill).join('');\n  return `${prefix}${hexes}`;\n}\nfunction colorToHexRgbaString(value, prefix = '#') {\n  const rgbaComps = value.getComponents('rgb');\n  const hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255].map(zerofill).join('');\n  return `${prefix}${hexes}`;\n}\nfunction colorToFunctionalRgbString(value) {\n  const formatter = createNumberFormatter(0);\n  const ci = mapColorType(value, 'int');\n  const comps = removeAlphaComponent(ci.getComponents('rgb')).map(comp => formatter(comp));\n  return `rgb(${comps.join(', ')})`;\n}\nfunction colorToFunctionalRgbaString(value) {\n  const aFormatter = createNumberFormatter(2);\n  const rgbFormatter = createNumberFormatter(0);\n  const ci = mapColorType(value, 'int');\n  const comps = ci.getComponents('rgb').map((comp, index) => {\n    const formatter = index === 3 ? aFormatter : rgbFormatter;\n    return formatter(comp);\n  });\n  return `rgba(${comps.join(', ')})`;\n}\nfunction colorToFunctionalHslString(value) {\n  const formatters = [createNumberFormatter(0), formatPercentage, formatPercentage];\n  const ci = mapColorType(value, 'int');\n  const comps = removeAlphaComponent(ci.getComponents('hsl')).map((comp, index) => formatters[index](comp));\n  return `hsl(${comps.join(', ')})`;\n}\nfunction colorToFunctionalHslaString(value) {\n  const formatters = [createNumberFormatter(0), formatPercentage, formatPercentage, createNumberFormatter(2)];\n  const ci = mapColorType(value, 'int');\n  const comps = ci.getComponents('hsl').map((comp, index) => formatters[index](comp));\n  return `hsla(${comps.join(', ')})`;\n}\nfunction colorToObjectRgbString(value, type) {\n  const formatter = createNumberFormatter(type === 'float' ? 2 : 0);\n  const names = ['r', 'g', 'b'];\n  const cc = mapColorType(value, type);\n  const comps = removeAlphaComponent(cc.getComponents('rgb')).map((comp, index) => `${names[index]}: ${formatter(comp)}`);\n  return `{${comps.join(', ')}}`;\n}\nfunction createObjectRgbColorFormatter(type) {\n  return value => colorToObjectRgbString(value, type);\n}\nfunction colorToObjectRgbaString(value, type) {\n  const aFormatter = createNumberFormatter(2);\n  const rgbFormatter = createNumberFormatter(type === 'float' ? 2 : 0);\n  const names = ['r', 'g', 'b', 'a'];\n  const cc = mapColorType(value, type);\n  const comps = cc.getComponents('rgb').map((comp, index) => {\n    const formatter = index === 3 ? aFormatter : rgbFormatter;\n    return `${names[index]}: ${formatter(comp)}`;\n  });\n  return `{${comps.join(', ')}}`;\n}\nfunction createObjectRgbaColorFormatter(type) {\n  return value => colorToObjectRgbaString(value, type);\n}\nconst FORMAT_AND_STRINGIFIERS = [{\n  format: {\n    alpha: false,\n    mode: 'rgb',\n    notation: 'hex',\n    type: 'int'\n  },\n  stringifier: colorToHexRgbString\n}, {\n  format: {\n    alpha: true,\n    mode: 'rgb',\n    notation: 'hex',\n    type: 'int'\n  },\n  stringifier: colorToHexRgbaString\n}, {\n  format: {\n    alpha: false,\n    mode: 'rgb',\n    notation: 'func',\n    type: 'int'\n  },\n  stringifier: colorToFunctionalRgbString\n}, {\n  format: {\n    alpha: true,\n    mode: 'rgb',\n    notation: 'func',\n    type: 'int'\n  },\n  stringifier: colorToFunctionalRgbaString\n}, {\n  format: {\n    alpha: false,\n    mode: 'hsl',\n    notation: 'func',\n    type: 'int'\n  },\n  stringifier: colorToFunctionalHslString\n}, {\n  format: {\n    alpha: true,\n    mode: 'hsl',\n    notation: 'func',\n    type: 'int'\n  },\n  stringifier: colorToFunctionalHslaString\n}, ...['int', 'float'].reduce((prev, type) => {\n  return [...prev, {\n    format: {\n      alpha: false,\n      mode: 'rgb',\n      notation: 'object',\n      type: type\n    },\n    stringifier: createObjectRgbColorFormatter(type)\n  }, {\n    format: {\n      alpha: true,\n      mode: 'rgb',\n      notation: 'object',\n      type: type\n    },\n    stringifier: createObjectRgbaColorFormatter(type)\n  }];\n}, [])];\nfunction findColorStringifier(format) {\n  return FORMAT_AND_STRINGIFIERS.reduce((prev, fas) => {\n    if (prev) {\n      return prev;\n    }\n    return equalsStringColorFormat(fas.format, format) ? fas.stringifier : null;\n  }, null);\n}\nconst cn$b = ClassName('apl');\nclass APaletteView {\n  constructor(doc, config) {\n    this.onValueChange_ = this.onValueChange_.bind(this);\n    this.value = config.value;\n    this.value.emitter.on('change', this.onValueChange_);\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$b());\n    config.viewProps.bindClassModifiers(this.element);\n    config.viewProps.bindTabIndex(this.element);\n    const barElem = doc.createElement('div');\n    barElem.classList.add(cn$b('b'));\n    this.element.appendChild(barElem);\n    const colorElem = doc.createElement('div');\n    colorElem.classList.add(cn$b('c'));\n    barElem.appendChild(colorElem);\n    this.colorElem_ = colorElem;\n    const markerElem = doc.createElement('div');\n    markerElem.classList.add(cn$b('m'));\n    this.element.appendChild(markerElem);\n    this.markerElem_ = markerElem;\n    const previewElem = doc.createElement('div');\n    previewElem.classList.add(cn$b('p'));\n    this.markerElem_.appendChild(previewElem);\n    this.previewElem_ = previewElem;\n    this.update_();\n  }\n  update_() {\n    const c = this.value.rawValue;\n    const rgbaComps = c.getComponents('rgb');\n    const leftColor = new IntColor([rgbaComps[0], rgbaComps[1], rgbaComps[2], 0], 'rgb');\n    const rightColor = new IntColor([rgbaComps[0], rgbaComps[1], rgbaComps[2], 255], 'rgb');\n    const gradientComps = ['to right', colorToFunctionalRgbaString(leftColor), colorToFunctionalRgbaString(rightColor)];\n    this.colorElem_.style.background = `linear-gradient(${gradientComps.join(',')})`;\n    this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);\n    const left = mapRange(rgbaComps[3], 0, 1, 0, 100);\n    this.markerElem_.style.left = `${left}%`;\n  }\n  onValueChange_() {\n    this.update_();\n  }\n}\nclass APaletteController {\n  constructor(doc, config) {\n    this.onKeyDown_ = this.onKeyDown_.bind(this);\n    this.onKeyUp_ = this.onKeyUp_.bind(this);\n    this.onPointerDown_ = this.onPointerDown_.bind(this);\n    this.onPointerMove_ = this.onPointerMove_.bind(this);\n    this.onPointerUp_ = this.onPointerUp_.bind(this);\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.view = new APaletteView(doc, {\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.ptHandler_ = new PointerHandler(this.view.element);\n    this.ptHandler_.emitter.on('down', this.onPointerDown_);\n    this.ptHandler_.emitter.on('move', this.onPointerMove_);\n    this.ptHandler_.emitter.on('up', this.onPointerUp_);\n    this.view.element.addEventListener('keydown', this.onKeyDown_);\n    this.view.element.addEventListener('keyup', this.onKeyUp_);\n  }\n  handlePointerEvent_(d, opts) {\n    if (!d.point) {\n      return;\n    }\n    const alpha = d.point.x / d.bounds.width;\n    const c = this.value.rawValue;\n    const [h, s, v] = c.getComponents('hsv');\n    this.value.setRawValue(new IntColor([h, s, v, alpha], 'hsv'), opts);\n  }\n  onPointerDown_(ev) {\n    this.handlePointerEvent_(ev.data, {\n      forceEmit: false,\n      last: false\n    });\n  }\n  onPointerMove_(ev) {\n    this.handlePointerEvent_(ev.data, {\n      forceEmit: false,\n      last: false\n    });\n  }\n  onPointerUp_(ev) {\n    this.handlePointerEvent_(ev.data, {\n      forceEmit: true,\n      last: true\n    });\n  }\n  onKeyDown_(ev) {\n    const step = getStepForKey(getKeyScaleForColor(true), getHorizontalStepKeys(ev));\n    if (step === 0) {\n      return;\n    }\n    const c = this.value.rawValue;\n    const [h, s, v, a] = c.getComponents('hsv');\n    this.value.setRawValue(new IntColor([h, s, v, a + step], 'hsv'), {\n      forceEmit: false,\n      last: false\n    });\n  }\n  onKeyUp_(ev) {\n    const step = getStepForKey(getKeyScaleForColor(true), getHorizontalStepKeys(ev));\n    if (step === 0) {\n      return;\n    }\n    this.value.setRawValue(this.value.rawValue, {\n      forceEmit: true,\n      last: true\n    });\n  }\n}\nconst cn$a = ClassName('coltxt');\nfunction createModeSelectElement(doc) {\n  const selectElem = doc.createElement('select');\n  const items = [{\n    text: 'RGB',\n    value: 'rgb'\n  }, {\n    text: 'HSL',\n    value: 'hsl'\n  }, {\n    text: 'HSV',\n    value: 'hsv'\n  }, {\n    text: 'HEX',\n    value: 'hex'\n  }];\n  selectElem.appendChild(items.reduce((frag, item) => {\n    const optElem = doc.createElement('option');\n    optElem.textContent = item.text;\n    optElem.value = item.value;\n    frag.appendChild(optElem);\n    return frag;\n  }, doc.createDocumentFragment()));\n  return selectElem;\n}\nclass ColorTextsView {\n  constructor(doc, config) {\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$a());\n    config.viewProps.bindClassModifiers(this.element);\n    const modeElem = doc.createElement('div');\n    modeElem.classList.add(cn$a('m'));\n    this.modeElem_ = createModeSelectElement(doc);\n    this.modeElem_.classList.add(cn$a('ms'));\n    modeElem.appendChild(this.modeSelectElement);\n    config.viewProps.bindDisabled(this.modeElem_);\n    const modeMarkerElem = doc.createElement('div');\n    modeMarkerElem.classList.add(cn$a('mm'));\n    modeMarkerElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n    modeElem.appendChild(modeMarkerElem);\n    this.element.appendChild(modeElem);\n    const inputsElem = doc.createElement('div');\n    inputsElem.classList.add(cn$a('w'));\n    this.element.appendChild(inputsElem);\n    this.inputsElem_ = inputsElem;\n    this.inputViews_ = config.inputViews;\n    this.applyInputViews_();\n    bindValue(config.mode, mode => {\n      this.modeElem_.value = mode;\n    });\n  }\n  get modeSelectElement() {\n    return this.modeElem_;\n  }\n  get inputViews() {\n    return this.inputViews_;\n  }\n  set inputViews(inputViews) {\n    this.inputViews_ = inputViews;\n    this.applyInputViews_();\n  }\n  applyInputViews_() {\n    removeChildElements(this.inputsElem_);\n    const doc = this.element.ownerDocument;\n    this.inputViews_.forEach(v => {\n      const compElem = doc.createElement('div');\n      compElem.classList.add(cn$a('c'));\n      compElem.appendChild(v.element);\n      this.inputsElem_.appendChild(compElem);\n    });\n  }\n}\nfunction createFormatter$2(type) {\n  return createNumberFormatter(type === 'float' ? 2 : 0);\n}\nfunction createConstraint$5(mode, type, index) {\n  const max = getColorMaxComponents(mode, type)[index];\n  return new DefiniteRangeConstraint({\n    min: 0,\n    max: max\n  });\n}\nfunction createComponentController(doc, config, index) {\n  return new NumberTextController(doc, {\n    arrayPosition: index === 0 ? 'fst' : index === 3 - 1 ? 'lst' : 'mid',\n    parser: config.parser,\n    props: ValueMap.fromObject({\n      formatter: createFormatter$2(config.colorType),\n      keyScale: getKeyScaleForColor(false),\n      pointerScale: config.colorType === 'float' ? 0.01 : 1\n    }),\n    value: createValue(0, {\n      constraint: createConstraint$5(config.colorMode, config.colorType, index)\n    }),\n    viewProps: config.viewProps\n  });\n}\nfunction createComponentControllers(doc, config) {\n  const cc = {\n    colorMode: config.colorMode,\n    colorType: config.colorType,\n    parser: parseNumber,\n    viewProps: config.viewProps\n  };\n  return [0, 1, 2].map(i => {\n    const c = createComponentController(doc, cc, i);\n    connectValues({\n      primary: config.value,\n      secondary: c.value,\n      forward(p) {\n        const mc = mapColorType(p, config.colorType);\n        return mc.getComponents(config.colorMode)[i];\n      },\n      backward(p, s) {\n        const pickedMode = config.colorMode;\n        const mc = mapColorType(p, config.colorType);\n        const comps = mc.getComponents(pickedMode);\n        comps[i] = s;\n        const c = createColor(appendAlphaComponent(removeAlphaComponent(comps), comps[3]), pickedMode, config.colorType);\n        return mapColorType(c, 'int');\n      }\n    });\n    return c;\n  });\n}\nfunction createHexController(doc, config) {\n  const c = new TextController(doc, {\n    parser: createColorStringParser('int'),\n    props: ValueMap.fromObject({\n      formatter: colorToHexRgbString\n    }),\n    value: createValue(IntColor.black()),\n    viewProps: config.viewProps\n  });\n  connectValues({\n    primary: config.value,\n    secondary: c.value,\n    forward: p => new IntColor(removeAlphaComponent(p.getComponents()), p.mode),\n    backward: (p, s) => new IntColor(appendAlphaComponent(removeAlphaComponent(s.getComponents(p.mode)), p.getComponents()[3]), p.mode)\n  });\n  return [c];\n}\nfunction isColorMode(mode) {\n  return mode !== 'hex';\n}\nclass ColorTextsController {\n  constructor(doc, config) {\n    this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);\n    this.colorType_ = config.colorType;\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.colorMode = createValue(this.value.rawValue.mode);\n    this.ccs_ = this.createComponentControllers_(doc);\n    this.view = new ColorTextsView(doc, {\n      mode: this.colorMode,\n      inputViews: [this.ccs_[0].view, this.ccs_[1].view, this.ccs_[2].view],\n      viewProps: this.viewProps\n    });\n    this.view.modeSelectElement.addEventListener('change', this.onModeSelectChange_);\n  }\n  createComponentControllers_(doc) {\n    const mode = this.colorMode.rawValue;\n    if (isColorMode(mode)) {\n      return createComponentControllers(doc, {\n        colorMode: mode,\n        colorType: this.colorType_,\n        value: this.value,\n        viewProps: this.viewProps\n      });\n    }\n    return createHexController(doc, {\n      value: this.value,\n      viewProps: this.viewProps\n    });\n  }\n  onModeSelectChange_(ev) {\n    const selectElem = ev.currentTarget;\n    this.colorMode.rawValue = selectElem.value;\n    this.ccs_ = this.createComponentControllers_(this.view.element.ownerDocument);\n    this.view.inputViews = this.ccs_.map(cc => cc.view);\n  }\n}\nconst cn$9 = ClassName('hpl');\nclass HPaletteView {\n  constructor(doc, config) {\n    this.onValueChange_ = this.onValueChange_.bind(this);\n    this.value = config.value;\n    this.value.emitter.on('change', this.onValueChange_);\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$9());\n    config.viewProps.bindClassModifiers(this.element);\n    config.viewProps.bindTabIndex(this.element);\n    const colorElem = doc.createElement('div');\n    colorElem.classList.add(cn$9('c'));\n    this.element.appendChild(colorElem);\n    const markerElem = doc.createElement('div');\n    markerElem.classList.add(cn$9('m'));\n    this.element.appendChild(markerElem);\n    this.markerElem_ = markerElem;\n    this.update_();\n  }\n  update_() {\n    const c = this.value.rawValue;\n    const [h] = c.getComponents('hsv');\n    this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new IntColor([h, 100, 100], 'hsv'));\n    const left = mapRange(h, 0, 360, 0, 100);\n    this.markerElem_.style.left = `${left}%`;\n  }\n  onValueChange_() {\n    this.update_();\n  }\n}\nclass HPaletteController {\n  constructor(doc, config) {\n    this.onKeyDown_ = this.onKeyDown_.bind(this);\n    this.onKeyUp_ = this.onKeyUp_.bind(this);\n    this.onPointerDown_ = this.onPointerDown_.bind(this);\n    this.onPointerMove_ = this.onPointerMove_.bind(this);\n    this.onPointerUp_ = this.onPointerUp_.bind(this);\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.view = new HPaletteView(doc, {\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.ptHandler_ = new PointerHandler(this.view.element);\n    this.ptHandler_.emitter.on('down', this.onPointerDown_);\n    this.ptHandler_.emitter.on('move', this.onPointerMove_);\n    this.ptHandler_.emitter.on('up', this.onPointerUp_);\n    this.view.element.addEventListener('keydown', this.onKeyDown_);\n    this.view.element.addEventListener('keyup', this.onKeyUp_);\n  }\n  handlePointerEvent_(d, opts) {\n    if (!d.point) {\n      return;\n    }\n    const hue = mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, 0, 360);\n    const c = this.value.rawValue;\n    const [, s, v, a] = c.getComponents('hsv');\n    this.value.setRawValue(new IntColor([hue, s, v, a], 'hsv'), opts);\n  }\n  onPointerDown_(ev) {\n    this.handlePointerEvent_(ev.data, {\n      forceEmit: false,\n      last: false\n    });\n  }\n  onPointerMove_(ev) {\n    this.handlePointerEvent_(ev.data, {\n      forceEmit: false,\n      last: false\n    });\n  }\n  onPointerUp_(ev) {\n    this.handlePointerEvent_(ev.data, {\n      forceEmit: true,\n      last: true\n    });\n  }\n  onKeyDown_(ev) {\n    const step = getStepForKey(getKeyScaleForColor(false), getHorizontalStepKeys(ev));\n    if (step === 0) {\n      return;\n    }\n    const c = this.value.rawValue;\n    const [h, s, v, a] = c.getComponents('hsv');\n    this.value.setRawValue(new IntColor([h + step, s, v, a], 'hsv'), {\n      forceEmit: false,\n      last: false\n    });\n  }\n  onKeyUp_(ev) {\n    const step = getStepForKey(getKeyScaleForColor(false), getHorizontalStepKeys(ev));\n    if (step === 0) {\n      return;\n    }\n    this.value.setRawValue(this.value.rawValue, {\n      forceEmit: true,\n      last: true\n    });\n  }\n}\nconst cn$8 = ClassName('svp');\nconst CANVAS_RESOL = 64;\nclass SvPaletteView {\n  constructor(doc, config) {\n    this.onValueChange_ = this.onValueChange_.bind(this);\n    this.value = config.value;\n    this.value.emitter.on('change', this.onValueChange_);\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$8());\n    config.viewProps.bindClassModifiers(this.element);\n    config.viewProps.bindTabIndex(this.element);\n    const canvasElem = doc.createElement('canvas');\n    canvasElem.height = CANVAS_RESOL;\n    canvasElem.width = CANVAS_RESOL;\n    canvasElem.classList.add(cn$8('c'));\n    this.element.appendChild(canvasElem);\n    this.canvasElement = canvasElem;\n    const markerElem = doc.createElement('div');\n    markerElem.classList.add(cn$8('m'));\n    this.element.appendChild(markerElem);\n    this.markerElem_ = markerElem;\n    this.update_();\n  }\n  update_() {\n    const ctx = getCanvasContext(this.canvasElement);\n    if (!ctx) {\n      return;\n    }\n    const c = this.value.rawValue;\n    const hsvComps = c.getComponents('hsv');\n    const width = this.canvasElement.width;\n    const height = this.canvasElement.height;\n    const imgData = ctx.getImageData(0, 0, width, height);\n    const data = imgData.data;\n    for (let iy = 0; iy < height; iy++) {\n      for (let ix = 0; ix < width; ix++) {\n        const s = mapRange(ix, 0, width, 0, 100);\n        const v = mapRange(iy, 0, height, 100, 0);\n        const rgbComps = hsvToRgbInt(hsvComps[0], s, v);\n        const i = (iy * width + ix) * 4;\n        data[i] = rgbComps[0];\n        data[i + 1] = rgbComps[1];\n        data[i + 2] = rgbComps[2];\n        data[i + 3] = 255;\n      }\n    }\n    ctx.putImageData(imgData, 0, 0);\n    const left = mapRange(hsvComps[1], 0, 100, 0, 100);\n    this.markerElem_.style.left = `${left}%`;\n    const top = mapRange(hsvComps[2], 0, 100, 100, 0);\n    this.markerElem_.style.top = `${top}%`;\n  }\n  onValueChange_() {\n    this.update_();\n  }\n}\nclass SvPaletteController {\n  constructor(doc, config) {\n    this.onKeyDown_ = this.onKeyDown_.bind(this);\n    this.onKeyUp_ = this.onKeyUp_.bind(this);\n    this.onPointerDown_ = this.onPointerDown_.bind(this);\n    this.onPointerMove_ = this.onPointerMove_.bind(this);\n    this.onPointerUp_ = this.onPointerUp_.bind(this);\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.view = new SvPaletteView(doc, {\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.ptHandler_ = new PointerHandler(this.view.element);\n    this.ptHandler_.emitter.on('down', this.onPointerDown_);\n    this.ptHandler_.emitter.on('move', this.onPointerMove_);\n    this.ptHandler_.emitter.on('up', this.onPointerUp_);\n    this.view.element.addEventListener('keydown', this.onKeyDown_);\n    this.view.element.addEventListener('keyup', this.onKeyUp_);\n  }\n  handlePointerEvent_(d, opts) {\n    if (!d.point) {\n      return;\n    }\n    const saturation = mapRange(d.point.x, 0, d.bounds.width, 0, 100);\n    const value = mapRange(d.point.y, 0, d.bounds.height, 100, 0);\n    const [h,,, a] = this.value.rawValue.getComponents('hsv');\n    this.value.setRawValue(new IntColor([h, saturation, value, a], 'hsv'), opts);\n  }\n  onPointerDown_(ev) {\n    this.handlePointerEvent_(ev.data, {\n      forceEmit: false,\n      last: false\n    });\n  }\n  onPointerMove_(ev) {\n    this.handlePointerEvent_(ev.data, {\n      forceEmit: false,\n      last: false\n    });\n  }\n  onPointerUp_(ev) {\n    this.handlePointerEvent_(ev.data, {\n      forceEmit: true,\n      last: true\n    });\n  }\n  onKeyDown_(ev) {\n    if (isArrowKey(ev.key)) {\n      ev.preventDefault();\n    }\n    const [h, s, v, a] = this.value.rawValue.getComponents('hsv');\n    const keyScale = getKeyScaleForColor(false);\n    const ds = getStepForKey(keyScale, getHorizontalStepKeys(ev));\n    const dv = getStepForKey(keyScale, getVerticalStepKeys(ev));\n    if (ds === 0 && dv === 0) {\n      return;\n    }\n    this.value.setRawValue(new IntColor([h, s + ds, v + dv, a], 'hsv'), {\n      forceEmit: false,\n      last: false\n    });\n  }\n  onKeyUp_(ev) {\n    const keyScale = getKeyScaleForColor(false);\n    const ds = getStepForKey(keyScale, getHorizontalStepKeys(ev));\n    const dv = getStepForKey(keyScale, getVerticalStepKeys(ev));\n    if (ds === 0 && dv === 0) {\n      return;\n    }\n    this.value.setRawValue(this.value.rawValue, {\n      forceEmit: true,\n      last: true\n    });\n  }\n}\nclass ColorPickerController {\n  constructor(doc, config) {\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.hPaletteC_ = new HPaletteController(doc, {\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.svPaletteC_ = new SvPaletteController(doc, {\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.alphaIcs_ = config.supportsAlpha ? {\n      palette: new APaletteController(doc, {\n        value: this.value,\n        viewProps: this.viewProps\n      }),\n      text: new NumberTextController(doc, {\n        parser: parseNumber,\n        props: ValueMap.fromObject({\n          pointerScale: 0.01,\n          keyScale: 0.1,\n          formatter: createNumberFormatter(2)\n        }),\n        value: createValue(0, {\n          constraint: new DefiniteRangeConstraint({\n            min: 0,\n            max: 1\n          })\n        }),\n        viewProps: this.viewProps\n      })\n    } : null;\n    if (this.alphaIcs_) {\n      connectValues({\n        primary: this.value,\n        secondary: this.alphaIcs_.text.value,\n        forward: p => p.getComponents()[3],\n        backward: (p, s) => {\n          const comps = p.getComponents();\n          comps[3] = s;\n          return new IntColor(comps, p.mode);\n        }\n      });\n    }\n    this.textsC_ = new ColorTextsController(doc, {\n      colorType: config.colorType,\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.view = new ColorPickerView(doc, {\n      alphaViews: this.alphaIcs_ ? {\n        palette: this.alphaIcs_.palette.view,\n        text: this.alphaIcs_.text.view\n      } : null,\n      hPaletteView: this.hPaletteC_.view,\n      supportsAlpha: config.supportsAlpha,\n      svPaletteView: this.svPaletteC_.view,\n      textsView: this.textsC_.view,\n      viewProps: this.viewProps\n    });\n  }\n  get textsController() {\n    return this.textsC_;\n  }\n}\nconst cn$7 = ClassName('colsw');\nclass ColorSwatchView {\n  constructor(doc, config) {\n    this.onValueChange_ = this.onValueChange_.bind(this);\n    config.value.emitter.on('change', this.onValueChange_);\n    this.value = config.value;\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$7());\n    config.viewProps.bindClassModifiers(this.element);\n    const swatchElem = doc.createElement('div');\n    swatchElem.classList.add(cn$7('sw'));\n    this.element.appendChild(swatchElem);\n    this.swatchElem_ = swatchElem;\n    const buttonElem = doc.createElement('button');\n    buttonElem.classList.add(cn$7('b'));\n    config.viewProps.bindDisabled(buttonElem);\n    this.element.appendChild(buttonElem);\n    this.buttonElement = buttonElem;\n    this.update_();\n  }\n  update_() {\n    const value = this.value.rawValue;\n    this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);\n  }\n  onValueChange_() {\n    this.update_();\n  }\n}\nclass ColorSwatchController {\n  constructor(doc, config) {\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.view = new ColorSwatchView(doc, {\n      value: this.value,\n      viewProps: this.viewProps\n    });\n  }\n}\nclass ColorController {\n  constructor(doc, config) {\n    this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n    this.onButtonClick_ = this.onButtonClick_.bind(this);\n    this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n    this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.foldable_ = Foldable.create(config.expanded);\n    this.swatchC_ = new ColorSwatchController(doc, {\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    const buttonElem = this.swatchC_.view.buttonElement;\n    buttonElem.addEventListener('blur', this.onButtonBlur_);\n    buttonElem.addEventListener('click', this.onButtonClick_);\n    this.textC_ = new TextController(doc, {\n      parser: config.parser,\n      props: ValueMap.fromObject({\n        formatter: config.formatter\n      }),\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.view = new ColorView(doc, {\n      foldable: this.foldable_,\n      pickerLayout: config.pickerLayout\n    });\n    this.view.swatchElement.appendChild(this.swatchC_.view.element);\n    this.view.textElement.appendChild(this.textC_.view.element);\n    this.popC_ = config.pickerLayout === 'popup' ? new PopupController(doc, {\n      viewProps: this.viewProps\n    }) : null;\n    const pickerC = new ColorPickerController(doc, {\n      colorType: config.colorType,\n      supportsAlpha: config.supportsAlpha,\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    pickerC.view.allFocusableElements.forEach(elem => {\n      elem.addEventListener('blur', this.onPopupChildBlur_);\n      elem.addEventListener('keydown', this.onPopupChildKeydown_);\n    });\n    this.pickerC_ = pickerC;\n    if (this.popC_) {\n      this.view.element.appendChild(this.popC_.view.element);\n      this.popC_.view.element.appendChild(pickerC.view.element);\n      connectValues({\n        primary: this.foldable_.value('expanded'),\n        secondary: this.popC_.shows,\n        forward: p => p,\n        backward: (_, s) => s\n      });\n    } else if (this.view.pickerElement) {\n      this.view.pickerElement.appendChild(this.pickerC_.view.element);\n      bindFoldable(this.foldable_, this.view.pickerElement);\n    }\n  }\n  get textController() {\n    return this.textC_;\n  }\n  onButtonBlur_(e) {\n    if (!this.popC_) {\n      return;\n    }\n    const elem = this.view.element;\n    const nextTarget = forceCast(e.relatedTarget);\n    if (!nextTarget || !elem.contains(nextTarget)) {\n      this.popC_.shows.rawValue = false;\n    }\n  }\n  onButtonClick_() {\n    this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n    if (this.foldable_.get('expanded')) {\n      this.pickerC_.view.allFocusableElements[0].focus();\n    }\n  }\n  onPopupChildBlur_(ev) {\n    if (!this.popC_) {\n      return;\n    }\n    const elem = this.popC_.view.element;\n    const nextTarget = findNextTarget(ev);\n    if (nextTarget && elem.contains(nextTarget)) {\n      return;\n    }\n    if (nextTarget && nextTarget === this.swatchC_.view.buttonElement && !supportsTouch(elem.ownerDocument)) {\n      return;\n    }\n    this.popC_.shows.rawValue = false;\n  }\n  onPopupChildKeydown_(ev) {\n    if (this.popC_) {\n      if (ev.key === 'Escape') {\n        this.popC_.shows.rawValue = false;\n      }\n    } else if (this.view.pickerElement) {\n      if (ev.key === 'Escape') {\n        this.swatchC_.view.buttonElement.focus();\n      }\n    }\n  }\n}\nfunction colorToRgbNumber(value) {\n  return removeAlphaComponent(value.getComponents('rgb')).reduce((result, comp) => {\n    return result << 8 | Math.floor(comp) & 0xff;\n  }, 0);\n}\nfunction colorToRgbaNumber(value) {\n  return value.getComponents('rgb').reduce((result, comp, index) => {\n    const hex = Math.floor(index === 3 ? comp * 255 : comp) & 0xff;\n    return result << 8 | hex;\n  }, 0) >>> 0;\n}\nfunction numberToRgbColor(num) {\n  return new IntColor([num >> 16 & 0xff, num >> 8 & 0xff, num & 0xff], 'rgb');\n}\nfunction numberToRgbaColor(num) {\n  return new IntColor([num >> 24 & 0xff, num >> 16 & 0xff, num >> 8 & 0xff, mapRange(num & 0xff, 0, 255, 0, 1)], 'rgb');\n}\nfunction colorFromRgbNumber(value) {\n  if (typeof value !== 'number') {\n    return IntColor.black();\n  }\n  return numberToRgbColor(value);\n}\nfunction colorFromRgbaNumber(value) {\n  if (typeof value !== 'number') {\n    return IntColor.black();\n  }\n  return numberToRgbaColor(value);\n}\nfunction isRgbColorComponent(obj, key) {\n  if (typeof obj !== 'object' || isEmpty(obj)) {\n    return false;\n  }\n  return key in obj && typeof obj[key] === 'number';\n}\nfunction isRgbColorObject(obj) {\n  return isRgbColorComponent(obj, 'r') && isRgbColorComponent(obj, 'g') && isRgbColorComponent(obj, 'b');\n}\nfunction isRgbaColorObject(obj) {\n  return isRgbColorObject(obj) && isRgbColorComponent(obj, 'a');\n}\nfunction isColorObject(obj) {\n  return isRgbColorObject(obj);\n}\nfunction equalsColor(v1, v2) {\n  if (v1.mode !== v2.mode) {\n    return false;\n  }\n  if (v1.type !== v2.type) {\n    return false;\n  }\n  const comps1 = v1.getComponents();\n  const comps2 = v2.getComponents();\n  for (let i = 0; i < comps1.length; i++) {\n    if (comps1[i] !== comps2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction createColorComponentsFromRgbObject(obj) {\n  return 'a' in obj ? [obj.r, obj.g, obj.b, obj.a] : [obj.r, obj.g, obj.b];\n}\nfunction createColorStringWriter(format) {\n  const stringify = findColorStringifier(format);\n  return stringify ? (target, value) => {\n    writePrimitive(target, stringify(value));\n  } : null;\n}\nfunction createColorNumberWriter(supportsAlpha) {\n  const colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;\n  return (target, value) => {\n    writePrimitive(target, colorToNumber(value));\n  };\n}\nfunction writeRgbaColorObject(target, value, type) {\n  const cc = mapColorType(value, type);\n  const obj = cc.toRgbaObject();\n  target.writeProperty('r', obj.r);\n  target.writeProperty('g', obj.g);\n  target.writeProperty('b', obj.b);\n  target.writeProperty('a', obj.a);\n}\nfunction writeRgbColorObject(target, value, type) {\n  const cc = mapColorType(value, type);\n  const obj = cc.toRgbaObject();\n  target.writeProperty('r', obj.r);\n  target.writeProperty('g', obj.g);\n  target.writeProperty('b', obj.b);\n}\nfunction createColorObjectWriter(supportsAlpha, type) {\n  return (target, inValue) => {\n    if (supportsAlpha) {\n      writeRgbaColorObject(target, inValue, type);\n    } else {\n      writeRgbColorObject(target, inValue, type);\n    }\n  };\n}\nfunction shouldSupportAlpha$1(inputParams) {\n  var _a;\n  if ((_a = inputParams === null || inputParams === void 0 ? void 0 : inputParams.color) === null || _a === void 0 ? void 0 : _a.alpha) {\n    return true;\n  }\n  return false;\n}\nfunction createFormatter$1(supportsAlpha) {\n  return supportsAlpha ? v => colorToHexRgbaString(v, '0x') : v => colorToHexRgbString(v, '0x');\n}\nfunction isForColor(params) {\n  if ('color' in params) {\n    return true;\n  }\n  if (params.view === 'color') {\n    return true;\n  }\n  return false;\n}\nconst NumberColorInputPlugin = createPlugin({\n  id: 'input-color-number',\n  type: 'input',\n  accept: (value, params) => {\n    if (typeof value !== 'number') {\n      return null;\n    }\n    if (!isForColor(params)) {\n      return null;\n    }\n    const result = parseColorInputParams(params);\n    return result ? {\n      initialValue: value,\n      params: Object.assign(Object.assign({}, result), {\n        supportsAlpha: shouldSupportAlpha$1(params)\n      })\n    } : null;\n  },\n  binding: {\n    reader: args => {\n      return args.params.supportsAlpha ? colorFromRgbaNumber : colorFromRgbNumber;\n    },\n    equals: equalsColor,\n    writer: args => {\n      return createColorNumberWriter(args.params.supportsAlpha);\n    }\n  },\n  controller: args => {\n    var _a, _b;\n    return new ColorController(args.document, {\n      colorType: 'int',\n      expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n      formatter: createFormatter$1(args.params.supportsAlpha),\n      parser: createColorStringParser('int'),\n      pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n      supportsAlpha: args.params.supportsAlpha,\n      value: args.value,\n      viewProps: args.viewProps\n    });\n  }\n});\nfunction colorFromObject(value, type) {\n  if (!isColorObject(value)) {\n    return mapColorType(IntColor.black(), type);\n  }\n  if (type === 'int') {\n    const comps = createColorComponentsFromRgbObject(value);\n    return new IntColor(comps, 'rgb');\n  }\n  if (type === 'float') {\n    const comps = createColorComponentsFromRgbObject(value);\n    return new FloatColor(comps, 'rgb');\n  }\n  return mapColorType(IntColor.black(), 'int');\n}\nfunction shouldSupportAlpha(initialValue) {\n  return isRgbaColorObject(initialValue);\n}\nfunction createColorObjectBindingReader(type) {\n  return value => {\n    const c = colorFromObject(value, type);\n    return mapColorType(c, 'int');\n  };\n}\nfunction createColorObjectFormatter(supportsAlpha, type) {\n  return value => {\n    if (supportsAlpha) {\n      return colorToObjectRgbaString(value, type);\n    }\n    return colorToObjectRgbString(value, type);\n  };\n}\nconst ObjectColorInputPlugin = createPlugin({\n  id: 'input-color-object',\n  type: 'input',\n  accept: (value, params) => {\n    var _a;\n    if (!isColorObject(value)) {\n      return null;\n    }\n    const result = parseColorInputParams(params);\n    return result ? {\n      initialValue: value,\n      params: Object.assign(Object.assign({}, result), {\n        colorType: (_a = extractColorType(params)) !== null && _a !== void 0 ? _a : 'int'\n      })\n    } : null;\n  },\n  binding: {\n    reader: args => createColorObjectBindingReader(args.params.colorType),\n    equals: equalsColor,\n    writer: args => createColorObjectWriter(shouldSupportAlpha(args.initialValue), args.params.colorType)\n  },\n  controller: args => {\n    var _a, _b;\n    const supportsAlpha = isRgbaColorObject(args.initialValue);\n    return new ColorController(args.document, {\n      colorType: args.params.colorType,\n      expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n      formatter: createColorObjectFormatter(supportsAlpha, args.params.colorType),\n      parser: createColorStringParser('int'),\n      pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n      supportsAlpha: supportsAlpha,\n      value: args.value,\n      viewProps: args.viewProps\n    });\n  }\n});\nconst StringColorInputPlugin = createPlugin({\n  id: 'input-color-string',\n  type: 'input',\n  accept: (value, params) => {\n    if (typeof value !== 'string') {\n      return null;\n    }\n    if (params.view === 'text') {\n      return null;\n    }\n    const format = detectStringColorFormat(value, extractColorType(params));\n    if (!format) {\n      return null;\n    }\n    const stringifier = findColorStringifier(format);\n    if (!stringifier) {\n      return null;\n    }\n    const result = parseColorInputParams(params);\n    return result ? {\n      initialValue: value,\n      params: Object.assign(Object.assign({}, result), {\n        format: format,\n        stringifier: stringifier\n      })\n    } : null;\n  },\n  binding: {\n    reader: () => readIntColorString,\n    equals: equalsColor,\n    writer: args => {\n      const writer = createColorStringWriter(args.params.format);\n      if (!writer) {\n        throw TpError.notBindable();\n      }\n      return writer;\n    }\n  },\n  controller: args => {\n    var _a, _b;\n    return new ColorController(args.document, {\n      colorType: args.params.format.type,\n      expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n      formatter: args.params.stringifier,\n      parser: createColorStringParser('int'),\n      pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n      supportsAlpha: args.params.format.alpha,\n      value: args.value,\n      viewProps: args.viewProps\n    });\n  }\n});\nclass PointNdConstraint {\n  constructor(config) {\n    this.components = config.components;\n    this.asm_ = config.assembly;\n  }\n  constrain(value) {\n    const comps = this.asm_.toComponents(value).map((comp, index) => {\n      var _a, _b;\n      return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp;\n    });\n    return this.asm_.fromComponents(comps);\n  }\n}\nconst cn$6 = ClassName('pndtxt');\nclass PointNdTextView {\n  constructor(doc, config) {\n    this.textViews = config.textViews;\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$6());\n    this.textViews.forEach(v => {\n      const axisElem = doc.createElement('div');\n      axisElem.classList.add(cn$6('a'));\n      axisElem.appendChild(v.element);\n      this.element.appendChild(axisElem);\n    });\n  }\n}\nfunction createAxisController(doc, config, index) {\n  return new NumberTextController(doc, {\n    arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\n    parser: config.parser,\n    props: config.axes[index].textProps,\n    value: createValue(0, {\n      constraint: config.axes[index].constraint\n    }),\n    viewProps: config.viewProps\n  });\n}\nclass PointNdTextController {\n  constructor(doc, config) {\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.acs_ = config.axes.map((_, index) => createAxisController(doc, config, index));\n    this.acs_.forEach((c, index) => {\n      connectValues({\n        primary: this.value,\n        secondary: c.value,\n        forward: p => config.assembly.toComponents(p)[index],\n        backward: (p, s) => {\n          const comps = config.assembly.toComponents(p);\n          comps[index] = s;\n          return config.assembly.fromComponents(comps);\n        }\n      });\n    });\n    this.view = new PointNdTextView(doc, {\n      textViews: this.acs_.map(ac => ac.view)\n    });\n  }\n  get textControllers() {\n    return this.acs_;\n  }\n}\nclass SliderInputBindingApi extends BindingApi {\n  get max() {\n    return this.controller.valueController.sliderController.props.get('max');\n  }\n  set max(max) {\n    this.controller.valueController.sliderController.props.set('max', max);\n  }\n  get min() {\n    return this.controller.valueController.sliderController.props.get('min');\n  }\n  set min(max) {\n    this.controller.valueController.sliderController.props.set('min', max);\n  }\n}\nfunction createConstraint$4(params, initialValue) {\n  const constraints = [];\n  const sc = createStepConstraint(params, initialValue);\n  if (sc) {\n    constraints.push(sc);\n  }\n  const rc = createRangeConstraint(params);\n  if (rc) {\n    constraints.push(rc);\n  }\n  const lc = createListConstraint(params.options);\n  if (lc) {\n    constraints.push(lc);\n  }\n  return new CompositeConstraint(constraints);\n}\nconst NumberInputPlugin = createPlugin({\n  id: 'input-number',\n  type: 'input',\n  accept: (value, params) => {\n    if (typeof value !== 'number') {\n      return null;\n    }\n    const result = parseRecord(params, p => Object.assign(Object.assign({}, createNumberTextInputParamsParser(p)), {\n      options: p.optional.custom(parseListOptions),\n      readonly: p.optional.constant(false)\n    }));\n    return result ? {\n      initialValue: value,\n      params: result\n    } : null;\n  },\n  binding: {\n    reader: _args => numberFromUnknown,\n    constraint: args => createConstraint$4(args.params, args.initialValue),\n    writer: _args => writePrimitive\n  },\n  controller: args => {\n    const value = args.value;\n    const c = args.constraint;\n    const lc = c && findConstraint(c, ListConstraint);\n    if (lc) {\n      return new ListController(args.document, {\n        props: new ValueMap({\n          options: lc.values.value('options')\n        }),\n        value: value,\n        viewProps: args.viewProps\n      });\n    }\n    const textPropsObj = createNumberTextPropsObject(args.params, value.rawValue);\n    const drc = c && findConstraint(c, DefiniteRangeConstraint);\n    if (drc) {\n      return new SliderTextController(args.document, Object.assign(Object.assign({}, createSliderTextProps(Object.assign(Object.assign({}, textPropsObj), {\n        keyScale: createValue(textPropsObj.keyScale),\n        max: drc.values.value('max'),\n        min: drc.values.value('min')\n      }))), {\n        parser: parseNumber,\n        value: value,\n        viewProps: args.viewProps\n      }));\n    }\n    return new NumberTextController(args.document, {\n      parser: parseNumber,\n      props: ValueMap.fromObject(textPropsObj),\n      value: value,\n      viewProps: args.viewProps\n    });\n  },\n  api(args) {\n    if (typeof args.controller.value.rawValue !== 'number') {\n      return null;\n    }\n    if (args.controller.valueController instanceof SliderTextController) {\n      return new SliderInputBindingApi(args.controller);\n    }\n    if (args.controller.valueController instanceof ListController) {\n      return new ListInputBindingApi(args.controller);\n    }\n    return null;\n  }\n});\nclass Point2d {\n  constructor(x = 0, y = 0) {\n    this.x = x;\n    this.y = y;\n  }\n  getComponents() {\n    return [this.x, this.y];\n  }\n  static isObject(obj) {\n    if (isEmpty(obj)) {\n      return false;\n    }\n    const x = obj.x;\n    const y = obj.y;\n    if (typeof x !== 'number' || typeof y !== 'number') {\n      return false;\n    }\n    return true;\n  }\n  static equals(v1, v2) {\n    return v1.x === v2.x && v1.y === v2.y;\n  }\n  toObject() {\n    return {\n      x: this.x,\n      y: this.y\n    };\n  }\n}\nconst Point2dAssembly = {\n  toComponents: p => p.getComponents(),\n  fromComponents: comps => new Point2d(...comps)\n};\nconst cn$5 = ClassName('p2d');\nclass Point2dView {\n  constructor(doc, config) {\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$5());\n    config.viewProps.bindClassModifiers(this.element);\n    bindValue(config.expanded, valueToClassName(this.element, cn$5(undefined, 'expanded')));\n    const headElem = doc.createElement('div');\n    headElem.classList.add(cn$5('h'));\n    this.element.appendChild(headElem);\n    const buttonElem = doc.createElement('button');\n    buttonElem.classList.add(cn$5('b'));\n    buttonElem.appendChild(createSvgIconElement(doc, 'p2dpad'));\n    config.viewProps.bindDisabled(buttonElem);\n    headElem.appendChild(buttonElem);\n    this.buttonElement = buttonElem;\n    const textElem = doc.createElement('div');\n    textElem.classList.add(cn$5('t'));\n    headElem.appendChild(textElem);\n    this.textElement = textElem;\n    if (config.pickerLayout === 'inline') {\n      const pickerElem = doc.createElement('div');\n      pickerElem.classList.add(cn$5('p'));\n      this.element.appendChild(pickerElem);\n      this.pickerElement = pickerElem;\n    } else {\n      this.pickerElement = null;\n    }\n  }\n}\nconst cn$4 = ClassName('p2dp');\nclass Point2dPickerView {\n  constructor(doc, config) {\n    this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n    this.onPropsChange_ = this.onPropsChange_.bind(this);\n    this.onValueChange_ = this.onValueChange_.bind(this);\n    this.props_ = config.props;\n    this.props_.emitter.on('change', this.onPropsChange_);\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$4());\n    if (config.layout === 'popup') {\n      this.element.classList.add(cn$4(undefined, 'p'));\n    }\n    config.viewProps.bindClassModifiers(this.element);\n    const padElem = doc.createElement('div');\n    padElem.classList.add(cn$4('p'));\n    config.viewProps.bindTabIndex(padElem);\n    this.element.appendChild(padElem);\n    this.padElement = padElem;\n    const svgElem = doc.createElementNS(SVG_NS, 'svg');\n    svgElem.classList.add(cn$4('g'));\n    this.padElement.appendChild(svgElem);\n    this.svgElem_ = svgElem;\n    const xAxisElem = doc.createElementNS(SVG_NS, 'line');\n    xAxisElem.classList.add(cn$4('ax'));\n    xAxisElem.setAttributeNS(null, 'x1', '0');\n    xAxisElem.setAttributeNS(null, 'y1', '50%');\n    xAxisElem.setAttributeNS(null, 'x2', '100%');\n    xAxisElem.setAttributeNS(null, 'y2', '50%');\n    this.svgElem_.appendChild(xAxisElem);\n    const yAxisElem = doc.createElementNS(SVG_NS, 'line');\n    yAxisElem.classList.add(cn$4('ax'));\n    yAxisElem.setAttributeNS(null, 'x1', '50%');\n    yAxisElem.setAttributeNS(null, 'y1', '0');\n    yAxisElem.setAttributeNS(null, 'x2', '50%');\n    yAxisElem.setAttributeNS(null, 'y2', '100%');\n    this.svgElem_.appendChild(yAxisElem);\n    const lineElem = doc.createElementNS(SVG_NS, 'line');\n    lineElem.classList.add(cn$4('l'));\n    lineElem.setAttributeNS(null, 'x1', '50%');\n    lineElem.setAttributeNS(null, 'y1', '50%');\n    this.svgElem_.appendChild(lineElem);\n    this.lineElem_ = lineElem;\n    const markerElem = doc.createElement('div');\n    markerElem.classList.add(cn$4('m'));\n    this.padElement.appendChild(markerElem);\n    this.markerElem_ = markerElem;\n    config.value.emitter.on('change', this.onValueChange_);\n    this.value = config.value;\n    this.update_();\n  }\n  get allFocusableElements() {\n    return [this.padElement];\n  }\n  update_() {\n    const [x, y] = this.value.rawValue.getComponents();\n    const max = this.props_.get('max');\n    const px = mapRange(x, -max, +max, 0, 100);\n    const py = mapRange(y, -max, +max, 0, 100);\n    const ipy = this.props_.get('invertsY') ? 100 - py : py;\n    this.lineElem_.setAttributeNS(null, 'x2', `${px}%`);\n    this.lineElem_.setAttributeNS(null, 'y2', `${ipy}%`);\n    this.markerElem_.style.left = `${px}%`;\n    this.markerElem_.style.top = `${ipy}%`;\n  }\n  onValueChange_() {\n    this.update_();\n  }\n  onPropsChange_() {\n    this.update_();\n  }\n  onFoldableChange_() {\n    this.update_();\n  }\n}\nfunction computeOffset(ev, keyScales, invertsY) {\n  return [getStepForKey(keyScales[0], getHorizontalStepKeys(ev)), getStepForKey(keyScales[1], getVerticalStepKeys(ev)) * (invertsY ? 1 : -1)];\n}\nclass Point2dPickerController {\n  constructor(doc, config) {\n    this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\n    this.onPadKeyUp_ = this.onPadKeyUp_.bind(this);\n    this.onPointerDown_ = this.onPointerDown_.bind(this);\n    this.onPointerMove_ = this.onPointerMove_.bind(this);\n    this.onPointerUp_ = this.onPointerUp_.bind(this);\n    this.props = config.props;\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.view = new Point2dPickerView(doc, {\n      layout: config.layout,\n      props: this.props,\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.ptHandler_ = new PointerHandler(this.view.padElement);\n    this.ptHandler_.emitter.on('down', this.onPointerDown_);\n    this.ptHandler_.emitter.on('move', this.onPointerMove_);\n    this.ptHandler_.emitter.on('up', this.onPointerUp_);\n    this.view.padElement.addEventListener('keydown', this.onPadKeyDown_);\n    this.view.padElement.addEventListener('keyup', this.onPadKeyUp_);\n  }\n  handlePointerEvent_(d, opts) {\n    if (!d.point) {\n      return;\n    }\n    const max = this.props.get('max');\n    const px = mapRange(d.point.x, 0, d.bounds.width, -max, +max);\n    const py = mapRange(this.props.get('invertsY') ? d.bounds.height - d.point.y : d.point.y, 0, d.bounds.height, -max, +max);\n    this.value.setRawValue(new Point2d(px, py), opts);\n  }\n  onPointerDown_(ev) {\n    this.handlePointerEvent_(ev.data, {\n      forceEmit: false,\n      last: false\n    });\n  }\n  onPointerMove_(ev) {\n    this.handlePointerEvent_(ev.data, {\n      forceEmit: false,\n      last: false\n    });\n  }\n  onPointerUp_(ev) {\n    this.handlePointerEvent_(ev.data, {\n      forceEmit: true,\n      last: true\n    });\n  }\n  onPadKeyDown_(ev) {\n    if (isArrowKey(ev.key)) {\n      ev.preventDefault();\n    }\n    const [dx, dy] = computeOffset(ev, [this.props.get('xKeyScale'), this.props.get('yKeyScale')], this.props.get('invertsY'));\n    if (dx === 0 && dy === 0) {\n      return;\n    }\n    this.value.setRawValue(new Point2d(this.value.rawValue.x + dx, this.value.rawValue.y + dy), {\n      forceEmit: false,\n      last: false\n    });\n  }\n  onPadKeyUp_(ev) {\n    const [dx, dy] = computeOffset(ev, [this.props.get('xKeyScale'), this.props.get('yKeyScale')], this.props.get('invertsY'));\n    if (dx === 0 && dy === 0) {\n      return;\n    }\n    this.value.setRawValue(this.value.rawValue, {\n      forceEmit: true,\n      last: true\n    });\n  }\n}\nclass Point2dController {\n  constructor(doc, config) {\n    var _a, _b;\n    this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n    this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n    this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);\n    this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.foldable_ = Foldable.create(config.expanded);\n    this.popC_ = config.pickerLayout === 'popup' ? new PopupController(doc, {\n      viewProps: this.viewProps\n    }) : null;\n    const padC = new Point2dPickerController(doc, {\n      layout: config.pickerLayout,\n      props: new ValueMap({\n        invertsY: createValue(config.invertsY),\n        max: createValue(config.max),\n        xKeyScale: config.axes[0].textProps.value('keyScale'),\n        yKeyScale: config.axes[1].textProps.value('keyScale')\n      }),\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    padC.view.allFocusableElements.forEach(elem => {\n      elem.addEventListener('blur', this.onPopupChildBlur_);\n      elem.addEventListener('keydown', this.onPopupChildKeydown_);\n    });\n    this.pickerC_ = padC;\n    this.textC_ = new PointNdTextController(doc, {\n      assembly: Point2dAssembly,\n      axes: config.axes,\n      parser: config.parser,\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.view = new Point2dView(doc, {\n      expanded: this.foldable_.value('expanded'),\n      pickerLayout: config.pickerLayout,\n      viewProps: this.viewProps\n    });\n    this.view.textElement.appendChild(this.textC_.view.element);\n    (_a = this.view.buttonElement) === null || _a === void 0 ? void 0 : _a.addEventListener('blur', this.onPadButtonBlur_);\n    (_b = this.view.buttonElement) === null || _b === void 0 ? void 0 : _b.addEventListener('click', this.onPadButtonClick_);\n    if (this.popC_) {\n      this.view.element.appendChild(this.popC_.view.element);\n      this.popC_.view.element.appendChild(this.pickerC_.view.element);\n      connectValues({\n        primary: this.foldable_.value('expanded'),\n        secondary: this.popC_.shows,\n        forward: p => p,\n        backward: (_, s) => s\n      });\n    } else if (this.view.pickerElement) {\n      this.view.pickerElement.appendChild(this.pickerC_.view.element);\n      bindFoldable(this.foldable_, this.view.pickerElement);\n    }\n  }\n  get textController() {\n    return this.textC_;\n  }\n  onPadButtonBlur_(e) {\n    if (!this.popC_) {\n      return;\n    }\n    const elem = this.view.element;\n    const nextTarget = forceCast(e.relatedTarget);\n    if (!nextTarget || !elem.contains(nextTarget)) {\n      this.popC_.shows.rawValue = false;\n    }\n  }\n  onPadButtonClick_() {\n    this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n    if (this.foldable_.get('expanded')) {\n      this.pickerC_.view.allFocusableElements[0].focus();\n    }\n  }\n  onPopupChildBlur_(ev) {\n    if (!this.popC_) {\n      return;\n    }\n    const elem = this.popC_.view.element;\n    const nextTarget = findNextTarget(ev);\n    if (nextTarget && elem.contains(nextTarget)) {\n      return;\n    }\n    if (nextTarget && nextTarget === this.view.buttonElement && !supportsTouch(elem.ownerDocument)) {\n      return;\n    }\n    this.popC_.shows.rawValue = false;\n  }\n  onPopupChildKeydown_(ev) {\n    if (this.popC_) {\n      if (ev.key === 'Escape') {\n        this.popC_.shows.rawValue = false;\n      }\n    } else if (this.view.pickerElement) {\n      if (ev.key === 'Escape') {\n        this.view.buttonElement.focus();\n      }\n    }\n  }\n}\nfunction point2dFromUnknown(value) {\n  return Point2d.isObject(value) ? new Point2d(value.x, value.y) : new Point2d();\n}\nfunction writePoint2d(target, value) {\n  target.writeProperty('x', value.x);\n  target.writeProperty('y', value.y);\n}\nfunction createConstraint$3(params, initialValue) {\n  return new PointNdConstraint({\n    assembly: Point2dAssembly,\n    components: [createDimensionConstraint(Object.assign(Object.assign({}, params), params.x), initialValue.x), createDimensionConstraint(Object.assign(Object.assign({}, params), params.y), initialValue.y)]\n  });\n}\nfunction getSuitableMaxDimensionValue(params, rawValue) {\n  var _a, _b;\n  if (!isEmpty(params.min) || !isEmpty(params.max)) {\n    return Math.max(Math.abs((_a = params.min) !== null && _a !== void 0 ? _a : 0), Math.abs((_b = params.max) !== null && _b !== void 0 ? _b : 0));\n  }\n  const step = getSuitableKeyScale(params);\n  return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);\n}\nfunction getSuitableMax(params, initialValue) {\n  var _a, _b;\n  const xr = getSuitableMaxDimensionValue(deepMerge(params, (_a = params.x) !== null && _a !== void 0 ? _a : {}), initialValue.x);\n  const yr = getSuitableMaxDimensionValue(deepMerge(params, (_b = params.y) !== null && _b !== void 0 ? _b : {}), initialValue.y);\n  return Math.max(xr, yr);\n}\nfunction shouldInvertY(params) {\n  if (!('y' in params)) {\n    return false;\n  }\n  const yParams = params.y;\n  if (!yParams) {\n    return false;\n  }\n  return 'inverted' in yParams ? !!yParams.inverted : false;\n}\nconst Point2dInputPlugin = createPlugin({\n  id: 'input-point2d',\n  type: 'input',\n  accept: (value, params) => {\n    if (!Point2d.isObject(value)) {\n      return null;\n    }\n    const result = parseRecord(params, p => Object.assign(Object.assign({}, createPointDimensionParser(p)), {\n      expanded: p.optional.boolean,\n      picker: p.optional.custom(parsePickerLayout),\n      readonly: p.optional.constant(false),\n      x: p.optional.custom(parsePointDimensionParams),\n      y: p.optional.object(Object.assign(Object.assign({}, createPointDimensionParser(p)), {\n        inverted: p.optional.boolean\n      }))\n    }));\n    return result ? {\n      initialValue: value,\n      params: result\n    } : null;\n  },\n  binding: {\n    reader: () => point2dFromUnknown,\n    constraint: args => createConstraint$3(args.params, args.initialValue),\n    equals: Point2d.equals,\n    writer: () => writePoint2d\n  },\n  controller: args => {\n    var _a, _b;\n    const doc = args.document;\n    const value = args.value;\n    const c = args.constraint;\n    const dParams = [args.params.x, args.params.y];\n    return new Point2dController(doc, {\n      axes: value.rawValue.getComponents().map((comp, i) => {\n        var _a;\n        return createPointAxis({\n          constraint: c.components[i],\n          initialValue: comp,\n          params: deepMerge(args.params, (_a = dParams[i]) !== null && _a !== void 0 ? _a : {})\n        });\n      }),\n      expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n      invertsY: shouldInvertY(args.params),\n      max: getSuitableMax(args.params, value.rawValue),\n      parser: parseNumber,\n      pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n      value: value,\n      viewProps: args.viewProps\n    });\n  }\n});\nclass Point3d {\n  constructor(x = 0, y = 0, z = 0) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n  }\n  getComponents() {\n    return [this.x, this.y, this.z];\n  }\n  static isObject(obj) {\n    if (isEmpty(obj)) {\n      return false;\n    }\n    const x = obj.x;\n    const y = obj.y;\n    const z = obj.z;\n    if (typeof x !== 'number' || typeof y !== 'number' || typeof z !== 'number') {\n      return false;\n    }\n    return true;\n  }\n  static equals(v1, v2) {\n    return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;\n  }\n  toObject() {\n    return {\n      x: this.x,\n      y: this.y,\n      z: this.z\n    };\n  }\n}\nconst Point3dAssembly = {\n  toComponents: p => p.getComponents(),\n  fromComponents: comps => new Point3d(...comps)\n};\nfunction point3dFromUnknown(value) {\n  return Point3d.isObject(value) ? new Point3d(value.x, value.y, value.z) : new Point3d();\n}\nfunction writePoint3d(target, value) {\n  target.writeProperty('x', value.x);\n  target.writeProperty('y', value.y);\n  target.writeProperty('z', value.z);\n}\nfunction createConstraint$2(params, initialValue) {\n  return new PointNdConstraint({\n    assembly: Point3dAssembly,\n    components: [createDimensionConstraint(Object.assign(Object.assign({}, params), params.x), initialValue.x), createDimensionConstraint(Object.assign(Object.assign({}, params), params.y), initialValue.y), createDimensionConstraint(Object.assign(Object.assign({}, params), params.z), initialValue.z)]\n  });\n}\nconst Point3dInputPlugin = createPlugin({\n  id: 'input-point3d',\n  type: 'input',\n  accept: (value, params) => {\n    if (!Point3d.isObject(value)) {\n      return null;\n    }\n    const result = parseRecord(params, p => Object.assign(Object.assign({}, createPointDimensionParser(p)), {\n      readonly: p.optional.constant(false),\n      x: p.optional.custom(parsePointDimensionParams),\n      y: p.optional.custom(parsePointDimensionParams),\n      z: p.optional.custom(parsePointDimensionParams)\n    }));\n    return result ? {\n      initialValue: value,\n      params: result\n    } : null;\n  },\n  binding: {\n    reader: _args => point3dFromUnknown,\n    constraint: args => createConstraint$2(args.params, args.initialValue),\n    equals: Point3d.equals,\n    writer: _args => writePoint3d\n  },\n  controller: args => {\n    const value = args.value;\n    const c = args.constraint;\n    const dParams = [args.params.x, args.params.y, args.params.z];\n    return new PointNdTextController(args.document, {\n      assembly: Point3dAssembly,\n      axes: value.rawValue.getComponents().map((comp, i) => {\n        var _a;\n        return createPointAxis({\n          constraint: c.components[i],\n          initialValue: comp,\n          params: deepMerge(args.params, (_a = dParams[i]) !== null && _a !== void 0 ? _a : {})\n        });\n      }),\n      parser: parseNumber,\n      value: value,\n      viewProps: args.viewProps\n    });\n  }\n});\nclass Point4d {\n  constructor(x = 0, y = 0, z = 0, w = 0) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.w = w;\n  }\n  getComponents() {\n    return [this.x, this.y, this.z, this.w];\n  }\n  static isObject(obj) {\n    if (isEmpty(obj)) {\n      return false;\n    }\n    const x = obj.x;\n    const y = obj.y;\n    const z = obj.z;\n    const w = obj.w;\n    if (typeof x !== 'number' || typeof y !== 'number' || typeof z !== 'number' || typeof w !== 'number') {\n      return false;\n    }\n    return true;\n  }\n  static equals(v1, v2) {\n    return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z && v1.w === v2.w;\n  }\n  toObject() {\n    return {\n      x: this.x,\n      y: this.y,\n      z: this.z,\n      w: this.w\n    };\n  }\n}\nconst Point4dAssembly = {\n  toComponents: p => p.getComponents(),\n  fromComponents: comps => new Point4d(...comps)\n};\nfunction point4dFromUnknown(value) {\n  return Point4d.isObject(value) ? new Point4d(value.x, value.y, value.z, value.w) : new Point4d();\n}\nfunction writePoint4d(target, value) {\n  target.writeProperty('x', value.x);\n  target.writeProperty('y', value.y);\n  target.writeProperty('z', value.z);\n  target.writeProperty('w', value.w);\n}\nfunction createConstraint$1(params, initialValue) {\n  return new PointNdConstraint({\n    assembly: Point4dAssembly,\n    components: [createDimensionConstraint(Object.assign(Object.assign({}, params), params.x), initialValue.x), createDimensionConstraint(Object.assign(Object.assign({}, params), params.y), initialValue.y), createDimensionConstraint(Object.assign(Object.assign({}, params), params.z), initialValue.z), createDimensionConstraint(Object.assign(Object.assign({}, params), params.w), initialValue.w)]\n  });\n}\nconst Point4dInputPlugin = createPlugin({\n  id: 'input-point4d',\n  type: 'input',\n  accept: (value, params) => {\n    if (!Point4d.isObject(value)) {\n      return null;\n    }\n    const result = parseRecord(params, p => Object.assign(Object.assign({}, createPointDimensionParser(p)), {\n      readonly: p.optional.constant(false),\n      w: p.optional.custom(parsePointDimensionParams),\n      x: p.optional.custom(parsePointDimensionParams),\n      y: p.optional.custom(parsePointDimensionParams),\n      z: p.optional.custom(parsePointDimensionParams)\n    }));\n    return result ? {\n      initialValue: value,\n      params: result\n    } : null;\n  },\n  binding: {\n    reader: _args => point4dFromUnknown,\n    constraint: args => createConstraint$1(args.params, args.initialValue),\n    equals: Point4d.equals,\n    writer: _args => writePoint4d\n  },\n  controller: args => {\n    const value = args.value;\n    const c = args.constraint;\n    const dParams = [args.params.x, args.params.y, args.params.z, args.params.w];\n    return new PointNdTextController(args.document, {\n      assembly: Point4dAssembly,\n      axes: value.rawValue.getComponents().map((comp, i) => {\n        var _a;\n        return createPointAxis({\n          constraint: c.components[i],\n          initialValue: comp,\n          params: deepMerge(args.params, (_a = dParams[i]) !== null && _a !== void 0 ? _a : {})\n        });\n      }),\n      parser: parseNumber,\n      value: value,\n      viewProps: args.viewProps\n    });\n  }\n});\nfunction createConstraint(params) {\n  const constraints = [];\n  const lc = createListConstraint(params.options);\n  if (lc) {\n    constraints.push(lc);\n  }\n  return new CompositeConstraint(constraints);\n}\nconst StringInputPlugin = createPlugin({\n  id: 'input-string',\n  type: 'input',\n  accept: (value, params) => {\n    if (typeof value !== 'string') {\n      return null;\n    }\n    const result = parseRecord(params, p => ({\n      readonly: p.optional.constant(false),\n      options: p.optional.custom(parseListOptions)\n    }));\n    return result ? {\n      initialValue: value,\n      params: result\n    } : null;\n  },\n  binding: {\n    reader: _args => stringFromUnknown,\n    constraint: args => createConstraint(args.params),\n    writer: _args => writePrimitive\n  },\n  controller: args => {\n    const doc = args.document;\n    const value = args.value;\n    const c = args.constraint;\n    const lc = c && findConstraint(c, ListConstraint);\n    if (lc) {\n      return new ListController(doc, {\n        props: new ValueMap({\n          options: lc.values.value('options')\n        }),\n        value: value,\n        viewProps: args.viewProps\n      });\n    }\n    return new TextController(doc, {\n      parser: v => v,\n      props: ValueMap.fromObject({\n        formatter: formatString\n      }),\n      value: value,\n      viewProps: args.viewProps\n    });\n  },\n  api(args) {\n    if (typeof args.controller.value.rawValue !== 'string') {\n      return null;\n    }\n    if (args.controller.valueController instanceof ListController) {\n      return new ListInputBindingApi(args.controller);\n    }\n    return null;\n  }\n});\nconst Constants = {\n  monitor: {\n    defaultInterval: 200,\n    defaultRows: 3\n  }\n};\nconst cn$3 = ClassName('mll');\nclass MultiLogView {\n  constructor(doc, config) {\n    this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n    this.formatter_ = config.formatter;\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$3());\n    config.viewProps.bindClassModifiers(this.element);\n    const textareaElem = doc.createElement('textarea');\n    textareaElem.classList.add(cn$3('i'));\n    textareaElem.style.height = `calc(var(${getCssVar('containerUnitSize')}) * ${config.rows})`;\n    textareaElem.readOnly = true;\n    config.viewProps.bindDisabled(textareaElem);\n    this.element.appendChild(textareaElem);\n    this.textareaElem_ = textareaElem;\n    config.value.emitter.on('change', this.onValueUpdate_);\n    this.value = config.value;\n    this.update_();\n  }\n  update_() {\n    const elem = this.textareaElem_;\n    const shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;\n    const lines = [];\n    this.value.rawValue.forEach(value => {\n      if (value !== undefined) {\n        lines.push(this.formatter_(value));\n      }\n    });\n    elem.textContent = lines.join('\\n');\n    if (shouldScroll) {\n      elem.scrollTop = elem.scrollHeight;\n    }\n  }\n  onValueUpdate_() {\n    this.update_();\n  }\n}\nclass MultiLogController {\n  constructor(doc, config) {\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.view = new MultiLogView(doc, {\n      formatter: config.formatter,\n      rows: config.rows,\n      value: this.value,\n      viewProps: this.viewProps\n    });\n  }\n}\nconst cn$2 = ClassName('sgl');\nclass SingleLogView {\n  constructor(doc, config) {\n    this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n    this.formatter_ = config.formatter;\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$2());\n    config.viewProps.bindClassModifiers(this.element);\n    const inputElem = doc.createElement('input');\n    inputElem.classList.add(cn$2('i'));\n    inputElem.readOnly = true;\n    inputElem.type = 'text';\n    config.viewProps.bindDisabled(inputElem);\n    this.element.appendChild(inputElem);\n    this.inputElement = inputElem;\n    config.value.emitter.on('change', this.onValueUpdate_);\n    this.value = config.value;\n    this.update_();\n  }\n  update_() {\n    const values = this.value.rawValue;\n    const lastValue = values[values.length - 1];\n    this.inputElement.value = lastValue !== undefined ? this.formatter_(lastValue) : '';\n  }\n  onValueUpdate_() {\n    this.update_();\n  }\n}\nclass SingleLogController {\n  constructor(doc, config) {\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.view = new SingleLogView(doc, {\n      formatter: config.formatter,\n      value: this.value,\n      viewProps: this.viewProps\n    });\n  }\n}\nconst BooleanMonitorPlugin = createPlugin({\n  id: 'monitor-bool',\n  type: 'monitor',\n  accept: (value, params) => {\n    if (typeof value !== 'boolean') {\n      return null;\n    }\n    const result = parseRecord(params, p => ({\n      readonly: p.required.constant(true),\n      rows: p.optional.number\n    }));\n    return result ? {\n      initialValue: value,\n      params: result\n    } : null;\n  },\n  binding: {\n    reader: _args => boolFromUnknown\n  },\n  controller: args => {\n    var _a;\n    if (args.value.rawValue.length === 1) {\n      return new SingleLogController(args.document, {\n        formatter: BooleanFormatter,\n        value: args.value,\n        viewProps: args.viewProps\n      });\n    }\n    return new MultiLogController(args.document, {\n      formatter: BooleanFormatter,\n      rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n      value: args.value,\n      viewProps: args.viewProps\n    });\n  }\n});\nclass GraphLogMonitorBindingApi extends BindingApi {\n  get max() {\n    return this.controller.valueController.props.get('max');\n  }\n  set max(max) {\n    this.controller.valueController.props.set('max', max);\n  }\n  get min() {\n    return this.controller.valueController.props.get('min');\n  }\n  set min(min) {\n    this.controller.valueController.props.set('min', min);\n  }\n}\nconst cn$1 = ClassName('grl');\nclass GraphLogView {\n  constructor(doc, config) {\n    this.onCursorChange_ = this.onCursorChange_.bind(this);\n    this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$1());\n    config.viewProps.bindClassModifiers(this.element);\n    this.formatter_ = config.formatter;\n    this.props_ = config.props;\n    this.cursor_ = config.cursor;\n    this.cursor_.emitter.on('change', this.onCursorChange_);\n    const svgElem = doc.createElementNS(SVG_NS, 'svg');\n    svgElem.classList.add(cn$1('g'));\n    svgElem.style.height = `calc(var(${getCssVar('containerUnitSize')}) * ${config.rows})`;\n    this.element.appendChild(svgElem);\n    this.svgElem_ = svgElem;\n    const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n    this.svgElem_.appendChild(lineElem);\n    this.lineElem_ = lineElem;\n    const tooltipElem = doc.createElement('div');\n    tooltipElem.classList.add(cn$1('t'), ClassName('tt')());\n    this.element.appendChild(tooltipElem);\n    this.tooltipElem_ = tooltipElem;\n    config.value.emitter.on('change', this.onValueUpdate_);\n    this.value = config.value;\n    this.update_();\n  }\n  get graphElement() {\n    return this.svgElem_;\n  }\n  update_() {\n    const bounds = this.svgElem_.getBoundingClientRect();\n    const maxIndex = this.value.rawValue.length - 1;\n    const min = this.props_.get('min');\n    const max = this.props_.get('max');\n    const points = [];\n    this.value.rawValue.forEach((v, index) => {\n      if (v === undefined) {\n        return;\n      }\n      const x = mapRange(index, 0, maxIndex, 0, bounds.width);\n      const y = mapRange(v, min, max, bounds.height, 0);\n      points.push([x, y].join(','));\n    });\n    this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n    const tooltipElem = this.tooltipElem_;\n    const value = this.value.rawValue[this.cursor_.rawValue];\n    if (value === undefined) {\n      tooltipElem.classList.remove(cn$1('t', 'a'));\n      return;\n    }\n    const tx = mapRange(this.cursor_.rawValue, 0, maxIndex, 0, bounds.width);\n    const ty = mapRange(value, min, max, bounds.height, 0);\n    tooltipElem.style.left = `${tx}px`;\n    tooltipElem.style.top = `${ty}px`;\n    tooltipElem.textContent = `${this.formatter_(value)}`;\n    if (!tooltipElem.classList.contains(cn$1('t', 'a'))) {\n      tooltipElem.classList.add(cn$1('t', 'a'), cn$1('t', 'in'));\n      forceReflow(tooltipElem);\n      tooltipElem.classList.remove(cn$1('t', 'in'));\n    }\n  }\n  onValueUpdate_() {\n    this.update_();\n  }\n  onCursorChange_() {\n    this.update_();\n  }\n}\nclass GraphLogController {\n  constructor(doc, config) {\n    this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n    this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n    this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n    this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n    this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n    this.props = config.props;\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.cursor_ = createValue(-1);\n    this.view = new GraphLogView(doc, {\n      cursor: this.cursor_,\n      formatter: config.formatter,\n      rows: config.rows,\n      props: this.props,\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    if (!supportsTouch(doc)) {\n      this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n      this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n    } else {\n      const ph = new PointerHandler(this.view.element);\n      ph.emitter.on('down', this.onGraphPointerDown_);\n      ph.emitter.on('move', this.onGraphPointerMove_);\n      ph.emitter.on('up', this.onGraphPointerUp_);\n    }\n  }\n  importProps(state) {\n    return importBladeState(state, null, p => ({\n      max: p.required.number,\n      min: p.required.number\n    }), result => {\n      this.props.set('max', result.max);\n      this.props.set('min', result.min);\n      return true;\n    });\n  }\n  exportProps() {\n    return exportBladeState(null, {\n      max: this.props.get('max'),\n      min: this.props.get('min')\n    });\n  }\n  onGraphMouseLeave_() {\n    this.cursor_.rawValue = -1;\n  }\n  onGraphMouseMove_(ev) {\n    const bounds = this.view.element.getBoundingClientRect();\n    this.cursor_.rawValue = Math.floor(mapRange(ev.offsetX, 0, bounds.width, 0, this.value.rawValue.length));\n  }\n  onGraphPointerDown_(ev) {\n    this.onGraphPointerMove_(ev);\n  }\n  onGraphPointerMove_(ev) {\n    if (!ev.data.point) {\n      this.cursor_.rawValue = -1;\n      return;\n    }\n    this.cursor_.rawValue = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n  }\n  onGraphPointerUp_() {\n    this.cursor_.rawValue = -1;\n  }\n}\nfunction createFormatter(params) {\n  return !isEmpty(params.format) ? params.format : createNumberFormatter(2);\n}\nfunction createTextMonitor(args) {\n  var _a;\n  if (args.value.rawValue.length === 1) {\n    return new SingleLogController(args.document, {\n      formatter: createFormatter(args.params),\n      value: args.value,\n      viewProps: args.viewProps\n    });\n  }\n  return new MultiLogController(args.document, {\n    formatter: createFormatter(args.params),\n    rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n    value: args.value,\n    viewProps: args.viewProps\n  });\n}\nfunction createGraphMonitor(args) {\n  var _a, _b, _c;\n  return new GraphLogController(args.document, {\n    formatter: createFormatter(args.params),\n    rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n    props: ValueMap.fromObject({\n      max: (_b = args.params.max) !== null && _b !== void 0 ? _b : 100,\n      min: (_c = args.params.min) !== null && _c !== void 0 ? _c : 0\n    }),\n    value: args.value,\n    viewProps: args.viewProps\n  });\n}\nfunction shouldShowGraph(params) {\n  return params.view === 'graph';\n}\nconst NumberMonitorPlugin = createPlugin({\n  id: 'monitor-number',\n  type: 'monitor',\n  accept: (value, params) => {\n    if (typeof value !== 'number') {\n      return null;\n    }\n    const result = parseRecord(params, p => ({\n      format: p.optional.function,\n      max: p.optional.number,\n      min: p.optional.number,\n      readonly: p.required.constant(true),\n      rows: p.optional.number,\n      view: p.optional.string\n    }));\n    return result ? {\n      initialValue: value,\n      params: result\n    } : null;\n  },\n  binding: {\n    defaultBufferSize: params => shouldShowGraph(params) ? 64 : 1,\n    reader: _args => numberFromUnknown\n  },\n  controller: args => {\n    if (shouldShowGraph(args.params)) {\n      return createGraphMonitor(args);\n    }\n    return createTextMonitor(args);\n  },\n  api: args => {\n    if (args.controller.valueController instanceof GraphLogController) {\n      return new GraphLogMonitorBindingApi(args.controller);\n    }\n    return null;\n  }\n});\nconst StringMonitorPlugin = createPlugin({\n  id: 'monitor-string',\n  type: 'monitor',\n  accept: (value, params) => {\n    if (typeof value !== 'string') {\n      return null;\n    }\n    const result = parseRecord(params, p => ({\n      multiline: p.optional.boolean,\n      readonly: p.required.constant(true),\n      rows: p.optional.number\n    }));\n    return result ? {\n      initialValue: value,\n      params: result\n    } : null;\n  },\n  binding: {\n    reader: _args => stringFromUnknown\n  },\n  controller: args => {\n    var _a;\n    const value = args.value;\n    const multiline = value.rawValue.length > 1 || args.params.multiline;\n    if (multiline) {\n      return new MultiLogController(args.document, {\n        formatter: formatString,\n        rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n        value: value,\n        viewProps: args.viewProps\n      });\n    }\n    return new SingleLogController(args.document, {\n      formatter: formatString,\n      value: value,\n      viewProps: args.viewProps\n    });\n  }\n});\nclass BladeApiCache {\n  constructor() {\n    this.map_ = new Map();\n  }\n  get(bc) {\n    var _a;\n    return (_a = this.map_.get(bc)) !== null && _a !== void 0 ? _a : null;\n  }\n  has(bc) {\n    return this.map_.has(bc);\n  }\n  add(bc, api) {\n    this.map_.set(bc, api);\n    bc.viewProps.handleDispose(() => {\n      this.map_.delete(bc);\n    });\n    return api;\n  }\n}\nclass ReadWriteBinding {\n  constructor(config) {\n    this.target = config.target;\n    this.reader_ = config.reader;\n    this.writer_ = config.writer;\n  }\n  read() {\n    return this.reader_(this.target.read());\n  }\n  write(value) {\n    this.writer_(this.target, value);\n  }\n  inject(value) {\n    this.write(this.reader_(value));\n  }\n}\nfunction createInputBindingController(plugin, args) {\n  var _a;\n  const result = plugin.accept(args.target.read(), args.params);\n  if (isEmpty(result)) {\n    return null;\n  }\n  const valueArgs = {\n    target: args.target,\n    initialValue: result.initialValue,\n    params: result.params\n  };\n  const params = parseRecord(args.params, p => ({\n    disabled: p.optional.boolean,\n    hidden: p.optional.boolean,\n    label: p.optional.string,\n    tag: p.optional.string\n  }));\n  const reader = plugin.binding.reader(valueArgs);\n  const constraint = plugin.binding.constraint ? plugin.binding.constraint(valueArgs) : undefined;\n  const binding = new ReadWriteBinding({\n    reader: reader,\n    target: args.target,\n    writer: plugin.binding.writer(valueArgs)\n  });\n  const value = new InputBindingValue(createValue(reader(result.initialValue), {\n    constraint: constraint,\n    equals: plugin.binding.equals\n  }), binding);\n  const controller = plugin.controller({\n    constraint: constraint,\n    document: args.document,\n    initialValue: result.initialValue,\n    params: result.params,\n    value: value,\n    viewProps: ViewProps.create({\n      disabled: params === null || params === void 0 ? void 0 : params.disabled,\n      hidden: params === null || params === void 0 ? void 0 : params.hidden\n    })\n  });\n  return new InputBindingController(args.document, {\n    blade: createBlade(),\n    props: ValueMap.fromObject({\n      label: 'label' in args.params ? (_a = params === null || params === void 0 ? void 0 : params.label) !== null && _a !== void 0 ? _a : null : args.target.key\n    }),\n    tag: params === null || params === void 0 ? void 0 : params.tag,\n    value: value,\n    valueController: controller\n  });\n}\nclass ReadonlyBinding {\n  constructor(config) {\n    this.target = config.target;\n    this.reader_ = config.reader;\n  }\n  read() {\n    return this.reader_(this.target.read());\n  }\n}\nfunction createTicker(document, interval) {\n  return interval === 0 ? new ManualTicker() : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n}\nfunction createMonitorBindingController(plugin, args) {\n  var _a, _b, _c;\n  const result = plugin.accept(args.target.read(), args.params);\n  if (isEmpty(result)) {\n    return null;\n  }\n  const bindingArgs = {\n    target: args.target,\n    initialValue: result.initialValue,\n    params: result.params\n  };\n  const params = parseRecord(args.params, p => ({\n    bufferSize: p.optional.number,\n    disabled: p.optional.boolean,\n    hidden: p.optional.boolean,\n    interval: p.optional.number,\n    label: p.optional.string\n  }));\n  const reader = plugin.binding.reader(bindingArgs);\n  const bufferSize = (_b = (_a = params === null || params === void 0 ? void 0 : params.bufferSize) !== null && _a !== void 0 ? _a : plugin.binding.defaultBufferSize && plugin.binding.defaultBufferSize(result.params)) !== null && _b !== void 0 ? _b : 1;\n  const value = new MonitorBindingValue({\n    binding: new ReadonlyBinding({\n      reader: reader,\n      target: args.target\n    }),\n    bufferSize: bufferSize,\n    ticker: createTicker(args.document, params === null || params === void 0 ? void 0 : params.interval)\n  });\n  const controller = plugin.controller({\n    document: args.document,\n    params: result.params,\n    value: value,\n    viewProps: ViewProps.create({\n      disabled: params === null || params === void 0 ? void 0 : params.disabled,\n      hidden: params === null || params === void 0 ? void 0 : params.hidden\n    })\n  });\n  controller.viewProps.bindDisabled(value.ticker);\n  controller.viewProps.handleDispose(() => {\n    value.ticker.dispose();\n  });\n  return new MonitorBindingController(args.document, {\n    blade: createBlade(),\n    props: ValueMap.fromObject({\n      label: 'label' in args.params ? (_c = params === null || params === void 0 ? void 0 : params.label) !== null && _c !== void 0 ? _c : null : args.target.key\n    }),\n    value: value,\n    valueController: controller\n  });\n}\nclass PluginPool {\n  constructor(apiCache) {\n    this.pluginsMap_ = {\n      blades: [],\n      inputs: [],\n      monitors: []\n    };\n    this.apiCache_ = apiCache;\n  }\n  getAll() {\n    return [...this.pluginsMap_.blades, ...this.pluginsMap_.inputs, ...this.pluginsMap_.monitors];\n  }\n  register(bundleId, r) {\n    if (!isCompatible(r.core)) {\n      throw TpError.notCompatible(bundleId, r.id);\n    }\n    if (r.type === 'blade') {\n      this.pluginsMap_.blades.unshift(r);\n    } else if (r.type === 'input') {\n      this.pluginsMap_.inputs.unshift(r);\n    } else if (r.type === 'monitor') {\n      this.pluginsMap_.monitors.unshift(r);\n    }\n  }\n  createInput_(document, target, params) {\n    return this.pluginsMap_.inputs.reduce((result, plugin) => result !== null && result !== void 0 ? result : createInputBindingController(plugin, {\n      document: document,\n      target: target,\n      params: params\n    }), null);\n  }\n  createMonitor_(document, target, params) {\n    return this.pluginsMap_.monitors.reduce((result, plugin) => result !== null && result !== void 0 ? result : createMonitorBindingController(plugin, {\n      document: document,\n      params: params,\n      target: target\n    }), null);\n  }\n  createBinding(doc, target, params) {\n    const initialValue = target.read();\n    if (isEmpty(initialValue)) {\n      throw new TpError({\n        context: {\n          key: target.key\n        },\n        type: 'nomatchingcontroller'\n      });\n    }\n    const ic = this.createInput_(doc, target, params);\n    if (ic) {\n      return ic;\n    }\n    const mc = this.createMonitor_(doc, target, params);\n    if (mc) {\n      return mc;\n    }\n    throw new TpError({\n      context: {\n        key: target.key\n      },\n      type: 'nomatchingcontroller'\n    });\n  }\n  createBlade(document, params) {\n    const bc = this.pluginsMap_.blades.reduce((result, plugin) => result !== null && result !== void 0 ? result : createBladeController(plugin, {\n      document: document,\n      params: params\n    }), null);\n    if (!bc) {\n      throw new TpError({\n        type: 'nomatchingview',\n        context: {\n          params: params\n        }\n      });\n    }\n    return bc;\n  }\n  createInputBindingApi_(bc) {\n    const api = this.pluginsMap_.inputs.reduce((result, plugin) => {\n      var _a, _b;\n      if (result) {\n        return result;\n      }\n      return (_b = (_a = plugin.api) === null || _a === void 0 ? void 0 : _a.call(plugin, {\n        controller: bc\n      })) !== null && _b !== void 0 ? _b : null;\n    }, null);\n    return this.apiCache_.add(bc, api !== null && api !== void 0 ? api : new BindingApi(bc));\n  }\n  createMonitorBindingApi_(bc) {\n    const api = this.pluginsMap_.monitors.reduce((result, plugin) => {\n      var _a, _b;\n      if (result) {\n        return result;\n      }\n      return (_b = (_a = plugin.api) === null || _a === void 0 ? void 0 : _a.call(plugin, {\n        controller: bc\n      })) !== null && _b !== void 0 ? _b : null;\n    }, null);\n    return this.apiCache_.add(bc, api !== null && api !== void 0 ? api : new BindingApi(bc));\n  }\n  createBindingApi(bc) {\n    if (this.apiCache_.has(bc)) {\n      return this.apiCache_.get(bc);\n    }\n    if (isInputBindingController(bc)) {\n      return this.createInputBindingApi_(bc);\n    }\n    if (isMonitorBindingController(bc)) {\n      return this.createMonitorBindingApi_(bc);\n    }\n    throw TpError.shouldNeverHappen();\n  }\n  createApi(bc) {\n    if (this.apiCache_.has(bc)) {\n      return this.apiCache_.get(bc);\n    }\n    if (isBindingController(bc)) {\n      return this.createBindingApi(bc);\n    }\n    const api = this.pluginsMap_.blades.reduce((result, plugin) => result !== null && result !== void 0 ? result : plugin.api({\n      controller: bc,\n      pool: this\n    }), null);\n    if (!api) {\n      throw TpError.shouldNeverHappen();\n    }\n    return this.apiCache_.add(bc, api);\n  }\n}\nconst sharedCache = new BladeApiCache();\nfunction createDefaultPluginPool() {\n  const pool = new PluginPool(sharedCache);\n  [Point2dInputPlugin, Point3dInputPlugin, Point4dInputPlugin, StringInputPlugin, NumberInputPlugin, StringColorInputPlugin, ObjectColorInputPlugin, NumberColorInputPlugin, BooleanInputPlugin, BooleanMonitorPlugin, StringMonitorPlugin, NumberMonitorPlugin, ButtonBladePlugin, FolderBladePlugin, TabBladePlugin].forEach(p => {\n    pool.register('core', p);\n  });\n  return pool;\n}\nclass ListBladeApi extends BladeApi {\n  /**\n   * @hidden\n   */\n  constructor(controller) {\n    super(controller);\n    this.emitter_ = new Emitter();\n    this.controller.value.emitter.on('change', ev => {\n      this.emitter_.emit('change', new TpChangeEvent(this, ev.rawValue));\n    });\n  }\n  get label() {\n    return this.controller.labelController.props.get('label');\n  }\n  set label(label) {\n    this.controller.labelController.props.set('label', label);\n  }\n  get options() {\n    return this.controller.valueController.props.get('options');\n  }\n  set options(options) {\n    this.controller.valueController.props.set('options', options);\n  }\n  get value() {\n    return this.controller.value.rawValue;\n  }\n  set value(value) {\n    this.controller.value.rawValue = value;\n  }\n  on(eventName, handler) {\n    const bh = handler.bind(this);\n    this.emitter_.on(eventName, ev => {\n      bh(ev);\n    });\n    return this;\n  }\n}\nclass SeparatorBladeApi extends BladeApi {}\nclass SliderBladeApi extends BladeApi {\n  /**\n   * @hidden\n   */\n  constructor(controller) {\n    super(controller);\n    this.emitter_ = new Emitter();\n    this.controller.value.emitter.on('change', ev => {\n      this.emitter_.emit('change', new TpChangeEvent(this, ev.rawValue));\n    });\n  }\n  get label() {\n    return this.controller.labelController.props.get('label');\n  }\n  set label(label) {\n    this.controller.labelController.props.set('label', label);\n  }\n  get max() {\n    return this.controller.valueController.sliderController.props.get('max');\n  }\n  set max(max) {\n    this.controller.valueController.sliderController.props.set('max', max);\n  }\n  get min() {\n    return this.controller.valueController.sliderController.props.get('min');\n  }\n  set min(min) {\n    this.controller.valueController.sliderController.props.set('min', min);\n  }\n  get value() {\n    return this.controller.value.rawValue;\n  }\n  set value(value) {\n    this.controller.value.rawValue = value;\n  }\n  on(eventName, handler) {\n    const bh = handler.bind(this);\n    this.emitter_.on(eventName, ev => {\n      bh(ev);\n    });\n    return this;\n  }\n}\nclass TextBladeApi extends BladeApi {\n  /**\n   * @hidden\n   */\n  constructor(controller) {\n    super(controller);\n    this.emitter_ = new Emitter();\n    this.controller.value.emitter.on('change', ev => {\n      this.emitter_.emit('change', new TpChangeEvent(this, ev.rawValue));\n    });\n  }\n  get label() {\n    return this.controller.labelController.props.get('label');\n  }\n  set label(label) {\n    this.controller.labelController.props.set('label', label);\n  }\n  get formatter() {\n    return this.controller.valueController.props.get('formatter');\n  }\n  set formatter(formatter) {\n    this.controller.valueController.props.set('formatter', formatter);\n  }\n  get value() {\n    return this.controller.value.rawValue;\n  }\n  set value(value) {\n    this.controller.value.rawValue = value;\n  }\n  on(eventName, handler) {\n    const bh = handler.bind(this);\n    this.emitter_.on(eventName, ev => {\n      bh(ev);\n    });\n    return this;\n  }\n}\nconst ListBladePlugin = function () {\n  return {\n    id: 'list',\n    type: 'blade',\n    core: VERSION$1,\n    accept(params) {\n      const result = parseRecord(params, p => ({\n        options: p.required.custom(parseListOptions),\n        value: p.required.raw,\n        view: p.required.constant('list'),\n        label: p.optional.string\n      }));\n      return result ? {\n        params: result\n      } : null;\n    },\n    controller(args) {\n      const lc = new ListConstraint(normalizeListOptions(args.params.options));\n      const value = createValue(args.params.value, {\n        constraint: lc\n      });\n      const ic = new ListController(args.document, {\n        props: new ValueMap({\n          options: lc.values.value('options')\n        }),\n        value: value,\n        viewProps: args.viewProps\n      });\n      return new LabeledValueBladeController(args.document, {\n        blade: args.blade,\n        props: ValueMap.fromObject({\n          label: args.params.label\n        }),\n        value: value,\n        valueController: ic\n      });\n    },\n    api(args) {\n      if (!(args.controller instanceof LabeledValueBladeController)) {\n        return null;\n      }\n      if (!(args.controller.valueController instanceof ListController)) {\n        return null;\n      }\n      return new ListBladeApi(args.controller);\n    }\n  };\n}();\nclass RootApi extends FolderApi {\n  /**\n   * @hidden\n   */\n  constructor(controller, pool) {\n    super(controller, pool);\n  }\n  get element() {\n    return this.controller.view.element;\n  }\n}\n\n/**\n * @hidden\n */\nclass RootController extends FolderController {\n  constructor(doc, config) {\n    super(doc, {\n      expanded: config.expanded,\n      blade: config.blade,\n      props: config.props,\n      root: true,\n      viewProps: config.viewProps\n    });\n  }\n}\nconst cn = ClassName('spr');\n/**\n * @hidden\n */\nclass SeparatorView {\n  constructor(doc, config) {\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn());\n    config.viewProps.bindClassModifiers(this.element);\n    const hrElem = doc.createElement('hr');\n    hrElem.classList.add(cn('r'));\n    this.element.appendChild(hrElem);\n  }\n}\n\n/**\n * @hidden\n */\nclass SeparatorController extends BladeController {\n  /**\n   * @hidden\n   */\n  constructor(doc, config) {\n    super(Object.assign(Object.assign({}, config), {\n      view: new SeparatorView(doc, {\n        viewProps: config.viewProps\n      })\n    }));\n  }\n}\nconst SeparatorBladePlugin = {\n  id: 'separator',\n  type: 'blade',\n  core: VERSION$1,\n  accept(params) {\n    const result = parseRecord(params, p => ({\n      view: p.required.constant('separator')\n    }));\n    return result ? {\n      params: result\n    } : null;\n  },\n  controller(args) {\n    return new SeparatorController(args.document, {\n      blade: args.blade,\n      viewProps: args.viewProps\n    });\n  },\n  api(args) {\n    if (!(args.controller instanceof SeparatorController)) {\n      return null;\n    }\n    return new SeparatorBladeApi(args.controller);\n  }\n};\nconst SliderBladePlugin = {\n  id: 'slider',\n  type: 'blade',\n  core: VERSION$1,\n  accept(params) {\n    const result = parseRecord(params, p => ({\n      max: p.required.number,\n      min: p.required.number,\n      view: p.required.constant('slider'),\n      format: p.optional.function,\n      label: p.optional.string,\n      value: p.optional.number\n    }));\n    return result ? {\n      params: result\n    } : null;\n  },\n  controller(args) {\n    var _a, _b;\n    const initialValue = (_a = args.params.value) !== null && _a !== void 0 ? _a : 0;\n    const drc = new DefiniteRangeConstraint({\n      max: args.params.max,\n      min: args.params.min\n    });\n    const v = createValue(initialValue, {\n      constraint: drc\n    });\n    const vc = new SliderTextController(args.document, Object.assign(Object.assign({}, createSliderTextProps({\n      formatter: (_b = args.params.format) !== null && _b !== void 0 ? _b : numberToString,\n      keyScale: createValue(1),\n      max: drc.values.value('max'),\n      min: drc.values.value('min'),\n      pointerScale: getSuitablePointerScale(args.params, initialValue)\n    })), {\n      parser: parseNumber,\n      value: v,\n      viewProps: args.viewProps\n    }));\n    return new LabeledValueBladeController(args.document, {\n      blade: args.blade,\n      props: ValueMap.fromObject({\n        label: args.params.label\n      }),\n      value: v,\n      valueController: vc\n    });\n  },\n  api(args) {\n    if (!(args.controller instanceof LabeledValueBladeController)) {\n      return null;\n    }\n    if (!(args.controller.valueController instanceof SliderTextController)) {\n      return null;\n    }\n    return new SliderBladeApi(args.controller);\n  }\n};\nconst TextBladePlugin = function () {\n  return {\n    id: 'text',\n    type: 'blade',\n    core: VERSION$1,\n    accept(params) {\n      const result = parseRecord(params, p => ({\n        parse: p.required.function,\n        value: p.required.raw,\n        view: p.required.constant('text'),\n        format: p.optional.function,\n        label: p.optional.string\n      }));\n      return result ? {\n        params: result\n      } : null;\n    },\n    controller(args) {\n      var _a;\n      const v = createValue(args.params.value);\n      const ic = new TextController(args.document, {\n        parser: args.params.parse,\n        props: ValueMap.fromObject({\n          formatter: (_a = args.params.format) !== null && _a !== void 0 ? _a : v => String(v)\n        }),\n        value: v,\n        viewProps: args.viewProps\n      });\n      return new LabeledValueBladeController(args.document, {\n        blade: args.blade,\n        props: ValueMap.fromObject({\n          label: args.params.label\n        }),\n        value: v,\n        valueController: ic\n      });\n    },\n    api(args) {\n      if (!(args.controller instanceof LabeledValueBladeController)) {\n        return null;\n      }\n      if (!(args.controller.valueController instanceof TextController)) {\n        return null;\n      }\n      return new TextBladeApi(args.controller);\n    }\n  };\n}();\nfunction createDefaultWrapperElement(doc) {\n  const elem = doc.createElement('div');\n  elem.classList.add(ClassName('dfw')());\n  if (doc.body) {\n    doc.body.appendChild(elem);\n  }\n  return elem;\n}\nfunction embedStyle(doc, id, css) {\n  if (doc.querySelector(`style[data-tp-style=${id}]`)) {\n    return;\n  }\n  const styleElem = doc.createElement('style');\n  styleElem.dataset.tpStyle = id;\n  styleElem.textContent = css;\n  doc.head.appendChild(styleElem);\n}\n/**\n * The root pane of Tweakpane.\n */\nclass Pane extends RootApi {\n  constructor(opt_config) {\n    var _a, _b;\n    const config = opt_config !== null && opt_config !== void 0 ? opt_config : {};\n    const doc = (_a = config.document) !== null && _a !== void 0 ? _a : getWindowDocument();\n    const pool = createDefaultPluginPool();\n    const rootController = new RootController(doc, {\n      expanded: config.expanded,\n      blade: createBlade(),\n      props: ValueMap.fromObject({\n        title: config.title\n      }),\n      viewProps: ViewProps.create()\n    });\n    super(rootController, pool);\n    this.pool_ = pool;\n    this.containerElem_ = (_b = config.container) !== null && _b !== void 0 ? _b : createDefaultWrapperElement(doc);\n    this.containerElem_.appendChild(this.element);\n    this.doc_ = doc;\n    this.usesDefaultWrapper_ = !config.container;\n    this.setUpDefaultPlugins_();\n  }\n  get document() {\n    if (!this.doc_) {\n      throw TpError.alreadyDisposed();\n    }\n    return this.doc_;\n  }\n  dispose() {\n    const containerElem = this.containerElem_;\n    if (!containerElem) {\n      throw TpError.alreadyDisposed();\n    }\n    if (this.usesDefaultWrapper_) {\n      const parentElem = containerElem.parentElement;\n      if (parentElem) {\n        parentElem.removeChild(containerElem);\n      }\n    }\n    this.containerElem_ = null;\n    this.doc_ = null;\n    super.dispose();\n  }\n  registerPlugin(bundle) {\n    if (bundle.css) {\n      embedStyle(this.document, `plugin-${bundle.id}`, bundle.css);\n    }\n    const plugins = 'plugin' in bundle ? [bundle.plugin] : 'plugins' in bundle ? bundle.plugins : [];\n    plugins.forEach(p => {\n      this.pool_.register(bundle.id, p);\n    });\n  }\n  setUpDefaultPlugins_() {\n    this.registerPlugin({\n      id: 'default',\n      // NOTE: This string literal will be replaced with the default CSS by Rollup at the compilation time\n      css: '.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1 * var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(\t\t2px * 2 + var(--cnt-usz) + var(--cnt-hp)\t);position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:\"\";display:block;height:6px;right:calc(\t\tvar(--cnt-hp) + (\t\t\t\tvar(--cnt-usz) + 4px - 6px\t\t\t) / 2 - 2px\t);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1 * var(--cnt-hp));right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(\t\t\tvar(--cnt-vp) + 2px\t\t);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:\"\";height:2px;left:calc(-1 * var(--cnt-hp));position:absolute;right:calc(-1 * var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);bottom:0;content:\"\";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz) * 3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1 * var(--cnt-hp));right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:\"\";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:\"\";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:\"\";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:\"\";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(\t\t\tvar(--bld-hp) - 5px\t\t);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:\"\";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(\t\t\t2px * 2 + var(--cnt-usz) + var(--cnt-hp)\t\t);text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1 * var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1 * var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',\n      plugins: [ListBladePlugin, SeparatorBladePlugin, SliderBladePlugin, TabBladePlugin, TextBladePlugin]\n    });\n  }\n}\nconst VERSION = new Semver('4.0.1');\nexport { BladeApi, ButtonApi, FolderApi, ListBladeApi, ListInputBindingApi, Pane, Semver, SeparatorBladeApi, SliderBladeApi, SliderInputBindingApi, TabApi, TabPageApi, TextBladeApi, TpChangeEvent, VERSION };","map":{"version":3,"names":["forceCast","v","isEmpty","value","undefined","isObject$1","isRecord","deepEqualsArray","a1","a2","length","i","deepMerge","r1","r2","keys","Array","from","Set","Object","reduce","result","key","v1","v2","assign","isBinding","CREATE_MESSAGE_MAP","alreadydisposed","invalidparams","context","name","nomatchingcontroller","nomatchingview","JSON","stringify","params","notbindable","notcompatible","id","propertynotfound","shouldneverhappen","TpError","alreadyDisposed","type","notBindable","notCompatible","bundleId","propertyNotFound","shouldNeverHappen","constructor","config","_a","message","stack","Error","toString","BindingTarget","obj","obj_","isBindable","read","write","writeProperty","valueObj","Emitter","observers_","on","eventName","handler","observers","push","off","filter","observer","emit","event","forEach","ComplexValue","initialValue","constraint_","constraint","equals_","equals","emitter","rawValue_","rawValue","setRawValue","forceEmit","last","options","opts","constrainedValue","constrain","prevValue","changed","sender","previousRawValue","PrimitiveValue","value_","ReadonlyPrimitiveValue","onValueBeforeChange_","bind","onValueChange_","ev","createValue","createReadonlyValue","ValueMap","valueMap","valMap_","createCore","o","fromObject","core","get","set","DefiniteRangeConstraint","values","max","min","Math","RangeConstraint","StepConstraint","step","origin","r","round","NumberLiteralNode","text","evaluate","Number","BINARY_OPERATION_MAP","**","pow","*","/","%","+","-","<<",">>",">>>","&","^","|","BinaryOperationNode","operator","left","right","op","join","UNARY_OPERATION_MAP","UnaryOperationNode","expr","expression","combineReader","parsers","cursor","readWhitespace","m","substr","match","readNonZeroDigit","ch","readDecimalDigits","readSignedInteger","ds","sign","sds","readExponentPart","e","toLowerCase","si","readDecimalIntegerLiteral","nzd","readDecimalLiteral1","dil","dot","dds","readDecimalLiteral2","readDecimalLiteral3","readDecimalLiteral","parseBinaryDigits","readBinaryIntegerLiteral","prefix","bds","readOctalDigits","readOctalIntegerLiteral","ods","readHexDigits","readHexIntegerLiteral","hds","readNonDecimalIntegerLiteral","readNumericLiteral","parseLiteral","num","evaluable","parseParenthesizedExpression","parseExpression","cl","parsePrimaryExpression","parseUnaryExpression","readBinaryOperator","ops","startsWith","createBinaryOperationExpressionParser","exprParser","firstExpr","nextExpr","parseBinaryOperationExpression","parser","parseEcmaNumberExpression","parseNumber","numberFromUnknown","pv","numberToString","String","createNumberFormatter","digits","toFixed","mapRange","start1","end1","start2","end2","p","getDecimalDigits","frac","split","replace","constrainRange","loopRange","getSuitableDecimalDigits","getSuitableKeyScale","getSuitablePointerScale","base","abs","floor","log10","createStepConstraint","createRangeConstraint","createNumberTextPropsObject","_b","_c","formatter","format","keyScale","pointerScale","createNumberTextInputParamsParser","optional","function","number","createPointAxis","textProps","BladeApi","controller","element","view","disabled","viewProps","hidden","dispose","importState","state","exportState","TpEvent","target","TpChangeEvent","TpFoldEvent","expanded","TpTabSelectEvent","index","BindingApi","emitter_","label","labelController","props","binding","tag","bh","refresh","fetch","InputBindingValue","isInputBindingValue","b","parseObject","keyToParserMap","tmp","succeeded","parseArray","parseItem","item","isObject","createMicroParserBuilder","parse","createMicroParserBuilders","custom","boolean","string","constant","raw","object","array","itemParser","isArray","MicroParsers","required","parseRecord","map","importBladeState","superImport","callback","exportBladeState","superExport","thisState","isValueBladeController","bc","isBindingValue","SVG_NS","forceReflow","offsetHeight","disableTransitionTemporarily","t","style","transition","supportsTouch","doc","ontouchstart","getGlobalObject","globalThis","getWindowDocument","globalObj","document","getCanvasContext","canvasElement","win","ownerDocument","defaultView","isBrowser","getContext","willReadFrequently","ICON_ID_TO_INNER_HTML_MAP","check","dropdown","p2dpad","createSvgIconElement","iconId","elem","createElementNS","innerHTML","insertElementAt","parentElement","insertBefore","children","removeElement","removeChild","removeChildElements","removeChildNodes","childNodes","findNextTarget","relatedTarget","explicitOriginalTarget","bindValue","applyValue","bindValueMap","PREFIX","ClassName","viewName","fn","opt_elementName","opt_modifier","cn$r","createLabelNode","frag","createDocumentFragment","lineNodes","line","createTextNode","lineNode","appendChild","createElement","LabelView","classList","add","bindClassModifiers","labelElem","remove","labelElement","valueElem","valueElement","LabelController","valueController","importProps","exportProps","getAllBladePositions","cn$q","POS_TO_CLASS_NAME_MAP","veryfirst","first","verylast","BladeController","parent_","blade","pos","handleDispose","parent","LabeledValueBladeController","lc","s","call","excludeValue","BindingController","_s","isBindingController","InputBindingController","inject","isInputBindingController","fillBuffer","buffer","bufferSize","initializeBuffer","createTrimmedBuffer","indexOf","slice","createPushedBuffer","newValue","newBuffer","splice","MonitorBindingValue","onTick_","ticker","isMonitorBindingValue","MonitorBindingController","readonly","isMonitorBindingController","ButtonApi","title","buttonController","applyClass","className","active","valueToClassName","bindValueToTextContent","textContent","cn$p","ButtonView","buttonElem","bindDisabled","buttonElement","titleElem","ButtonController","onClick_","addEventListener","ButtonBladeController","buttonProps","labelProps","Semver","prerelease","coreComps","major","parseInt","minor","patch","VERSION$1","createPlugin","plugin","ButtonBladePlugin","accept","args","api","addButtonAsBlade","addBlade","addFolderAsBlade","addTabAsBlade","isRefreshable","createBindingTarget","RackApi","pool","onRackValueChange_","controller_","pool_","rack","createApi","addBinding","opt_params","createBinding","createBindingApi","addFolder","addButton","addTab","opt_index","createBlade","c","bladeController","ContainerBladeApi","rackApi_","rackController","ContainerBladeController","every","isContainerBladeController","NestedOrderedSet","extract","items_","cache_","onSubListAdd_","onSubListRemove_","extract_","items","allItems","find","includes","has","subList","root","delete","findValueBladeController","bcs","findSubBladeControllerSet","Rack","onBladePositionsChange_","onSetAdd_","onSetRemove_","onChildDispose_","onChildPositionsChange_","onChildValueChange_","onChildViewPropsChange_","onRackLayout_","blade_","bcSet_","finder","updatePositions_","visibleItems","firstVisibleItem","lastVisibleItem","ps","_ev","disposedUcs","_","RackController","onRackAdd_","onRackRemove_","positions","Foldable","create","coreObj","completed","expandedHeight","shouldFixHeight","temporaryExpanded","styleExpanded","styleHeight","exHeight","bindExpandedClass","expandedClassName","onExpand","cleanUpTransition","computeExpandedFolderHeight","folder","containerElement","height","clientHeight","applyHeight","foldable","bindFoldable","h","propertyName","FolderApi","bladeContainerClassName","FolderView","className_","foldable_","indentElem","titleElement","markElem","containerElem","FolderController","onTitleClick_","FolderBladePlugin","cn$o","valueToModifier","modifier","ViewProps","onDisabledChange_","onParentChange_","onParentGlobalDisabledChange_","globalDisabled_","setGlobalDisabled_","getGlobalDisabled_","globalDisabled","opt_initialValue","disposed","bindTabIndex","tabIndex","parentDisabled","updateGlobalDisabled_","prevParent","cn$n","TabPageView","cn$m","TabItemView","selected","TabItemController","TabPageController","onItemClick_","ic_","itemProps","itemController","TabApi","onSelect_","tab","selectedIndex","pages","addPage","pc","papi","removePage","TabPageApi","INDEX_NOT_SELECTED","Tab","onItemSelectedChange_","empty","keepSelection_","firstSelIndex","findIndex","cn$l","TabView","itemsElement","contentsElem","contentsElement","TabController","TabBladePlugin","createBladeController","ac","ListInputBindingApi","ManualTicker","tick","IntervalTicker","interval","disabled_","timerId_","doc_","interval_","setTimer_","inactive","clearTimer_","clearInterval","setInterval","CompositeConstraint","constraints","findConstraint","constraintClass","tmpResult","sc","ListConstraint","matched","parseListOptions","normalizeListOptions","createListConstraint","cn$k","ListView","props_","selectElem","selectElement","optionElem","update_","ListController","onSelectChange_","currentTarget","cn$j","PopupView","shows","PopupController","cn$i","TextView","onChange_","inputElem","inputElement","TextController","onInputChange_","parser_","parsedValue","boolToString","boolFromUnknown","BooleanFormatter","composeParsers","innerFormatter","formatPercentage","stringFromUnknown","formatString","connectValues","primary","secondary","forward","backward","changing","preventFeedback","getStepForKey","altKey","shiftKey","upKey","downKey","getVerticalStepKeys","getHorizontalStepKeys","isVerticalArrowKey","isArrowKey","computeOffset$1","rect","getBoundingClientRect","x","pageX","scrollX","y","pageY","scrollY","top","PointerHandler","lastTouch_","onDocumentMouseMove_","onDocumentMouseUp_","onMouseDown_","onTouchEnd_","onTouchMove_","onTouchStart_","elem_","passive","computePosition_","offset","bounds","width","point","preventDefault","focus","data","removeEventListener","touch","targetTouches","clientX","clientY","cn$h","NumberTextView","arrayPosition","onDraggingChange_","dragging_","dragging","knobElem","knobElement","guideElem","bodyElem","guideBodyElem_","headElem","guideHeadElem_","tooltipElem","tooltipElem_","aox","adx","setAttributeNS","NumberTextController","originRawValue_","onInputKeyDown_","onInputKeyUp_","onPointerDown_","onPointerMove_","onPointerUp_","sliderProps_","sliderProps","ph","constrainValue_","computeDraggingValue_","dx","cn$g","SliderView","trackElem","trackElement","SliderController","onKeyDown_","onKeyUp_","onPointerDownOrMove_","ptHandler_","handlePointerEvent_","d","cn$f","SliderTextView","sliderElem","sliderView_","sliderView","textElem","textView_","textView","SliderTextController","sliderC_","textC_","sliderController","textController","createSliderTextProps","CSS_VAR_MAP","containerUnitSize","getCssVar","createPointDimensionParser","parsePointDimensionParams","createDimensionConstraint","cs","rs","isCompatible","ver","parsePickerLayout","writePrimitive","cn$e","CheckboxView","wrapperElem","checked","CheckboxController","createConstraint$6","BooleanInputPlugin","reader","_args","writer","cn$d","ColorView","swatchElem","swatchElement","textElement","pickerLayout","pickerElem","pickerElement","rgbToHslInt","g","rp","gp","bp","cmax","cmin","l","hslToRgbInt","hp","sp","lp","rgbToHsvInt","hsvToRgbInt","vp","hslToHsvInt","sd","hsvToHslInt","removeAlphaComponent","comps","appendAlphaComponent","alpha","MODE_CONVERTER_MAP","hsl","hsv","rgb","getColorMaxComponents","mode","loopHueRange","hue","constrainColorComponents","components","ms","convertColorType","to","fms","tms","convertColor","intComps","IntColor","black","comps_","getComponents","opt_mode","toRgbaObject","rgbComps","a","cn$c","ColorPickerView","alphaViews_","hsvElem","svElem","svPaletteView_","svPaletteView","hElem","hPaletteView_","hPaletteView","rgbElem","textsView_","textsView","alphaViews","palette","aElem","apElem","atElem","allFocusableElements","elems","modeSelectElement","inputViews","parseColorType","parseColorInputParams","color","picker","getKeyScaleForColor","forAlpha","extractColorType","FloatColor","TYPE_TO_CONSTRUCTOR_MAP","int","float","createColor","isFloatColor","isIntColor","convertFloatToInt","cf","convertIntToFloat","ci","mapColorType","equalsStringColorFormat","f1","f2","notation","parseCssNumberOrPercentage","parseFloat","ANGLE_TO_DEG_MAP","deg","angle","grad","rad","PI","turn","parseCssNumberOrAngle","unit","parseFunctionalRgbColorComponents","isNaN","parseFunctionalRgbColor","parseFunctionalRgbaColorComponents","parseFunctionalRgbaColor","parseFunctionalHslColorComponents","parseFunctionalHslColor","parseHslaColorComponents","parseFunctionalHslaColor","parseHexRgbColorComponents","mRgb","mRrggbb","parseHexRgbColor","parseHexRgbaColorComponents","parseHexRgbaColor","parseObjectRgbColorComponents","createObjectRgbColorParser","parseObjectRgbaColorComponents","createObjectRgbaColorParser","PARSER_AND_RESULT","detectStringColor","prev","detection","detectStringColorFormat","createColorStringParser","readIntColorString","zerofill","comp","hex","colorToHexRgbString","hexes","colorToHexRgbaString","rgbaComps","colorToFunctionalRgbString","colorToFunctionalRgbaString","aFormatter","rgbFormatter","colorToFunctionalHslString","formatters","colorToFunctionalHslaString","colorToObjectRgbString","names","cc","createObjectRgbColorFormatter","colorToObjectRgbaString","createObjectRgbaColorFormatter","FORMAT_AND_STRINGIFIERS","stringifier","findColorStringifier","fas","cn$b","APaletteView","barElem","colorElem","colorElem_","markerElem","markerElem_","previewElem","previewElem_","leftColor","rightColor","gradientComps","background","backgroundColor","APaletteController","cn$a","createModeSelectElement","optElem","ColorTextsView","modeElem","modeElem_","modeMarkerElem","inputsElem","inputsElem_","inputViews_","applyInputViews_","compElem","createFormatter$2","createConstraint$5","createComponentController","colorType","colorMode","createComponentControllers","mc","pickedMode","createHexController","isColorMode","ColorTextsController","onModeSelectChange_","colorType_","ccs_","createComponentControllers_","cn$9","HPaletteView","HPaletteController","cn$8","CANVAS_RESOL","SvPaletteView","canvasElem","ctx","hsvComps","imgData","getImageData","iy","ix","putImageData","SvPaletteController","saturation","dv","ColorPickerController","hPaletteC_","svPaletteC_","alphaIcs_","supportsAlpha","textsC_","textsController","cn$7","ColorSwatchView","swatchElem_","ColorSwatchController","ColorController","onButtonBlur_","onButtonClick_","onPopupChildBlur_","onPopupChildKeydown_","swatchC_","popC_","pickerC","pickerC_","nextTarget","contains","colorToRgbNumber","colorToRgbaNumber","numberToRgbColor","numberToRgbaColor","colorFromRgbNumber","colorFromRgbaNumber","isRgbColorComponent","isRgbColorObject","isRgbaColorObject","isColorObject","equalsColor","comps1","comps2","createColorComponentsFromRgbObject","createColorStringWriter","createColorNumberWriter","colorToNumber","writeRgbaColorObject","writeRgbColorObject","createColorObjectWriter","inValue","shouldSupportAlpha$1","inputParams","createFormatter$1","isForColor","NumberColorInputPlugin","colorFromObject","shouldSupportAlpha","createColorObjectBindingReader","createColorObjectFormatter","ObjectColorInputPlugin","StringColorInputPlugin","PointNdConstraint","asm_","assembly","toComponents","fromComponents","cn$6","PointNdTextView","textViews","axisElem","createAxisController","axes","PointNdTextController","acs_","textControllers","SliderInputBindingApi","createConstraint$4","rc","NumberInputPlugin","textPropsObj","drc","Point2d","toObject","Point2dAssembly","cn$5","Point2dView","cn$4","Point2dPickerView","onFoldableChange_","onPropsChange_","layout","padElem","padElement","svgElem","svgElem_","xAxisElem","yAxisElem","lineElem","lineElem_","px","py","ipy","computeOffset","keyScales","invertsY","Point2dPickerController","onPadKeyDown_","onPadKeyUp_","dy","Point2dController","onPadButtonBlur_","onPadButtonClick_","padC","xKeyScale","yKeyScale","point2dFromUnknown","writePoint2d","createConstraint$3","getSuitableMaxDimensionValue","getSuitableMax","xr","yr","shouldInvertY","yParams","inverted","Point2dInputPlugin","dParams","Point3d","z","Point3dAssembly","point3dFromUnknown","writePoint3d","createConstraint$2","Point3dInputPlugin","Point4d","w","Point4dAssembly","point4dFromUnknown","writePoint4d","createConstraint$1","Point4dInputPlugin","createConstraint","StringInputPlugin","Constants","monitor","defaultInterval","defaultRows","cn$3","MultiLogView","onValueUpdate_","formatter_","textareaElem","rows","readOnly","textareaElem_","shouldScroll","scrollTop","scrollHeight","lines","MultiLogController","cn$2","SingleLogView","lastValue","SingleLogController","BooleanMonitorPlugin","GraphLogMonitorBindingApi","cn$1","GraphLogView","onCursorChange_","cursor_","graphElement","maxIndex","points","tx","ty","GraphLogController","onGraphMouseMove_","onGraphMouseLeave_","onGraphPointerDown_","onGraphPointerMove_","onGraphPointerUp_","offsetX","createFormatter","createTextMonitor","createGraphMonitor","shouldShowGraph","NumberMonitorPlugin","defaultBufferSize","StringMonitorPlugin","multiline","BladeApiCache","map_","Map","ReadWriteBinding","reader_","writer_","createInputBindingController","valueArgs","ReadonlyBinding","createTicker","createMonitorBindingController","bindingArgs","PluginPool","apiCache","pluginsMap_","blades","inputs","monitors","apiCache_","getAll","register","unshift","createInput_","createMonitor_","ic","createInputBindingApi_","createMonitorBindingApi_","sharedCache","createDefaultPluginPool","ListBladeApi","SeparatorBladeApi","SliderBladeApi","TextBladeApi","ListBladePlugin","RootApi","RootController","cn","SeparatorView","hrElem","SeparatorController","SeparatorBladePlugin","SliderBladePlugin","vc","TextBladePlugin","createDefaultWrapperElement","body","embedStyle","css","querySelector","styleElem","dataset","tpStyle","head","Pane","opt_config","rootController","containerElem_","container","usesDefaultWrapper_","setUpDefaultPlugins_","parentElem","registerPlugin","bundle","plugins","VERSION"],"sources":["/Users/noamsebahoun/Documents/MMI/MMI_3/karl/Three-Reader/node_modules/tweakpane/dist/tweakpane.js"],"sourcesContent":["/*! Tweakpane 4.0.1 (c) 2016 cocopon, licensed under the MIT license. */\nfunction forceCast(v) {\n    return v;\n}\nfunction isEmpty(value) {\n    return value === null || value === undefined;\n}\nfunction isObject$1(value) {\n    return value !== null && typeof value === 'object';\n}\nfunction isRecord(value) {\n    return value !== null && typeof value === 'object';\n}\nfunction deepEqualsArray(a1, a2) {\n    if (a1.length !== a2.length) {\n        return false;\n    }\n    for (let i = 0; i < a1.length; i++) {\n        if (a1[i] !== a2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction deepMerge(r1, r2) {\n    const keys = Array.from(new Set([...Object.keys(r1), ...Object.keys(r2)]));\n    return keys.reduce((result, key) => {\n        const v1 = r1[key];\n        const v2 = r2[key];\n        return isRecord(v1) && isRecord(v2)\n            ? Object.assign(Object.assign({}, result), { [key]: deepMerge(v1, v2) }) : Object.assign(Object.assign({}, result), { [key]: key in r2 ? v2 : v1 });\n    }, {});\n}\n\nfunction isBinding(value) {\n    if (!isObject$1(value)) {\n        return false;\n    }\n    return 'target' in value;\n}\n\nconst CREATE_MESSAGE_MAP = {\n    alreadydisposed: () => 'View has been already disposed',\n    invalidparams: (context) => `Invalid parameters for '${context.name}'`,\n    nomatchingcontroller: (context) => `No matching controller for '${context.key}'`,\n    nomatchingview: (context) => `No matching view for '${JSON.stringify(context.params)}'`,\n    notbindable: () => `Value is not bindable`,\n    notcompatible: (context) => `Not compatible with  plugin '${context.id}'`,\n    propertynotfound: (context) => `Property '${context.name}' not found`,\n    shouldneverhappen: () => 'This error should never happen',\n};\nclass TpError {\n    static alreadyDisposed() {\n        return new TpError({ type: 'alreadydisposed' });\n    }\n    static notBindable() {\n        return new TpError({\n            type: 'notbindable',\n        });\n    }\n    static notCompatible(bundleId, id) {\n        return new TpError({\n            type: 'notcompatible',\n            context: {\n                id: `${bundleId}.${id}`,\n            },\n        });\n    }\n    static propertyNotFound(name) {\n        return new TpError({\n            type: 'propertynotfound',\n            context: {\n                name: name,\n            },\n        });\n    }\n    static shouldNeverHappen() {\n        return new TpError({ type: 'shouldneverhappen' });\n    }\n    constructor(config) {\n        var _a;\n        this.message =\n            (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n        this.name = this.constructor.name;\n        this.stack = new Error(this.message).stack;\n        this.type = config.type;\n    }\n    toString() {\n        return this.message;\n    }\n}\n\nclass BindingTarget {\n    constructor(obj, key) {\n        this.obj_ = obj;\n        this.key = key;\n    }\n    static isBindable(obj) {\n        if (obj === null) {\n            return false;\n        }\n        if (typeof obj !== 'object' && typeof obj !== 'function') {\n            return false;\n        }\n        return true;\n    }\n    read() {\n        return this.obj_[this.key];\n    }\n    write(value) {\n        this.obj_[this.key] = value;\n    }\n    writeProperty(name, value) {\n        const valueObj = this.read();\n        if (!BindingTarget.isBindable(valueObj)) {\n            throw TpError.notBindable();\n        }\n        if (!(name in valueObj)) {\n            throw TpError.propertyNotFound(name);\n        }\n        valueObj[name] = value;\n    }\n}\n\nclass Emitter {\n    constructor() {\n        this.observers_ = {};\n    }\n    on(eventName, handler) {\n        let observers = this.observers_[eventName];\n        if (!observers) {\n            observers = this.observers_[eventName] = [];\n        }\n        observers.push({\n            handler: handler,\n        });\n        return this;\n    }\n    off(eventName, handler) {\n        const observers = this.observers_[eventName];\n        if (observers) {\n            this.observers_[eventName] = observers.filter((observer) => {\n                return observer.handler !== handler;\n            });\n        }\n        return this;\n    }\n    emit(eventName, event) {\n        const observers = this.observers_[eventName];\n        if (!observers) {\n            return;\n        }\n        observers.forEach((observer) => {\n            observer.handler(event);\n        });\n    }\n}\n\nclass ComplexValue {\n    constructor(initialValue, config) {\n        var _a;\n        this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n        this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : ((v1, v2) => v1 === v2);\n        this.emitter = new Emitter();\n        this.rawValue_ = initialValue;\n    }\n    get constraint() {\n        return this.constraint_;\n    }\n    get rawValue() {\n        return this.rawValue_;\n    }\n    set rawValue(rawValue) {\n        this.setRawValue(rawValue, {\n            forceEmit: false,\n            last: true,\n        });\n    }\n    setRawValue(rawValue, options) {\n        const opts = options !== null && options !== void 0 ? options : {\n            forceEmit: false,\n            last: true,\n        };\n        const constrainedValue = this.constraint_\n            ? this.constraint_.constrain(rawValue)\n            : rawValue;\n        const prevValue = this.rawValue_;\n        const changed = !this.equals_(prevValue, constrainedValue);\n        if (!changed && !opts.forceEmit) {\n            return;\n        }\n        this.emitter.emit('beforechange', {\n            sender: this,\n        });\n        this.rawValue_ = constrainedValue;\n        this.emitter.emit('change', {\n            options: opts,\n            previousRawValue: prevValue,\n            rawValue: constrainedValue,\n            sender: this,\n        });\n    }\n}\n\nclass PrimitiveValue {\n    constructor(initialValue) {\n        this.emitter = new Emitter();\n        this.value_ = initialValue;\n    }\n    get rawValue() {\n        return this.value_;\n    }\n    set rawValue(value) {\n        this.setRawValue(value, {\n            forceEmit: false,\n            last: true,\n        });\n    }\n    setRawValue(value, options) {\n        const opts = options !== null && options !== void 0 ? options : {\n            forceEmit: false,\n            last: true,\n        };\n        const prevValue = this.value_;\n        if (prevValue === value && !opts.forceEmit) {\n            return;\n        }\n        this.emitter.emit('beforechange', {\n            sender: this,\n        });\n        this.value_ = value;\n        this.emitter.emit('change', {\n            options: opts,\n            previousRawValue: prevValue,\n            rawValue: this.value_,\n            sender: this,\n        });\n    }\n}\n\nclass ReadonlyPrimitiveValue {\n    constructor(value) {\n        this.emitter = new Emitter();\n        this.onValueBeforeChange_ = this.onValueBeforeChange_.bind(this);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.value_ = value;\n        this.value_.emitter.on('beforechange', this.onValueBeforeChange_);\n        this.value_.emitter.on('change', this.onValueChange_);\n    }\n    get rawValue() {\n        return this.value_.rawValue;\n    }\n    onValueBeforeChange_(ev) {\n        this.emitter.emit('beforechange', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n    onValueChange_(ev) {\n        this.emitter.emit('change', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n}\n\nfunction createValue(initialValue, config) {\n    const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n    const equals = config === null || config === void 0 ? void 0 : config.equals;\n    if (!constraint && !equals) {\n        return new PrimitiveValue(initialValue);\n    }\n    return new ComplexValue(initialValue, config);\n}\nfunction createReadonlyValue(value) {\n    return [\n        new ReadonlyPrimitiveValue(value),\n        (rawValue, options) => {\n            value.setRawValue(rawValue, options);\n        },\n    ];\n}\n\nclass ValueMap {\n    constructor(valueMap) {\n        this.emitter = new Emitter();\n        this.valMap_ = valueMap;\n        for (const key in this.valMap_) {\n            const v = this.valMap_[key];\n            v.emitter.on('change', () => {\n                this.emitter.emit('change', {\n                    key: key,\n                    sender: this,\n                });\n            });\n        }\n    }\n    static createCore(initialValue) {\n        const keys = Object.keys(initialValue);\n        return keys.reduce((o, key) => {\n            return Object.assign(o, {\n                [key]: createValue(initialValue[key]),\n            });\n        }, {});\n    }\n    static fromObject(initialValue) {\n        const core = this.createCore(initialValue);\n        return new ValueMap(core);\n    }\n    get(key) {\n        return this.valMap_[key].rawValue;\n    }\n    set(key, value) {\n        this.valMap_[key].rawValue = value;\n    }\n    value(key) {\n        return this.valMap_[key];\n    }\n}\n\nclass DefiniteRangeConstraint {\n    constructor(config) {\n        this.values = ValueMap.fromObject({\n            max: config.max,\n            min: config.min,\n        });\n    }\n    constrain(value) {\n        const max = this.values.get('max');\n        const min = this.values.get('min');\n        return Math.min(Math.max(value, min), max);\n    }\n}\n\nclass RangeConstraint {\n    constructor(config) {\n        this.values = ValueMap.fromObject({\n            max: config.max,\n            min: config.min,\n        });\n    }\n    constrain(value) {\n        const max = this.values.get('max');\n        const min = this.values.get('min');\n        let result = value;\n        if (!isEmpty(min)) {\n            result = Math.max(result, min);\n        }\n        if (!isEmpty(max)) {\n            result = Math.min(result, max);\n        }\n        return result;\n    }\n}\n\nclass StepConstraint {\n    constructor(step, origin = 0) {\n        this.step = step;\n        this.origin = origin;\n    }\n    constrain(value) {\n        const o = this.origin % this.step;\n        const r = Math.round((value - o) / this.step);\n        return o + r * this.step;\n    }\n}\n\nclass NumberLiteralNode {\n    constructor(text) {\n        this.text = text;\n    }\n    evaluate() {\n        return Number(this.text);\n    }\n    toString() {\n        return this.text;\n    }\n}\nconst BINARY_OPERATION_MAP = {\n    '**': (v1, v2) => Math.pow(v1, v2),\n    '*': (v1, v2) => v1 * v2,\n    '/': (v1, v2) => v1 / v2,\n    '%': (v1, v2) => v1 % v2,\n    '+': (v1, v2) => v1 + v2,\n    '-': (v1, v2) => v1 - v2,\n    '<<': (v1, v2) => v1 << v2,\n    '>>': (v1, v2) => v1 >> v2,\n    '>>>': (v1, v2) => v1 >>> v2,\n    '&': (v1, v2) => v1 & v2,\n    '^': (v1, v2) => v1 ^ v2,\n    '|': (v1, v2) => v1 | v2,\n};\nclass BinaryOperationNode {\n    constructor(operator, left, right) {\n        this.left = left;\n        this.operator = operator;\n        this.right = right;\n    }\n    evaluate() {\n        const op = BINARY_OPERATION_MAP[this.operator];\n        if (!op) {\n            throw new Error(`unexpected binary operator: '${this.operator}`);\n        }\n        return op(this.left.evaluate(), this.right.evaluate());\n    }\n    toString() {\n        return [\n            'b(',\n            this.left.toString(),\n            this.operator,\n            this.right.toString(),\n            ')',\n        ].join(' ');\n    }\n}\nconst UNARY_OPERATION_MAP = {\n    '+': (v) => v,\n    '-': (v) => -v,\n    '~': (v) => ~v,\n};\nclass UnaryOperationNode {\n    constructor(operator, expr) {\n        this.operator = operator;\n        this.expression = expr;\n    }\n    evaluate() {\n        const op = UNARY_OPERATION_MAP[this.operator];\n        if (!op) {\n            throw new Error(`unexpected unary operator: '${this.operator}`);\n        }\n        return op(this.expression.evaluate());\n    }\n    toString() {\n        return ['u(', this.operator, this.expression.toString(), ')'].join(' ');\n    }\n}\n\nfunction combineReader(parsers) {\n    return (text, cursor) => {\n        for (let i = 0; i < parsers.length; i++) {\n            const result = parsers[i](text, cursor);\n            if (result !== '') {\n                return result;\n            }\n        }\n        return '';\n    };\n}\nfunction readWhitespace(text, cursor) {\n    var _a;\n    const m = text.substr(cursor).match(/^\\s+/);\n    return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n}\nfunction readNonZeroDigit(text, cursor) {\n    const ch = text.substr(cursor, 1);\n    return ch.match(/^[1-9]$/) ? ch : '';\n}\nfunction readDecimalDigits(text, cursor) {\n    var _a;\n    const m = text.substr(cursor).match(/^[0-9]+/);\n    return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n}\nfunction readSignedInteger(text, cursor) {\n    const ds = readDecimalDigits(text, cursor);\n    if (ds !== '') {\n        return ds;\n    }\n    const sign = text.substr(cursor, 1);\n    cursor += 1;\n    if (sign !== '-' && sign !== '+') {\n        return '';\n    }\n    const sds = readDecimalDigits(text, cursor);\n    if (sds === '') {\n        return '';\n    }\n    return sign + sds;\n}\nfunction readExponentPart(text, cursor) {\n    const e = text.substr(cursor, 1);\n    cursor += 1;\n    if (e.toLowerCase() !== 'e') {\n        return '';\n    }\n    const si = readSignedInteger(text, cursor);\n    if (si === '') {\n        return '';\n    }\n    return e + si;\n}\nfunction readDecimalIntegerLiteral(text, cursor) {\n    const ch = text.substr(cursor, 1);\n    if (ch === '0') {\n        return ch;\n    }\n    const nzd = readNonZeroDigit(text, cursor);\n    cursor += nzd.length;\n    if (nzd === '') {\n        return '';\n    }\n    return nzd + readDecimalDigits(text, cursor);\n}\nfunction readDecimalLiteral1(text, cursor) {\n    const dil = readDecimalIntegerLiteral(text, cursor);\n    cursor += dil.length;\n    if (dil === '') {\n        return '';\n    }\n    const dot = text.substr(cursor, 1);\n    cursor += dot.length;\n    if (dot !== '.') {\n        return '';\n    }\n    const dds = readDecimalDigits(text, cursor);\n    cursor += dds.length;\n    return dil + dot + dds + readExponentPart(text, cursor);\n}\nfunction readDecimalLiteral2(text, cursor) {\n    const dot = text.substr(cursor, 1);\n    cursor += dot.length;\n    if (dot !== '.') {\n        return '';\n    }\n    const dds = readDecimalDigits(text, cursor);\n    cursor += dds.length;\n    if (dds === '') {\n        return '';\n    }\n    return dot + dds + readExponentPart(text, cursor);\n}\nfunction readDecimalLiteral3(text, cursor) {\n    const dil = readDecimalIntegerLiteral(text, cursor);\n    cursor += dil.length;\n    if (dil === '') {\n        return '';\n    }\n    return dil + readExponentPart(text, cursor);\n}\nconst readDecimalLiteral = combineReader([\n    readDecimalLiteral1,\n    readDecimalLiteral2,\n    readDecimalLiteral3,\n]);\nfunction parseBinaryDigits(text, cursor) {\n    var _a;\n    const m = text.substr(cursor).match(/^[01]+/);\n    return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n}\nfunction readBinaryIntegerLiteral(text, cursor) {\n    const prefix = text.substr(cursor, 2);\n    cursor += prefix.length;\n    if (prefix.toLowerCase() !== '0b') {\n        return '';\n    }\n    const bds = parseBinaryDigits(text, cursor);\n    if (bds === '') {\n        return '';\n    }\n    return prefix + bds;\n}\nfunction readOctalDigits(text, cursor) {\n    var _a;\n    const m = text.substr(cursor).match(/^[0-7]+/);\n    return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n}\nfunction readOctalIntegerLiteral(text, cursor) {\n    const prefix = text.substr(cursor, 2);\n    cursor += prefix.length;\n    if (prefix.toLowerCase() !== '0o') {\n        return '';\n    }\n    const ods = readOctalDigits(text, cursor);\n    if (ods === '') {\n        return '';\n    }\n    return prefix + ods;\n}\nfunction readHexDigits(text, cursor) {\n    var _a;\n    const m = text.substr(cursor).match(/^[0-9a-f]+/i);\n    return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n}\nfunction readHexIntegerLiteral(text, cursor) {\n    const prefix = text.substr(cursor, 2);\n    cursor += prefix.length;\n    if (prefix.toLowerCase() !== '0x') {\n        return '';\n    }\n    const hds = readHexDigits(text, cursor);\n    if (hds === '') {\n        return '';\n    }\n    return prefix + hds;\n}\nconst readNonDecimalIntegerLiteral = combineReader([\n    readBinaryIntegerLiteral,\n    readOctalIntegerLiteral,\n    readHexIntegerLiteral,\n]);\nconst readNumericLiteral = combineReader([\n    readNonDecimalIntegerLiteral,\n    readDecimalLiteral,\n]);\n\nfunction parseLiteral(text, cursor) {\n    const num = readNumericLiteral(text, cursor);\n    cursor += num.length;\n    if (num === '') {\n        return null;\n    }\n    return {\n        evaluable: new NumberLiteralNode(num),\n        cursor: cursor,\n    };\n}\nfunction parseParenthesizedExpression(text, cursor) {\n    const op = text.substr(cursor, 1);\n    cursor += op.length;\n    if (op !== '(') {\n        return null;\n    }\n    const expr = parseExpression(text, cursor);\n    if (!expr) {\n        return null;\n    }\n    cursor = expr.cursor;\n    cursor += readWhitespace(text, cursor).length;\n    const cl = text.substr(cursor, 1);\n    cursor += cl.length;\n    if (cl !== ')') {\n        return null;\n    }\n    return {\n        evaluable: expr.evaluable,\n        cursor: cursor,\n    };\n}\nfunction parsePrimaryExpression(text, cursor) {\n    var _a;\n    return ((_a = parseLiteral(text, cursor)) !== null && _a !== void 0 ? _a : parseParenthesizedExpression(text, cursor));\n}\nfunction parseUnaryExpression(text, cursor) {\n    const expr = parsePrimaryExpression(text, cursor);\n    if (expr) {\n        return expr;\n    }\n    const op = text.substr(cursor, 1);\n    cursor += op.length;\n    if (op !== '+' && op !== '-' && op !== '~') {\n        return null;\n    }\n    const num = parseUnaryExpression(text, cursor);\n    if (!num) {\n        return null;\n    }\n    cursor = num.cursor;\n    return {\n        cursor: cursor,\n        evaluable: new UnaryOperationNode(op, num.evaluable),\n    };\n}\nfunction readBinaryOperator(ops, text, cursor) {\n    cursor += readWhitespace(text, cursor).length;\n    const op = ops.filter((op) => text.startsWith(op, cursor))[0];\n    if (!op) {\n        return null;\n    }\n    cursor += op.length;\n    cursor += readWhitespace(text, cursor).length;\n    return {\n        cursor: cursor,\n        operator: op,\n    };\n}\nfunction createBinaryOperationExpressionParser(exprParser, ops) {\n    return (text, cursor) => {\n        const firstExpr = exprParser(text, cursor);\n        if (!firstExpr) {\n            return null;\n        }\n        cursor = firstExpr.cursor;\n        let expr = firstExpr.evaluable;\n        for (;;) {\n            const op = readBinaryOperator(ops, text, cursor);\n            if (!op) {\n                break;\n            }\n            cursor = op.cursor;\n            const nextExpr = exprParser(text, cursor);\n            if (!nextExpr) {\n                return null;\n            }\n            cursor = nextExpr.cursor;\n            expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n        }\n        return expr\n            ? {\n                cursor: cursor,\n                evaluable: expr,\n            }\n            : null;\n    };\n}\nconst parseBinaryOperationExpression = [\n    ['**'],\n    ['*', '/', '%'],\n    ['+', '-'],\n    ['<<', '>>>', '>>'],\n    ['&'],\n    ['^'],\n    ['|'],\n].reduce((parser, ops) => {\n    return createBinaryOperationExpressionParser(parser, ops);\n}, parseUnaryExpression);\nfunction parseExpression(text, cursor) {\n    cursor += readWhitespace(text, cursor).length;\n    return parseBinaryOperationExpression(text, cursor);\n}\nfunction parseEcmaNumberExpression(text) {\n    const expr = parseExpression(text, 0);\n    if (!expr) {\n        return null;\n    }\n    const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n    if (cursor !== text.length) {\n        return null;\n    }\n    return expr.evaluable;\n}\n\nfunction parseNumber(text) {\n    var _a;\n    const r = parseEcmaNumberExpression(text);\n    return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n}\nfunction numberFromUnknown(value) {\n    if (typeof value === 'number') {\n        return value;\n    }\n    if (typeof value === 'string') {\n        const pv = parseNumber(value);\n        if (!isEmpty(pv)) {\n            return pv;\n        }\n    }\n    return 0;\n}\nfunction numberToString(value) {\n    return String(value);\n}\nfunction createNumberFormatter(digits) {\n    return (value) => {\n        return value.toFixed(Math.max(Math.min(digits, 20), 0));\n    };\n}\n\nfunction mapRange(value, start1, end1, start2, end2) {\n    const p = (value - start1) / (end1 - start1);\n    return start2 + p * (end2 - start2);\n}\nfunction getDecimalDigits(value) {\n    const text = String(value.toFixed(10));\n    const frac = text.split('.')[1];\n    return frac.replace(/0+$/, '').length;\n}\nfunction constrainRange(value, min, max) {\n    return Math.min(Math.max(value, min), max);\n}\nfunction loopRange(value, max) {\n    return ((value % max) + max) % max;\n}\nfunction getSuitableDecimalDigits(params, rawValue) {\n    return !isEmpty(params.step)\n        ? getDecimalDigits(params.step)\n        : Math.max(getDecimalDigits(rawValue), 2);\n}\nfunction getSuitableKeyScale(params) {\n    var _a;\n    return (_a = params.step) !== null && _a !== void 0 ? _a : 1;\n}\nfunction getSuitablePointerScale(params, rawValue) {\n    var _a;\n    const base = Math.abs((_a = params.step) !== null && _a !== void 0 ? _a : rawValue);\n    return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n}\nfunction createStepConstraint(params, initialValue) {\n    if (!isEmpty(params.step)) {\n        return new StepConstraint(params.step, initialValue);\n    }\n    return null;\n}\nfunction createRangeConstraint(params) {\n    if (!isEmpty(params.max) && !isEmpty(params.min)) {\n        return new DefiniteRangeConstraint({\n            max: params.max,\n            min: params.min,\n        });\n    }\n    if (!isEmpty(params.max) || !isEmpty(params.min)) {\n        return new RangeConstraint({\n            max: params.max,\n            min: params.min,\n        });\n    }\n    return null;\n}\nfunction createNumberTextPropsObject(params, initialValue) {\n    var _a, _b, _c;\n    return {\n        formatter: (_a = params.format) !== null && _a !== void 0 ? _a : createNumberFormatter(getSuitableDecimalDigits(params, initialValue)),\n        keyScale: (_b = params.keyScale) !== null && _b !== void 0 ? _b : getSuitableKeyScale(params),\n        pointerScale: (_c = params.pointerScale) !== null && _c !== void 0 ? _c : getSuitablePointerScale(params, initialValue),\n    };\n}\nfunction createNumberTextInputParamsParser(p) {\n    return {\n        format: p.optional.function,\n        keyScale: p.optional.number,\n        max: p.optional.number,\n        min: p.optional.number,\n        pointerScale: p.optional.number,\n        step: p.optional.number,\n    };\n}\n\nfunction createPointAxis(config) {\n    return {\n        constraint: config.constraint,\n        textProps: ValueMap.fromObject(createNumberTextPropsObject(config.params, config.initialValue)),\n    };\n}\n\nclass BladeApi {\n    constructor(controller) {\n        this.controller = controller;\n    }\n    get element() {\n        return this.controller.view.element;\n    }\n    get disabled() {\n        return this.controller.viewProps.get('disabled');\n    }\n    set disabled(disabled) {\n        this.controller.viewProps.set('disabled', disabled);\n    }\n    get hidden() {\n        return this.controller.viewProps.get('hidden');\n    }\n    set hidden(hidden) {\n        this.controller.viewProps.set('hidden', hidden);\n    }\n    dispose() {\n        this.controller.viewProps.set('disposed', true);\n    }\n    importState(state) {\n        return this.controller.importState(state);\n    }\n    exportState() {\n        return this.controller.exportState();\n    }\n}\n\nclass TpEvent {\n    constructor(target) {\n        this.target = target;\n    }\n}\nclass TpChangeEvent extends TpEvent {\n    constructor(target, value, last) {\n        super(target);\n        this.value = value;\n        this.last = last !== null && last !== void 0 ? last : true;\n    }\n}\nclass TpFoldEvent extends TpEvent {\n    constructor(target, expanded) {\n        super(target);\n        this.expanded = expanded;\n    }\n}\nclass TpTabSelectEvent extends TpEvent {\n    constructor(target, index) {\n        super(target);\n        this.index = index;\n    }\n}\n\nclass BindingApi extends BladeApi {\n    constructor(controller) {\n        super(controller);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.emitter_ = new Emitter();\n        this.controller.value.emitter.on('change', this.onValueChange_);\n    }\n    get label() {\n        return this.controller.labelController.props.get('label');\n    }\n    set label(label) {\n        this.controller.labelController.props.set('label', label);\n    }\n    get key() {\n        return this.controller.value.binding.target.key;\n    }\n    get tag() {\n        return this.controller.tag;\n    }\n    set tag(tag) {\n        this.controller.tag = tag;\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        });\n        return this;\n    }\n    refresh() {\n        this.controller.value.fetch();\n    }\n    onValueChange_(ev) {\n        const value = this.controller.value;\n        this.emitter_.emit('change', new TpChangeEvent(this, forceCast(value.binding.target.read()), ev.options.last));\n    }\n}\n\nclass InputBindingValue {\n    constructor(value, binding) {\n        this.onValueBeforeChange_ = this.onValueBeforeChange_.bind(this);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.binding = binding;\n        this.value_ = value;\n        this.value_.emitter.on('beforechange', this.onValueBeforeChange_);\n        this.value_.emitter.on('change', this.onValueChange_);\n        this.emitter = new Emitter();\n    }\n    get rawValue() {\n        return this.value_.rawValue;\n    }\n    set rawValue(rawValue) {\n        this.value_.rawValue = rawValue;\n    }\n    setRawValue(rawValue, options) {\n        this.value_.setRawValue(rawValue, options);\n    }\n    fetch() {\n        this.value_.rawValue = this.binding.read();\n    }\n    push() {\n        this.binding.write(this.value_.rawValue);\n    }\n    onValueBeforeChange_(ev) {\n        this.emitter.emit('beforechange', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n    onValueChange_(ev) {\n        this.push();\n        this.emitter.emit('change', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n}\nfunction isInputBindingValue(v) {\n    if (!('binding' in v)) {\n        return false;\n    }\n    const b = v['binding'];\n    return isBinding(b) && 'read' in b && 'write' in b;\n}\n\nfunction parseObject(value, keyToParserMap) {\n    const keys = Object.keys(keyToParserMap);\n    const result = keys.reduce((tmp, key) => {\n        if (tmp === undefined) {\n            return undefined;\n        }\n        const parser = keyToParserMap[key];\n        const result = parser(value[key]);\n        return result.succeeded\n            ? Object.assign(Object.assign({}, tmp), { [key]: result.value }) : undefined;\n    }, {});\n    return forceCast(result);\n}\nfunction parseArray(value, parseItem) {\n    return value.reduce((tmp, item) => {\n        if (tmp === undefined) {\n            return undefined;\n        }\n        const result = parseItem(item);\n        if (!result.succeeded || result.value === undefined) {\n            return undefined;\n        }\n        return [...tmp, result.value];\n    }, []);\n}\nfunction isObject(value) {\n    if (value === null) {\n        return false;\n    }\n    return typeof value === 'object';\n}\nfunction createMicroParserBuilder(parse) {\n    return (optional) => (v) => {\n        if (!optional && v === undefined) {\n            return {\n                succeeded: false,\n                value: undefined,\n            };\n        }\n        if (optional && v === undefined) {\n            return {\n                succeeded: true,\n                value: undefined,\n            };\n        }\n        const result = parse(v);\n        return result !== undefined\n            ? {\n                succeeded: true,\n                value: result,\n            }\n            : {\n                succeeded: false,\n                value: undefined,\n            };\n    };\n}\nfunction createMicroParserBuilders(optional) {\n    return {\n        custom: (parse) => createMicroParserBuilder(parse)(optional),\n        boolean: createMicroParserBuilder((v) => typeof v === 'boolean' ? v : undefined)(optional),\n        number: createMicroParserBuilder((v) => typeof v === 'number' ? v : undefined)(optional),\n        string: createMicroParserBuilder((v) => typeof v === 'string' ? v : undefined)(optional),\n        function: createMicroParserBuilder((v) =>\n        typeof v === 'function' ? v : undefined)(optional),\n        constant: (value) => createMicroParserBuilder((v) => (v === value ? value : undefined))(optional),\n        raw: createMicroParserBuilder((v) => v)(optional),\n        object: (keyToParserMap) => createMicroParserBuilder((v) => {\n            if (!isObject(v)) {\n                return undefined;\n            }\n            return parseObject(v, keyToParserMap);\n        })(optional),\n        array: (itemParser) => createMicroParserBuilder((v) => {\n            if (!Array.isArray(v)) {\n                return undefined;\n            }\n            return parseArray(v, itemParser);\n        })(optional),\n    };\n}\nconst MicroParsers = {\n    optional: createMicroParserBuilders(true),\n    required: createMicroParserBuilders(false),\n};\nfunction parseRecord(value, keyToParserMap) {\n    const map = keyToParserMap(MicroParsers);\n    const result = MicroParsers.required.object(map)(value);\n    return result.succeeded ? result.value : undefined;\n}\n\nfunction importBladeState(state, superImport, parser, callback) {\n    if (superImport && !superImport(state)) {\n        return false;\n    }\n    const result = parseRecord(state, parser);\n    return result ? callback(result) : false;\n}\nfunction exportBladeState(superExport, thisState) {\n    var _a;\n    return deepMerge((_a = superExport === null || superExport === void 0 ? void 0 : superExport()) !== null && _a !== void 0 ? _a : {}, thisState);\n}\n\nfunction isValueBladeController(bc) {\n    return 'value' in bc;\n}\n\nfunction isBindingValue(v) {\n    if (!isObject$1(v) || !('binding' in v)) {\n        return false;\n    }\n    const b = v.binding;\n    return isBinding(b);\n}\n\nconst SVG_NS = 'http://www.w3.org/2000/svg';\nfunction forceReflow(element) {\n    element.offsetHeight;\n}\nfunction disableTransitionTemporarily(element, callback) {\n    const t = element.style.transition;\n    element.style.transition = 'none';\n    callback();\n    element.style.transition = t;\n}\nfunction supportsTouch(doc) {\n    return doc.ontouchstart !== undefined;\n}\nfunction getGlobalObject() {\n    return globalThis;\n}\nfunction getWindowDocument() {\n    const globalObj = forceCast(getGlobalObject());\n    return globalObj.document;\n}\nfunction getCanvasContext(canvasElement) {\n    const win = canvasElement.ownerDocument.defaultView;\n    if (!win) {\n        return null;\n    }\n    const isBrowser = 'document' in win;\n    return isBrowser\n        ? canvasElement.getContext('2d', {\n            willReadFrequently: true,\n        })\n        : null;\n}\nconst ICON_ID_TO_INNER_HTML_MAP = {\n    check: '<path d=\"M2 8l4 4l8 -8\"/>',\n    dropdown: '<path d=\"M5 7h6l-3 3 z\"/>',\n    p2dpad: '<path d=\"M8 4v8\"/><path d=\"M4 8h8\"/><circle cx=\"12\" cy=\"12\" r=\"1.2\"/>',\n};\nfunction createSvgIconElement(document, iconId) {\n    const elem = document.createElementNS(SVG_NS, 'svg');\n    elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];\n    return elem;\n}\nfunction insertElementAt(parentElement, element, index) {\n    parentElement.insertBefore(element, parentElement.children[index]);\n}\nfunction removeElement(element) {\n    if (element.parentElement) {\n        element.parentElement.removeChild(element);\n    }\n}\nfunction removeChildElements(element) {\n    while (element.children.length > 0) {\n        element.removeChild(element.children[0]);\n    }\n}\nfunction removeChildNodes(element) {\n    while (element.childNodes.length > 0) {\n        element.removeChild(element.childNodes[0]);\n    }\n}\nfunction findNextTarget(ev) {\n    if (ev.relatedTarget) {\n        return forceCast(ev.relatedTarget);\n    }\n    if ('explicitOriginalTarget' in ev) {\n        return ev.explicitOriginalTarget;\n    }\n    return null;\n}\n\nfunction bindValue(value, applyValue) {\n    value.emitter.on('change', (ev) => {\n        applyValue(ev.rawValue);\n    });\n    applyValue(value.rawValue);\n}\nfunction bindValueMap(valueMap, key, applyValue) {\n    bindValue(valueMap.value(key), applyValue);\n}\n\nconst PREFIX = 'tp';\nfunction ClassName(viewName) {\n    const fn = (opt_elementName, opt_modifier) => {\n        return [\n            PREFIX,\n            '-',\n            viewName,\n            'v',\n            opt_elementName ? `_${opt_elementName}` : '',\n            opt_modifier ? `-${opt_modifier}` : '',\n        ].join('');\n    };\n    return fn;\n}\n\nconst cn$r = ClassName('lbl');\nfunction createLabelNode(doc, label) {\n    const frag = doc.createDocumentFragment();\n    const lineNodes = label.split('\\n').map((line) => {\n        return doc.createTextNode(line);\n    });\n    lineNodes.forEach((lineNode, index) => {\n        if (index > 0) {\n            frag.appendChild(doc.createElement('br'));\n        }\n        frag.appendChild(lineNode);\n    });\n    return frag;\n}\nclass LabelView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$r());\n        config.viewProps.bindClassModifiers(this.element);\n        const labelElem = doc.createElement('div');\n        labelElem.classList.add(cn$r('l'));\n        bindValueMap(config.props, 'label', (value) => {\n            if (isEmpty(value)) {\n                this.element.classList.add(cn$r(undefined, 'nol'));\n            }\n            else {\n                this.element.classList.remove(cn$r(undefined, 'nol'));\n                removeChildNodes(labelElem);\n                labelElem.appendChild(createLabelNode(doc, value));\n            }\n        });\n        this.element.appendChild(labelElem);\n        this.labelElement = labelElem;\n        const valueElem = doc.createElement('div');\n        valueElem.classList.add(cn$r('v'));\n        this.element.appendChild(valueElem);\n        this.valueElement = valueElem;\n    }\n}\n\nclass LabelController {\n    constructor(doc, config) {\n        this.props = config.props;\n        this.valueController = config.valueController;\n        this.viewProps = config.valueController.viewProps;\n        this.view = new LabelView(doc, {\n            props: config.props,\n            viewProps: this.viewProps,\n        });\n        this.view.valueElement.appendChild(this.valueController.view.element);\n    }\n    importProps(state) {\n        return importBladeState(state, null, (p) => ({\n            label: p.optional.string,\n        }), (result) => {\n            this.props.set('label', result.label);\n            return true;\n        });\n    }\n    exportProps() {\n        return exportBladeState(null, {\n            label: this.props.get('label'),\n        });\n    }\n}\n\nfunction getAllBladePositions() {\n    return ['veryfirst', 'first', 'last', 'verylast'];\n}\n\nconst cn$q = ClassName('');\nconst POS_TO_CLASS_NAME_MAP = {\n    veryfirst: 'vfst',\n    first: 'fst',\n    last: 'lst',\n    verylast: 'vlst',\n};\nclass BladeController {\n    constructor(config) {\n        this.parent_ = null;\n        this.blade = config.blade;\n        this.view = config.view;\n        this.viewProps = config.viewProps;\n        const elem = this.view.element;\n        this.blade.value('positions').emitter.on('change', () => {\n            getAllBladePositions().forEach((pos) => {\n                elem.classList.remove(cn$q(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n            });\n            this.blade.get('positions').forEach((pos) => {\n                elem.classList.add(cn$q(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n            });\n        });\n        this.viewProps.handleDispose(() => {\n            removeElement(elem);\n        });\n    }\n    get parent() {\n        return this.parent_;\n    }\n    set parent(parent) {\n        this.parent_ = parent;\n        this.viewProps.set('parent', this.parent_ ? this.parent_.viewProps : null);\n    }\n    importState(state) {\n        return importBladeState(state, null, (p) => ({\n            disabled: p.required.boolean,\n            hidden: p.required.boolean,\n        }), (result) => {\n            this.viewProps.importState(result);\n            return true;\n        });\n    }\n    exportState() {\n        return exportBladeState(null, Object.assign({}, this.viewProps.exportState()));\n    }\n}\n\nclass LabeledValueBladeController extends BladeController {\n    constructor(doc, config) {\n        if (config.value !== config.valueController.value) {\n            throw TpError.shouldNeverHappen();\n        }\n        const viewProps = config.valueController.viewProps;\n        const lc = new LabelController(doc, {\n            blade: config.blade,\n            props: config.props,\n            valueController: config.valueController,\n        });\n        super(Object.assign(Object.assign({}, config), { view: new LabelView(doc, {\n                props: config.props,\n                viewProps: viewProps,\n            }), viewProps: viewProps }));\n        this.labelController = lc;\n        this.value = config.value;\n        this.valueController = config.valueController;\n        this.view.valueElement.appendChild(this.valueController.view.element);\n    }\n    importState(state) {\n        return importBladeState(state, (s) => {\n            var _a, _b, _c;\n            return super.importState(s) &&\n                this.labelController.importProps(s) &&\n                ((_c = (_b = (_a = this.valueController).importProps) === null || _b === void 0 ? void 0 : _b.call(_a, state)) !== null && _c !== void 0 ? _c : true);\n        }, (p) => ({\n            value: p.optional.raw,\n        }), (result) => {\n            if (result.value) {\n                this.value.rawValue = result.value;\n            }\n            return true;\n        });\n    }\n    exportState() {\n        var _a, _b, _c;\n        return exportBladeState(() => super.exportState(), Object.assign(Object.assign({ value: this.value.rawValue }, this.labelController.exportProps()), ((_c = (_b = (_a = this.valueController).exportProps) === null || _b === void 0 ? void 0 : _b.call(_a)) !== null && _c !== void 0 ? _c : {})));\n    }\n}\n\nfunction excludeValue(state) {\n    const result = Object.assign({}, state);\n    delete result.value;\n    return result;\n}\nclass BindingController extends LabeledValueBladeController {\n    constructor(doc, config) {\n        super(doc, config);\n        this.tag = config.tag;\n    }\n    importState(state) {\n        return importBladeState(state,\n        (_s) => super.importState(excludeValue(state)), (p) => ({\n            tag: p.optional.string,\n        }), (result) => {\n            this.tag = result.tag;\n            return true;\n        });\n    }\n    exportState() {\n        return exportBladeState(() => excludeValue(super.exportState()), {\n            binding: {\n                key: this.value.binding.target.key,\n                value: this.value.binding.target.read(),\n            },\n            tag: this.tag,\n        });\n    }\n}\nfunction isBindingController(bc) {\n    return isValueBladeController(bc) && isBindingValue(bc.value);\n}\n\nclass InputBindingController extends BindingController {\n    importState(state) {\n        return importBladeState(state, (s) => super.importState(s), (p) => ({\n            binding: p.required.object({\n                value: p.required.raw,\n            }),\n        }), (result) => {\n            this.value.binding.inject(result.binding.value);\n            this.value.fetch();\n            return true;\n        });\n    }\n}\nfunction isInputBindingController(bc) {\n    return isValueBladeController(bc) && isInputBindingValue(bc.value);\n}\n\nfunction fillBuffer(buffer, bufferSize) {\n    while (buffer.length < bufferSize) {\n        buffer.push(undefined);\n    }\n}\nfunction initializeBuffer(bufferSize) {\n    const buffer = [];\n    fillBuffer(buffer, bufferSize);\n    return buffer;\n}\nfunction createTrimmedBuffer(buffer) {\n    const index = buffer.indexOf(undefined);\n    return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n}\nfunction createPushedBuffer(buffer, newValue) {\n    const newBuffer = [...createTrimmedBuffer(buffer), newValue];\n    if (newBuffer.length > buffer.length) {\n        newBuffer.splice(0, newBuffer.length - buffer.length);\n    }\n    else {\n        fillBuffer(newBuffer, buffer.length);\n    }\n    return newBuffer;\n}\n\nclass MonitorBindingValue {\n    constructor(config) {\n        this.emitter = new Emitter();\n        this.onTick_ = this.onTick_.bind(this);\n        this.onValueBeforeChange_ = this.onValueBeforeChange_.bind(this);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.binding = config.binding;\n        this.value_ = createValue(initializeBuffer(config.bufferSize));\n        this.value_.emitter.on('beforechange', this.onValueBeforeChange_);\n        this.value_.emitter.on('change', this.onValueChange_);\n        this.ticker = config.ticker;\n        this.ticker.emitter.on('tick', this.onTick_);\n        this.fetch();\n    }\n    get rawValue() {\n        return this.value_.rawValue;\n    }\n    set rawValue(rawValue) {\n        this.value_.rawValue = rawValue;\n    }\n    setRawValue(rawValue, options) {\n        this.value_.setRawValue(rawValue, options);\n    }\n    fetch() {\n        this.value_.rawValue = createPushedBuffer(this.value_.rawValue, this.binding.read());\n    }\n    onTick_() {\n        this.fetch();\n    }\n    onValueBeforeChange_(ev) {\n        this.emitter.emit('beforechange', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n    onValueChange_(ev) {\n        this.emitter.emit('change', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n}\nfunction isMonitorBindingValue(v) {\n    if (!('binding' in v)) {\n        return false;\n    }\n    const b = v['binding'];\n    return isBinding(b) && 'read' in b && !('write' in b);\n}\n\nclass MonitorBindingController extends BindingController {\n    exportState() {\n        return exportBladeState(() => super.exportState(), {\n            binding: {\n                readonly: true,\n            },\n        });\n    }\n}\nfunction isMonitorBindingController(bc) {\n    return (isValueBladeController(bc) &&\n        isMonitorBindingValue(bc.value));\n}\n\nclass ButtonApi extends BladeApi {\n    get label() {\n        return this.controller.labelController.props.get('label');\n    }\n    set label(label) {\n        this.controller.labelController.props.set('label', label);\n    }\n    get title() {\n        var _a;\n        return (_a = this.controller.buttonController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n    }\n    set title(title) {\n        this.controller.buttonController.props.set('title', title);\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        const emitter = this.controller.buttonController.emitter;\n        emitter.on(eventName, () => {\n            bh(new TpEvent(this));\n        });\n        return this;\n    }\n}\n\nfunction applyClass(elem, className, active) {\n    if (active) {\n        elem.classList.add(className);\n    }\n    else {\n        elem.classList.remove(className);\n    }\n}\nfunction valueToClassName(elem, className) {\n    return (value) => {\n        applyClass(elem, className, value);\n    };\n}\nfunction bindValueToTextContent(value, elem) {\n    bindValue(value, (text) => {\n        elem.textContent = text !== null && text !== void 0 ? text : '';\n    });\n}\n\nconst cn$p = ClassName('btn');\nclass ButtonView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$p());\n        config.viewProps.bindClassModifiers(this.element);\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(cn$p('b'));\n        config.viewProps.bindDisabled(buttonElem);\n        this.element.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        const titleElem = doc.createElement('div');\n        titleElem.classList.add(cn$p('t'));\n        bindValueToTextContent(config.props.value('title'), titleElem);\n        this.buttonElement.appendChild(titleElem);\n    }\n}\n\nclass ButtonController {\n    constructor(doc, config) {\n        this.emitter = new Emitter();\n        this.onClick_ = this.onClick_.bind(this);\n        this.props = config.props;\n        this.viewProps = config.viewProps;\n        this.view = new ButtonView(doc, {\n            props: this.props,\n            viewProps: this.viewProps,\n        });\n        this.view.buttonElement.addEventListener('click', this.onClick_);\n    }\n    importProps(state) {\n        return importBladeState(state, null, (p) => ({\n            title: p.optional.string,\n        }), (result) => {\n            this.props.set('title', result.title);\n            return true;\n        });\n    }\n    exportProps() {\n        return exportBladeState(null, {\n            title: this.props.get('title'),\n        });\n    }\n    onClick_() {\n        this.emitter.emit('click', {\n            sender: this,\n        });\n    }\n}\n\nclass ButtonBladeController extends BladeController {\n    constructor(doc, config) {\n        const bc = new ButtonController(doc, {\n            props: config.buttonProps,\n            viewProps: config.viewProps,\n        });\n        const lc = new LabelController(doc, {\n            blade: config.blade,\n            props: config.labelProps,\n            valueController: bc,\n        });\n        super({\n            blade: config.blade,\n            view: lc.view,\n            viewProps: config.viewProps,\n        });\n        this.buttonController = bc;\n        this.labelController = lc;\n    }\n    importState(state) {\n        return importBladeState(state, (s) => super.importState(s) &&\n            this.buttonController.importProps(s) &&\n            this.labelController.importProps(s), () => ({}), () => true);\n    }\n    exportState() {\n        return exportBladeState(() => super.exportState(), Object.assign(Object.assign({}, this.buttonController.exportProps()), this.labelController.exportProps()));\n    }\n}\n\nclass Semver {\n    constructor(text) {\n        const [core, prerelease] = text.split('-');\n        const coreComps = core.split('.');\n        this.major = parseInt(coreComps[0], 10);\n        this.minor = parseInt(coreComps[1], 10);\n        this.patch = parseInt(coreComps[2], 10);\n        this.prerelease = prerelease !== null && prerelease !== void 0 ? prerelease : null;\n    }\n    toString() {\n        const core = [this.major, this.minor, this.patch].join('.');\n        return this.prerelease !== null ? [core, this.prerelease].join('-') : core;\n    }\n}\n\nconst VERSION$1 = new Semver('2.0.1');\n\nfunction createPlugin(plugin) {\n    return Object.assign({ core: VERSION$1 }, plugin);\n}\n\nconst ButtonBladePlugin = createPlugin({\n    id: 'button',\n    type: 'blade',\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            title: p.required.string,\n            view: p.required.constant('button'),\n            label: p.optional.string,\n        }));\n        return result ? { params: result } : null;\n    },\n    controller(args) {\n        return new ButtonBladeController(args.document, {\n            blade: args.blade,\n            buttonProps: ValueMap.fromObject({\n                title: args.params.title,\n            }),\n            labelProps: ValueMap.fromObject({\n                label: args.params.label,\n            }),\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (args.controller instanceof ButtonBladeController) {\n            return new ButtonApi(args.controller);\n        }\n        return null;\n    },\n});\n\nfunction addButtonAsBlade(api, params) {\n    return api.addBlade(Object.assign(Object.assign({}, params), { view: 'button' }));\n}\nfunction addFolderAsBlade(api, params) {\n    return api.addBlade(Object.assign(Object.assign({}, params), { view: 'folder' }));\n}\nfunction addTabAsBlade(api, params) {\n    return api.addBlade(Object.assign(Object.assign({}, params), { view: 'tab' }));\n}\n\nfunction isRefreshable(value) {\n    if (!isObject$1(value)) {\n        return false;\n    }\n    return 'refresh' in value && typeof value.refresh === 'function';\n}\n\nfunction createBindingTarget(obj, key) {\n    if (!BindingTarget.isBindable(obj)) {\n        throw TpError.notBindable();\n    }\n    return new BindingTarget(obj, key);\n}\nclass RackApi {\n    constructor(controller, pool) {\n        this.onRackValueChange_ = this.onRackValueChange_.bind(this);\n        this.controller_ = controller;\n        this.emitter_ = new Emitter();\n        this.pool_ = pool;\n        const rack = this.controller_.rack;\n        rack.emitter.on('valuechange', this.onRackValueChange_);\n    }\n    get children() {\n        return this.controller_.rack.children.map((bc) => this.pool_.createApi(bc));\n    }\n    addBinding(object, key, opt_params) {\n        const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n        const doc = this.controller_.element.ownerDocument;\n        const bc = this.pool_.createBinding(doc, createBindingTarget(object, key), params);\n        const api = this.pool_.createBindingApi(bc);\n        return this.add(api, params.index);\n    }\n    addFolder(params) {\n        return addFolderAsBlade(this, params);\n    }\n    addButton(params) {\n        return addButtonAsBlade(this, params);\n    }\n    addTab(params) {\n        return addTabAsBlade(this, params);\n    }\n    add(api, opt_index) {\n        const bc = api.controller;\n        this.controller_.rack.add(bc, opt_index);\n        return api;\n    }\n    remove(api) {\n        this.controller_.rack.remove(api.controller);\n    }\n    addBlade(params) {\n        const doc = this.controller_.element.ownerDocument;\n        const bc = this.pool_.createBlade(doc, params);\n        const api = this.pool_.createApi(bc);\n        return this.add(api, params.index);\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        });\n        return this;\n    }\n    refresh() {\n        this.children.forEach((c) => {\n            if (isRefreshable(c)) {\n                c.refresh();\n            }\n        });\n    }\n    onRackValueChange_(ev) {\n        const bc = ev.bladeController;\n        const api = this.pool_.createApi(bc);\n        const binding = isBindingValue(bc.value) ? bc.value.binding : null;\n        this.emitter_.emit('change', new TpChangeEvent(api, binding ? binding.target.read() : bc.value.rawValue, ev.options.last));\n    }\n}\n\nclass ContainerBladeApi extends BladeApi {\n    constructor(controller, pool) {\n        super(controller);\n        this.rackApi_ = new RackApi(controller.rackController, pool);\n    }\n    refresh() {\n        this.rackApi_.refresh();\n    }\n}\n\nclass ContainerBladeController extends BladeController {\n    constructor(config) {\n        super({\n            blade: config.blade,\n            view: config.view,\n            viewProps: config.rackController.viewProps,\n        });\n        this.rackController = config.rackController;\n    }\n    importState(state) {\n        return importBladeState(state, (s) => super.importState(s), (p) => ({\n            children: p.required.array(p.required.raw),\n        }), (result) => {\n            return this.rackController.rack.children.every((c, index) => {\n                return c.importState(result.children[index]);\n            });\n        });\n    }\n    exportState() {\n        return exportBladeState(() => super.exportState(), {\n            children: this.rackController.rack.children.map((c) => c.exportState()),\n        });\n    }\n}\nfunction isContainerBladeController(bc) {\n    return 'rackController' in bc;\n}\n\nclass NestedOrderedSet {\n    constructor(extract) {\n        this.emitter = new Emitter();\n        this.items_ = [];\n        this.cache_ = new Set();\n        this.onSubListAdd_ = this.onSubListAdd_.bind(this);\n        this.onSubListRemove_ = this.onSubListRemove_.bind(this);\n        this.extract_ = extract;\n    }\n    get items() {\n        return this.items_;\n    }\n    allItems() {\n        return Array.from(this.cache_);\n    }\n    find(callback) {\n        for (const item of this.allItems()) {\n            if (callback(item)) {\n                return item;\n            }\n        }\n        return null;\n    }\n    includes(item) {\n        return this.cache_.has(item);\n    }\n    add(item, opt_index) {\n        if (this.includes(item)) {\n            throw TpError.shouldNeverHappen();\n        }\n        const index = opt_index !== undefined ? opt_index : this.items_.length;\n        this.items_.splice(index, 0, item);\n        this.cache_.add(item);\n        const subList = this.extract_(item);\n        if (subList) {\n            subList.emitter.on('add', this.onSubListAdd_);\n            subList.emitter.on('remove', this.onSubListRemove_);\n            subList.allItems().forEach((i) => {\n                this.cache_.add(i);\n            });\n        }\n        this.emitter.emit('add', {\n            index: index,\n            item: item,\n            root: this,\n            target: this,\n        });\n    }\n    remove(item) {\n        const index = this.items_.indexOf(item);\n        if (index < 0) {\n            return;\n        }\n        this.items_.splice(index, 1);\n        this.cache_.delete(item);\n        const subList = this.extract_(item);\n        if (subList) {\n            subList.allItems().forEach((i) => {\n                this.cache_.delete(i);\n            });\n            subList.emitter.off('add', this.onSubListAdd_);\n            subList.emitter.off('remove', this.onSubListRemove_);\n        }\n        this.emitter.emit('remove', {\n            index: index,\n            item: item,\n            root: this,\n            target: this,\n        });\n    }\n    onSubListAdd_(ev) {\n        this.cache_.add(ev.item);\n        this.emitter.emit('add', {\n            index: ev.index,\n            item: ev.item,\n            root: this,\n            target: ev.target,\n        });\n    }\n    onSubListRemove_(ev) {\n        this.cache_.delete(ev.item);\n        this.emitter.emit('remove', {\n            index: ev.index,\n            item: ev.item,\n            root: this,\n            target: ev.target,\n        });\n    }\n}\n\nfunction findValueBladeController(bcs, v) {\n    for (let i = 0; i < bcs.length; i++) {\n        const bc = bcs[i];\n        if (isValueBladeController(bc) && bc.value === v) {\n            return bc;\n        }\n    }\n    return null;\n}\nfunction findSubBladeControllerSet(bc) {\n    return isContainerBladeController(bc)\n        ? bc.rackController.rack['bcSet_']\n        : null;\n}\nclass Rack {\n    constructor(config) {\n        var _a, _b;\n        this.emitter = new Emitter();\n        this.onBladePositionsChange_ = this.onBladePositionsChange_.bind(this);\n        this.onSetAdd_ = this.onSetAdd_.bind(this);\n        this.onSetRemove_ = this.onSetRemove_.bind(this);\n        this.onChildDispose_ = this.onChildDispose_.bind(this);\n        this.onChildPositionsChange_ = this.onChildPositionsChange_.bind(this);\n        this.onChildValueChange_ = this.onChildValueChange_.bind(this);\n        this.onChildViewPropsChange_ = this.onChildViewPropsChange_.bind(this);\n        this.onRackLayout_ = this.onRackLayout_.bind(this);\n        this.onRackValueChange_ = this.onRackValueChange_.bind(this);\n        this.blade_ = (_a = config.blade) !== null && _a !== void 0 ? _a : null;\n        (_b = this.blade_) === null || _b === void 0 ? void 0 : _b.value('positions').emitter.on('change', this.onBladePositionsChange_);\n        this.viewProps = config.viewProps;\n        this.bcSet_ = new NestedOrderedSet(findSubBladeControllerSet);\n        this.bcSet_.emitter.on('add', this.onSetAdd_);\n        this.bcSet_.emitter.on('remove', this.onSetRemove_);\n    }\n    get children() {\n        return this.bcSet_.items;\n    }\n    add(bc, opt_index) {\n        var _a;\n        (_a = bc.parent) === null || _a === void 0 ? void 0 : _a.remove(bc);\n        bc.parent = this;\n        this.bcSet_.add(bc, opt_index);\n    }\n    remove(bc) {\n        bc.parent = null;\n        this.bcSet_.remove(bc);\n    }\n    find(finder) {\n        return this.bcSet_.allItems().filter(finder);\n    }\n    onSetAdd_(ev) {\n        this.updatePositions_();\n        const root = ev.target === ev.root;\n        this.emitter.emit('add', {\n            bladeController: ev.item,\n            index: ev.index,\n            root: root,\n            sender: this,\n        });\n        if (!root) {\n            return;\n        }\n        const bc = ev.item;\n        bc.viewProps.emitter.on('change', this.onChildViewPropsChange_);\n        bc.blade\n            .value('positions')\n            .emitter.on('change', this.onChildPositionsChange_);\n        bc.viewProps.handleDispose(this.onChildDispose_);\n        if (isValueBladeController(bc)) {\n            bc.value.emitter.on('change', this.onChildValueChange_);\n        }\n        else if (isContainerBladeController(bc)) {\n            const rack = bc.rackController.rack;\n            if (rack) {\n                const emitter = rack.emitter;\n                emitter.on('layout', this.onRackLayout_);\n                emitter.on('valuechange', this.onRackValueChange_);\n            }\n        }\n    }\n    onSetRemove_(ev) {\n        this.updatePositions_();\n        const root = ev.target === ev.root;\n        this.emitter.emit('remove', {\n            bladeController: ev.item,\n            root: root,\n            sender: this,\n        });\n        if (!root) {\n            return;\n        }\n        const bc = ev.item;\n        if (isValueBladeController(bc)) {\n            bc.value.emitter.off('change', this.onChildValueChange_);\n        }\n        else if (isContainerBladeController(bc)) {\n            const rack = bc.rackController.rack;\n            if (rack) {\n                const emitter = rack.emitter;\n                emitter.off('layout', this.onRackLayout_);\n                emitter.off('valuechange', this.onRackValueChange_);\n            }\n        }\n    }\n    updatePositions_() {\n        const visibleItems = this.bcSet_.items.filter((bc) => !bc.viewProps.get('hidden'));\n        const firstVisibleItem = visibleItems[0];\n        const lastVisibleItem = visibleItems[visibleItems.length - 1];\n        this.bcSet_.items.forEach((bc) => {\n            const ps = [];\n            if (bc === firstVisibleItem) {\n                ps.push('first');\n                if (!this.blade_ ||\n                    this.blade_.get('positions').includes('veryfirst')) {\n                    ps.push('veryfirst');\n                }\n            }\n            if (bc === lastVisibleItem) {\n                ps.push('last');\n                if (!this.blade_ || this.blade_.get('positions').includes('verylast')) {\n                    ps.push('verylast');\n                }\n            }\n            bc.blade.set('positions', ps);\n        });\n    }\n    onChildPositionsChange_() {\n        this.updatePositions_();\n        this.emitter.emit('layout', {\n            sender: this,\n        });\n    }\n    onChildViewPropsChange_(_ev) {\n        this.updatePositions_();\n        this.emitter.emit('layout', {\n            sender: this,\n        });\n    }\n    onChildDispose_() {\n        const disposedUcs = this.bcSet_.items.filter((bc) => {\n            return bc.viewProps.get('disposed');\n        });\n        disposedUcs.forEach((bc) => {\n            this.bcSet_.remove(bc);\n        });\n    }\n    onChildValueChange_(ev) {\n        const bc = findValueBladeController(this.find(isValueBladeController), ev.sender);\n        if (!bc) {\n            throw TpError.alreadyDisposed();\n        }\n        this.emitter.emit('valuechange', {\n            bladeController: bc,\n            options: ev.options,\n            sender: this,\n        });\n    }\n    onRackLayout_(_) {\n        this.updatePositions_();\n        this.emitter.emit('layout', {\n            sender: this,\n        });\n    }\n    onRackValueChange_(ev) {\n        this.emitter.emit('valuechange', {\n            bladeController: ev.bladeController,\n            options: ev.options,\n            sender: this,\n        });\n    }\n    onBladePositionsChange_() {\n        this.updatePositions_();\n    }\n}\n\nclass RackController {\n    constructor(config) {\n        this.onRackAdd_ = this.onRackAdd_.bind(this);\n        this.onRackRemove_ = this.onRackRemove_.bind(this);\n        this.element = config.element;\n        this.viewProps = config.viewProps;\n        const rack = new Rack({\n            blade: config.root ? undefined : config.blade,\n            viewProps: config.viewProps,\n        });\n        rack.emitter.on('add', this.onRackAdd_);\n        rack.emitter.on('remove', this.onRackRemove_);\n        this.rack = rack;\n        this.viewProps.handleDispose(() => {\n            for (let i = this.rack.children.length - 1; i >= 0; i--) {\n                const bc = this.rack.children[i];\n                bc.viewProps.set('disposed', true);\n            }\n        });\n    }\n    onRackAdd_(ev) {\n        if (!ev.root) {\n            return;\n        }\n        insertElementAt(this.element, ev.bladeController.view.element, ev.index);\n    }\n    onRackRemove_(ev) {\n        if (!ev.root) {\n            return;\n        }\n        removeElement(ev.bladeController.view.element);\n    }\n}\n\nfunction createBlade() {\n    return new ValueMap({\n        positions: createValue([], {\n            equals: deepEqualsArray,\n        }),\n    });\n}\n\nclass Foldable extends ValueMap {\n    constructor(valueMap) {\n        super(valueMap);\n    }\n    static create(expanded) {\n        const coreObj = {\n            completed: true,\n            expanded: expanded,\n            expandedHeight: null,\n            shouldFixHeight: false,\n            temporaryExpanded: null,\n        };\n        const core = ValueMap.createCore(coreObj);\n        return new Foldable(core);\n    }\n    get styleExpanded() {\n        var _a;\n        return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\n    }\n    get styleHeight() {\n        if (!this.styleExpanded) {\n            return '0';\n        }\n        const exHeight = this.get('expandedHeight');\n        if (this.get('shouldFixHeight') && !isEmpty(exHeight)) {\n            return `${exHeight}px`;\n        }\n        return 'auto';\n    }\n    bindExpandedClass(elem, expandedClassName) {\n        const onExpand = () => {\n            const expanded = this.styleExpanded;\n            if (expanded) {\n                elem.classList.add(expandedClassName);\n            }\n            else {\n                elem.classList.remove(expandedClassName);\n            }\n        };\n        bindValueMap(this, 'expanded', onExpand);\n        bindValueMap(this, 'temporaryExpanded', onExpand);\n    }\n    cleanUpTransition() {\n        this.set('shouldFixHeight', false);\n        this.set('expandedHeight', null);\n        this.set('completed', true);\n    }\n}\nfunction computeExpandedFolderHeight(folder, containerElement) {\n    let height = 0;\n    disableTransitionTemporarily(containerElement, () => {\n        folder.set('expandedHeight', null);\n        folder.set('temporaryExpanded', true);\n        forceReflow(containerElement);\n        height = containerElement.clientHeight;\n        folder.set('temporaryExpanded', null);\n        forceReflow(containerElement);\n    });\n    return height;\n}\nfunction applyHeight(foldable, elem) {\n    elem.style.height = foldable.styleHeight;\n}\nfunction bindFoldable(foldable, elem) {\n    foldable.value('expanded').emitter.on('beforechange', () => {\n        foldable.set('completed', false);\n        if (isEmpty(foldable.get('expandedHeight'))) {\n            const h = computeExpandedFolderHeight(foldable, elem);\n            if (h > 0) {\n                foldable.set('expandedHeight', h);\n            }\n        }\n        foldable.set('shouldFixHeight', true);\n        forceReflow(elem);\n    });\n    foldable.emitter.on('change', () => {\n        applyHeight(foldable, elem);\n    });\n    applyHeight(foldable, elem);\n    elem.addEventListener('transitionend', (ev) => {\n        if (ev.propertyName !== 'height') {\n            return;\n        }\n        foldable.cleanUpTransition();\n    });\n}\n\nclass FolderApi extends ContainerBladeApi {\n    constructor(controller, pool) {\n        super(controller, pool);\n        this.emitter_ = new Emitter();\n        this.controller.foldable\n            .value('expanded')\n            .emitter.on('change', (ev) => {\n            this.emitter_.emit('fold', new TpFoldEvent(this, ev.sender.rawValue));\n        });\n        this.rackApi_.on('change', (ev) => {\n            this.emitter_.emit('change', ev);\n        });\n    }\n    get expanded() {\n        return this.controller.foldable.get('expanded');\n    }\n    set expanded(expanded) {\n        this.controller.foldable.set('expanded', expanded);\n    }\n    get title() {\n        return this.controller.props.get('title');\n    }\n    set title(title) {\n        this.controller.props.set('title', title);\n    }\n    get children() {\n        return this.rackApi_.children;\n    }\n    addBinding(object, key, opt_params) {\n        return this.rackApi_.addBinding(object, key, opt_params);\n    }\n    addFolder(params) {\n        return this.rackApi_.addFolder(params);\n    }\n    addButton(params) {\n        return this.rackApi_.addButton(params);\n    }\n    addTab(params) {\n        return this.rackApi_.addTab(params);\n    }\n    add(api, opt_index) {\n        return this.rackApi_.add(api, opt_index);\n    }\n    remove(api) {\n        this.rackApi_.remove(api);\n    }\n    addBlade(params) {\n        return this.rackApi_.addBlade(params);\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        });\n        return this;\n    }\n}\n\nconst bladeContainerClassName = ClassName('cnt');\n\nclass FolderView {\n    constructor(doc, config) {\n        var _a;\n        this.className_ = ClassName((_a = config.viewName) !== null && _a !== void 0 ? _a : 'fld');\n        this.element = doc.createElement('div');\n        this.element.classList.add(this.className_(), bladeContainerClassName());\n        config.viewProps.bindClassModifiers(this.element);\n        this.foldable_ = config.foldable;\n        this.foldable_.bindExpandedClass(this.element, this.className_(undefined, 'expanded'));\n        bindValueMap(this.foldable_, 'completed', valueToClassName(this.element, this.className_(undefined, 'cpl')));\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(this.className_('b'));\n        bindValueMap(config.props, 'title', (title) => {\n            if (isEmpty(title)) {\n                this.element.classList.add(this.className_(undefined, 'not'));\n            }\n            else {\n                this.element.classList.remove(this.className_(undefined, 'not'));\n            }\n        });\n        config.viewProps.bindDisabled(buttonElem);\n        this.element.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        const indentElem = doc.createElement('div');\n        indentElem.classList.add(this.className_('i'));\n        this.element.appendChild(indentElem);\n        const titleElem = doc.createElement('div');\n        titleElem.classList.add(this.className_('t'));\n        bindValueToTextContent(config.props.value('title'), titleElem);\n        this.buttonElement.appendChild(titleElem);\n        this.titleElement = titleElem;\n        const markElem = doc.createElement('div');\n        markElem.classList.add(this.className_('m'));\n        this.buttonElement.appendChild(markElem);\n        const containerElem = doc.createElement('div');\n        containerElem.classList.add(this.className_('c'));\n        this.element.appendChild(containerElem);\n        this.containerElement = containerElem;\n    }\n}\n\nclass FolderController extends ContainerBladeController {\n    constructor(doc, config) {\n        var _a;\n        const foldable = Foldable.create((_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n        const view = new FolderView(doc, {\n            foldable: foldable,\n            props: config.props,\n            viewName: config.root ? 'rot' : undefined,\n            viewProps: config.viewProps,\n        });\n        super(Object.assign(Object.assign({}, config), { rackController: new RackController({\n                blade: config.blade,\n                element: view.containerElement,\n                root: config.root,\n                viewProps: config.viewProps,\n            }), view: view }));\n        this.onTitleClick_ = this.onTitleClick_.bind(this);\n        this.props = config.props;\n        this.foldable = foldable;\n        bindFoldable(this.foldable, this.view.containerElement);\n        this.rackController.rack.emitter.on('add', () => {\n            this.foldable.cleanUpTransition();\n        });\n        this.rackController.rack.emitter.on('remove', () => {\n            this.foldable.cleanUpTransition();\n        });\n        this.view.buttonElement.addEventListener('click', this.onTitleClick_);\n    }\n    get document() {\n        return this.view.element.ownerDocument;\n    }\n    importState(state) {\n        return importBladeState(state, (s) => super.importState(s), (p) => ({\n            expanded: p.required.boolean,\n            title: p.optional.string,\n        }), (result) => {\n            this.foldable.set('expanded', result.expanded);\n            this.props.set('title', result.title);\n            return true;\n        });\n    }\n    exportState() {\n        return exportBladeState(() => super.exportState(), {\n            expanded: this.foldable.get('expanded'),\n            title: this.props.get('title'),\n        });\n    }\n    onTitleClick_() {\n        this.foldable.set('expanded', !this.foldable.get('expanded'));\n    }\n}\n\nconst FolderBladePlugin = createPlugin({\n    id: 'folder',\n    type: 'blade',\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            title: p.required.string,\n            view: p.required.constant('folder'),\n            expanded: p.optional.boolean,\n        }));\n        return result ? { params: result } : null;\n    },\n    controller(args) {\n        return new FolderController(args.document, {\n            blade: args.blade,\n            expanded: args.params.expanded,\n            props: ValueMap.fromObject({\n                title: args.params.title,\n            }),\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (!(args.controller instanceof FolderController)) {\n            return null;\n        }\n        return new FolderApi(args.controller, args.pool);\n    },\n});\n\nconst cn$o = ClassName('');\nfunction valueToModifier(elem, modifier) {\n    return valueToClassName(elem, cn$o(undefined, modifier));\n}\nclass ViewProps extends ValueMap {\n    constructor(valueMap) {\n        var _a;\n        super(valueMap);\n        this.onDisabledChange_ = this.onDisabledChange_.bind(this);\n        this.onParentChange_ = this.onParentChange_.bind(this);\n        this.onParentGlobalDisabledChange_ =\n            this.onParentGlobalDisabledChange_.bind(this);\n        [this.globalDisabled_, this.setGlobalDisabled_] = createReadonlyValue(createValue(this.getGlobalDisabled_()));\n        this.value('disabled').emitter.on('change', this.onDisabledChange_);\n        this.value('parent').emitter.on('change', this.onParentChange_);\n        (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n    }\n    static create(opt_initialValue) {\n        var _a, _b, _c;\n        const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n        return new ViewProps(ValueMap.createCore({\n            disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n            disposed: false,\n            hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n            parent: (_c = initialValue.parent) !== null && _c !== void 0 ? _c : null,\n        }));\n    }\n    get globalDisabled() {\n        return this.globalDisabled_;\n    }\n    bindClassModifiers(elem) {\n        bindValue(this.globalDisabled_, valueToModifier(elem, 'disabled'));\n        bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n    }\n    bindDisabled(target) {\n        bindValue(this.globalDisabled_, (disabled) => {\n            target.disabled = disabled;\n        });\n    }\n    bindTabIndex(elem) {\n        bindValue(this.globalDisabled_, (disabled) => {\n            elem.tabIndex = disabled ? -1 : 0;\n        });\n    }\n    handleDispose(callback) {\n        this.value('disposed').emitter.on('change', (disposed) => {\n            if (disposed) {\n                callback();\n            }\n        });\n    }\n    importState(state) {\n        this.set('disabled', state.disabled);\n        this.set('hidden', state.hidden);\n    }\n    exportState() {\n        return {\n            disabled: this.get('disabled'),\n            hidden: this.get('hidden'),\n        };\n    }\n    getGlobalDisabled_() {\n        const parent = this.get('parent');\n        const parentDisabled = parent ? parent.globalDisabled.rawValue : false;\n        return parentDisabled || this.get('disabled');\n    }\n    updateGlobalDisabled_() {\n        this.setGlobalDisabled_(this.getGlobalDisabled_());\n    }\n    onDisabledChange_() {\n        this.updateGlobalDisabled_();\n    }\n    onParentGlobalDisabledChange_() {\n        this.updateGlobalDisabled_();\n    }\n    onParentChange_(ev) {\n        var _a;\n        const prevParent = ev.previousRawValue;\n        prevParent === null || prevParent === void 0 ? void 0 : prevParent.globalDisabled.emitter.off('change', this.onParentGlobalDisabledChange_);\n        (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n        this.updateGlobalDisabled_();\n    }\n}\n\nconst cn$n = ClassName('tbp');\nclass TabPageView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$n());\n        config.viewProps.bindClassModifiers(this.element);\n        const containerElem = doc.createElement('div');\n        containerElem.classList.add(cn$n('c'));\n        this.element.appendChild(containerElem);\n        this.containerElement = containerElem;\n    }\n}\n\nconst cn$m = ClassName('tbi');\nclass TabItemView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$m());\n        config.viewProps.bindClassModifiers(this.element);\n        bindValueMap(config.props, 'selected', (selected) => {\n            if (selected) {\n                this.element.classList.add(cn$m(undefined, 'sel'));\n            }\n            else {\n                this.element.classList.remove(cn$m(undefined, 'sel'));\n            }\n        });\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(cn$m('b'));\n        config.viewProps.bindDisabled(buttonElem);\n        this.element.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        const titleElem = doc.createElement('div');\n        titleElem.classList.add(cn$m('t'));\n        bindValueToTextContent(config.props.value('title'), titleElem);\n        this.buttonElement.appendChild(titleElem);\n        this.titleElement = titleElem;\n    }\n}\n\nclass TabItemController {\n    constructor(doc, config) {\n        this.emitter = new Emitter();\n        this.onClick_ = this.onClick_.bind(this);\n        this.props = config.props;\n        this.viewProps = config.viewProps;\n        this.view = new TabItemView(doc, {\n            props: config.props,\n            viewProps: config.viewProps,\n        });\n        this.view.buttonElement.addEventListener('click', this.onClick_);\n    }\n    onClick_() {\n        this.emitter.emit('click', {\n            sender: this,\n        });\n    }\n}\n\nclass TabPageController extends ContainerBladeController {\n    constructor(doc, config) {\n        const view = new TabPageView(doc, {\n            viewProps: config.viewProps,\n        });\n        super(Object.assign(Object.assign({}, config), { rackController: new RackController({\n                blade: config.blade,\n                element: view.containerElement,\n                viewProps: config.viewProps,\n            }), view: view }));\n        this.onItemClick_ = this.onItemClick_.bind(this);\n        this.ic_ = new TabItemController(doc, {\n            props: config.itemProps,\n            viewProps: ViewProps.create(),\n        });\n        this.ic_.emitter.on('click', this.onItemClick_);\n        this.props = config.props;\n        bindValueMap(this.props, 'selected', (selected) => {\n            this.itemController.props.set('selected', selected);\n            this.viewProps.set('hidden', !selected);\n        });\n    }\n    get itemController() {\n        return this.ic_;\n    }\n    importState(state) {\n        return importBladeState(state, (s) => super.importState(s), (p) => ({\n            selected: p.required.boolean,\n            title: p.required.string,\n        }), (result) => {\n            this.ic_.props.set('selected', result.selected);\n            this.ic_.props.set('title', result.title);\n            return true;\n        });\n    }\n    exportState() {\n        return exportBladeState(() => super.exportState(), {\n            selected: this.ic_.props.get('selected'),\n            title: this.ic_.props.get('title'),\n        });\n    }\n    onItemClick_() {\n        this.props.set('selected', true);\n    }\n}\n\nclass TabApi extends ContainerBladeApi {\n    constructor(controller, pool) {\n        super(controller, pool);\n        this.emitter_ = new Emitter();\n        this.onSelect_ = this.onSelect_.bind(this);\n        this.pool_ = pool;\n        this.rackApi_.on('change', (ev) => {\n            this.emitter_.emit('change', ev);\n        });\n        this.controller.tab.selectedIndex.emitter.on('change', this.onSelect_);\n    }\n    get pages() {\n        return this.rackApi_.children;\n    }\n    addPage(params) {\n        const doc = this.controller.view.element.ownerDocument;\n        const pc = new TabPageController(doc, {\n            blade: createBlade(),\n            itemProps: ValueMap.fromObject({\n                selected: false,\n                title: params.title,\n            }),\n            props: ValueMap.fromObject({\n                selected: false,\n            }),\n            viewProps: ViewProps.create(),\n        });\n        const papi = this.pool_.createApi(pc);\n        return this.rackApi_.add(papi, params.index);\n    }\n    removePage(index) {\n        this.rackApi_.remove(this.rackApi_.children[index]);\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        });\n        return this;\n    }\n    onSelect_(ev) {\n        this.emitter_.emit('select', new TpTabSelectEvent(this, ev.rawValue));\n    }\n}\n\nclass TabPageApi extends ContainerBladeApi {\n    get title() {\n        var _a;\n        return (_a = this.controller.itemController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n    }\n    set title(title) {\n        this.controller.itemController.props.set('title', title);\n    }\n    get selected() {\n        return this.controller.props.get('selected');\n    }\n    set selected(selected) {\n        this.controller.props.set('selected', selected);\n    }\n    get children() {\n        return this.rackApi_.children;\n    }\n    addButton(params) {\n        return this.rackApi_.addButton(params);\n    }\n    addFolder(params) {\n        return this.rackApi_.addFolder(params);\n    }\n    addTab(params) {\n        return this.rackApi_.addTab(params);\n    }\n    add(api, opt_index) {\n        this.rackApi_.add(api, opt_index);\n    }\n    remove(api) {\n        this.rackApi_.remove(api);\n    }\n    addBinding(object, key, opt_params) {\n        return this.rackApi_.addBinding(object, key, opt_params);\n    }\n    addBlade(params) {\n        return this.rackApi_.addBlade(params);\n    }\n}\n\nconst INDEX_NOT_SELECTED = -1;\nclass Tab {\n    constructor() {\n        this.onItemSelectedChange_ = this.onItemSelectedChange_.bind(this);\n        this.empty = createValue(true);\n        this.selectedIndex = createValue(INDEX_NOT_SELECTED);\n        this.items_ = [];\n    }\n    add(item, opt_index) {\n        const index = opt_index !== null && opt_index !== void 0 ? opt_index : this.items_.length;\n        this.items_.splice(index, 0, item);\n        item.emitter.on('change', this.onItemSelectedChange_);\n        this.keepSelection_();\n    }\n    remove(item) {\n        const index = this.items_.indexOf(item);\n        if (index < 0) {\n            return;\n        }\n        this.items_.splice(index, 1);\n        item.emitter.off('change', this.onItemSelectedChange_);\n        this.keepSelection_();\n    }\n    keepSelection_() {\n        if (this.items_.length === 0) {\n            this.selectedIndex.rawValue = INDEX_NOT_SELECTED;\n            this.empty.rawValue = true;\n            return;\n        }\n        const firstSelIndex = this.items_.findIndex((s) => s.rawValue);\n        if (firstSelIndex < 0) {\n            this.items_.forEach((s, i) => {\n                s.rawValue = i === 0;\n            });\n            this.selectedIndex.rawValue = 0;\n        }\n        else {\n            this.items_.forEach((s, i) => {\n                s.rawValue = i === firstSelIndex;\n            });\n            this.selectedIndex.rawValue = firstSelIndex;\n        }\n        this.empty.rawValue = false;\n    }\n    onItemSelectedChange_(ev) {\n        if (ev.rawValue) {\n            const index = this.items_.findIndex((s) => s === ev.sender);\n            this.items_.forEach((s, i) => {\n                s.rawValue = i === index;\n            });\n            this.selectedIndex.rawValue = index;\n        }\n        else {\n            this.keepSelection_();\n        }\n    }\n}\n\nconst cn$l = ClassName('tab');\nclass TabView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$l(), bladeContainerClassName());\n        config.viewProps.bindClassModifiers(this.element);\n        bindValue(config.empty, valueToClassName(this.element, cn$l(undefined, 'nop')));\n        const titleElem = doc.createElement('div');\n        titleElem.classList.add(cn$l('t'));\n        this.element.appendChild(titleElem);\n        this.itemsElement = titleElem;\n        const indentElem = doc.createElement('div');\n        indentElem.classList.add(cn$l('i'));\n        this.element.appendChild(indentElem);\n        const contentsElem = doc.createElement('div');\n        contentsElem.classList.add(cn$l('c'));\n        this.element.appendChild(contentsElem);\n        this.contentsElement = contentsElem;\n    }\n}\n\nclass TabController extends ContainerBladeController {\n    constructor(doc, config) {\n        const tab = new Tab();\n        const view = new TabView(doc, {\n            empty: tab.empty,\n            viewProps: config.viewProps,\n        });\n        super({\n            blade: config.blade,\n            rackController: new RackController({\n                blade: config.blade,\n                element: view.contentsElement,\n                viewProps: config.viewProps,\n            }),\n            view: view,\n        });\n        this.onRackAdd_ = this.onRackAdd_.bind(this);\n        this.onRackRemove_ = this.onRackRemove_.bind(this);\n        const rack = this.rackController.rack;\n        rack.emitter.on('add', this.onRackAdd_);\n        rack.emitter.on('remove', this.onRackRemove_);\n        this.tab = tab;\n    }\n    add(pc, opt_index) {\n        this.rackController.rack.add(pc, opt_index);\n    }\n    remove(index) {\n        this.rackController.rack.remove(this.rackController.rack.children[index]);\n    }\n    onRackAdd_(ev) {\n        if (!ev.root) {\n            return;\n        }\n        const pc = ev.bladeController;\n        insertElementAt(this.view.itemsElement, pc.itemController.view.element, ev.index);\n        pc.itemController.viewProps.set('parent', this.viewProps);\n        this.tab.add(pc.props.value('selected'));\n    }\n    onRackRemove_(ev) {\n        if (!ev.root) {\n            return;\n        }\n        const pc = ev.bladeController;\n        removeElement(pc.itemController.view.element);\n        pc.itemController.viewProps.set('parent', null);\n        this.tab.remove(pc.props.value('selected'));\n    }\n}\n\nconst TabBladePlugin = createPlugin({\n    id: 'tab',\n    type: 'blade',\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            pages: p.required.array(p.required.object({ title: p.required.string })),\n            view: p.required.constant('tab'),\n        }));\n        if (!result || result.pages.length === 0) {\n            return null;\n        }\n        return { params: result };\n    },\n    controller(args) {\n        const c = new TabController(args.document, {\n            blade: args.blade,\n            viewProps: args.viewProps,\n        });\n        args.params.pages.forEach((p) => {\n            const pc = new TabPageController(args.document, {\n                blade: createBlade(),\n                itemProps: ValueMap.fromObject({\n                    selected: false,\n                    title: p.title,\n                }),\n                props: ValueMap.fromObject({\n                    selected: false,\n                }),\n                viewProps: ViewProps.create(),\n            });\n            c.add(pc);\n        });\n        return c;\n    },\n    api(args) {\n        if (args.controller instanceof TabController) {\n            return new TabApi(args.controller, args.pool);\n        }\n        if (args.controller instanceof TabPageController) {\n            return new TabPageApi(args.controller, args.pool);\n        }\n        return null;\n    },\n});\n\nfunction createBladeController(plugin, args) {\n    const ac = plugin.accept(args.params);\n    if (!ac) {\n        return null;\n    }\n    const params = parseRecord(args.params, (p) => ({\n        disabled: p.optional.boolean,\n        hidden: p.optional.boolean,\n    }));\n    return plugin.controller({\n        blade: createBlade(),\n        document: args.document,\n        params: forceCast(Object.assign(Object.assign({}, ac.params), { disabled: params === null || params === void 0 ? void 0 : params.disabled, hidden: params === null || params === void 0 ? void 0 : params.hidden })),\n        viewProps: ViewProps.create({\n            disabled: params === null || params === void 0 ? void 0 : params.disabled,\n            hidden: params === null || params === void 0 ? void 0 : params.hidden,\n        }),\n    });\n}\n\nclass ListInputBindingApi extends BindingApi {\n    get options() {\n        return this.controller.valueController.props.get('options');\n    }\n    set options(options) {\n        this.controller.valueController.props.set('options', options);\n    }\n}\n\nclass ManualTicker {\n    constructor() {\n        this.disabled = false;\n        this.emitter = new Emitter();\n    }\n    dispose() { }\n    tick() {\n        if (this.disabled) {\n            return;\n        }\n        this.emitter.emit('tick', {\n            sender: this,\n        });\n    }\n}\n\nclass IntervalTicker {\n    constructor(doc, interval) {\n        this.disabled_ = false;\n        this.timerId_ = null;\n        this.onTick_ = this.onTick_.bind(this);\n        this.doc_ = doc;\n        this.emitter = new Emitter();\n        this.interval_ = interval;\n        this.setTimer_();\n    }\n    get disabled() {\n        return this.disabled_;\n    }\n    set disabled(inactive) {\n        this.disabled_ = inactive;\n        if (this.disabled_) {\n            this.clearTimer_();\n        }\n        else {\n            this.setTimer_();\n        }\n    }\n    dispose() {\n        this.clearTimer_();\n    }\n    clearTimer_() {\n        if (this.timerId_ === null) {\n            return;\n        }\n        const win = this.doc_.defaultView;\n        if (win) {\n            win.clearInterval(this.timerId_);\n        }\n        this.timerId_ = null;\n    }\n    setTimer_() {\n        this.clearTimer_();\n        if (this.interval_ <= 0) {\n            return;\n        }\n        const win = this.doc_.defaultView;\n        if (win) {\n            this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n        }\n    }\n    onTick_() {\n        if (this.disabled_) {\n            return;\n        }\n        this.emitter.emit('tick', {\n            sender: this,\n        });\n    }\n}\n\nclass CompositeConstraint {\n    constructor(constraints) {\n        this.constraints = constraints;\n    }\n    constrain(value) {\n        return this.constraints.reduce((result, c) => {\n            return c.constrain(result);\n        }, value);\n    }\n}\nfunction findConstraint(c, constraintClass) {\n    if (c instanceof constraintClass) {\n        return c;\n    }\n    if (c instanceof CompositeConstraint) {\n        const result = c.constraints.reduce((tmpResult, sc) => {\n            if (tmpResult) {\n                return tmpResult;\n            }\n            return sc instanceof constraintClass ? sc : null;\n        }, null);\n        if (result) {\n            return result;\n        }\n    }\n    return null;\n}\n\nclass ListConstraint {\n    constructor(options) {\n        this.values = ValueMap.fromObject({\n            options: options,\n        });\n    }\n    constrain(value) {\n        const opts = this.values.get('options');\n        if (opts.length === 0) {\n            return value;\n        }\n        const matched = opts.filter((item) => {\n            return item.value === value;\n        }).length > 0;\n        return matched ? value : opts[0].value;\n    }\n}\n\nfunction parseListOptions(value) {\n    var _a;\n    const p = MicroParsers;\n    if (Array.isArray(value)) {\n        return (_a = parseRecord({ items: value }, (p) => ({\n            items: p.required.array(p.required.object({\n                text: p.required.string,\n                value: p.required.raw,\n            })),\n        }))) === null || _a === void 0 ? void 0 : _a.items;\n    }\n    if (typeof value === 'object') {\n        return p.required.raw(value)\n            .value;\n    }\n    return undefined;\n}\nfunction normalizeListOptions(options) {\n    if (Array.isArray(options)) {\n        return options;\n    }\n    const items = [];\n    Object.keys(options).forEach((text) => {\n        items.push({ text: text, value: options[text] });\n    });\n    return items;\n}\nfunction createListConstraint(options) {\n    return !isEmpty(options)\n        ? new ListConstraint(normalizeListOptions(forceCast(options)))\n        : null;\n}\n\nconst cn$k = ClassName('lst');\nclass ListView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.props_ = config.props;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$k());\n        config.viewProps.bindClassModifiers(this.element);\n        const selectElem = doc.createElement('select');\n        selectElem.classList.add(cn$k('s'));\n        config.viewProps.bindDisabled(selectElem);\n        this.element.appendChild(selectElem);\n        this.selectElement = selectElem;\n        const markElem = doc.createElement('div');\n        markElem.classList.add(cn$k('m'));\n        markElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n        this.element.appendChild(markElem);\n        config.value.emitter.on('change', this.onValueChange_);\n        this.value_ = config.value;\n        bindValueMap(this.props_, 'options', (opts) => {\n            removeChildElements(this.selectElement);\n            opts.forEach((item) => {\n                const optionElem = doc.createElement('option');\n                optionElem.textContent = item.text;\n                this.selectElement.appendChild(optionElem);\n            });\n            this.update_();\n        });\n    }\n    update_() {\n        const values = this.props_.get('options').map((o) => o.value);\n        this.selectElement.selectedIndex = values.indexOf(this.value_.rawValue);\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass ListController {\n    constructor(doc, config) {\n        this.onSelectChange_ = this.onSelectChange_.bind(this);\n        this.props = config.props;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new ListView(doc, {\n            props: this.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view.selectElement.addEventListener('change', this.onSelectChange_);\n    }\n    onSelectChange_(e) {\n        const selectElem = forceCast(e.currentTarget);\n        this.value.rawValue =\n            this.props.get('options')[selectElem.selectedIndex].value;\n    }\n    importProps(state) {\n        return importBladeState(state, null, (p) => ({\n            options: p.required.custom(parseListOptions),\n        }), (result) => {\n            this.props.set('options', normalizeListOptions(result.options));\n            return true;\n        });\n    }\n    exportProps() {\n        return exportBladeState(null, {\n            options: this.props.get('options'),\n        });\n    }\n}\n\nconst cn$j = ClassName('pop');\nclass PopupView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$j());\n        config.viewProps.bindClassModifiers(this.element);\n        bindValue(config.shows, valueToClassName(this.element, cn$j(undefined, 'v')));\n    }\n}\n\nclass PopupController {\n    constructor(doc, config) {\n        this.shows = createValue(false);\n        this.viewProps = config.viewProps;\n        this.view = new PopupView(doc, {\n            shows: this.shows,\n            viewProps: this.viewProps,\n        });\n    }\n}\n\nconst cn$i = ClassName('txt');\nclass TextView {\n    constructor(doc, config) {\n        this.onChange_ = this.onChange_.bind(this);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$i());\n        config.viewProps.bindClassModifiers(this.element);\n        this.props_ = config.props;\n        this.props_.emitter.on('change', this.onChange_);\n        const inputElem = doc.createElement('input');\n        inputElem.classList.add(cn$i('i'));\n        inputElem.type = 'text';\n        config.viewProps.bindDisabled(inputElem);\n        this.element.appendChild(inputElem);\n        this.inputElement = inputElem;\n        config.value.emitter.on('change', this.onChange_);\n        this.value_ = config.value;\n        this.refresh();\n    }\n    refresh() {\n        const formatter = this.props_.get('formatter');\n        this.inputElement.value = formatter(this.value_.rawValue);\n    }\n    onChange_() {\n        this.refresh();\n    }\n}\n\nclass TextController {\n    constructor(doc, config) {\n        this.onInputChange_ = this.onInputChange_.bind(this);\n        this.parser_ = config.parser;\n        this.props = config.props;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new TextView(doc, {\n            props: config.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view.inputElement.addEventListener('change', this.onInputChange_);\n    }\n    onInputChange_(e) {\n        const inputElem = forceCast(e.currentTarget);\n        const value = inputElem.value;\n        const parsedValue = this.parser_(value);\n        if (!isEmpty(parsedValue)) {\n            this.value.rawValue = parsedValue;\n        }\n        this.view.refresh();\n    }\n}\n\nfunction boolToString(value) {\n    return String(value);\n}\nfunction boolFromUnknown(value) {\n    if (value === 'false') {\n        return false;\n    }\n    return !!value;\n}\nfunction BooleanFormatter(value) {\n    return boolToString(value);\n}\n\nfunction composeParsers(parsers) {\n    return (text) => {\n        return parsers.reduce((result, parser) => {\n            if (result !== null) {\n                return result;\n            }\n            return parser(text);\n        }, null);\n    };\n}\n\nconst innerFormatter = createNumberFormatter(0);\nfunction formatPercentage(value) {\n    return innerFormatter(value) + '%';\n}\n\nfunction stringFromUnknown(value) {\n    return String(value);\n}\nfunction formatString(value) {\n    return value;\n}\n\nfunction connectValues({ primary, secondary, forward, backward, }) {\n    let changing = false;\n    function preventFeedback(callback) {\n        if (changing) {\n            return;\n        }\n        changing = true;\n        callback();\n        changing = false;\n    }\n    primary.emitter.on('change', (ev) => {\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary.rawValue, secondary.rawValue), ev.options);\n        });\n    });\n    secondary.emitter.on('change', (ev) => {\n        preventFeedback(() => {\n            primary.setRawValue(backward(primary.rawValue, secondary.rawValue), ev.options);\n        });\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary.rawValue, secondary.rawValue), ev.options);\n        });\n    });\n    preventFeedback(() => {\n        secondary.setRawValue(forward(primary.rawValue, secondary.rawValue), {\n            forceEmit: false,\n            last: true,\n        });\n    });\n}\n\nfunction getStepForKey(keyScale, keys) {\n    const step = keyScale * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n    if (keys.upKey) {\n        return +step;\n    }\n    else if (keys.downKey) {\n        return -step;\n    }\n    return 0;\n}\nfunction getVerticalStepKeys(ev) {\n    return {\n        altKey: ev.altKey,\n        downKey: ev.key === 'ArrowDown',\n        shiftKey: ev.shiftKey,\n        upKey: ev.key === 'ArrowUp',\n    };\n}\nfunction getHorizontalStepKeys(ev) {\n    return {\n        altKey: ev.altKey,\n        downKey: ev.key === 'ArrowLeft',\n        shiftKey: ev.shiftKey,\n        upKey: ev.key === 'ArrowRight',\n    };\n}\nfunction isVerticalArrowKey(key) {\n    return key === 'ArrowUp' || key === 'ArrowDown';\n}\nfunction isArrowKey(key) {\n    return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\n}\n\nfunction computeOffset$1(ev, elem) {\n    var _a, _b;\n    const win = elem.ownerDocument.defaultView;\n    const rect = elem.getBoundingClientRect();\n    return {\n        x: ev.pageX - (((_a = (win && win.scrollX)) !== null && _a !== void 0 ? _a : 0) + rect.left),\n        y: ev.pageY - (((_b = (win && win.scrollY)) !== null && _b !== void 0 ? _b : 0) + rect.top),\n    };\n}\nclass PointerHandler {\n    constructor(element) {\n        this.lastTouch_ = null;\n        this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n        this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n        this.onMouseDown_ = this.onMouseDown_.bind(this);\n        this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n        this.onTouchMove_ = this.onTouchMove_.bind(this);\n        this.onTouchStart_ = this.onTouchStart_.bind(this);\n        this.elem_ = element;\n        this.emitter = new Emitter();\n        element.addEventListener('touchstart', this.onTouchStart_, {\n            passive: false,\n        });\n        element.addEventListener('touchmove', this.onTouchMove_, {\n            passive: true,\n        });\n        element.addEventListener('touchend', this.onTouchEnd_);\n        element.addEventListener('mousedown', this.onMouseDown_);\n    }\n    computePosition_(offset) {\n        const rect = this.elem_.getBoundingClientRect();\n        return {\n            bounds: {\n                width: rect.width,\n                height: rect.height,\n            },\n            point: offset\n                ? {\n                    x: offset.x,\n                    y: offset.y,\n                }\n                : null,\n        };\n    }\n    onMouseDown_(ev) {\n        var _a;\n        ev.preventDefault();\n        (_a = ev.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n        const doc = this.elem_.ownerDocument;\n        doc.addEventListener('mousemove', this.onDocumentMouseMove_);\n        doc.addEventListener('mouseup', this.onDocumentMouseUp_);\n        this.emitter.emit('down', {\n            altKey: ev.altKey,\n            data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n    }\n    onDocumentMouseMove_(ev) {\n        this.emitter.emit('move', {\n            altKey: ev.altKey,\n            data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n    }\n    onDocumentMouseUp_(ev) {\n        const doc = this.elem_.ownerDocument;\n        doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\n        doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\n        this.emitter.emit('up', {\n            altKey: ev.altKey,\n            data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n    }\n    onTouchStart_(ev) {\n        ev.preventDefault();\n        const touch = ev.targetTouches.item(0);\n        const rect = this.elem_.getBoundingClientRect();\n        this.emitter.emit('down', {\n            altKey: ev.altKey,\n            data: this.computePosition_(touch\n                ? {\n                    x: touch.clientX - rect.left,\n                    y: touch.clientY - rect.top,\n                }\n                : undefined),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n        this.lastTouch_ = touch;\n    }\n    onTouchMove_(ev) {\n        const touch = ev.targetTouches.item(0);\n        const rect = this.elem_.getBoundingClientRect();\n        this.emitter.emit('move', {\n            altKey: ev.altKey,\n            data: this.computePosition_(touch\n                ? {\n                    x: touch.clientX - rect.left,\n                    y: touch.clientY - rect.top,\n                }\n                : undefined),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n        this.lastTouch_ = touch;\n    }\n    onTouchEnd_(ev) {\n        var _a;\n        const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n        const rect = this.elem_.getBoundingClientRect();\n        this.emitter.emit('up', {\n            altKey: ev.altKey,\n            data: this.computePosition_(touch\n                ? {\n                    x: touch.clientX - rect.left,\n                    y: touch.clientY - rect.top,\n                }\n                : undefined),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n    }\n}\n\nconst cn$h = ClassName('txt');\nclass NumberTextView {\n    constructor(doc, config) {\n        this.onChange_ = this.onChange_.bind(this);\n        this.props_ = config.props;\n        this.props_.emitter.on('change', this.onChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$h(), cn$h(undefined, 'num'));\n        if (config.arrayPosition) {\n            this.element.classList.add(cn$h(undefined, config.arrayPosition));\n        }\n        config.viewProps.bindClassModifiers(this.element);\n        const inputElem = doc.createElement('input');\n        inputElem.classList.add(cn$h('i'));\n        inputElem.type = 'text';\n        config.viewProps.bindDisabled(inputElem);\n        this.element.appendChild(inputElem);\n        this.inputElement = inputElem;\n        this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n        this.dragging_ = config.dragging;\n        this.dragging_.emitter.on('change', this.onDraggingChange_);\n        this.element.classList.add(cn$h());\n        this.inputElement.classList.add(cn$h('i'));\n        const knobElem = doc.createElement('div');\n        knobElem.classList.add(cn$h('k'));\n        this.element.appendChild(knobElem);\n        this.knobElement = knobElem;\n        const guideElem = doc.createElementNS(SVG_NS, 'svg');\n        guideElem.classList.add(cn$h('g'));\n        this.knobElement.appendChild(guideElem);\n        const bodyElem = doc.createElementNS(SVG_NS, 'path');\n        bodyElem.classList.add(cn$h('gb'));\n        guideElem.appendChild(bodyElem);\n        this.guideBodyElem_ = bodyElem;\n        const headElem = doc.createElementNS(SVG_NS, 'path');\n        headElem.classList.add(cn$h('gh'));\n        guideElem.appendChild(headElem);\n        this.guideHeadElem_ = headElem;\n        const tooltipElem = doc.createElement('div');\n        tooltipElem.classList.add(ClassName('tt')());\n        this.knobElement.appendChild(tooltipElem);\n        this.tooltipElem_ = tooltipElem;\n        config.value.emitter.on('change', this.onChange_);\n        this.value = config.value;\n        this.refresh();\n    }\n    onDraggingChange_(ev) {\n        if (ev.rawValue === null) {\n            this.element.classList.remove(cn$h(undefined, 'drg'));\n            return;\n        }\n        this.element.classList.add(cn$h(undefined, 'drg'));\n        const x = ev.rawValue / this.props_.get('pointerScale');\n        const aox = x + (x > 0 ? -1 : x < 0 ? +1 : 0);\n        const adx = constrainRange(-aox, -4, +4);\n        this.guideHeadElem_.setAttributeNS(null, 'd', [`M ${aox + adx},0 L${aox},4 L${aox + adx},8`, `M ${x},-1 L${x},9`].join(' '));\n        this.guideBodyElem_.setAttributeNS(null, 'd', `M 0,4 L${x},4`);\n        const formatter = this.props_.get('formatter');\n        this.tooltipElem_.textContent = formatter(this.value.rawValue);\n        this.tooltipElem_.style.left = `${x}px`;\n    }\n    refresh() {\n        const formatter = this.props_.get('formatter');\n        this.inputElement.value = formatter(this.value.rawValue);\n    }\n    onChange_() {\n        this.refresh();\n    }\n}\n\nclass NumberTextController {\n    constructor(doc, config) {\n        var _a;\n        this.originRawValue_ = 0;\n        this.onInputChange_ = this.onInputChange_.bind(this);\n        this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n        this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.parser_ = config.parser;\n        this.props = config.props;\n        this.sliderProps_ = (_a = config.sliderProps) !== null && _a !== void 0 ? _a : null;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.dragging_ = createValue(null);\n        this.view = new NumberTextView(doc, {\n            arrayPosition: config.arrayPosition,\n            dragging: this.dragging_,\n            props: this.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view.inputElement.addEventListener('change', this.onInputChange_);\n        this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\n        this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\n        const ph = new PointerHandler(this.view.knobElement);\n        ph.emitter.on('down', this.onPointerDown_);\n        ph.emitter.on('move', this.onPointerMove_);\n        ph.emitter.on('up', this.onPointerUp_);\n    }\n    constrainValue_(value) {\n        var _a, _b;\n        const min = (_a = this.sliderProps_) === null || _a === void 0 ? void 0 : _a.get('min');\n        const max = (_b = this.sliderProps_) === null || _b === void 0 ? void 0 : _b.get('max');\n        let v = value;\n        if (min !== undefined) {\n            v = Math.max(v, min);\n        }\n        if (max !== undefined) {\n            v = Math.min(v, max);\n        }\n        return v;\n    }\n    onInputChange_(e) {\n        const inputElem = forceCast(e.currentTarget);\n        const value = inputElem.value;\n        const parsedValue = this.parser_(value);\n        if (!isEmpty(parsedValue)) {\n            this.value.rawValue = this.constrainValue_(parsedValue);\n        }\n        this.view.refresh();\n    }\n    onInputKeyDown_(ev) {\n        const step = getStepForKey(this.props.get('keyScale'), getVerticalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.constrainValue_(this.value.rawValue + step), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onInputKeyUp_(ev) {\n        const step = getStepForKey(this.props.get('keyScale'), getVerticalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onPointerDown_() {\n        this.originRawValue_ = this.value.rawValue;\n        this.dragging_.rawValue = 0;\n    }\n    computeDraggingValue_(data) {\n        if (!data.point) {\n            return null;\n        }\n        const dx = data.point.x - data.bounds.width / 2;\n        return this.constrainValue_(this.originRawValue_ + dx * this.props.get('pointerScale'));\n    }\n    onPointerMove_(ev) {\n        const v = this.computeDraggingValue_(ev.data);\n        if (v === null) {\n            return;\n        }\n        this.value.setRawValue(v, {\n            forceEmit: false,\n            last: false,\n        });\n        this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n    }\n    onPointerUp_(ev) {\n        const v = this.computeDraggingValue_(ev.data);\n        if (v === null) {\n            return;\n        }\n        this.value.setRawValue(v, {\n            forceEmit: true,\n            last: true,\n        });\n        this.dragging_.rawValue = null;\n    }\n}\n\nconst cn$g = ClassName('sld');\nclass SliderView {\n    constructor(doc, config) {\n        this.onChange_ = this.onChange_.bind(this);\n        this.props_ = config.props;\n        this.props_.emitter.on('change', this.onChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$g());\n        config.viewProps.bindClassModifiers(this.element);\n        const trackElem = doc.createElement('div');\n        trackElem.classList.add(cn$g('t'));\n        config.viewProps.bindTabIndex(trackElem);\n        this.element.appendChild(trackElem);\n        this.trackElement = trackElem;\n        const knobElem = doc.createElement('div');\n        knobElem.classList.add(cn$g('k'));\n        this.trackElement.appendChild(knobElem);\n        this.knobElement = knobElem;\n        config.value.emitter.on('change', this.onChange_);\n        this.value = config.value;\n        this.update_();\n    }\n    update_() {\n        const p = constrainRange(mapRange(this.value.rawValue, this.props_.get('min'), this.props_.get('max'), 0, 100), 0, 100);\n        this.knobElement.style.width = `${p}%`;\n    }\n    onChange_() {\n        this.update_();\n    }\n}\n\nclass SliderController {\n    constructor(doc, config) {\n        this.onKeyDown_ = this.onKeyDown_.bind(this);\n        this.onKeyUp_ = this.onKeyUp_.bind(this);\n        this.onPointerDownOrMove_ = this.onPointerDownOrMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.props = config.props;\n        this.view = new SliderView(doc, {\n            props: this.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.trackElement);\n        this.ptHandler_.emitter.on('down', this.onPointerDownOrMove_);\n        this.ptHandler_.emitter.on('move', this.onPointerDownOrMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.trackElement.addEventListener('keydown', this.onKeyDown_);\n        this.view.trackElement.addEventListener('keyup', this.onKeyUp_);\n    }\n    handlePointerEvent_(d, opts) {\n        if (!d.point) {\n            return;\n        }\n        this.value.setRawValue(mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, this.props.get('min'), this.props.get('max')), opts);\n    }\n    onPointerDownOrMove_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onKeyDown_(ev) {\n        const step = getStepForKey(this.props.get('keyScale'), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue + step, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onKeyUp_(ev) {\n        const step = getStepForKey(this.props.get('keyScale'), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n\nconst cn$f = ClassName('sldtxt');\nclass SliderTextView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$f());\n        const sliderElem = doc.createElement('div');\n        sliderElem.classList.add(cn$f('s'));\n        this.sliderView_ = config.sliderView;\n        sliderElem.appendChild(this.sliderView_.element);\n        this.element.appendChild(sliderElem);\n        const textElem = doc.createElement('div');\n        textElem.classList.add(cn$f('t'));\n        this.textView_ = config.textView;\n        textElem.appendChild(this.textView_.element);\n        this.element.appendChild(textElem);\n    }\n}\n\nclass SliderTextController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.sliderC_ = new SliderController(doc, {\n            props: config.sliderProps,\n            value: config.value,\n            viewProps: this.viewProps,\n        });\n        this.textC_ = new NumberTextController(doc, {\n            parser: config.parser,\n            props: config.textProps,\n            sliderProps: config.sliderProps,\n            value: config.value,\n            viewProps: config.viewProps,\n        });\n        this.view = new SliderTextView(doc, {\n            sliderView: this.sliderC_.view,\n            textView: this.textC_.view,\n        });\n    }\n    get sliderController() {\n        return this.sliderC_;\n    }\n    get textController() {\n        return this.textC_;\n    }\n    importProps(state) {\n        return importBladeState(state, null, (p) => ({\n            max: p.required.number,\n            min: p.required.number,\n        }), (result) => {\n            const sliderProps = this.sliderC_.props;\n            sliderProps.set('max', result.max);\n            sliderProps.set('min', result.min);\n            return true;\n        });\n    }\n    exportProps() {\n        const sliderProps = this.sliderC_.props;\n        return exportBladeState(null, {\n            max: sliderProps.get('max'),\n            min: sliderProps.get('min'),\n        });\n    }\n}\nfunction createSliderTextProps(config) {\n    return {\n        sliderProps: new ValueMap({\n            keyScale: config.keyScale,\n            max: config.max,\n            min: config.min,\n        }),\n        textProps: new ValueMap({\n            formatter: createValue(config.formatter),\n            keyScale: config.keyScale,\n            pointerScale: createValue(config.pointerScale),\n        }),\n    };\n}\n\nconst CSS_VAR_MAP = {\n    containerUnitSize: 'cnt-usz',\n};\nfunction getCssVar(key) {\n    return `--${CSS_VAR_MAP[key]}`;\n}\n\nfunction createPointDimensionParser(p) {\n    return createNumberTextInputParamsParser(p);\n}\nfunction parsePointDimensionParams(value) {\n    if (!isRecord(value)) {\n        return undefined;\n    }\n    return parseRecord(value, createPointDimensionParser);\n}\nfunction createDimensionConstraint(params, initialValue) {\n    if (!params) {\n        return undefined;\n    }\n    const constraints = [];\n    const cs = createStepConstraint(params, initialValue);\n    if (cs) {\n        constraints.push(cs);\n    }\n    const rs = createRangeConstraint(params);\n    if (rs) {\n        constraints.push(rs);\n    }\n    return new CompositeConstraint(constraints);\n}\n\nfunction isCompatible(ver) {\n    if (!ver) {\n        return false;\n    }\n    return ver.major === VERSION$1.major;\n}\n\nfunction parsePickerLayout(value) {\n    if (value === 'inline' || value === 'popup') {\n        return value;\n    }\n    return undefined;\n}\n\nfunction writePrimitive(target, value) {\n    target.write(value);\n}\n\nconst cn$e = ClassName('ckb');\nclass CheckboxView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$e());\n        config.viewProps.bindClassModifiers(this.element);\n        const labelElem = doc.createElement('label');\n        labelElem.classList.add(cn$e('l'));\n        this.element.appendChild(labelElem);\n        const inputElem = doc.createElement('input');\n        inputElem.classList.add(cn$e('i'));\n        inputElem.type = 'checkbox';\n        labelElem.appendChild(inputElem);\n        this.inputElement = inputElem;\n        config.viewProps.bindDisabled(this.inputElement);\n        const wrapperElem = doc.createElement('div');\n        wrapperElem.classList.add(cn$e('w'));\n        labelElem.appendChild(wrapperElem);\n        const markElem = createSvgIconElement(doc, 'check');\n        wrapperElem.appendChild(markElem);\n        config.value.emitter.on('change', this.onValueChange_);\n        this.value = config.value;\n        this.update_();\n    }\n    update_() {\n        this.inputElement.checked = this.value.rawValue;\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass CheckboxController {\n    constructor(doc, config) {\n        this.onInputChange_ = this.onInputChange_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new CheckboxView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view.inputElement.addEventListener('change', this.onInputChange_);\n    }\n    onInputChange_(e) {\n        const inputElem = forceCast(e.currentTarget);\n        this.value.rawValue = inputElem.checked;\n    }\n}\n\nfunction createConstraint$6(params) {\n    const constraints = [];\n    const lc = createListConstraint(params.options);\n    if (lc) {\n        constraints.push(lc);\n    }\n    return new CompositeConstraint(constraints);\n}\nconst BooleanInputPlugin = createPlugin({\n    id: 'input-bool',\n    type: 'input',\n    accept: (value, params) => {\n        if (typeof value !== 'boolean') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            options: p.optional.custom(parseListOptions),\n            readonly: p.optional.constant(false),\n        }));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => boolFromUnknown,\n        constraint: (args) => createConstraint$6(args.params),\n        writer: (_args) => writePrimitive,\n    },\n    controller: (args) => {\n        const doc = args.document;\n        const value = args.value;\n        const c = args.constraint;\n        const lc = c && findConstraint(c, ListConstraint);\n        if (lc) {\n            return new ListController(doc, {\n                props: new ValueMap({\n                    options: lc.values.value('options'),\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new CheckboxController(doc, {\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (typeof args.controller.value.rawValue !== 'boolean') {\n            return null;\n        }\n        if (args.controller.valueController instanceof ListController) {\n            return new ListInputBindingApi(args.controller);\n        }\n        return null;\n    },\n});\n\nconst cn$d = ClassName('col');\nclass ColorView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$d());\n        config.foldable.bindExpandedClass(this.element, cn$d(undefined, 'expanded'));\n        bindValueMap(config.foldable, 'completed', valueToClassName(this.element, cn$d(undefined, 'cpl')));\n        const headElem = doc.createElement('div');\n        headElem.classList.add(cn$d('h'));\n        this.element.appendChild(headElem);\n        const swatchElem = doc.createElement('div');\n        swatchElem.classList.add(cn$d('s'));\n        headElem.appendChild(swatchElem);\n        this.swatchElement = swatchElem;\n        const textElem = doc.createElement('div');\n        textElem.classList.add(cn$d('t'));\n        headElem.appendChild(textElem);\n        this.textElement = textElem;\n        if (config.pickerLayout === 'inline') {\n            const pickerElem = doc.createElement('div');\n            pickerElem.classList.add(cn$d('p'));\n            this.element.appendChild(pickerElem);\n            this.pickerElement = pickerElem;\n        }\n        else {\n            this.pickerElement = null;\n        }\n    }\n}\n\nfunction rgbToHslInt(r, g, b) {\n    const rp = constrainRange(r / 255, 0, 1);\n    const gp = constrainRange(g / 255, 0, 1);\n    const bp = constrainRange(b / 255, 0, 1);\n    const cmax = Math.max(rp, gp, bp);\n    const cmin = Math.min(rp, gp, bp);\n    const c = cmax - cmin;\n    let h = 0;\n    let s = 0;\n    const l = (cmin + cmax) / 2;\n    if (c !== 0) {\n        s = c / (1 - Math.abs(cmax + cmin - 1));\n        if (rp === cmax) {\n            h = (gp - bp) / c;\n        }\n        else if (gp === cmax) {\n            h = 2 + (bp - rp) / c;\n        }\n        else {\n            h = 4 + (rp - gp) / c;\n        }\n        h = h / 6 + (h < 0 ? 1 : 0);\n    }\n    return [h * 360, s * 100, l * 100];\n}\nfunction hslToRgbInt(h, s, l) {\n    const hp = ((h % 360) + 360) % 360;\n    const sp = constrainRange(s / 100, 0, 1);\n    const lp = constrainRange(l / 100, 0, 1);\n    const c = (1 - Math.abs(2 * lp - 1)) * sp;\n    const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n    const m = lp - c / 2;\n    let rp, gp, bp;\n    if (hp >= 0 && hp < 60) {\n        [rp, gp, bp] = [c, x, 0];\n    }\n    else if (hp >= 60 && hp < 120) {\n        [rp, gp, bp] = [x, c, 0];\n    }\n    else if (hp >= 120 && hp < 180) {\n        [rp, gp, bp] = [0, c, x];\n    }\n    else if (hp >= 180 && hp < 240) {\n        [rp, gp, bp] = [0, x, c];\n    }\n    else if (hp >= 240 && hp < 300) {\n        [rp, gp, bp] = [x, 0, c];\n    }\n    else {\n        [rp, gp, bp] = [c, 0, x];\n    }\n    return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n}\nfunction rgbToHsvInt(r, g, b) {\n    const rp = constrainRange(r / 255, 0, 1);\n    const gp = constrainRange(g / 255, 0, 1);\n    const bp = constrainRange(b / 255, 0, 1);\n    const cmax = Math.max(rp, gp, bp);\n    const cmin = Math.min(rp, gp, bp);\n    const d = cmax - cmin;\n    let h;\n    if (d === 0) {\n        h = 0;\n    }\n    else if (cmax === rp) {\n        h = 60 * (((((gp - bp) / d) % 6) + 6) % 6);\n    }\n    else if (cmax === gp) {\n        h = 60 * ((bp - rp) / d + 2);\n    }\n    else {\n        h = 60 * ((rp - gp) / d + 4);\n    }\n    const s = cmax === 0 ? 0 : d / cmax;\n    const v = cmax;\n    return [h, s * 100, v * 100];\n}\nfunction hsvToRgbInt(h, s, v) {\n    const hp = loopRange(h, 360);\n    const sp = constrainRange(s / 100, 0, 1);\n    const vp = constrainRange(v / 100, 0, 1);\n    const c = vp * sp;\n    const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n    const m = vp - c;\n    let rp, gp, bp;\n    if (hp >= 0 && hp < 60) {\n        [rp, gp, bp] = [c, x, 0];\n    }\n    else if (hp >= 60 && hp < 120) {\n        [rp, gp, bp] = [x, c, 0];\n    }\n    else if (hp >= 120 && hp < 180) {\n        [rp, gp, bp] = [0, c, x];\n    }\n    else if (hp >= 180 && hp < 240) {\n        [rp, gp, bp] = [0, x, c];\n    }\n    else if (hp >= 240 && hp < 300) {\n        [rp, gp, bp] = [x, 0, c];\n    }\n    else {\n        [rp, gp, bp] = [c, 0, x];\n    }\n    return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n}\nfunction hslToHsvInt(h, s, l) {\n    const sd = l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100);\n    return [\n        h,\n        sd !== 0 ? (s * (100 - Math.abs(2 * l - 100))) / sd : 0,\n        l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100),\n    ];\n}\nfunction hsvToHslInt(h, s, v) {\n    const sd = 100 - Math.abs((v * (200 - s)) / 100 - 100);\n    return [h, sd !== 0 ? (s * v) / sd : 0, (v * (200 - s)) / (2 * 100)];\n}\nfunction removeAlphaComponent(comps) {\n    return [comps[0], comps[1], comps[2]];\n}\nfunction appendAlphaComponent(comps, alpha) {\n    return [comps[0], comps[1], comps[2], alpha];\n}\nconst MODE_CONVERTER_MAP = {\n    hsl: {\n        hsl: (h, s, l) => [h, s, l],\n        hsv: hslToHsvInt,\n        rgb: hslToRgbInt,\n    },\n    hsv: {\n        hsl: hsvToHslInt,\n        hsv: (h, s, v) => [h, s, v],\n        rgb: hsvToRgbInt,\n    },\n    rgb: {\n        hsl: rgbToHslInt,\n        hsv: rgbToHsvInt,\n        rgb: (r, g, b) => [r, g, b],\n    },\n};\nfunction getColorMaxComponents(mode, type) {\n    return [\n        type === 'float' ? 1 : mode === 'rgb' ? 255 : 360,\n        type === 'float' ? 1 : mode === 'rgb' ? 255 : 100,\n        type === 'float' ? 1 : mode === 'rgb' ? 255 : 100,\n    ];\n}\nfunction loopHueRange(hue, max) {\n    return hue === max ? max : loopRange(hue, max);\n}\nfunction constrainColorComponents(components, mode, type) {\n    var _a;\n    const ms = getColorMaxComponents(mode, type);\n    return [\n        mode === 'rgb'\n            ? constrainRange(components[0], 0, ms[0])\n            : loopHueRange(components[0], ms[0]),\n        constrainRange(components[1], 0, ms[1]),\n        constrainRange(components[2], 0, ms[2]),\n        constrainRange((_a = components[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n    ];\n}\nfunction convertColorType(comps, mode, from, to) {\n    const fms = getColorMaxComponents(mode, from);\n    const tms = getColorMaxComponents(mode, to);\n    return comps.map((c, index) => (c / fms[index]) * tms[index]);\n}\nfunction convertColor(components, from, to) {\n    const intComps = convertColorType(components, from.mode, from.type, 'int');\n    const result = MODE_CONVERTER_MAP[from.mode][to.mode](...intComps);\n    return convertColorType(result, to.mode, 'int', to.type);\n}\n\nclass IntColor {\n    static black() {\n        return new IntColor([0, 0, 0], 'rgb');\n    }\n    constructor(comps, mode) {\n        this.type = 'int';\n        this.mode = mode;\n        this.comps_ = constrainColorComponents(comps, mode, this.type);\n    }\n    getComponents(opt_mode) {\n        return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_), { mode: this.mode, type: this.type }, { mode: opt_mode !== null && opt_mode !== void 0 ? opt_mode : this.mode, type: this.type }), this.comps_[3]);\n    }\n    toRgbaObject() {\n        const rgbComps = this.getComponents('rgb');\n        return {\n            r: rgbComps[0],\n            g: rgbComps[1],\n            b: rgbComps[2],\n            a: rgbComps[3],\n        };\n    }\n}\n\nconst cn$c = ClassName('colp');\nclass ColorPickerView {\n    constructor(doc, config) {\n        this.alphaViews_ = null;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$c());\n        config.viewProps.bindClassModifiers(this.element);\n        const hsvElem = doc.createElement('div');\n        hsvElem.classList.add(cn$c('hsv'));\n        const svElem = doc.createElement('div');\n        svElem.classList.add(cn$c('sv'));\n        this.svPaletteView_ = config.svPaletteView;\n        svElem.appendChild(this.svPaletteView_.element);\n        hsvElem.appendChild(svElem);\n        const hElem = doc.createElement('div');\n        hElem.classList.add(cn$c('h'));\n        this.hPaletteView_ = config.hPaletteView;\n        hElem.appendChild(this.hPaletteView_.element);\n        hsvElem.appendChild(hElem);\n        this.element.appendChild(hsvElem);\n        const rgbElem = doc.createElement('div');\n        rgbElem.classList.add(cn$c('rgb'));\n        this.textsView_ = config.textsView;\n        rgbElem.appendChild(this.textsView_.element);\n        this.element.appendChild(rgbElem);\n        if (config.alphaViews) {\n            this.alphaViews_ = {\n                palette: config.alphaViews.palette,\n                text: config.alphaViews.text,\n            };\n            const aElem = doc.createElement('div');\n            aElem.classList.add(cn$c('a'));\n            const apElem = doc.createElement('div');\n            apElem.classList.add(cn$c('ap'));\n            apElem.appendChild(this.alphaViews_.palette.element);\n            aElem.appendChild(apElem);\n            const atElem = doc.createElement('div');\n            atElem.classList.add(cn$c('at'));\n            atElem.appendChild(this.alphaViews_.text.element);\n            aElem.appendChild(atElem);\n            this.element.appendChild(aElem);\n        }\n    }\n    get allFocusableElements() {\n        const elems = [\n            this.svPaletteView_.element,\n            this.hPaletteView_.element,\n            this.textsView_.modeSelectElement,\n            ...this.textsView_.inputViews.map((v) => v.inputElement),\n        ];\n        if (this.alphaViews_) {\n            elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);\n        }\n        return elems;\n    }\n}\n\nfunction parseColorType(value) {\n    return value === 'int' ? 'int' : value === 'float' ? 'float' : undefined;\n}\nfunction parseColorInputParams(params) {\n    return parseRecord(params, (p) => ({\n        color: p.optional.object({\n            alpha: p.optional.boolean,\n            type: p.optional.custom(parseColorType),\n        }),\n        expanded: p.optional.boolean,\n        picker: p.optional.custom(parsePickerLayout),\n        readonly: p.optional.constant(false),\n    }));\n}\nfunction getKeyScaleForColor(forAlpha) {\n    return forAlpha ? 0.1 : 1;\n}\nfunction extractColorType(params) {\n    var _a;\n    return (_a = params.color) === null || _a === void 0 ? void 0 : _a.type;\n}\n\nclass FloatColor {\n    constructor(comps, mode) {\n        this.type = 'float';\n        this.mode = mode;\n        this.comps_ = constrainColorComponents(comps, mode, this.type);\n    }\n    getComponents(opt_mode) {\n        return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_), { mode: this.mode, type: this.type }, { mode: opt_mode !== null && opt_mode !== void 0 ? opt_mode : this.mode, type: this.type }), this.comps_[3]);\n    }\n    toRgbaObject() {\n        const rgbComps = this.getComponents('rgb');\n        return {\n            r: rgbComps[0],\n            g: rgbComps[1],\n            b: rgbComps[2],\n            a: rgbComps[3],\n        };\n    }\n}\n\nconst TYPE_TO_CONSTRUCTOR_MAP = {\n    int: (comps, mode) => new IntColor(comps, mode),\n    float: (comps, mode) => new FloatColor(comps, mode),\n};\nfunction createColor(comps, mode, type) {\n    return TYPE_TO_CONSTRUCTOR_MAP[type](comps, mode);\n}\nfunction isFloatColor(c) {\n    return c.type === 'float';\n}\nfunction isIntColor(c) {\n    return c.type === 'int';\n}\nfunction convertFloatToInt(cf) {\n    const comps = cf.getComponents();\n    const ms = getColorMaxComponents(cf.mode, 'int');\n    return new IntColor([\n        Math.round(mapRange(comps[0], 0, 1, 0, ms[0])),\n        Math.round(mapRange(comps[1], 0, 1, 0, ms[1])),\n        Math.round(mapRange(comps[2], 0, 1, 0, ms[2])),\n        comps[3],\n    ], cf.mode);\n}\nfunction convertIntToFloat(ci) {\n    const comps = ci.getComponents();\n    const ms = getColorMaxComponents(ci.mode, 'int');\n    return new FloatColor([\n        mapRange(comps[0], 0, ms[0], 0, 1),\n        mapRange(comps[1], 0, ms[1], 0, 1),\n        mapRange(comps[2], 0, ms[2], 0, 1),\n        comps[3],\n    ], ci.mode);\n}\nfunction mapColorType(c, type) {\n    if (c.type === type) {\n        return c;\n    }\n    if (isIntColor(c) && type === 'float') {\n        return convertIntToFloat(c);\n    }\n    if (isFloatColor(c) && type === 'int') {\n        return convertFloatToInt(c);\n    }\n    throw TpError.shouldNeverHappen();\n}\n\nfunction equalsStringColorFormat(f1, f2) {\n    return (f1.alpha === f2.alpha &&\n        f1.mode === f2.mode &&\n        f1.notation === f2.notation &&\n        f1.type === f2.type);\n}\nfunction parseCssNumberOrPercentage(text, max) {\n    const m = text.match(/^(.+)%$/);\n    if (!m) {\n        return Math.min(parseFloat(text), max);\n    }\n    return Math.min(parseFloat(m[1]) * 0.01 * max, max);\n}\nconst ANGLE_TO_DEG_MAP = {\n    deg: (angle) => angle,\n    grad: (angle) => (angle * 360) / 400,\n    rad: (angle) => (angle * 360) / (2 * Math.PI),\n    turn: (angle) => angle * 360,\n};\nfunction parseCssNumberOrAngle(text) {\n    const m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);\n    if (!m) {\n        return parseFloat(text);\n    }\n    const angle = parseFloat(m[1]);\n    const unit = m[2];\n    return ANGLE_TO_DEG_MAP[unit](angle);\n}\nfunction parseFunctionalRgbColorComponents(text) {\n    const m = text.match(/^rgb\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseCssNumberOrPercentage(m[1], 255),\n        parseCssNumberOrPercentage(m[2], 255),\n        parseCssNumberOrPercentage(m[3], 255),\n    ];\n    if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n        return null;\n    }\n    return comps;\n}\nfunction parseFunctionalRgbColor(text) {\n    const comps = parseFunctionalRgbColorComponents(text);\n    return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseFunctionalRgbaColorComponents(text) {\n    const m = text.match(/^rgba\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseCssNumberOrPercentage(m[1], 255),\n        parseCssNumberOrPercentage(m[2], 255),\n        parseCssNumberOrPercentage(m[3], 255),\n        parseCssNumberOrPercentage(m[4], 1),\n    ];\n    if (isNaN(comps[0]) ||\n        isNaN(comps[1]) ||\n        isNaN(comps[2]) ||\n        isNaN(comps[3])) {\n        return null;\n    }\n    return comps;\n}\nfunction parseFunctionalRgbaColor(text) {\n    const comps = parseFunctionalRgbaColorComponents(text);\n    return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseFunctionalHslColorComponents(text) {\n    const m = text.match(/^hsl\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseCssNumberOrAngle(m[1]),\n        parseCssNumberOrPercentage(m[2], 100),\n        parseCssNumberOrPercentage(m[3], 100),\n    ];\n    if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n        return null;\n    }\n    return comps;\n}\nfunction parseFunctionalHslColor(text) {\n    const comps = parseFunctionalHslColorComponents(text);\n    return comps ? new IntColor(comps, 'hsl') : null;\n}\nfunction parseHslaColorComponents(text) {\n    const m = text.match(/^hsla\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseCssNumberOrAngle(m[1]),\n        parseCssNumberOrPercentage(m[2], 100),\n        parseCssNumberOrPercentage(m[3], 100),\n        parseCssNumberOrPercentage(m[4], 1),\n    ];\n    if (isNaN(comps[0]) ||\n        isNaN(comps[1]) ||\n        isNaN(comps[2]) ||\n        isNaN(comps[3])) {\n        return null;\n    }\n    return comps;\n}\nfunction parseFunctionalHslaColor(text) {\n    const comps = parseHslaColorComponents(text);\n    return comps ? new IntColor(comps, 'hsl') : null;\n}\nfunction parseHexRgbColorComponents(text) {\n    const mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n    if (mRgb) {\n        return [\n            parseInt(mRgb[1] + mRgb[1], 16),\n            parseInt(mRgb[2] + mRgb[2], 16),\n            parseInt(mRgb[3] + mRgb[3], 16),\n        ];\n    }\n    const mRrggbb = text.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n    if (mRrggbb) {\n        return [\n            parseInt(mRrggbb[1], 16),\n            parseInt(mRrggbb[2], 16),\n            parseInt(mRrggbb[3], 16),\n        ];\n    }\n    return null;\n}\nfunction parseHexRgbColor(text) {\n    const comps = parseHexRgbColorComponents(text);\n    return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseHexRgbaColorComponents(text) {\n    const mRgb = text.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n    if (mRgb) {\n        return [\n            parseInt(mRgb[1] + mRgb[1], 16),\n            parseInt(mRgb[2] + mRgb[2], 16),\n            parseInt(mRgb[3] + mRgb[3], 16),\n            mapRange(parseInt(mRgb[4] + mRgb[4], 16), 0, 255, 0, 1),\n        ];\n    }\n    const mRrggbb = text.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n    if (mRrggbb) {\n        return [\n            parseInt(mRrggbb[1], 16),\n            parseInt(mRrggbb[2], 16),\n            parseInt(mRrggbb[3], 16),\n            mapRange(parseInt(mRrggbb[4], 16), 0, 255, 0, 1),\n        ];\n    }\n    return null;\n}\nfunction parseHexRgbaColor(text) {\n    const comps = parseHexRgbaColorComponents(text);\n    return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseObjectRgbColorComponents(text) {\n    const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseFloat(m[1]),\n        parseFloat(m[2]),\n        parseFloat(m[3]),\n    ];\n    if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n        return null;\n    }\n    return comps;\n}\nfunction createObjectRgbColorParser(type) {\n    return (text) => {\n        const comps = parseObjectRgbColorComponents(text);\n        return comps ? createColor(comps, 'rgb', type) : null;\n    };\n}\nfunction parseObjectRgbaColorComponents(text) {\n    const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*a\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseFloat(m[1]),\n        parseFloat(m[2]),\n        parseFloat(m[3]),\n        parseFloat(m[4]),\n    ];\n    if (isNaN(comps[0]) ||\n        isNaN(comps[1]) ||\n        isNaN(comps[2]) ||\n        isNaN(comps[3])) {\n        return null;\n    }\n    return comps;\n}\nfunction createObjectRgbaColorParser(type) {\n    return (text) => {\n        const comps = parseObjectRgbaColorComponents(text);\n        return comps ? createColor(comps, 'rgb', type) : null;\n    };\n}\nconst PARSER_AND_RESULT = [\n    {\n        parser: parseHexRgbColorComponents,\n        result: {\n            alpha: false,\n            mode: 'rgb',\n            notation: 'hex',\n        },\n    },\n    {\n        parser: parseHexRgbaColorComponents,\n        result: {\n            alpha: true,\n            mode: 'rgb',\n            notation: 'hex',\n        },\n    },\n    {\n        parser: parseFunctionalRgbColorComponents,\n        result: {\n            alpha: false,\n            mode: 'rgb',\n            notation: 'func',\n        },\n    },\n    {\n        parser: parseFunctionalRgbaColorComponents,\n        result: {\n            alpha: true,\n            mode: 'rgb',\n            notation: 'func',\n        },\n    },\n    {\n        parser: parseFunctionalHslColorComponents,\n        result: {\n            alpha: false,\n            mode: 'hsl',\n            notation: 'func',\n        },\n    },\n    {\n        parser: parseHslaColorComponents,\n        result: {\n            alpha: true,\n            mode: 'hsl',\n            notation: 'func',\n        },\n    },\n    {\n        parser: parseObjectRgbColorComponents,\n        result: {\n            alpha: false,\n            mode: 'rgb',\n            notation: 'object',\n        },\n    },\n    {\n        parser: parseObjectRgbaColorComponents,\n        result: {\n            alpha: true,\n            mode: 'rgb',\n            notation: 'object',\n        },\n    },\n];\nfunction detectStringColor(text) {\n    return PARSER_AND_RESULT.reduce((prev, { parser, result: detection }) => {\n        if (prev) {\n            return prev;\n        }\n        return parser(text) ? detection : null;\n    }, null);\n}\nfunction detectStringColorFormat(text, type = 'int') {\n    const r = detectStringColor(text);\n    if (!r) {\n        return null;\n    }\n    if (r.notation === 'hex' && type !== 'float') {\n        return Object.assign(Object.assign({}, r), { type: 'int' });\n    }\n    if (r.notation === 'func') {\n        return Object.assign(Object.assign({}, r), { type: type });\n    }\n    return null;\n}\nfunction createColorStringParser(type) {\n    const parsers = [\n        parseHexRgbColor,\n        parseHexRgbaColor,\n        parseFunctionalRgbColor,\n        parseFunctionalRgbaColor,\n        parseFunctionalHslColor,\n        parseFunctionalHslaColor,\n    ];\n    if (type === 'int') {\n        parsers.push(createObjectRgbColorParser('int'), createObjectRgbaColorParser('int'));\n    }\n    if (type === 'float') {\n        parsers.push(createObjectRgbColorParser('float'), createObjectRgbaColorParser('float'));\n    }\n    const parser = composeParsers(parsers);\n    return (text) => {\n        const result = parser(text);\n        return result ? mapColorType(result, type) : null;\n    };\n}\nfunction readIntColorString(value) {\n    const parser = createColorStringParser('int');\n    if (typeof value !== 'string') {\n        return IntColor.black();\n    }\n    const result = parser(value);\n    return result !== null && result !== void 0 ? result : IntColor.black();\n}\nfunction zerofill(comp) {\n    const hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n    return hex.length === 1 ? `0${hex}` : hex;\n}\nfunction colorToHexRgbString(value, prefix = '#') {\n    const hexes = removeAlphaComponent(value.getComponents('rgb'))\n        .map(zerofill)\n        .join('');\n    return `${prefix}${hexes}`;\n}\nfunction colorToHexRgbaString(value, prefix = '#') {\n    const rgbaComps = value.getComponents('rgb');\n    const hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255]\n        .map(zerofill)\n        .join('');\n    return `${prefix}${hexes}`;\n}\nfunction colorToFunctionalRgbString(value) {\n    const formatter = createNumberFormatter(0);\n    const ci = mapColorType(value, 'int');\n    const comps = removeAlphaComponent(ci.getComponents('rgb')).map((comp) => formatter(comp));\n    return `rgb(${comps.join(', ')})`;\n}\nfunction colorToFunctionalRgbaString(value) {\n    const aFormatter = createNumberFormatter(2);\n    const rgbFormatter = createNumberFormatter(0);\n    const ci = mapColorType(value, 'int');\n    const comps = ci.getComponents('rgb').map((comp, index) => {\n        const formatter = index === 3 ? aFormatter : rgbFormatter;\n        return formatter(comp);\n    });\n    return `rgba(${comps.join(', ')})`;\n}\nfunction colorToFunctionalHslString(value) {\n    const formatters = [\n        createNumberFormatter(0),\n        formatPercentage,\n        formatPercentage,\n    ];\n    const ci = mapColorType(value, 'int');\n    const comps = removeAlphaComponent(ci.getComponents('hsl')).map((comp, index) => formatters[index](comp));\n    return `hsl(${comps.join(', ')})`;\n}\nfunction colorToFunctionalHslaString(value) {\n    const formatters = [\n        createNumberFormatter(0),\n        formatPercentage,\n        formatPercentage,\n        createNumberFormatter(2),\n    ];\n    const ci = mapColorType(value, 'int');\n    const comps = ci\n        .getComponents('hsl')\n        .map((comp, index) => formatters[index](comp));\n    return `hsla(${comps.join(', ')})`;\n}\nfunction colorToObjectRgbString(value, type) {\n    const formatter = createNumberFormatter(type === 'float' ? 2 : 0);\n    const names = ['r', 'g', 'b'];\n    const cc = mapColorType(value, type);\n    const comps = removeAlphaComponent(cc.getComponents('rgb')).map((comp, index) => `${names[index]}: ${formatter(comp)}`);\n    return `{${comps.join(', ')}}`;\n}\nfunction createObjectRgbColorFormatter(type) {\n    return (value) => colorToObjectRgbString(value, type);\n}\nfunction colorToObjectRgbaString(value, type) {\n    const aFormatter = createNumberFormatter(2);\n    const rgbFormatter = createNumberFormatter(type === 'float' ? 2 : 0);\n    const names = ['r', 'g', 'b', 'a'];\n    const cc = mapColorType(value, type);\n    const comps = cc.getComponents('rgb').map((comp, index) => {\n        const formatter = index === 3 ? aFormatter : rgbFormatter;\n        return `${names[index]}: ${formatter(comp)}`;\n    });\n    return `{${comps.join(', ')}}`;\n}\nfunction createObjectRgbaColorFormatter(type) {\n    return (value) => colorToObjectRgbaString(value, type);\n}\nconst FORMAT_AND_STRINGIFIERS = [\n    {\n        format: {\n            alpha: false,\n            mode: 'rgb',\n            notation: 'hex',\n            type: 'int',\n        },\n        stringifier: colorToHexRgbString,\n    },\n    {\n        format: {\n            alpha: true,\n            mode: 'rgb',\n            notation: 'hex',\n            type: 'int',\n        },\n        stringifier: colorToHexRgbaString,\n    },\n    {\n        format: {\n            alpha: false,\n            mode: 'rgb',\n            notation: 'func',\n            type: 'int',\n        },\n        stringifier: colorToFunctionalRgbString,\n    },\n    {\n        format: {\n            alpha: true,\n            mode: 'rgb',\n            notation: 'func',\n            type: 'int',\n        },\n        stringifier: colorToFunctionalRgbaString,\n    },\n    {\n        format: {\n            alpha: false,\n            mode: 'hsl',\n            notation: 'func',\n            type: 'int',\n        },\n        stringifier: colorToFunctionalHslString,\n    },\n    {\n        format: {\n            alpha: true,\n            mode: 'hsl',\n            notation: 'func',\n            type: 'int',\n        },\n        stringifier: colorToFunctionalHslaString,\n    },\n    ...['int', 'float'].reduce((prev, type) => {\n        return [\n            ...prev,\n            {\n                format: {\n                    alpha: false,\n                    mode: 'rgb',\n                    notation: 'object',\n                    type: type,\n                },\n                stringifier: createObjectRgbColorFormatter(type),\n            },\n            {\n                format: {\n                    alpha: true,\n                    mode: 'rgb',\n                    notation: 'object',\n                    type: type,\n                },\n                stringifier: createObjectRgbaColorFormatter(type),\n            },\n        ];\n    }, []),\n];\nfunction findColorStringifier(format) {\n    return FORMAT_AND_STRINGIFIERS.reduce((prev, fas) => {\n        if (prev) {\n            return prev;\n        }\n        return equalsStringColorFormat(fas.format, format)\n            ? fas.stringifier\n            : null;\n    }, null);\n}\n\nconst cn$b = ClassName('apl');\nclass APaletteView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.value = config.value;\n        this.value.emitter.on('change', this.onValueChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$b());\n        config.viewProps.bindClassModifiers(this.element);\n        config.viewProps.bindTabIndex(this.element);\n        const barElem = doc.createElement('div');\n        barElem.classList.add(cn$b('b'));\n        this.element.appendChild(barElem);\n        const colorElem = doc.createElement('div');\n        colorElem.classList.add(cn$b('c'));\n        barElem.appendChild(colorElem);\n        this.colorElem_ = colorElem;\n        const markerElem = doc.createElement('div');\n        markerElem.classList.add(cn$b('m'));\n        this.element.appendChild(markerElem);\n        this.markerElem_ = markerElem;\n        const previewElem = doc.createElement('div');\n        previewElem.classList.add(cn$b('p'));\n        this.markerElem_.appendChild(previewElem);\n        this.previewElem_ = previewElem;\n        this.update_();\n    }\n    update_() {\n        const c = this.value.rawValue;\n        const rgbaComps = c.getComponents('rgb');\n        const leftColor = new IntColor([rgbaComps[0], rgbaComps[1], rgbaComps[2], 0], 'rgb');\n        const rightColor = new IntColor([rgbaComps[0], rgbaComps[1], rgbaComps[2], 255], 'rgb');\n        const gradientComps = [\n            'to right',\n            colorToFunctionalRgbaString(leftColor),\n            colorToFunctionalRgbaString(rightColor),\n        ];\n        this.colorElem_.style.background = `linear-gradient(${gradientComps.join(',')})`;\n        this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);\n        const left = mapRange(rgbaComps[3], 0, 1, 0, 100);\n        this.markerElem_.style.left = `${left}%`;\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass APaletteController {\n    constructor(doc, config) {\n        this.onKeyDown_ = this.onKeyDown_.bind(this);\n        this.onKeyUp_ = this.onKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new APaletteView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.element);\n        this.ptHandler_.emitter.on('down', this.onPointerDown_);\n        this.ptHandler_.emitter.on('move', this.onPointerMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.element.addEventListener('keydown', this.onKeyDown_);\n        this.view.element.addEventListener('keyup', this.onKeyUp_);\n    }\n    handlePointerEvent_(d, opts) {\n        if (!d.point) {\n            return;\n        }\n        const alpha = d.point.x / d.bounds.width;\n        const c = this.value.rawValue;\n        const [h, s, v] = c.getComponents('hsv');\n        this.value.setRawValue(new IntColor([h, s, v, alpha], 'hsv'), opts);\n    }\n    onPointerDown_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerMove_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onKeyDown_(ev) {\n        const step = getStepForKey(getKeyScaleForColor(true), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        const c = this.value.rawValue;\n        const [h, s, v, a] = c.getComponents('hsv');\n        this.value.setRawValue(new IntColor([h, s, v, a + step], 'hsv'), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onKeyUp_(ev) {\n        const step = getStepForKey(getKeyScaleForColor(true), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n\nconst cn$a = ClassName('coltxt');\nfunction createModeSelectElement(doc) {\n    const selectElem = doc.createElement('select');\n    const items = [\n        { text: 'RGB', value: 'rgb' },\n        { text: 'HSL', value: 'hsl' },\n        { text: 'HSV', value: 'hsv' },\n        { text: 'HEX', value: 'hex' },\n    ];\n    selectElem.appendChild(items.reduce((frag, item) => {\n        const optElem = doc.createElement('option');\n        optElem.textContent = item.text;\n        optElem.value = item.value;\n        frag.appendChild(optElem);\n        return frag;\n    }, doc.createDocumentFragment()));\n    return selectElem;\n}\nclass ColorTextsView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$a());\n        config.viewProps.bindClassModifiers(this.element);\n        const modeElem = doc.createElement('div');\n        modeElem.classList.add(cn$a('m'));\n        this.modeElem_ = createModeSelectElement(doc);\n        this.modeElem_.classList.add(cn$a('ms'));\n        modeElem.appendChild(this.modeSelectElement);\n        config.viewProps.bindDisabled(this.modeElem_);\n        const modeMarkerElem = doc.createElement('div');\n        modeMarkerElem.classList.add(cn$a('mm'));\n        modeMarkerElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n        modeElem.appendChild(modeMarkerElem);\n        this.element.appendChild(modeElem);\n        const inputsElem = doc.createElement('div');\n        inputsElem.classList.add(cn$a('w'));\n        this.element.appendChild(inputsElem);\n        this.inputsElem_ = inputsElem;\n        this.inputViews_ = config.inputViews;\n        this.applyInputViews_();\n        bindValue(config.mode, (mode) => {\n            this.modeElem_.value = mode;\n        });\n    }\n    get modeSelectElement() {\n        return this.modeElem_;\n    }\n    get inputViews() {\n        return this.inputViews_;\n    }\n    set inputViews(inputViews) {\n        this.inputViews_ = inputViews;\n        this.applyInputViews_();\n    }\n    applyInputViews_() {\n        removeChildElements(this.inputsElem_);\n        const doc = this.element.ownerDocument;\n        this.inputViews_.forEach((v) => {\n            const compElem = doc.createElement('div');\n            compElem.classList.add(cn$a('c'));\n            compElem.appendChild(v.element);\n            this.inputsElem_.appendChild(compElem);\n        });\n    }\n}\n\nfunction createFormatter$2(type) {\n    return createNumberFormatter(type === 'float' ? 2 : 0);\n}\nfunction createConstraint$5(mode, type, index) {\n    const max = getColorMaxComponents(mode, type)[index];\n    return new DefiniteRangeConstraint({\n        min: 0,\n        max: max,\n    });\n}\nfunction createComponentController(doc, config, index) {\n    return new NumberTextController(doc, {\n        arrayPosition: index === 0 ? 'fst' : index === 3 - 1 ? 'lst' : 'mid',\n        parser: config.parser,\n        props: ValueMap.fromObject({\n            formatter: createFormatter$2(config.colorType),\n            keyScale: getKeyScaleForColor(false),\n            pointerScale: config.colorType === 'float' ? 0.01 : 1,\n        }),\n        value: createValue(0, {\n            constraint: createConstraint$5(config.colorMode, config.colorType, index),\n        }),\n        viewProps: config.viewProps,\n    });\n}\nfunction createComponentControllers(doc, config) {\n    const cc = {\n        colorMode: config.colorMode,\n        colorType: config.colorType,\n        parser: parseNumber,\n        viewProps: config.viewProps,\n    };\n    return [0, 1, 2].map((i) => {\n        const c = createComponentController(doc, cc, i);\n        connectValues({\n            primary: config.value,\n            secondary: c.value,\n            forward(p) {\n                const mc = mapColorType(p, config.colorType);\n                return mc.getComponents(config.colorMode)[i];\n            },\n            backward(p, s) {\n                const pickedMode = config.colorMode;\n                const mc = mapColorType(p, config.colorType);\n                const comps = mc.getComponents(pickedMode);\n                comps[i] = s;\n                const c = createColor(appendAlphaComponent(removeAlphaComponent(comps), comps[3]), pickedMode, config.colorType);\n                return mapColorType(c, 'int');\n            },\n        });\n        return c;\n    });\n}\nfunction createHexController(doc, config) {\n    const c = new TextController(doc, {\n        parser: createColorStringParser('int'),\n        props: ValueMap.fromObject({\n            formatter: colorToHexRgbString,\n        }),\n        value: createValue(IntColor.black()),\n        viewProps: config.viewProps,\n    });\n    connectValues({\n        primary: config.value,\n        secondary: c.value,\n        forward: (p) => new IntColor(removeAlphaComponent(p.getComponents()), p.mode),\n        backward: (p, s) => new IntColor(appendAlphaComponent(removeAlphaComponent(s.getComponents(p.mode)), p.getComponents()[3]), p.mode),\n    });\n    return [c];\n}\nfunction isColorMode(mode) {\n    return mode !== 'hex';\n}\nclass ColorTextsController {\n    constructor(doc, config) {\n        this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);\n        this.colorType_ = config.colorType;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.colorMode = createValue(this.value.rawValue.mode);\n        this.ccs_ = this.createComponentControllers_(doc);\n        this.view = new ColorTextsView(doc, {\n            mode: this.colorMode,\n            inputViews: [this.ccs_[0].view, this.ccs_[1].view, this.ccs_[2].view],\n            viewProps: this.viewProps,\n        });\n        this.view.modeSelectElement.addEventListener('change', this.onModeSelectChange_);\n    }\n    createComponentControllers_(doc) {\n        const mode = this.colorMode.rawValue;\n        if (isColorMode(mode)) {\n            return createComponentControllers(doc, {\n                colorMode: mode,\n                colorType: this.colorType_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n        return createHexController(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n    }\n    onModeSelectChange_(ev) {\n        const selectElem = ev.currentTarget;\n        this.colorMode.rawValue = selectElem.value;\n        this.ccs_ = this.createComponentControllers_(this.view.element.ownerDocument);\n        this.view.inputViews = this.ccs_.map((cc) => cc.view);\n    }\n}\n\nconst cn$9 = ClassName('hpl');\nclass HPaletteView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.value = config.value;\n        this.value.emitter.on('change', this.onValueChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$9());\n        config.viewProps.bindClassModifiers(this.element);\n        config.viewProps.bindTabIndex(this.element);\n        const colorElem = doc.createElement('div');\n        colorElem.classList.add(cn$9('c'));\n        this.element.appendChild(colorElem);\n        const markerElem = doc.createElement('div');\n        markerElem.classList.add(cn$9('m'));\n        this.element.appendChild(markerElem);\n        this.markerElem_ = markerElem;\n        this.update_();\n    }\n    update_() {\n        const c = this.value.rawValue;\n        const [h] = c.getComponents('hsv');\n        this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new IntColor([h, 100, 100], 'hsv'));\n        const left = mapRange(h, 0, 360, 0, 100);\n        this.markerElem_.style.left = `${left}%`;\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass HPaletteController {\n    constructor(doc, config) {\n        this.onKeyDown_ = this.onKeyDown_.bind(this);\n        this.onKeyUp_ = this.onKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new HPaletteView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.element);\n        this.ptHandler_.emitter.on('down', this.onPointerDown_);\n        this.ptHandler_.emitter.on('move', this.onPointerMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.element.addEventListener('keydown', this.onKeyDown_);\n        this.view.element.addEventListener('keyup', this.onKeyUp_);\n    }\n    handlePointerEvent_(d, opts) {\n        if (!d.point) {\n            return;\n        }\n        const hue = mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, 0, 360);\n        const c = this.value.rawValue;\n        const [, s, v, a] = c.getComponents('hsv');\n        this.value.setRawValue(new IntColor([hue, s, v, a], 'hsv'), opts);\n    }\n    onPointerDown_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerMove_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onKeyDown_(ev) {\n        const step = getStepForKey(getKeyScaleForColor(false), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        const c = this.value.rawValue;\n        const [h, s, v, a] = c.getComponents('hsv');\n        this.value.setRawValue(new IntColor([h + step, s, v, a], 'hsv'), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onKeyUp_(ev) {\n        const step = getStepForKey(getKeyScaleForColor(false), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n\nconst cn$8 = ClassName('svp');\nconst CANVAS_RESOL = 64;\nclass SvPaletteView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.value = config.value;\n        this.value.emitter.on('change', this.onValueChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$8());\n        config.viewProps.bindClassModifiers(this.element);\n        config.viewProps.bindTabIndex(this.element);\n        const canvasElem = doc.createElement('canvas');\n        canvasElem.height = CANVAS_RESOL;\n        canvasElem.width = CANVAS_RESOL;\n        canvasElem.classList.add(cn$8('c'));\n        this.element.appendChild(canvasElem);\n        this.canvasElement = canvasElem;\n        const markerElem = doc.createElement('div');\n        markerElem.classList.add(cn$8('m'));\n        this.element.appendChild(markerElem);\n        this.markerElem_ = markerElem;\n        this.update_();\n    }\n    update_() {\n        const ctx = getCanvasContext(this.canvasElement);\n        if (!ctx) {\n            return;\n        }\n        const c = this.value.rawValue;\n        const hsvComps = c.getComponents('hsv');\n        const width = this.canvasElement.width;\n        const height = this.canvasElement.height;\n        const imgData = ctx.getImageData(0, 0, width, height);\n        const data = imgData.data;\n        for (let iy = 0; iy < height; iy++) {\n            for (let ix = 0; ix < width; ix++) {\n                const s = mapRange(ix, 0, width, 0, 100);\n                const v = mapRange(iy, 0, height, 100, 0);\n                const rgbComps = hsvToRgbInt(hsvComps[0], s, v);\n                const i = (iy * width + ix) * 4;\n                data[i] = rgbComps[0];\n                data[i + 1] = rgbComps[1];\n                data[i + 2] = rgbComps[2];\n                data[i + 3] = 255;\n            }\n        }\n        ctx.putImageData(imgData, 0, 0);\n        const left = mapRange(hsvComps[1], 0, 100, 0, 100);\n        this.markerElem_.style.left = `${left}%`;\n        const top = mapRange(hsvComps[2], 0, 100, 100, 0);\n        this.markerElem_.style.top = `${top}%`;\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass SvPaletteController {\n    constructor(doc, config) {\n        this.onKeyDown_ = this.onKeyDown_.bind(this);\n        this.onKeyUp_ = this.onKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new SvPaletteView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.element);\n        this.ptHandler_.emitter.on('down', this.onPointerDown_);\n        this.ptHandler_.emitter.on('move', this.onPointerMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.element.addEventListener('keydown', this.onKeyDown_);\n        this.view.element.addEventListener('keyup', this.onKeyUp_);\n    }\n    handlePointerEvent_(d, opts) {\n        if (!d.point) {\n            return;\n        }\n        const saturation = mapRange(d.point.x, 0, d.bounds.width, 0, 100);\n        const value = mapRange(d.point.y, 0, d.bounds.height, 100, 0);\n        const [h, , , a] = this.value.rawValue.getComponents('hsv');\n        this.value.setRawValue(new IntColor([h, saturation, value, a], 'hsv'), opts);\n    }\n    onPointerDown_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerMove_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onKeyDown_(ev) {\n        if (isArrowKey(ev.key)) {\n            ev.preventDefault();\n        }\n        const [h, s, v, a] = this.value.rawValue.getComponents('hsv');\n        const keyScale = getKeyScaleForColor(false);\n        const ds = getStepForKey(keyScale, getHorizontalStepKeys(ev));\n        const dv = getStepForKey(keyScale, getVerticalStepKeys(ev));\n        if (ds === 0 && dv === 0) {\n            return;\n        }\n        this.value.setRawValue(new IntColor([h, s + ds, v + dv, a], 'hsv'), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onKeyUp_(ev) {\n        const keyScale = getKeyScaleForColor(false);\n        const ds = getStepForKey(keyScale, getHorizontalStepKeys(ev));\n        const dv = getStepForKey(keyScale, getVerticalStepKeys(ev));\n        if (ds === 0 && dv === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n\nclass ColorPickerController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.hPaletteC_ = new HPaletteController(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.svPaletteC_ = new SvPaletteController(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.alphaIcs_ = config.supportsAlpha\n            ? {\n                palette: new APaletteController(doc, {\n                    value: this.value,\n                    viewProps: this.viewProps,\n                }),\n                text: new NumberTextController(doc, {\n                    parser: parseNumber,\n                    props: ValueMap.fromObject({\n                        pointerScale: 0.01,\n                        keyScale: 0.1,\n                        formatter: createNumberFormatter(2),\n                    }),\n                    value: createValue(0, {\n                        constraint: new DefiniteRangeConstraint({ min: 0, max: 1 }),\n                    }),\n                    viewProps: this.viewProps,\n                }),\n            }\n            : null;\n        if (this.alphaIcs_) {\n            connectValues({\n                primary: this.value,\n                secondary: this.alphaIcs_.text.value,\n                forward: (p) => p.getComponents()[3],\n                backward: (p, s) => {\n                    const comps = p.getComponents();\n                    comps[3] = s;\n                    return new IntColor(comps, p.mode);\n                },\n            });\n        }\n        this.textsC_ = new ColorTextsController(doc, {\n            colorType: config.colorType,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view = new ColorPickerView(doc, {\n            alphaViews: this.alphaIcs_\n                ? {\n                    palette: this.alphaIcs_.palette.view,\n                    text: this.alphaIcs_.text.view,\n                }\n                : null,\n            hPaletteView: this.hPaletteC_.view,\n            supportsAlpha: config.supportsAlpha,\n            svPaletteView: this.svPaletteC_.view,\n            textsView: this.textsC_.view,\n            viewProps: this.viewProps,\n        });\n    }\n    get textsController() {\n        return this.textsC_;\n    }\n}\n\nconst cn$7 = ClassName('colsw');\nclass ColorSwatchView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        config.value.emitter.on('change', this.onValueChange_);\n        this.value = config.value;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$7());\n        config.viewProps.bindClassModifiers(this.element);\n        const swatchElem = doc.createElement('div');\n        swatchElem.classList.add(cn$7('sw'));\n        this.element.appendChild(swatchElem);\n        this.swatchElem_ = swatchElem;\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(cn$7('b'));\n        config.viewProps.bindDisabled(buttonElem);\n        this.element.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        this.update_();\n    }\n    update_() {\n        const value = this.value.rawValue;\n        this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass ColorSwatchController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new ColorSwatchView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n    }\n}\n\nclass ColorController {\n    constructor(doc, config) {\n        this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n        this.onButtonClick_ = this.onButtonClick_.bind(this);\n        this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n        this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.foldable_ = Foldable.create(config.expanded);\n        this.swatchC_ = new ColorSwatchController(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        const buttonElem = this.swatchC_.view.buttonElement;\n        buttonElem.addEventListener('blur', this.onButtonBlur_);\n        buttonElem.addEventListener('click', this.onButtonClick_);\n        this.textC_ = new TextController(doc, {\n            parser: config.parser,\n            props: ValueMap.fromObject({\n                formatter: config.formatter,\n            }),\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view = new ColorView(doc, {\n            foldable: this.foldable_,\n            pickerLayout: config.pickerLayout,\n        });\n        this.view.swatchElement.appendChild(this.swatchC_.view.element);\n        this.view.textElement.appendChild(this.textC_.view.element);\n        this.popC_ =\n            config.pickerLayout === 'popup'\n                ? new PopupController(doc, {\n                    viewProps: this.viewProps,\n                })\n                : null;\n        const pickerC = new ColorPickerController(doc, {\n            colorType: config.colorType,\n            supportsAlpha: config.supportsAlpha,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        pickerC.view.allFocusableElements.forEach((elem) => {\n            elem.addEventListener('blur', this.onPopupChildBlur_);\n            elem.addEventListener('keydown', this.onPopupChildKeydown_);\n        });\n        this.pickerC_ = pickerC;\n        if (this.popC_) {\n            this.view.element.appendChild(this.popC_.view.element);\n            this.popC_.view.element.appendChild(pickerC.view.element);\n            connectValues({\n                primary: this.foldable_.value('expanded'),\n                secondary: this.popC_.shows,\n                forward: (p) => p,\n                backward: (_, s) => s,\n            });\n        }\n        else if (this.view.pickerElement) {\n            this.view.pickerElement.appendChild(this.pickerC_.view.element);\n            bindFoldable(this.foldable_, this.view.pickerElement);\n        }\n    }\n    get textController() {\n        return this.textC_;\n    }\n    onButtonBlur_(e) {\n        if (!this.popC_) {\n            return;\n        }\n        const elem = this.view.element;\n        const nextTarget = forceCast(e.relatedTarget);\n        if (!nextTarget || !elem.contains(nextTarget)) {\n            this.popC_.shows.rawValue = false;\n        }\n    }\n    onButtonClick_() {\n        this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n        if (this.foldable_.get('expanded')) {\n            this.pickerC_.view.allFocusableElements[0].focus();\n        }\n    }\n    onPopupChildBlur_(ev) {\n        if (!this.popC_) {\n            return;\n        }\n        const elem = this.popC_.view.element;\n        const nextTarget = findNextTarget(ev);\n        if (nextTarget && elem.contains(nextTarget)) {\n            return;\n        }\n        if (nextTarget &&\n            nextTarget === this.swatchC_.view.buttonElement &&\n            !supportsTouch(elem.ownerDocument)) {\n            return;\n        }\n        this.popC_.shows.rawValue = false;\n    }\n    onPopupChildKeydown_(ev) {\n        if (this.popC_) {\n            if (ev.key === 'Escape') {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        else if (this.view.pickerElement) {\n            if (ev.key === 'Escape') {\n                this.swatchC_.view.buttonElement.focus();\n            }\n        }\n    }\n}\n\nfunction colorToRgbNumber(value) {\n    return removeAlphaComponent(value.getComponents('rgb')).reduce((result, comp) => {\n        return (result << 8) | (Math.floor(comp) & 0xff);\n    }, 0);\n}\nfunction colorToRgbaNumber(value) {\n    return (value.getComponents('rgb').reduce((result, comp, index) => {\n        const hex = Math.floor(index === 3 ? comp * 255 : comp) & 0xff;\n        return (result << 8) | hex;\n    }, 0) >>> 0);\n}\nfunction numberToRgbColor(num) {\n    return new IntColor([(num >> 16) & 0xff, (num >> 8) & 0xff, num & 0xff], 'rgb');\n}\nfunction numberToRgbaColor(num) {\n    return new IntColor([\n        (num >> 24) & 0xff,\n        (num >> 16) & 0xff,\n        (num >> 8) & 0xff,\n        mapRange(num & 0xff, 0, 255, 0, 1),\n    ], 'rgb');\n}\nfunction colorFromRgbNumber(value) {\n    if (typeof value !== 'number') {\n        return IntColor.black();\n    }\n    return numberToRgbColor(value);\n}\nfunction colorFromRgbaNumber(value) {\n    if (typeof value !== 'number') {\n        return IntColor.black();\n    }\n    return numberToRgbaColor(value);\n}\n\nfunction isRgbColorComponent(obj, key) {\n    if (typeof obj !== 'object' || isEmpty(obj)) {\n        return false;\n    }\n    return key in obj && typeof obj[key] === 'number';\n}\nfunction isRgbColorObject(obj) {\n    return (isRgbColorComponent(obj, 'r') &&\n        isRgbColorComponent(obj, 'g') &&\n        isRgbColorComponent(obj, 'b'));\n}\nfunction isRgbaColorObject(obj) {\n    return isRgbColorObject(obj) && isRgbColorComponent(obj, 'a');\n}\nfunction isColorObject(obj) {\n    return isRgbColorObject(obj);\n}\nfunction equalsColor(v1, v2) {\n    if (v1.mode !== v2.mode) {\n        return false;\n    }\n    if (v1.type !== v2.type) {\n        return false;\n    }\n    const comps1 = v1.getComponents();\n    const comps2 = v2.getComponents();\n    for (let i = 0; i < comps1.length; i++) {\n        if (comps1[i] !== comps2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction createColorComponentsFromRgbObject(obj) {\n    return 'a' in obj ? [obj.r, obj.g, obj.b, obj.a] : [obj.r, obj.g, obj.b];\n}\n\nfunction createColorStringWriter(format) {\n    const stringify = findColorStringifier(format);\n    return stringify\n        ? (target, value) => {\n            writePrimitive(target, stringify(value));\n        }\n        : null;\n}\nfunction createColorNumberWriter(supportsAlpha) {\n    const colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;\n    return (target, value) => {\n        writePrimitive(target, colorToNumber(value));\n    };\n}\nfunction writeRgbaColorObject(target, value, type) {\n    const cc = mapColorType(value, type);\n    const obj = cc.toRgbaObject();\n    target.writeProperty('r', obj.r);\n    target.writeProperty('g', obj.g);\n    target.writeProperty('b', obj.b);\n    target.writeProperty('a', obj.a);\n}\nfunction writeRgbColorObject(target, value, type) {\n    const cc = mapColorType(value, type);\n    const obj = cc.toRgbaObject();\n    target.writeProperty('r', obj.r);\n    target.writeProperty('g', obj.g);\n    target.writeProperty('b', obj.b);\n}\nfunction createColorObjectWriter(supportsAlpha, type) {\n    return (target, inValue) => {\n        if (supportsAlpha) {\n            writeRgbaColorObject(target, inValue, type);\n        }\n        else {\n            writeRgbColorObject(target, inValue, type);\n        }\n    };\n}\n\nfunction shouldSupportAlpha$1(inputParams) {\n    var _a;\n    if ((_a = inputParams === null || inputParams === void 0 ? void 0 : inputParams.color) === null || _a === void 0 ? void 0 : _a.alpha) {\n        return true;\n    }\n    return false;\n}\nfunction createFormatter$1(supportsAlpha) {\n    return supportsAlpha\n        ? (v) => colorToHexRgbaString(v, '0x')\n        : (v) => colorToHexRgbString(v, '0x');\n}\nfunction isForColor(params) {\n    if ('color' in params) {\n        return true;\n    }\n    if (params.view === 'color') {\n        return true;\n    }\n    return false;\n}\nconst NumberColorInputPlugin = createPlugin({\n    id: 'input-color-number',\n    type: 'input',\n    accept: (value, params) => {\n        if (typeof value !== 'number') {\n            return null;\n        }\n        if (!isForColor(params)) {\n            return null;\n        }\n        const result = parseColorInputParams(params);\n        return result\n            ? {\n                initialValue: value,\n                params: Object.assign(Object.assign({}, result), { supportsAlpha: shouldSupportAlpha$1(params) }),\n            }\n            : null;\n    },\n    binding: {\n        reader: (args) => {\n            return args.params.supportsAlpha\n                ? colorFromRgbaNumber\n                : colorFromRgbNumber;\n        },\n        equals: equalsColor,\n        writer: (args) => {\n            return createColorNumberWriter(args.params.supportsAlpha);\n        },\n    },\n    controller: (args) => {\n        var _a, _b;\n        return new ColorController(args.document, {\n            colorType: 'int',\n            expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n            formatter: createFormatter$1(args.params.supportsAlpha),\n            parser: createColorStringParser('int'),\n            pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n            supportsAlpha: args.params.supportsAlpha,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nfunction colorFromObject(value, type) {\n    if (!isColorObject(value)) {\n        return mapColorType(IntColor.black(), type);\n    }\n    if (type === 'int') {\n        const comps = createColorComponentsFromRgbObject(value);\n        return new IntColor(comps, 'rgb');\n    }\n    if (type === 'float') {\n        const comps = createColorComponentsFromRgbObject(value);\n        return new FloatColor(comps, 'rgb');\n    }\n    return mapColorType(IntColor.black(), 'int');\n}\n\nfunction shouldSupportAlpha(initialValue) {\n    return isRgbaColorObject(initialValue);\n}\nfunction createColorObjectBindingReader(type) {\n    return (value) => {\n        const c = colorFromObject(value, type);\n        return mapColorType(c, 'int');\n    };\n}\nfunction createColorObjectFormatter(supportsAlpha, type) {\n    return (value) => {\n        if (supportsAlpha) {\n            return colorToObjectRgbaString(value, type);\n        }\n        return colorToObjectRgbString(value, type);\n    };\n}\nconst ObjectColorInputPlugin = createPlugin({\n    id: 'input-color-object',\n    type: 'input',\n    accept: (value, params) => {\n        var _a;\n        if (!isColorObject(value)) {\n            return null;\n        }\n        const result = parseColorInputParams(params);\n        return result\n            ? {\n                initialValue: value,\n                params: Object.assign(Object.assign({}, result), { colorType: (_a = extractColorType(params)) !== null && _a !== void 0 ? _a : 'int' }),\n            }\n            : null;\n    },\n    binding: {\n        reader: (args) => createColorObjectBindingReader(args.params.colorType),\n        equals: equalsColor,\n        writer: (args) => createColorObjectWriter(shouldSupportAlpha(args.initialValue), args.params.colorType),\n    },\n    controller: (args) => {\n        var _a, _b;\n        const supportsAlpha = isRgbaColorObject(args.initialValue);\n        return new ColorController(args.document, {\n            colorType: args.params.colorType,\n            expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n            formatter: createColorObjectFormatter(supportsAlpha, args.params.colorType),\n            parser: createColorStringParser('int'),\n            pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n            supportsAlpha: supportsAlpha,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nconst StringColorInputPlugin = createPlugin({\n    id: 'input-color-string',\n    type: 'input',\n    accept: (value, params) => {\n        if (typeof value !== 'string') {\n            return null;\n        }\n        if (params.view === 'text') {\n            return null;\n        }\n        const format = detectStringColorFormat(value, extractColorType(params));\n        if (!format) {\n            return null;\n        }\n        const stringifier = findColorStringifier(format);\n        if (!stringifier) {\n            return null;\n        }\n        const result = parseColorInputParams(params);\n        return result\n            ? {\n                initialValue: value,\n                params: Object.assign(Object.assign({}, result), { format: format, stringifier: stringifier }),\n            }\n            : null;\n    },\n    binding: {\n        reader: () => readIntColorString,\n        equals: equalsColor,\n        writer: (args) => {\n            const writer = createColorStringWriter(args.params.format);\n            if (!writer) {\n                throw TpError.notBindable();\n            }\n            return writer;\n        },\n    },\n    controller: (args) => {\n        var _a, _b;\n        return new ColorController(args.document, {\n            colorType: args.params.format.type,\n            expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n            formatter: args.params.stringifier,\n            parser: createColorStringParser('int'),\n            pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n            supportsAlpha: args.params.format.alpha,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nclass PointNdConstraint {\n    constructor(config) {\n        this.components = config.components;\n        this.asm_ = config.assembly;\n    }\n    constrain(value) {\n        const comps = this.asm_\n            .toComponents(value)\n            .map((comp, index) => { var _a, _b; return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp; });\n        return this.asm_.fromComponents(comps);\n    }\n}\n\nconst cn$6 = ClassName('pndtxt');\nclass PointNdTextView {\n    constructor(doc, config) {\n        this.textViews = config.textViews;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$6());\n        this.textViews.forEach((v) => {\n            const axisElem = doc.createElement('div');\n            axisElem.classList.add(cn$6('a'));\n            axisElem.appendChild(v.element);\n            this.element.appendChild(axisElem);\n        });\n    }\n}\n\nfunction createAxisController(doc, config, index) {\n    return new NumberTextController(doc, {\n        arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\n        parser: config.parser,\n        props: config.axes[index].textProps,\n        value: createValue(0, {\n            constraint: config.axes[index].constraint,\n        }),\n        viewProps: config.viewProps,\n    });\n}\nclass PointNdTextController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.acs_ = config.axes.map((_, index) => createAxisController(doc, config, index));\n        this.acs_.forEach((c, index) => {\n            connectValues({\n                primary: this.value,\n                secondary: c.value,\n                forward: (p) => config.assembly.toComponents(p)[index],\n                backward: (p, s) => {\n                    const comps = config.assembly.toComponents(p);\n                    comps[index] = s;\n                    return config.assembly.fromComponents(comps);\n                },\n            });\n        });\n        this.view = new PointNdTextView(doc, {\n            textViews: this.acs_.map((ac) => ac.view),\n        });\n    }\n    get textControllers() {\n        return this.acs_;\n    }\n}\n\nclass SliderInputBindingApi extends BindingApi {\n    get max() {\n        return this.controller.valueController.sliderController.props.get('max');\n    }\n    set max(max) {\n        this.controller.valueController.sliderController.props.set('max', max);\n    }\n    get min() {\n        return this.controller.valueController.sliderController.props.get('min');\n    }\n    set min(max) {\n        this.controller.valueController.sliderController.props.set('min', max);\n    }\n}\n\nfunction createConstraint$4(params, initialValue) {\n    const constraints = [];\n    const sc = createStepConstraint(params, initialValue);\n    if (sc) {\n        constraints.push(sc);\n    }\n    const rc = createRangeConstraint(params);\n    if (rc) {\n        constraints.push(rc);\n    }\n    const lc = createListConstraint(params.options);\n    if (lc) {\n        constraints.push(lc);\n    }\n    return new CompositeConstraint(constraints);\n}\nconst NumberInputPlugin = createPlugin({\n    id: 'input-number',\n    type: 'input',\n    accept: (value, params) => {\n        if (typeof value !== 'number') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => (Object.assign(Object.assign({}, createNumberTextInputParamsParser(p)), { options: p.optional.custom(parseListOptions), readonly: p.optional.constant(false) })));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => numberFromUnknown,\n        constraint: (args) => createConstraint$4(args.params, args.initialValue),\n        writer: (_args) => writePrimitive,\n    },\n    controller: (args) => {\n        const value = args.value;\n        const c = args.constraint;\n        const lc = c && findConstraint(c, ListConstraint);\n        if (lc) {\n            return new ListController(args.document, {\n                props: new ValueMap({\n                    options: lc.values.value('options'),\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        }\n        const textPropsObj = createNumberTextPropsObject(args.params, value.rawValue);\n        const drc = c && findConstraint(c, DefiniteRangeConstraint);\n        if (drc) {\n            return new SliderTextController(args.document, Object.assign(Object.assign({}, createSliderTextProps(Object.assign(Object.assign({}, textPropsObj), { keyScale: createValue(textPropsObj.keyScale), max: drc.values.value('max'), min: drc.values.value('min') }))), { parser: parseNumber, value: value, viewProps: args.viewProps }));\n        }\n        return new NumberTextController(args.document, {\n            parser: parseNumber,\n            props: ValueMap.fromObject(textPropsObj),\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (typeof args.controller.value.rawValue !== 'number') {\n            return null;\n        }\n        if (args.controller.valueController instanceof SliderTextController) {\n            return new SliderInputBindingApi(args.controller);\n        }\n        if (args.controller.valueController instanceof ListController) {\n            return new ListInputBindingApi(args.controller);\n        }\n        return null;\n    },\n});\n\nclass Point2d {\n    constructor(x = 0, y = 0) {\n        this.x = x;\n        this.y = y;\n    }\n    getComponents() {\n        return [this.x, this.y];\n    }\n    static isObject(obj) {\n        if (isEmpty(obj)) {\n            return false;\n        }\n        const x = obj.x;\n        const y = obj.y;\n        if (typeof x !== 'number' || typeof y !== 'number') {\n            return false;\n        }\n        return true;\n    }\n    static equals(v1, v2) {\n        return v1.x === v2.x && v1.y === v2.y;\n    }\n    toObject() {\n        return {\n            x: this.x,\n            y: this.y,\n        };\n    }\n}\nconst Point2dAssembly = {\n    toComponents: (p) => p.getComponents(),\n    fromComponents: (comps) => new Point2d(...comps),\n};\n\nconst cn$5 = ClassName('p2d');\nclass Point2dView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$5());\n        config.viewProps.bindClassModifiers(this.element);\n        bindValue(config.expanded, valueToClassName(this.element, cn$5(undefined, 'expanded')));\n        const headElem = doc.createElement('div');\n        headElem.classList.add(cn$5('h'));\n        this.element.appendChild(headElem);\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(cn$5('b'));\n        buttonElem.appendChild(createSvgIconElement(doc, 'p2dpad'));\n        config.viewProps.bindDisabled(buttonElem);\n        headElem.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        const textElem = doc.createElement('div');\n        textElem.classList.add(cn$5('t'));\n        headElem.appendChild(textElem);\n        this.textElement = textElem;\n        if (config.pickerLayout === 'inline') {\n            const pickerElem = doc.createElement('div');\n            pickerElem.classList.add(cn$5('p'));\n            this.element.appendChild(pickerElem);\n            this.pickerElement = pickerElem;\n        }\n        else {\n            this.pickerElement = null;\n        }\n    }\n}\n\nconst cn$4 = ClassName('p2dp');\nclass Point2dPickerView {\n    constructor(doc, config) {\n        this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n        this.onPropsChange_ = this.onPropsChange_.bind(this);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.props_ = config.props;\n        this.props_.emitter.on('change', this.onPropsChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$4());\n        if (config.layout === 'popup') {\n            this.element.classList.add(cn$4(undefined, 'p'));\n        }\n        config.viewProps.bindClassModifiers(this.element);\n        const padElem = doc.createElement('div');\n        padElem.classList.add(cn$4('p'));\n        config.viewProps.bindTabIndex(padElem);\n        this.element.appendChild(padElem);\n        this.padElement = padElem;\n        const svgElem = doc.createElementNS(SVG_NS, 'svg');\n        svgElem.classList.add(cn$4('g'));\n        this.padElement.appendChild(svgElem);\n        this.svgElem_ = svgElem;\n        const xAxisElem = doc.createElementNS(SVG_NS, 'line');\n        xAxisElem.classList.add(cn$4('ax'));\n        xAxisElem.setAttributeNS(null, 'x1', '0');\n        xAxisElem.setAttributeNS(null, 'y1', '50%');\n        xAxisElem.setAttributeNS(null, 'x2', '100%');\n        xAxisElem.setAttributeNS(null, 'y2', '50%');\n        this.svgElem_.appendChild(xAxisElem);\n        const yAxisElem = doc.createElementNS(SVG_NS, 'line');\n        yAxisElem.classList.add(cn$4('ax'));\n        yAxisElem.setAttributeNS(null, 'x1', '50%');\n        yAxisElem.setAttributeNS(null, 'y1', '0');\n        yAxisElem.setAttributeNS(null, 'x2', '50%');\n        yAxisElem.setAttributeNS(null, 'y2', '100%');\n        this.svgElem_.appendChild(yAxisElem);\n        const lineElem = doc.createElementNS(SVG_NS, 'line');\n        lineElem.classList.add(cn$4('l'));\n        lineElem.setAttributeNS(null, 'x1', '50%');\n        lineElem.setAttributeNS(null, 'y1', '50%');\n        this.svgElem_.appendChild(lineElem);\n        this.lineElem_ = lineElem;\n        const markerElem = doc.createElement('div');\n        markerElem.classList.add(cn$4('m'));\n        this.padElement.appendChild(markerElem);\n        this.markerElem_ = markerElem;\n        config.value.emitter.on('change', this.onValueChange_);\n        this.value = config.value;\n        this.update_();\n    }\n    get allFocusableElements() {\n        return [this.padElement];\n    }\n    update_() {\n        const [x, y] = this.value.rawValue.getComponents();\n        const max = this.props_.get('max');\n        const px = mapRange(x, -max, +max, 0, 100);\n        const py = mapRange(y, -max, +max, 0, 100);\n        const ipy = this.props_.get('invertsY') ? 100 - py : py;\n        this.lineElem_.setAttributeNS(null, 'x2', `${px}%`);\n        this.lineElem_.setAttributeNS(null, 'y2', `${ipy}%`);\n        this.markerElem_.style.left = `${px}%`;\n        this.markerElem_.style.top = `${ipy}%`;\n    }\n    onValueChange_() {\n        this.update_();\n    }\n    onPropsChange_() {\n        this.update_();\n    }\n    onFoldableChange_() {\n        this.update_();\n    }\n}\n\nfunction computeOffset(ev, keyScales, invertsY) {\n    return [\n        getStepForKey(keyScales[0], getHorizontalStepKeys(ev)),\n        getStepForKey(keyScales[1], getVerticalStepKeys(ev)) * (invertsY ? 1 : -1),\n    ];\n}\nclass Point2dPickerController {\n    constructor(doc, config) {\n        this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\n        this.onPadKeyUp_ = this.onPadKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.props = config.props;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new Point2dPickerView(doc, {\n            layout: config.layout,\n            props: this.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.padElement);\n        this.ptHandler_.emitter.on('down', this.onPointerDown_);\n        this.ptHandler_.emitter.on('move', this.onPointerMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.padElement.addEventListener('keydown', this.onPadKeyDown_);\n        this.view.padElement.addEventListener('keyup', this.onPadKeyUp_);\n    }\n    handlePointerEvent_(d, opts) {\n        if (!d.point) {\n            return;\n        }\n        const max = this.props.get('max');\n        const px = mapRange(d.point.x, 0, d.bounds.width, -max, +max);\n        const py = mapRange(this.props.get('invertsY') ? d.bounds.height - d.point.y : d.point.y, 0, d.bounds.height, -max, +max);\n        this.value.setRawValue(new Point2d(px, py), opts);\n    }\n    onPointerDown_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerMove_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onPadKeyDown_(ev) {\n        if (isArrowKey(ev.key)) {\n            ev.preventDefault();\n        }\n        const [dx, dy] = computeOffset(ev, [this.props.get('xKeyScale'), this.props.get('yKeyScale')], this.props.get('invertsY'));\n        if (dx === 0 && dy === 0) {\n            return;\n        }\n        this.value.setRawValue(new Point2d(this.value.rawValue.x + dx, this.value.rawValue.y + dy), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPadKeyUp_(ev) {\n        const [dx, dy] = computeOffset(ev, [this.props.get('xKeyScale'), this.props.get('yKeyScale')], this.props.get('invertsY'));\n        if (dx === 0 && dy === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n\nclass Point2dController {\n    constructor(doc, config) {\n        var _a, _b;\n        this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n        this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n        this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);\n        this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.foldable_ = Foldable.create(config.expanded);\n        this.popC_ =\n            config.pickerLayout === 'popup'\n                ? new PopupController(doc, {\n                    viewProps: this.viewProps,\n                })\n                : null;\n        const padC = new Point2dPickerController(doc, {\n            layout: config.pickerLayout,\n            props: new ValueMap({\n                invertsY: createValue(config.invertsY),\n                max: createValue(config.max),\n                xKeyScale: config.axes[0].textProps.value('keyScale'),\n                yKeyScale: config.axes[1].textProps.value('keyScale'),\n            }),\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        padC.view.allFocusableElements.forEach((elem) => {\n            elem.addEventListener('blur', this.onPopupChildBlur_);\n            elem.addEventListener('keydown', this.onPopupChildKeydown_);\n        });\n        this.pickerC_ = padC;\n        this.textC_ = new PointNdTextController(doc, {\n            assembly: Point2dAssembly,\n            axes: config.axes,\n            parser: config.parser,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view = new Point2dView(doc, {\n            expanded: this.foldable_.value('expanded'),\n            pickerLayout: config.pickerLayout,\n            viewProps: this.viewProps,\n        });\n        this.view.textElement.appendChild(this.textC_.view.element);\n        (_a = this.view.buttonElement) === null || _a === void 0 ? void 0 : _a.addEventListener('blur', this.onPadButtonBlur_);\n        (_b = this.view.buttonElement) === null || _b === void 0 ? void 0 : _b.addEventListener('click', this.onPadButtonClick_);\n        if (this.popC_) {\n            this.view.element.appendChild(this.popC_.view.element);\n            this.popC_.view.element.appendChild(this.pickerC_.view.element);\n            connectValues({\n                primary: this.foldable_.value('expanded'),\n                secondary: this.popC_.shows,\n                forward: (p) => p,\n                backward: (_, s) => s,\n            });\n        }\n        else if (this.view.pickerElement) {\n            this.view.pickerElement.appendChild(this.pickerC_.view.element);\n            bindFoldable(this.foldable_, this.view.pickerElement);\n        }\n    }\n    get textController() {\n        return this.textC_;\n    }\n    onPadButtonBlur_(e) {\n        if (!this.popC_) {\n            return;\n        }\n        const elem = this.view.element;\n        const nextTarget = forceCast(e.relatedTarget);\n        if (!nextTarget || !elem.contains(nextTarget)) {\n            this.popC_.shows.rawValue = false;\n        }\n    }\n    onPadButtonClick_() {\n        this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n        if (this.foldable_.get('expanded')) {\n            this.pickerC_.view.allFocusableElements[0].focus();\n        }\n    }\n    onPopupChildBlur_(ev) {\n        if (!this.popC_) {\n            return;\n        }\n        const elem = this.popC_.view.element;\n        const nextTarget = findNextTarget(ev);\n        if (nextTarget && elem.contains(nextTarget)) {\n            return;\n        }\n        if (nextTarget &&\n            nextTarget === this.view.buttonElement &&\n            !supportsTouch(elem.ownerDocument)) {\n            return;\n        }\n        this.popC_.shows.rawValue = false;\n    }\n    onPopupChildKeydown_(ev) {\n        if (this.popC_) {\n            if (ev.key === 'Escape') {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        else if (this.view.pickerElement) {\n            if (ev.key === 'Escape') {\n                this.view.buttonElement.focus();\n            }\n        }\n    }\n}\n\nfunction point2dFromUnknown(value) {\n    return Point2d.isObject(value)\n        ? new Point2d(value.x, value.y)\n        : new Point2d();\n}\nfunction writePoint2d(target, value) {\n    target.writeProperty('x', value.x);\n    target.writeProperty('y', value.y);\n}\n\nfunction createConstraint$3(params, initialValue) {\n    return new PointNdConstraint({\n        assembly: Point2dAssembly,\n        components: [\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.x), initialValue.x),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.y), initialValue.y),\n        ],\n    });\n}\nfunction getSuitableMaxDimensionValue(params, rawValue) {\n    var _a, _b;\n    if (!isEmpty(params.min) || !isEmpty(params.max)) {\n        return Math.max(Math.abs((_a = params.min) !== null && _a !== void 0 ? _a : 0), Math.abs((_b = params.max) !== null && _b !== void 0 ? _b : 0));\n    }\n    const step = getSuitableKeyScale(params);\n    return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);\n}\nfunction getSuitableMax(params, initialValue) {\n    var _a, _b;\n    const xr = getSuitableMaxDimensionValue(deepMerge(params, ((_a = params.x) !== null && _a !== void 0 ? _a : {})), initialValue.x);\n    const yr = getSuitableMaxDimensionValue(deepMerge(params, ((_b = params.y) !== null && _b !== void 0 ? _b : {})), initialValue.y);\n    return Math.max(xr, yr);\n}\nfunction shouldInvertY(params) {\n    if (!('y' in params)) {\n        return false;\n    }\n    const yParams = params.y;\n    if (!yParams) {\n        return false;\n    }\n    return 'inverted' in yParams ? !!yParams.inverted : false;\n}\nconst Point2dInputPlugin = createPlugin({\n    id: 'input-point2d',\n    type: 'input',\n    accept: (value, params) => {\n        if (!Point2d.isObject(value)) {\n            return null;\n        }\n        const result = parseRecord(params, (p) => (Object.assign(Object.assign({}, createPointDimensionParser(p)), { expanded: p.optional.boolean, picker: p.optional.custom(parsePickerLayout), readonly: p.optional.constant(false), x: p.optional.custom(parsePointDimensionParams), y: p.optional.object(Object.assign(Object.assign({}, createPointDimensionParser(p)), { inverted: p.optional.boolean })) })));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: () => point2dFromUnknown,\n        constraint: (args) => createConstraint$3(args.params, args.initialValue),\n        equals: Point2d.equals,\n        writer: () => writePoint2d,\n    },\n    controller: (args) => {\n        var _a, _b;\n        const doc = args.document;\n        const value = args.value;\n        const c = args.constraint;\n        const dParams = [args.params.x, args.params.y];\n        return new Point2dController(doc, {\n            axes: value.rawValue.getComponents().map((comp, i) => {\n                var _a;\n                return createPointAxis({\n                    constraint: c.components[i],\n                    initialValue: comp,\n                    params: deepMerge(args.params, ((_a = dParams[i]) !== null && _a !== void 0 ? _a : {})),\n                });\n            }),\n            expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n            invertsY: shouldInvertY(args.params),\n            max: getSuitableMax(args.params, value.rawValue),\n            parser: parseNumber,\n            pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nclass Point3d {\n    constructor(x = 0, y = 0, z = 0) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    }\n    getComponents() {\n        return [this.x, this.y, this.z];\n    }\n    static isObject(obj) {\n        if (isEmpty(obj)) {\n            return false;\n        }\n        const x = obj.x;\n        const y = obj.y;\n        const z = obj.z;\n        if (typeof x !== 'number' ||\n            typeof y !== 'number' ||\n            typeof z !== 'number') {\n            return false;\n        }\n        return true;\n    }\n    static equals(v1, v2) {\n        return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;\n    }\n    toObject() {\n        return {\n            x: this.x,\n            y: this.y,\n            z: this.z,\n        };\n    }\n}\nconst Point3dAssembly = {\n    toComponents: (p) => p.getComponents(),\n    fromComponents: (comps) => new Point3d(...comps),\n};\n\nfunction point3dFromUnknown(value) {\n    return Point3d.isObject(value)\n        ? new Point3d(value.x, value.y, value.z)\n        : new Point3d();\n}\nfunction writePoint3d(target, value) {\n    target.writeProperty('x', value.x);\n    target.writeProperty('y', value.y);\n    target.writeProperty('z', value.z);\n}\n\nfunction createConstraint$2(params, initialValue) {\n    return new PointNdConstraint({\n        assembly: Point3dAssembly,\n        components: [\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.x), initialValue.x),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.y), initialValue.y),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.z), initialValue.z),\n        ],\n    });\n}\nconst Point3dInputPlugin = createPlugin({\n    id: 'input-point3d',\n    type: 'input',\n    accept: (value, params) => {\n        if (!Point3d.isObject(value)) {\n            return null;\n        }\n        const result = parseRecord(params, (p) => (Object.assign(Object.assign({}, createPointDimensionParser(p)), { readonly: p.optional.constant(false), x: p.optional.custom(parsePointDimensionParams), y: p.optional.custom(parsePointDimensionParams), z: p.optional.custom(parsePointDimensionParams) })));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => point3dFromUnknown,\n        constraint: (args) => createConstraint$2(args.params, args.initialValue),\n        equals: Point3d.equals,\n        writer: (_args) => writePoint3d,\n    },\n    controller: (args) => {\n        const value = args.value;\n        const c = args.constraint;\n        const dParams = [args.params.x, args.params.y, args.params.z];\n        return new PointNdTextController(args.document, {\n            assembly: Point3dAssembly,\n            axes: value.rawValue.getComponents().map((comp, i) => {\n                var _a;\n                return createPointAxis({\n                    constraint: c.components[i],\n                    initialValue: comp,\n                    params: deepMerge(args.params, ((_a = dParams[i]) !== null && _a !== void 0 ? _a : {})),\n                });\n            }),\n            parser: parseNumber,\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nclass Point4d {\n    constructor(x = 0, y = 0, z = 0, w = 0) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        this.w = w;\n    }\n    getComponents() {\n        return [this.x, this.y, this.z, this.w];\n    }\n    static isObject(obj) {\n        if (isEmpty(obj)) {\n            return false;\n        }\n        const x = obj.x;\n        const y = obj.y;\n        const z = obj.z;\n        const w = obj.w;\n        if (typeof x !== 'number' ||\n            typeof y !== 'number' ||\n            typeof z !== 'number' ||\n            typeof w !== 'number') {\n            return false;\n        }\n        return true;\n    }\n    static equals(v1, v2) {\n        return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z && v1.w === v2.w;\n    }\n    toObject() {\n        return {\n            x: this.x,\n            y: this.y,\n            z: this.z,\n            w: this.w,\n        };\n    }\n}\nconst Point4dAssembly = {\n    toComponents: (p) => p.getComponents(),\n    fromComponents: (comps) => new Point4d(...comps),\n};\n\nfunction point4dFromUnknown(value) {\n    return Point4d.isObject(value)\n        ? new Point4d(value.x, value.y, value.z, value.w)\n        : new Point4d();\n}\nfunction writePoint4d(target, value) {\n    target.writeProperty('x', value.x);\n    target.writeProperty('y', value.y);\n    target.writeProperty('z', value.z);\n    target.writeProperty('w', value.w);\n}\n\nfunction createConstraint$1(params, initialValue) {\n    return new PointNdConstraint({\n        assembly: Point4dAssembly,\n        components: [\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.x), initialValue.x),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.y), initialValue.y),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.z), initialValue.z),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.w), initialValue.w),\n        ],\n    });\n}\nconst Point4dInputPlugin = createPlugin({\n    id: 'input-point4d',\n    type: 'input',\n    accept: (value, params) => {\n        if (!Point4d.isObject(value)) {\n            return null;\n        }\n        const result = parseRecord(params, (p) => (Object.assign(Object.assign({}, createPointDimensionParser(p)), { readonly: p.optional.constant(false), w: p.optional.custom(parsePointDimensionParams), x: p.optional.custom(parsePointDimensionParams), y: p.optional.custom(parsePointDimensionParams), z: p.optional.custom(parsePointDimensionParams) })));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => point4dFromUnknown,\n        constraint: (args) => createConstraint$1(args.params, args.initialValue),\n        equals: Point4d.equals,\n        writer: (_args) => writePoint4d,\n    },\n    controller: (args) => {\n        const value = args.value;\n        const c = args.constraint;\n        const dParams = [\n            args.params.x,\n            args.params.y,\n            args.params.z,\n            args.params.w,\n        ];\n        return new PointNdTextController(args.document, {\n            assembly: Point4dAssembly,\n            axes: value.rawValue.getComponents().map((comp, i) => {\n                var _a;\n                return createPointAxis({\n                    constraint: c.components[i],\n                    initialValue: comp,\n                    params: deepMerge(args.params, ((_a = dParams[i]) !== null && _a !== void 0 ? _a : {})),\n                });\n            }),\n            parser: parseNumber,\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nfunction createConstraint(params) {\n    const constraints = [];\n    const lc = createListConstraint(params.options);\n    if (lc) {\n        constraints.push(lc);\n    }\n    return new CompositeConstraint(constraints);\n}\nconst StringInputPlugin = createPlugin({\n    id: 'input-string',\n    type: 'input',\n    accept: (value, params) => {\n        if (typeof value !== 'string') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            readonly: p.optional.constant(false),\n            options: p.optional.custom(parseListOptions),\n        }));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => stringFromUnknown,\n        constraint: (args) => createConstraint(args.params),\n        writer: (_args) => writePrimitive,\n    },\n    controller: (args) => {\n        const doc = args.document;\n        const value = args.value;\n        const c = args.constraint;\n        const lc = c && findConstraint(c, ListConstraint);\n        if (lc) {\n            return new ListController(doc, {\n                props: new ValueMap({\n                    options: lc.values.value('options'),\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new TextController(doc, {\n            parser: (v) => v,\n            props: ValueMap.fromObject({\n                formatter: formatString,\n            }),\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (typeof args.controller.value.rawValue !== 'string') {\n            return null;\n        }\n        if (args.controller.valueController instanceof ListController) {\n            return new ListInputBindingApi(args.controller);\n        }\n        return null;\n    },\n});\n\nconst Constants = {\n    monitor: {\n        defaultInterval: 200,\n        defaultRows: 3,\n    },\n};\n\nconst cn$3 = ClassName('mll');\nclass MultiLogView {\n    constructor(doc, config) {\n        this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n        this.formatter_ = config.formatter;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$3());\n        config.viewProps.bindClassModifiers(this.element);\n        const textareaElem = doc.createElement('textarea');\n        textareaElem.classList.add(cn$3('i'));\n        textareaElem.style.height = `calc(var(${getCssVar('containerUnitSize')}) * ${config.rows})`;\n        textareaElem.readOnly = true;\n        config.viewProps.bindDisabled(textareaElem);\n        this.element.appendChild(textareaElem);\n        this.textareaElem_ = textareaElem;\n        config.value.emitter.on('change', this.onValueUpdate_);\n        this.value = config.value;\n        this.update_();\n    }\n    update_() {\n        const elem = this.textareaElem_;\n        const shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;\n        const lines = [];\n        this.value.rawValue.forEach((value) => {\n            if (value !== undefined) {\n                lines.push(this.formatter_(value));\n            }\n        });\n        elem.textContent = lines.join('\\n');\n        if (shouldScroll) {\n            elem.scrollTop = elem.scrollHeight;\n        }\n    }\n    onValueUpdate_() {\n        this.update_();\n    }\n}\n\nclass MultiLogController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new MultiLogView(doc, {\n            formatter: config.formatter,\n            rows: config.rows,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n    }\n}\n\nconst cn$2 = ClassName('sgl');\nclass SingleLogView {\n    constructor(doc, config) {\n        this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n        this.formatter_ = config.formatter;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$2());\n        config.viewProps.bindClassModifiers(this.element);\n        const inputElem = doc.createElement('input');\n        inputElem.classList.add(cn$2('i'));\n        inputElem.readOnly = true;\n        inputElem.type = 'text';\n        config.viewProps.bindDisabled(inputElem);\n        this.element.appendChild(inputElem);\n        this.inputElement = inputElem;\n        config.value.emitter.on('change', this.onValueUpdate_);\n        this.value = config.value;\n        this.update_();\n    }\n    update_() {\n        const values = this.value.rawValue;\n        const lastValue = values[values.length - 1];\n        this.inputElement.value =\n            lastValue !== undefined ? this.formatter_(lastValue) : '';\n    }\n    onValueUpdate_() {\n        this.update_();\n    }\n}\n\nclass SingleLogController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new SingleLogView(doc, {\n            formatter: config.formatter,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n    }\n}\n\nconst BooleanMonitorPlugin = createPlugin({\n    id: 'monitor-bool',\n    type: 'monitor',\n    accept: (value, params) => {\n        if (typeof value !== 'boolean') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            readonly: p.required.constant(true),\n            rows: p.optional.number,\n        }));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => boolFromUnknown,\n    },\n    controller: (args) => {\n        var _a;\n        if (args.value.rawValue.length === 1) {\n            return new SingleLogController(args.document, {\n                formatter: BooleanFormatter,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new MultiLogController(args.document, {\n            formatter: BooleanFormatter,\n            rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nclass GraphLogMonitorBindingApi extends BindingApi {\n    get max() {\n        return this.controller.valueController.props.get('max');\n    }\n    set max(max) {\n        this.controller.valueController.props.set('max', max);\n    }\n    get min() {\n        return this.controller.valueController.props.get('min');\n    }\n    set min(min) {\n        this.controller.valueController.props.set('min', min);\n    }\n}\n\nconst cn$1 = ClassName('grl');\nclass GraphLogView {\n    constructor(doc, config) {\n        this.onCursorChange_ = this.onCursorChange_.bind(this);\n        this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$1());\n        config.viewProps.bindClassModifiers(this.element);\n        this.formatter_ = config.formatter;\n        this.props_ = config.props;\n        this.cursor_ = config.cursor;\n        this.cursor_.emitter.on('change', this.onCursorChange_);\n        const svgElem = doc.createElementNS(SVG_NS, 'svg');\n        svgElem.classList.add(cn$1('g'));\n        svgElem.style.height = `calc(var(${getCssVar('containerUnitSize')}) * ${config.rows})`;\n        this.element.appendChild(svgElem);\n        this.svgElem_ = svgElem;\n        const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n        this.svgElem_.appendChild(lineElem);\n        this.lineElem_ = lineElem;\n        const tooltipElem = doc.createElement('div');\n        tooltipElem.classList.add(cn$1('t'), ClassName('tt')());\n        this.element.appendChild(tooltipElem);\n        this.tooltipElem_ = tooltipElem;\n        config.value.emitter.on('change', this.onValueUpdate_);\n        this.value = config.value;\n        this.update_();\n    }\n    get graphElement() {\n        return this.svgElem_;\n    }\n    update_() {\n        const bounds = this.svgElem_.getBoundingClientRect();\n        const maxIndex = this.value.rawValue.length - 1;\n        const min = this.props_.get('min');\n        const max = this.props_.get('max');\n        const points = [];\n        this.value.rawValue.forEach((v, index) => {\n            if (v === undefined) {\n                return;\n            }\n            const x = mapRange(index, 0, maxIndex, 0, bounds.width);\n            const y = mapRange(v, min, max, bounds.height, 0);\n            points.push([x, y].join(','));\n        });\n        this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n        const tooltipElem = this.tooltipElem_;\n        const value = this.value.rawValue[this.cursor_.rawValue];\n        if (value === undefined) {\n            tooltipElem.classList.remove(cn$1('t', 'a'));\n            return;\n        }\n        const tx = mapRange(this.cursor_.rawValue, 0, maxIndex, 0, bounds.width);\n        const ty = mapRange(value, min, max, bounds.height, 0);\n        tooltipElem.style.left = `${tx}px`;\n        tooltipElem.style.top = `${ty}px`;\n        tooltipElem.textContent = `${this.formatter_(value)}`;\n        if (!tooltipElem.classList.contains(cn$1('t', 'a'))) {\n            tooltipElem.classList.add(cn$1('t', 'a'), cn$1('t', 'in'));\n            forceReflow(tooltipElem);\n            tooltipElem.classList.remove(cn$1('t', 'in'));\n        }\n    }\n    onValueUpdate_() {\n        this.update_();\n    }\n    onCursorChange_() {\n        this.update_();\n    }\n}\n\nclass GraphLogController {\n    constructor(doc, config) {\n        this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n        this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n        this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n        this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n        this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n        this.props = config.props;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.cursor_ = createValue(-1);\n        this.view = new GraphLogView(doc, {\n            cursor: this.cursor_,\n            formatter: config.formatter,\n            rows: config.rows,\n            props: this.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        if (!supportsTouch(doc)) {\n            this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n            this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n        }\n        else {\n            const ph = new PointerHandler(this.view.element);\n            ph.emitter.on('down', this.onGraphPointerDown_);\n            ph.emitter.on('move', this.onGraphPointerMove_);\n            ph.emitter.on('up', this.onGraphPointerUp_);\n        }\n    }\n    importProps(state) {\n        return importBladeState(state, null, (p) => ({\n            max: p.required.number,\n            min: p.required.number,\n        }), (result) => {\n            this.props.set('max', result.max);\n            this.props.set('min', result.min);\n            return true;\n        });\n    }\n    exportProps() {\n        return exportBladeState(null, {\n            max: this.props.get('max'),\n            min: this.props.get('min'),\n        });\n    }\n    onGraphMouseLeave_() {\n        this.cursor_.rawValue = -1;\n    }\n    onGraphMouseMove_(ev) {\n        const bounds = this.view.element.getBoundingClientRect();\n        this.cursor_.rawValue = Math.floor(mapRange(ev.offsetX, 0, bounds.width, 0, this.value.rawValue.length));\n    }\n    onGraphPointerDown_(ev) {\n        this.onGraphPointerMove_(ev);\n    }\n    onGraphPointerMove_(ev) {\n        if (!ev.data.point) {\n            this.cursor_.rawValue = -1;\n            return;\n        }\n        this.cursor_.rawValue = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n    }\n    onGraphPointerUp_() {\n        this.cursor_.rawValue = -1;\n    }\n}\n\nfunction createFormatter(params) {\n    return !isEmpty(params.format) ? params.format : createNumberFormatter(2);\n}\nfunction createTextMonitor(args) {\n    var _a;\n    if (args.value.rawValue.length === 1) {\n        return new SingleLogController(args.document, {\n            formatter: createFormatter(args.params),\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    return new MultiLogController(args.document, {\n        formatter: createFormatter(args.params),\n        rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n        value: args.value,\n        viewProps: args.viewProps,\n    });\n}\nfunction createGraphMonitor(args) {\n    var _a, _b, _c;\n    return new GraphLogController(args.document, {\n        formatter: createFormatter(args.params),\n        rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n        props: ValueMap.fromObject({\n            max: (_b = args.params.max) !== null && _b !== void 0 ? _b : 100,\n            min: (_c = args.params.min) !== null && _c !== void 0 ? _c : 0,\n        }),\n        value: args.value,\n        viewProps: args.viewProps,\n    });\n}\nfunction shouldShowGraph(params) {\n    return params.view === 'graph';\n}\nconst NumberMonitorPlugin = createPlugin({\n    id: 'monitor-number',\n    type: 'monitor',\n    accept: (value, params) => {\n        if (typeof value !== 'number') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            format: p.optional.function,\n            max: p.optional.number,\n            min: p.optional.number,\n            readonly: p.required.constant(true),\n            rows: p.optional.number,\n            view: p.optional.string,\n        }));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        defaultBufferSize: (params) => (shouldShowGraph(params) ? 64 : 1),\n        reader: (_args) => numberFromUnknown,\n    },\n    controller: (args) => {\n        if (shouldShowGraph(args.params)) {\n            return createGraphMonitor(args);\n        }\n        return createTextMonitor(args);\n    },\n    api: (args) => {\n        if (args.controller.valueController instanceof GraphLogController) {\n            return new GraphLogMonitorBindingApi(args.controller);\n        }\n        return null;\n    },\n});\n\nconst StringMonitorPlugin = createPlugin({\n    id: 'monitor-string',\n    type: 'monitor',\n    accept: (value, params) => {\n        if (typeof value !== 'string') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            multiline: p.optional.boolean,\n            readonly: p.required.constant(true),\n            rows: p.optional.number,\n        }));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => stringFromUnknown,\n    },\n    controller: (args) => {\n        var _a;\n        const value = args.value;\n        const multiline = value.rawValue.length > 1 || args.params.multiline;\n        if (multiline) {\n            return new MultiLogController(args.document, {\n                formatter: formatString,\n                rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new SingleLogController(args.document, {\n            formatter: formatString,\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nclass BladeApiCache {\n    constructor() {\n        this.map_ = new Map();\n    }\n    get(bc) {\n        var _a;\n        return (_a = this.map_.get(bc)) !== null && _a !== void 0 ? _a : null;\n    }\n    has(bc) {\n        return this.map_.has(bc);\n    }\n    add(bc, api) {\n        this.map_.set(bc, api);\n        bc.viewProps.handleDispose(() => {\n            this.map_.delete(bc);\n        });\n        return api;\n    }\n}\n\nclass ReadWriteBinding {\n    constructor(config) {\n        this.target = config.target;\n        this.reader_ = config.reader;\n        this.writer_ = config.writer;\n    }\n    read() {\n        return this.reader_(this.target.read());\n    }\n    write(value) {\n        this.writer_(this.target, value);\n    }\n    inject(value) {\n        this.write(this.reader_(value));\n    }\n}\n\nfunction createInputBindingController(plugin, args) {\n    var _a;\n    const result = plugin.accept(args.target.read(), args.params);\n    if (isEmpty(result)) {\n        return null;\n    }\n    const valueArgs = {\n        target: args.target,\n        initialValue: result.initialValue,\n        params: result.params,\n    };\n    const params = parseRecord(args.params, (p) => ({\n        disabled: p.optional.boolean,\n        hidden: p.optional.boolean,\n        label: p.optional.string,\n        tag: p.optional.string,\n    }));\n    const reader = plugin.binding.reader(valueArgs);\n    const constraint = plugin.binding.constraint\n        ? plugin.binding.constraint(valueArgs)\n        : undefined;\n    const binding = new ReadWriteBinding({\n        reader: reader,\n        target: args.target,\n        writer: plugin.binding.writer(valueArgs),\n    });\n    const value = new InputBindingValue(createValue(reader(result.initialValue), {\n        constraint: constraint,\n        equals: plugin.binding.equals,\n    }), binding);\n    const controller = plugin.controller({\n        constraint: constraint,\n        document: args.document,\n        initialValue: result.initialValue,\n        params: result.params,\n        value: value,\n        viewProps: ViewProps.create({\n            disabled: params === null || params === void 0 ? void 0 : params.disabled,\n            hidden: params === null || params === void 0 ? void 0 : params.hidden,\n        }),\n    });\n    return new InputBindingController(args.document, {\n        blade: createBlade(),\n        props: ValueMap.fromObject({\n            label: 'label' in args.params ? (_a = params === null || params === void 0 ? void 0 : params.label) !== null && _a !== void 0 ? _a : null : args.target.key,\n        }),\n        tag: params === null || params === void 0 ? void 0 : params.tag,\n        value: value,\n        valueController: controller,\n    });\n}\n\nclass ReadonlyBinding {\n    constructor(config) {\n        this.target = config.target;\n        this.reader_ = config.reader;\n    }\n    read() {\n        return this.reader_(this.target.read());\n    }\n}\n\nfunction createTicker(document, interval) {\n    return interval === 0\n        ? new ManualTicker()\n        : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n}\nfunction createMonitorBindingController(plugin, args) {\n    var _a, _b, _c;\n    const result = plugin.accept(args.target.read(), args.params);\n    if (isEmpty(result)) {\n        return null;\n    }\n    const bindingArgs = {\n        target: args.target,\n        initialValue: result.initialValue,\n        params: result.params,\n    };\n    const params = parseRecord(args.params, (p) => ({\n        bufferSize: p.optional.number,\n        disabled: p.optional.boolean,\n        hidden: p.optional.boolean,\n        interval: p.optional.number,\n        label: p.optional.string,\n    }));\n    const reader = plugin.binding.reader(bindingArgs);\n    const bufferSize = (_b = (_a = params === null || params === void 0 ? void 0 : params.bufferSize) !== null && _a !== void 0 ? _a : (plugin.binding.defaultBufferSize &&\n        plugin.binding.defaultBufferSize(result.params))) !== null && _b !== void 0 ? _b : 1;\n    const value = new MonitorBindingValue({\n        binding: new ReadonlyBinding({\n            reader: reader,\n            target: args.target,\n        }),\n        bufferSize: bufferSize,\n        ticker: createTicker(args.document, params === null || params === void 0 ? void 0 : params.interval),\n    });\n    const controller = plugin.controller({\n        document: args.document,\n        params: result.params,\n        value: value,\n        viewProps: ViewProps.create({\n            disabled: params === null || params === void 0 ? void 0 : params.disabled,\n            hidden: params === null || params === void 0 ? void 0 : params.hidden,\n        }),\n    });\n    controller.viewProps.bindDisabled(value.ticker);\n    controller.viewProps.handleDispose(() => {\n        value.ticker.dispose();\n    });\n    return new MonitorBindingController(args.document, {\n        blade: createBlade(),\n        props: ValueMap.fromObject({\n            label: 'label' in args.params ? (_c = params === null || params === void 0 ? void 0 : params.label) !== null && _c !== void 0 ? _c : null : args.target.key,\n        }),\n        value: value,\n        valueController: controller,\n    });\n}\n\nclass PluginPool {\n    constructor(apiCache) {\n        this.pluginsMap_ = {\n            blades: [],\n            inputs: [],\n            monitors: [],\n        };\n        this.apiCache_ = apiCache;\n    }\n    getAll() {\n        return [\n            ...this.pluginsMap_.blades,\n            ...this.pluginsMap_.inputs,\n            ...this.pluginsMap_.monitors,\n        ];\n    }\n    register(bundleId, r) {\n        if (!isCompatible(r.core)) {\n            throw TpError.notCompatible(bundleId, r.id);\n        }\n        if (r.type === 'blade') {\n            this.pluginsMap_.blades.unshift(r);\n        }\n        else if (r.type === 'input') {\n            this.pluginsMap_.inputs.unshift(r);\n        }\n        else if (r.type === 'monitor') {\n            this.pluginsMap_.monitors.unshift(r);\n        }\n    }\n    createInput_(document, target, params) {\n        return this.pluginsMap_.inputs.reduce((result, plugin) => result !== null && result !== void 0 ? result : createInputBindingController(plugin, {\n            document: document,\n            target: target,\n            params: params,\n        }), null);\n    }\n    createMonitor_(document, target, params) {\n        return this.pluginsMap_.monitors.reduce((result, plugin) => result !== null && result !== void 0 ? result : createMonitorBindingController(plugin, {\n            document: document,\n            params: params,\n            target: target,\n        }), null);\n    }\n    createBinding(doc, target, params) {\n        const initialValue = target.read();\n        if (isEmpty(initialValue)) {\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        const ic = this.createInput_(doc, target, params);\n        if (ic) {\n            return ic;\n        }\n        const mc = this.createMonitor_(doc, target, params);\n        if (mc) {\n            return mc;\n        }\n        throw new TpError({\n            context: {\n                key: target.key,\n            },\n            type: 'nomatchingcontroller',\n        });\n    }\n    createBlade(document, params) {\n        const bc = this.pluginsMap_.blades.reduce((result, plugin) => result !== null && result !== void 0 ? result : createBladeController(plugin, {\n            document: document,\n            params: params,\n        }), null);\n        if (!bc) {\n            throw new TpError({\n                type: 'nomatchingview',\n                context: {\n                    params: params,\n                },\n            });\n        }\n        return bc;\n    }\n    createInputBindingApi_(bc) {\n        const api = this.pluginsMap_.inputs.reduce((result, plugin) => {\n            var _a, _b;\n            if (result) {\n                return result;\n            }\n            return ((_b = (_a = plugin.api) === null || _a === void 0 ? void 0 : _a.call(plugin, {\n                controller: bc,\n            })) !== null && _b !== void 0 ? _b : null);\n        }, null);\n        return this.apiCache_.add(bc, api !== null && api !== void 0 ? api : new BindingApi(bc));\n    }\n    createMonitorBindingApi_(bc) {\n        const api = this.pluginsMap_.monitors.reduce((result, plugin) => {\n            var _a, _b;\n            if (result) {\n                return result;\n            }\n            return ((_b = (_a = plugin.api) === null || _a === void 0 ? void 0 : _a.call(plugin, {\n                controller: bc,\n            })) !== null && _b !== void 0 ? _b : null);\n        }, null);\n        return this.apiCache_.add(bc, api !== null && api !== void 0 ? api : new BindingApi(bc));\n    }\n    createBindingApi(bc) {\n        if (this.apiCache_.has(bc)) {\n            return this.apiCache_.get(bc);\n        }\n        if (isInputBindingController(bc)) {\n            return this.createInputBindingApi_(bc);\n        }\n        if (isMonitorBindingController(bc)) {\n            return this.createMonitorBindingApi_(bc);\n        }\n        throw TpError.shouldNeverHappen();\n    }\n    createApi(bc) {\n        if (this.apiCache_.has(bc)) {\n            return this.apiCache_.get(bc);\n        }\n        if (isBindingController(bc)) {\n            return this.createBindingApi(bc);\n        }\n        const api = this.pluginsMap_.blades.reduce((result, plugin) => result !== null && result !== void 0 ? result : plugin.api({\n            controller: bc,\n            pool: this,\n        }), null);\n        if (!api) {\n            throw TpError.shouldNeverHappen();\n        }\n        return this.apiCache_.add(bc, api);\n    }\n}\n\nconst sharedCache = new BladeApiCache();\nfunction createDefaultPluginPool() {\n    const pool = new PluginPool(sharedCache);\n    [\n        Point2dInputPlugin,\n        Point3dInputPlugin,\n        Point4dInputPlugin,\n        StringInputPlugin,\n        NumberInputPlugin,\n        StringColorInputPlugin,\n        ObjectColorInputPlugin,\n        NumberColorInputPlugin,\n        BooleanInputPlugin,\n        BooleanMonitorPlugin,\n        StringMonitorPlugin,\n        NumberMonitorPlugin,\n        ButtonBladePlugin,\n        FolderBladePlugin,\n        TabBladePlugin,\n    ].forEach((p) => {\n        pool.register('core', p);\n    });\n    return pool;\n}\n\nclass ListBladeApi extends BladeApi {\n    /**\n     * @hidden\n     */\n    constructor(controller) {\n        super(controller);\n        this.emitter_ = new Emitter();\n        this.controller.value.emitter.on('change', (ev) => {\n            this.emitter_.emit('change', new TpChangeEvent(this, ev.rawValue));\n        });\n    }\n    get label() {\n        return this.controller.labelController.props.get('label');\n    }\n    set label(label) {\n        this.controller.labelController.props.set('label', label);\n    }\n    get options() {\n        return this.controller.valueController.props.get('options');\n    }\n    set options(options) {\n        this.controller.valueController.props.set('options', options);\n    }\n    get value() {\n        return this.controller.value.rawValue;\n    }\n    set value(value) {\n        this.controller.value.rawValue = value;\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        });\n        return this;\n    }\n}\n\nclass SeparatorBladeApi extends BladeApi {\n}\n\nclass SliderBladeApi extends BladeApi {\n    /**\n     * @hidden\n     */\n    constructor(controller) {\n        super(controller);\n        this.emitter_ = new Emitter();\n        this.controller.value.emitter.on('change', (ev) => {\n            this.emitter_.emit('change', new TpChangeEvent(this, ev.rawValue));\n        });\n    }\n    get label() {\n        return this.controller.labelController.props.get('label');\n    }\n    set label(label) {\n        this.controller.labelController.props.set('label', label);\n    }\n    get max() {\n        return this.controller.valueController.sliderController.props.get('max');\n    }\n    set max(max) {\n        this.controller.valueController.sliderController.props.set('max', max);\n    }\n    get min() {\n        return this.controller.valueController.sliderController.props.get('min');\n    }\n    set min(min) {\n        this.controller.valueController.sliderController.props.set('min', min);\n    }\n    get value() {\n        return this.controller.value.rawValue;\n    }\n    set value(value) {\n        this.controller.value.rawValue = value;\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        });\n        return this;\n    }\n}\n\nclass TextBladeApi extends BladeApi {\n    /**\n     * @hidden\n     */\n    constructor(controller) {\n        super(controller);\n        this.emitter_ = new Emitter();\n        this.controller.value.emitter.on('change', (ev) => {\n            this.emitter_.emit('change', new TpChangeEvent(this, ev.rawValue));\n        });\n    }\n    get label() {\n        return this.controller.labelController.props.get('label');\n    }\n    set label(label) {\n        this.controller.labelController.props.set('label', label);\n    }\n    get formatter() {\n        return this.controller.valueController.props.get('formatter');\n    }\n    set formatter(formatter) {\n        this.controller.valueController.props.set('formatter', formatter);\n    }\n    get value() {\n        return this.controller.value.rawValue;\n    }\n    set value(value) {\n        this.controller.value.rawValue = value;\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        });\n        return this;\n    }\n}\n\nconst ListBladePlugin = (function () {\n    return {\n        id: 'list',\n        type: 'blade',\n        core: VERSION$1,\n        accept(params) {\n            const result = parseRecord(params, (p) => ({\n                options: p.required.custom(parseListOptions),\n                value: p.required.raw,\n                view: p.required.constant('list'),\n                label: p.optional.string,\n            }));\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            const lc = new ListConstraint(normalizeListOptions(args.params.options));\n            const value = createValue(args.params.value, {\n                constraint: lc,\n            });\n            const ic = new ListController(args.document, {\n                props: new ValueMap({\n                    options: lc.values.value('options'),\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n            return new LabeledValueBladeController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                value: value,\n                valueController: ic,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueBladeController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof ListController)) {\n                return null;\n            }\n            return new ListBladeApi(args.controller);\n        },\n    };\n})();\n\nclass RootApi extends FolderApi {\n    /**\n     * @hidden\n     */\n    constructor(controller, pool) {\n        super(controller, pool);\n    }\n    get element() {\n        return this.controller.view.element;\n    }\n}\n\n/**\n * @hidden\n */\nclass RootController extends FolderController {\n    constructor(doc, config) {\n        super(doc, {\n            expanded: config.expanded,\n            blade: config.blade,\n            props: config.props,\n            root: true,\n            viewProps: config.viewProps,\n        });\n    }\n}\n\nconst cn = ClassName('spr');\n/**\n * @hidden\n */\nclass SeparatorView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        config.viewProps.bindClassModifiers(this.element);\n        const hrElem = doc.createElement('hr');\n        hrElem.classList.add(cn('r'));\n        this.element.appendChild(hrElem);\n    }\n}\n\n/**\n * @hidden\n */\nclass SeparatorController extends BladeController {\n    /**\n     * @hidden\n     */\n    constructor(doc, config) {\n        super(Object.assign(Object.assign({}, config), { view: new SeparatorView(doc, {\n                viewProps: config.viewProps,\n            }) }));\n    }\n}\n\nconst SeparatorBladePlugin = {\n    id: 'separator',\n    type: 'blade',\n    core: VERSION$1,\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            view: p.required.constant('separator'),\n        }));\n        return result ? { params: result } : null;\n    },\n    controller(args) {\n        return new SeparatorController(args.document, {\n            blade: args.blade,\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (!(args.controller instanceof SeparatorController)) {\n            return null;\n        }\n        return new SeparatorBladeApi(args.controller);\n    },\n};\n\nconst SliderBladePlugin = {\n    id: 'slider',\n    type: 'blade',\n    core: VERSION$1,\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            max: p.required.number,\n            min: p.required.number,\n            view: p.required.constant('slider'),\n            format: p.optional.function,\n            label: p.optional.string,\n            value: p.optional.number,\n        }));\n        return result ? { params: result } : null;\n    },\n    controller(args) {\n        var _a, _b;\n        const initialValue = (_a = args.params.value) !== null && _a !== void 0 ? _a : 0;\n        const drc = new DefiniteRangeConstraint({\n            max: args.params.max,\n            min: args.params.min,\n        });\n        const v = createValue(initialValue, {\n            constraint: drc,\n        });\n        const vc = new SliderTextController(args.document, Object.assign(Object.assign({}, createSliderTextProps({\n            formatter: (_b = args.params.format) !== null && _b !== void 0 ? _b : numberToString,\n            keyScale: createValue(1),\n            max: drc.values.value('max'),\n            min: drc.values.value('min'),\n            pointerScale: getSuitablePointerScale(args.params, initialValue),\n        })), { parser: parseNumber, value: v, viewProps: args.viewProps }));\n        return new LabeledValueBladeController(args.document, {\n            blade: args.blade,\n            props: ValueMap.fromObject({\n                label: args.params.label,\n            }),\n            value: v,\n            valueController: vc,\n        });\n    },\n    api(args) {\n        if (!(args.controller instanceof LabeledValueBladeController)) {\n            return null;\n        }\n        if (!(args.controller.valueController instanceof SliderTextController)) {\n            return null;\n        }\n        return new SliderBladeApi(args.controller);\n    },\n};\n\nconst TextBladePlugin = (function () {\n    return {\n        id: 'text',\n        type: 'blade',\n        core: VERSION$1,\n        accept(params) {\n            const result = parseRecord(params, (p) => ({\n                parse: p.required.function,\n                value: p.required.raw,\n                view: p.required.constant('text'),\n                format: p.optional.function,\n                label: p.optional.string,\n            }));\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            var _a;\n            const v = createValue(args.params.value);\n            const ic = new TextController(args.document, {\n                parser: args.params.parse,\n                props: ValueMap.fromObject({\n                    formatter: (_a = args.params.format) !== null && _a !== void 0 ? _a : ((v) => String(v)),\n                }),\n                value: v,\n                viewProps: args.viewProps,\n            });\n            return new LabeledValueBladeController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                value: v,\n                valueController: ic,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueBladeController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof TextController)) {\n                return null;\n            }\n            return new TextBladeApi(args.controller);\n        },\n    };\n})();\n\nfunction createDefaultWrapperElement(doc) {\n    const elem = doc.createElement('div');\n    elem.classList.add(ClassName('dfw')());\n    if (doc.body) {\n        doc.body.appendChild(elem);\n    }\n    return elem;\n}\nfunction embedStyle(doc, id, css) {\n    if (doc.querySelector(`style[data-tp-style=${id}]`)) {\n        return;\n    }\n    const styleElem = doc.createElement('style');\n    styleElem.dataset.tpStyle = id;\n    styleElem.textContent = css;\n    doc.head.appendChild(styleElem);\n}\n/**\n * The root pane of Tweakpane.\n */\nclass Pane extends RootApi {\n    constructor(opt_config) {\n        var _a, _b;\n        const config = opt_config !== null && opt_config !== void 0 ? opt_config : {};\n        const doc = (_a = config.document) !== null && _a !== void 0 ? _a : getWindowDocument();\n        const pool = createDefaultPluginPool();\n        const rootController = new RootController(doc, {\n            expanded: config.expanded,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                title: config.title,\n            }),\n            viewProps: ViewProps.create(),\n        });\n        super(rootController, pool);\n        this.pool_ = pool;\n        this.containerElem_ = (_b = config.container) !== null && _b !== void 0 ? _b : createDefaultWrapperElement(doc);\n        this.containerElem_.appendChild(this.element);\n        this.doc_ = doc;\n        this.usesDefaultWrapper_ = !config.container;\n        this.setUpDefaultPlugins_();\n    }\n    get document() {\n        if (!this.doc_) {\n            throw TpError.alreadyDisposed();\n        }\n        return this.doc_;\n    }\n    dispose() {\n        const containerElem = this.containerElem_;\n        if (!containerElem) {\n            throw TpError.alreadyDisposed();\n        }\n        if (this.usesDefaultWrapper_) {\n            const parentElem = containerElem.parentElement;\n            if (parentElem) {\n                parentElem.removeChild(containerElem);\n            }\n        }\n        this.containerElem_ = null;\n        this.doc_ = null;\n        super.dispose();\n    }\n    registerPlugin(bundle) {\n        if (bundle.css) {\n            embedStyle(this.document, `plugin-${bundle.id}`, bundle.css);\n        }\n        const plugins = 'plugin' in bundle\n            ? [bundle.plugin]\n            : 'plugins' in bundle\n                ? bundle.plugins\n                : [];\n        plugins.forEach((p) => {\n            this.pool_.register(bundle.id, p);\n        });\n    }\n    setUpDefaultPlugins_() {\n        this.registerPlugin({\n            id: 'default',\n            // NOTE: This string literal will be replaced with the default CSS by Rollup at the compilation time\n            css: '.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1 * var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(\t\t2px * 2 + var(--cnt-usz) + var(--cnt-hp)\t);position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:\"\";display:block;height:6px;right:calc(\t\tvar(--cnt-hp) + (\t\t\t\tvar(--cnt-usz) + 4px - 6px\t\t\t) / 2 - 2px\t);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1 * var(--cnt-hp));right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(\t\t\tvar(--cnt-vp) + 2px\t\t);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:\"\";height:2px;left:calc(-1 * var(--cnt-hp));position:absolute;right:calc(-1 * var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);bottom:0;content:\"\";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz) * 3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1 * var(--cnt-hp));right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:\"\";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:\"\";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:\"\";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:\"\";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(\t\t\tvar(--bld-hp) - 5px\t\t);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:\"\";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(\t\t\t2px * 2 + var(--cnt-usz) + var(--cnt-hp)\t\t);text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1 * var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1 * var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',\n            plugins: [\n                ListBladePlugin,\n                SeparatorBladePlugin,\n                SliderBladePlugin,\n                TabBladePlugin,\n                TextBladePlugin,\n            ],\n        });\n    }\n}\n\nconst VERSION = new Semver('4.0.1');\n\nexport { BladeApi, ButtonApi, FolderApi, ListBladeApi, ListInputBindingApi, Pane, Semver, SeparatorBladeApi, SliderBladeApi, SliderInputBindingApi, TabApi, TabPageApi, TextBladeApi, TpChangeEvent, VERSION };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}