{"ast":null,"code":"import _construct from \"/Users/noamsebahoun/Documents/MMI/MMI_3/karl/three-reader-live/node_modules/@babel/runtime/helpers/esm/construct.js\";\nimport _createForOfIteratorHelper from \"/Users/noamsebahoun/Documents/MMI/MMI_3/karl/three-reader-live/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _slicedToArray from \"/Users/noamsebahoun/Documents/MMI/MMI_3/karl/three-reader-live/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _get from \"/Users/noamsebahoun/Documents/MMI/MMI_3/karl/three-reader-live/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/Users/noamsebahoun/Documents/MMI/MMI_3/karl/three-reader-live/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _assertThisInitialized from \"/Users/noamsebahoun/Documents/MMI/MMI_3/karl/three-reader-live/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/noamsebahoun/Documents/MMI/MMI_3/karl/three-reader-live/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/noamsebahoun/Documents/MMI/MMI_3/karl/three-reader-live/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _classCallCheck from \"/Users/noamsebahoun/Documents/MMI/MMI_3/karl/three-reader-live/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/noamsebahoun/Documents/MMI/MMI_3/karl/three-reader-live/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _defineProperty from \"/Users/noamsebahoun/Documents/MMI/MMI_3/karl/three-reader-live/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _toConsumableArray from \"/Users/noamsebahoun/Documents/MMI/MMI_3/karl/three-reader-live/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\n/*! Tweakpane 4.0.1 (c) 2016 cocopon, licensed under the MIT license. */\nfunction forceCast(v) {\n  return v;\n}\nfunction isEmpty(value) {\n  return value === null || value === undefined;\n}\nfunction isObject$1(value) {\n  return value !== null && typeof value === 'object';\n}\nfunction isRecord(value) {\n  return value !== null && typeof value === 'object';\n}\nfunction deepEqualsArray(a1, a2) {\n  if (a1.length !== a2.length) {\n    return false;\n  }\n  for (var i = 0; i < a1.length; i++) {\n    if (a1[i] !== a2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction deepMerge(r1, r2) {\n  var keys = Array.from(new Set([].concat(_toConsumableArray(Object.keys(r1)), _toConsumableArray(Object.keys(r2)))));\n  return keys.reduce(function (result, key) {\n    var v1 = r1[key];\n    var v2 = r2[key];\n    return isRecord(v1) && isRecord(v2) ? Object.assign(Object.assign({}, result), _defineProperty({}, key, deepMerge(v1, v2))) : Object.assign(Object.assign({}, result), _defineProperty({}, key, key in r2 ? v2 : v1));\n  }, {});\n}\nfunction isBinding(value) {\n  if (!isObject$1(value)) {\n    return false;\n  }\n  return 'target' in value;\n}\nvar CREATE_MESSAGE_MAP = {\n  alreadydisposed: function alreadydisposed() {\n    return 'View has been already disposed';\n  },\n  invalidparams: function invalidparams(context) {\n    return \"Invalid parameters for '\".concat(context.name, \"'\");\n  },\n  nomatchingcontroller: function nomatchingcontroller(context) {\n    return \"No matching controller for '\".concat(context.key, \"'\");\n  },\n  nomatchingview: function nomatchingview(context) {\n    return \"No matching view for '\".concat(JSON.stringify(context.params), \"'\");\n  },\n  notbindable: function notbindable() {\n    return \"Value is not bindable\";\n  },\n  notcompatible: function notcompatible(context) {\n    return \"Not compatible with  plugin '\".concat(context.id, \"'\");\n  },\n  propertynotfound: function propertynotfound(context) {\n    return \"Property '\".concat(context.name, \"' not found\");\n  },\n  shouldneverhappen: function shouldneverhappen() {\n    return 'This error should never happen';\n  }\n};\nvar TpError = /*#__PURE__*/function () {\n  function TpError(config) {\n    _classCallCheck(this, TpError);\n    var _a;\n    this.message = (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n    this.name = this.constructor.name;\n    this.stack = new Error(this.message).stack;\n    this.type = config.type;\n  }\n  _createClass(TpError, [{\n    key: \"toString\",\n    value: function toString() {\n      return this.message;\n    }\n  }], [{\n    key: \"alreadyDisposed\",\n    value: function alreadyDisposed() {\n      return new TpError({\n        type: 'alreadydisposed'\n      });\n    }\n  }, {\n    key: \"notBindable\",\n    value: function notBindable() {\n      return new TpError({\n        type: 'notbindable'\n      });\n    }\n  }, {\n    key: \"notCompatible\",\n    value: function notCompatible(bundleId, id) {\n      return new TpError({\n        type: 'notcompatible',\n        context: {\n          id: \"\".concat(bundleId, \".\").concat(id)\n        }\n      });\n    }\n  }, {\n    key: \"propertyNotFound\",\n    value: function propertyNotFound(name) {\n      return new TpError({\n        type: 'propertynotfound',\n        context: {\n          name: name\n        }\n      });\n    }\n  }, {\n    key: \"shouldNeverHappen\",\n    value: function shouldNeverHappen() {\n      return new TpError({\n        type: 'shouldneverhappen'\n      });\n    }\n  }]);\n  return TpError;\n}();\nvar BindingTarget = /*#__PURE__*/function () {\n  function BindingTarget(obj, key) {\n    _classCallCheck(this, BindingTarget);\n    this.obj_ = obj;\n    this.key = key;\n  }\n  _createClass(BindingTarget, [{\n    key: \"read\",\n    value: function read() {\n      return this.obj_[this.key];\n    }\n  }, {\n    key: \"write\",\n    value: function write(value) {\n      this.obj_[this.key] = value;\n    }\n  }, {\n    key: \"writeProperty\",\n    value: function writeProperty(name, value) {\n      var valueObj = this.read();\n      if (!BindingTarget.isBindable(valueObj)) {\n        throw TpError.notBindable();\n      }\n      if (!(name in valueObj)) {\n        throw TpError.propertyNotFound(name);\n      }\n      valueObj[name] = value;\n    }\n  }], [{\n    key: \"isBindable\",\n    value: function isBindable(obj) {\n      if (obj === null) {\n        return false;\n      }\n      if (typeof obj !== 'object' && typeof obj !== 'function') {\n        return false;\n      }\n      return true;\n    }\n  }]);\n  return BindingTarget;\n}();\nvar Emitter = /*#__PURE__*/function () {\n  function Emitter() {\n    _classCallCheck(this, Emitter);\n    this.observers_ = {};\n  }\n  _createClass(Emitter, [{\n    key: \"on\",\n    value: function on(eventName, handler) {\n      var observers = this.observers_[eventName];\n      if (!observers) {\n        observers = this.observers_[eventName] = [];\n      }\n      observers.push({\n        handler: handler\n      });\n      return this;\n    }\n  }, {\n    key: \"off\",\n    value: function off(eventName, handler) {\n      var observers = this.observers_[eventName];\n      if (observers) {\n        this.observers_[eventName] = observers.filter(function (observer) {\n          return observer.handler !== handler;\n        });\n      }\n      return this;\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(eventName, event) {\n      var observers = this.observers_[eventName];\n      if (!observers) {\n        return;\n      }\n      observers.forEach(function (observer) {\n        observer.handler(event);\n      });\n    }\n  }]);\n  return Emitter;\n}();\nvar ComplexValue = /*#__PURE__*/function () {\n  function ComplexValue(initialValue, config) {\n    _classCallCheck(this, ComplexValue);\n    var _a;\n    this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n    this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : function (v1, v2) {\n      return v1 === v2;\n    };\n    this.emitter = new Emitter();\n    this.rawValue_ = initialValue;\n  }\n  _createClass(ComplexValue, [{\n    key: \"constraint\",\n    get: function get() {\n      return this.constraint_;\n    }\n  }, {\n    key: \"rawValue\",\n    get: function get() {\n      return this.rawValue_;\n    },\n    set: function set(rawValue) {\n      this.setRawValue(rawValue, {\n        forceEmit: false,\n        last: true\n      });\n    }\n  }, {\n    key: \"setRawValue\",\n    value: function setRawValue(rawValue, options) {\n      var opts = options !== null && options !== void 0 ? options : {\n        forceEmit: false,\n        last: true\n      };\n      var constrainedValue = this.constraint_ ? this.constraint_.constrain(rawValue) : rawValue;\n      var prevValue = this.rawValue_;\n      var changed = !this.equals_(prevValue, constrainedValue);\n      if (!changed && !opts.forceEmit) {\n        return;\n      }\n      this.emitter.emit('beforechange', {\n        sender: this\n      });\n      this.rawValue_ = constrainedValue;\n      this.emitter.emit('change', {\n        options: opts,\n        previousRawValue: prevValue,\n        rawValue: constrainedValue,\n        sender: this\n      });\n    }\n  }]);\n  return ComplexValue;\n}();\nvar PrimitiveValue = /*#__PURE__*/function () {\n  function PrimitiveValue(initialValue) {\n    _classCallCheck(this, PrimitiveValue);\n    this.emitter = new Emitter();\n    this.value_ = initialValue;\n  }\n  _createClass(PrimitiveValue, [{\n    key: \"rawValue\",\n    get: function get() {\n      return this.value_;\n    },\n    set: function set(value) {\n      this.setRawValue(value, {\n        forceEmit: false,\n        last: true\n      });\n    }\n  }, {\n    key: \"setRawValue\",\n    value: function setRawValue(value, options) {\n      var opts = options !== null && options !== void 0 ? options : {\n        forceEmit: false,\n        last: true\n      };\n      var prevValue = this.value_;\n      if (prevValue === value && !opts.forceEmit) {\n        return;\n      }\n      this.emitter.emit('beforechange', {\n        sender: this\n      });\n      this.value_ = value;\n      this.emitter.emit('change', {\n        options: opts,\n        previousRawValue: prevValue,\n        rawValue: this.value_,\n        sender: this\n      });\n    }\n  }]);\n  return PrimitiveValue;\n}();\nvar ReadonlyPrimitiveValue = /*#__PURE__*/function () {\n  function ReadonlyPrimitiveValue(value) {\n    _classCallCheck(this, ReadonlyPrimitiveValue);\n    this.emitter = new Emitter();\n    this.onValueBeforeChange_ = this.onValueBeforeChange_.bind(this);\n    this.onValueChange_ = this.onValueChange_.bind(this);\n    this.value_ = value;\n    this.value_.emitter.on('beforechange', this.onValueBeforeChange_);\n    this.value_.emitter.on('change', this.onValueChange_);\n  }\n  _createClass(ReadonlyPrimitiveValue, [{\n    key: \"rawValue\",\n    get: function get() {\n      return this.value_.rawValue;\n    }\n  }, {\n    key: \"onValueBeforeChange_\",\n    value: function onValueBeforeChange_(ev) {\n      this.emitter.emit('beforechange', Object.assign(Object.assign({}, ev), {\n        sender: this\n      }));\n    }\n  }, {\n    key: \"onValueChange_\",\n    value: function onValueChange_(ev) {\n      this.emitter.emit('change', Object.assign(Object.assign({}, ev), {\n        sender: this\n      }));\n    }\n  }]);\n  return ReadonlyPrimitiveValue;\n}();\nfunction createValue(initialValue, config) {\n  var constraint = config === null || config === void 0 ? void 0 : config.constraint;\n  var equals = config === null || config === void 0 ? void 0 : config.equals;\n  if (!constraint && !equals) {\n    return new PrimitiveValue(initialValue);\n  }\n  return new ComplexValue(initialValue, config);\n}\nfunction createReadonlyValue(value) {\n  return [new ReadonlyPrimitiveValue(value), function (rawValue, options) {\n    value.setRawValue(rawValue, options);\n  }];\n}\nvar ValueMap = /*#__PURE__*/function () {\n  function ValueMap(valueMap) {\n    var _this = this;\n    _classCallCheck(this, ValueMap);\n    this.emitter = new Emitter();\n    this.valMap_ = valueMap;\n    var _loop = function _loop(key) {\n      var v = _this.valMap_[key];\n      v.emitter.on('change', function () {\n        _this.emitter.emit('change', {\n          key: key,\n          sender: _this\n        });\n      });\n    };\n    for (var key in this.valMap_) {\n      _loop(key);\n    }\n  }\n  _createClass(ValueMap, [{\n    key: \"get\",\n    value: function get(key) {\n      return this.valMap_[key].rawValue;\n    }\n  }, {\n    key: \"set\",\n    value: function set(key, value) {\n      this.valMap_[key].rawValue = value;\n    }\n  }, {\n    key: \"value\",\n    value: function value(key) {\n      return this.valMap_[key];\n    }\n  }], [{\n    key: \"createCore\",\n    value: function createCore(initialValue) {\n      var keys = Object.keys(initialValue);\n      return keys.reduce(function (o, key) {\n        return Object.assign(o, _defineProperty({}, key, createValue(initialValue[key])));\n      }, {});\n    }\n  }, {\n    key: \"fromObject\",\n    value: function fromObject(initialValue) {\n      var core = this.createCore(initialValue);\n      return new ValueMap(core);\n    }\n  }]);\n  return ValueMap;\n}();\nvar DefiniteRangeConstraint = /*#__PURE__*/function () {\n  function DefiniteRangeConstraint(config) {\n    _classCallCheck(this, DefiniteRangeConstraint);\n    this.values = ValueMap.fromObject({\n      max: config.max,\n      min: config.min\n    });\n  }\n  _createClass(DefiniteRangeConstraint, [{\n    key: \"constrain\",\n    value: function constrain(value) {\n      var max = this.values.get('max');\n      var min = this.values.get('min');\n      return Math.min(Math.max(value, min), max);\n    }\n  }]);\n  return DefiniteRangeConstraint;\n}();\nvar RangeConstraint = /*#__PURE__*/function () {\n  function RangeConstraint(config) {\n    _classCallCheck(this, RangeConstraint);\n    this.values = ValueMap.fromObject({\n      max: config.max,\n      min: config.min\n    });\n  }\n  _createClass(RangeConstraint, [{\n    key: \"constrain\",\n    value: function constrain(value) {\n      var max = this.values.get('max');\n      var min = this.values.get('min');\n      var result = value;\n      if (!isEmpty(min)) {\n        result = Math.max(result, min);\n      }\n      if (!isEmpty(max)) {\n        result = Math.min(result, max);\n      }\n      return result;\n    }\n  }]);\n  return RangeConstraint;\n}();\nvar StepConstraint = /*#__PURE__*/function () {\n  function StepConstraint(step) {\n    var origin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    _classCallCheck(this, StepConstraint);\n    this.step = step;\n    this.origin = origin;\n  }\n  _createClass(StepConstraint, [{\n    key: \"constrain\",\n    value: function constrain(value) {\n      var o = this.origin % this.step;\n      var r = Math.round((value - o) / this.step);\n      return o + r * this.step;\n    }\n  }]);\n  return StepConstraint;\n}();\nvar NumberLiteralNode = /*#__PURE__*/function () {\n  function NumberLiteralNode(text) {\n    _classCallCheck(this, NumberLiteralNode);\n    this.text = text;\n  }\n  _createClass(NumberLiteralNode, [{\n    key: \"evaluate\",\n    value: function evaluate() {\n      return Number(this.text);\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return this.text;\n    }\n  }]);\n  return NumberLiteralNode;\n}();\nvar BINARY_OPERATION_MAP = {\n  '**': function _(v1, v2) {\n    return Math.pow(v1, v2);\n  },\n  '*': function _(v1, v2) {\n    return v1 * v2;\n  },\n  '/': function _(v1, v2) {\n    return v1 / v2;\n  },\n  '%': function _(v1, v2) {\n    return v1 % v2;\n  },\n  '+': function _(v1, v2) {\n    return v1 + v2;\n  },\n  '-': function _(v1, v2) {\n    return v1 - v2;\n  },\n  '<<': function _(v1, v2) {\n    return v1 << v2;\n  },\n  '>>': function _(v1, v2) {\n    return v1 >> v2;\n  },\n  '>>>': function _(v1, v2) {\n    return v1 >>> v2;\n  },\n  '&': function _(v1, v2) {\n    return v1 & v2;\n  },\n  '^': function _(v1, v2) {\n    return v1 ^ v2;\n  },\n  '|': function _(v1, v2) {\n    return v1 | v2;\n  }\n};\nvar BinaryOperationNode = /*#__PURE__*/function () {\n  function BinaryOperationNode(operator, left, right) {\n    _classCallCheck(this, BinaryOperationNode);\n    this.left = left;\n    this.operator = operator;\n    this.right = right;\n  }\n  _createClass(BinaryOperationNode, [{\n    key: \"evaluate\",\n    value: function evaluate() {\n      var op = BINARY_OPERATION_MAP[this.operator];\n      if (!op) {\n        throw new Error(\"unexpected binary operator: '\".concat(this.operator));\n      }\n      return op(this.left.evaluate(), this.right.evaluate());\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return ['b(', this.left.toString(), this.operator, this.right.toString(), ')'].join(' ');\n    }\n  }]);\n  return BinaryOperationNode;\n}();\nvar UNARY_OPERATION_MAP = {\n  '+': function _(v) {\n    return v;\n  },\n  '-': function _(v) {\n    return -v;\n  },\n  '~': function _(v) {\n    return ~v;\n  }\n};\nvar UnaryOperationNode = /*#__PURE__*/function () {\n  function UnaryOperationNode(operator, expr) {\n    _classCallCheck(this, UnaryOperationNode);\n    this.operator = operator;\n    this.expression = expr;\n  }\n  _createClass(UnaryOperationNode, [{\n    key: \"evaluate\",\n    value: function evaluate() {\n      var op = UNARY_OPERATION_MAP[this.operator];\n      if (!op) {\n        throw new Error(\"unexpected unary operator: '\".concat(this.operator));\n      }\n      return op(this.expression.evaluate());\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return ['u(', this.operator, this.expression.toString(), ')'].join(' ');\n    }\n  }]);\n  return UnaryOperationNode;\n}();\nfunction combineReader(parsers) {\n  return function (text, cursor) {\n    for (var i = 0; i < parsers.length; i++) {\n      var result = parsers[i](text, cursor);\n      if (result !== '') {\n        return result;\n      }\n    }\n    return '';\n  };\n}\nfunction readWhitespace(text, cursor) {\n  var _a;\n  var m = text.substr(cursor).match(/^\\s+/);\n  return (_a = m && m[0]) !== null && _a !== void 0 ? _a : '';\n}\nfunction readNonZeroDigit(text, cursor) {\n  var ch = text.substr(cursor, 1);\n  return ch.match(/^[1-9]$/) ? ch : '';\n}\nfunction readDecimalDigits(text, cursor) {\n  var _a;\n  var m = text.substr(cursor).match(/^[0-9]+/);\n  return (_a = m && m[0]) !== null && _a !== void 0 ? _a : '';\n}\nfunction readSignedInteger(text, cursor) {\n  var ds = readDecimalDigits(text, cursor);\n  if (ds !== '') {\n    return ds;\n  }\n  var sign = text.substr(cursor, 1);\n  cursor += 1;\n  if (sign !== '-' && sign !== '+') {\n    return '';\n  }\n  var sds = readDecimalDigits(text, cursor);\n  if (sds === '') {\n    return '';\n  }\n  return sign + sds;\n}\nfunction readExponentPart(text, cursor) {\n  var e = text.substr(cursor, 1);\n  cursor += 1;\n  if (e.toLowerCase() !== 'e') {\n    return '';\n  }\n  var si = readSignedInteger(text, cursor);\n  if (si === '') {\n    return '';\n  }\n  return e + si;\n}\nfunction readDecimalIntegerLiteral(text, cursor) {\n  var ch = text.substr(cursor, 1);\n  if (ch === '0') {\n    return ch;\n  }\n  var nzd = readNonZeroDigit(text, cursor);\n  cursor += nzd.length;\n  if (nzd === '') {\n    return '';\n  }\n  return nzd + readDecimalDigits(text, cursor);\n}\nfunction readDecimalLiteral1(text, cursor) {\n  var dil = readDecimalIntegerLiteral(text, cursor);\n  cursor += dil.length;\n  if (dil === '') {\n    return '';\n  }\n  var dot = text.substr(cursor, 1);\n  cursor += dot.length;\n  if (dot !== '.') {\n    return '';\n  }\n  var dds = readDecimalDigits(text, cursor);\n  cursor += dds.length;\n  return dil + dot + dds + readExponentPart(text, cursor);\n}\nfunction readDecimalLiteral2(text, cursor) {\n  var dot = text.substr(cursor, 1);\n  cursor += dot.length;\n  if (dot !== '.') {\n    return '';\n  }\n  var dds = readDecimalDigits(text, cursor);\n  cursor += dds.length;\n  if (dds === '') {\n    return '';\n  }\n  return dot + dds + readExponentPart(text, cursor);\n}\nfunction readDecimalLiteral3(text, cursor) {\n  var dil = readDecimalIntegerLiteral(text, cursor);\n  cursor += dil.length;\n  if (dil === '') {\n    return '';\n  }\n  return dil + readExponentPart(text, cursor);\n}\nvar readDecimalLiteral = combineReader([readDecimalLiteral1, readDecimalLiteral2, readDecimalLiteral3]);\nfunction parseBinaryDigits(text, cursor) {\n  var _a;\n  var m = text.substr(cursor).match(/^[01]+/);\n  return (_a = m && m[0]) !== null && _a !== void 0 ? _a : '';\n}\nfunction readBinaryIntegerLiteral(text, cursor) {\n  var prefix = text.substr(cursor, 2);\n  cursor += prefix.length;\n  if (prefix.toLowerCase() !== '0b') {\n    return '';\n  }\n  var bds = parseBinaryDigits(text, cursor);\n  if (bds === '') {\n    return '';\n  }\n  return prefix + bds;\n}\nfunction readOctalDigits(text, cursor) {\n  var _a;\n  var m = text.substr(cursor).match(/^[0-7]+/);\n  return (_a = m && m[0]) !== null && _a !== void 0 ? _a : '';\n}\nfunction readOctalIntegerLiteral(text, cursor) {\n  var prefix = text.substr(cursor, 2);\n  cursor += prefix.length;\n  if (prefix.toLowerCase() !== '0o') {\n    return '';\n  }\n  var ods = readOctalDigits(text, cursor);\n  if (ods === '') {\n    return '';\n  }\n  return prefix + ods;\n}\nfunction readHexDigits(text, cursor) {\n  var _a;\n  var m = text.substr(cursor).match(/^[0-9a-f]+/i);\n  return (_a = m && m[0]) !== null && _a !== void 0 ? _a : '';\n}\nfunction readHexIntegerLiteral(text, cursor) {\n  var prefix = text.substr(cursor, 2);\n  cursor += prefix.length;\n  if (prefix.toLowerCase() !== '0x') {\n    return '';\n  }\n  var hds = readHexDigits(text, cursor);\n  if (hds === '') {\n    return '';\n  }\n  return prefix + hds;\n}\nvar readNonDecimalIntegerLiteral = combineReader([readBinaryIntegerLiteral, readOctalIntegerLiteral, readHexIntegerLiteral]);\nvar readNumericLiteral = combineReader([readNonDecimalIntegerLiteral, readDecimalLiteral]);\nfunction parseLiteral(text, cursor) {\n  var num = readNumericLiteral(text, cursor);\n  cursor += num.length;\n  if (num === '') {\n    return null;\n  }\n  return {\n    evaluable: new NumberLiteralNode(num),\n    cursor: cursor\n  };\n}\nfunction parseParenthesizedExpression(text, cursor) {\n  var op = text.substr(cursor, 1);\n  cursor += op.length;\n  if (op !== '(') {\n    return null;\n  }\n  var expr = parseExpression(text, cursor);\n  if (!expr) {\n    return null;\n  }\n  cursor = expr.cursor;\n  cursor += readWhitespace(text, cursor).length;\n  var cl = text.substr(cursor, 1);\n  cursor += cl.length;\n  if (cl !== ')') {\n    return null;\n  }\n  return {\n    evaluable: expr.evaluable,\n    cursor: cursor\n  };\n}\nfunction parsePrimaryExpression(text, cursor) {\n  var _a;\n  return (_a = parseLiteral(text, cursor)) !== null && _a !== void 0 ? _a : parseParenthesizedExpression(text, cursor);\n}\nfunction parseUnaryExpression(text, cursor) {\n  var expr = parsePrimaryExpression(text, cursor);\n  if (expr) {\n    return expr;\n  }\n  var op = text.substr(cursor, 1);\n  cursor += op.length;\n  if (op !== '+' && op !== '-' && op !== '~') {\n    return null;\n  }\n  var num = parseUnaryExpression(text, cursor);\n  if (!num) {\n    return null;\n  }\n  cursor = num.cursor;\n  return {\n    cursor: cursor,\n    evaluable: new UnaryOperationNode(op, num.evaluable)\n  };\n}\nfunction readBinaryOperator(ops, text, cursor) {\n  cursor += readWhitespace(text, cursor).length;\n  var op = ops.filter(function (op) {\n    return text.startsWith(op, cursor);\n  })[0];\n  if (!op) {\n    return null;\n  }\n  cursor += op.length;\n  cursor += readWhitespace(text, cursor).length;\n  return {\n    cursor: cursor,\n    operator: op\n  };\n}\nfunction createBinaryOperationExpressionParser(exprParser, ops) {\n  return function (text, cursor) {\n    var firstExpr = exprParser(text, cursor);\n    if (!firstExpr) {\n      return null;\n    }\n    cursor = firstExpr.cursor;\n    var expr = firstExpr.evaluable;\n    for (;;) {\n      var op = readBinaryOperator(ops, text, cursor);\n      if (!op) {\n        break;\n      }\n      cursor = op.cursor;\n      var nextExpr = exprParser(text, cursor);\n      if (!nextExpr) {\n        return null;\n      }\n      cursor = nextExpr.cursor;\n      expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n    }\n    return expr ? {\n      cursor: cursor,\n      evaluable: expr\n    } : null;\n  };\n}\nvar parseBinaryOperationExpression = [['**'], ['*', '/', '%'], ['+', '-'], ['<<', '>>>', '>>'], ['&'], ['^'], ['|']].reduce(function (parser, ops) {\n  return createBinaryOperationExpressionParser(parser, ops);\n}, parseUnaryExpression);\nfunction parseExpression(text, cursor) {\n  cursor += readWhitespace(text, cursor).length;\n  return parseBinaryOperationExpression(text, cursor);\n}\nfunction parseEcmaNumberExpression(text) {\n  var expr = parseExpression(text, 0);\n  if (!expr) {\n    return null;\n  }\n  var cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n  if (cursor !== text.length) {\n    return null;\n  }\n  return expr.evaluable;\n}\nfunction parseNumber(text) {\n  var _a;\n  var r = parseEcmaNumberExpression(text);\n  return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n}\nfunction numberFromUnknown(value) {\n  if (typeof value === 'number') {\n    return value;\n  }\n  if (typeof value === 'string') {\n    var pv = parseNumber(value);\n    if (!isEmpty(pv)) {\n      return pv;\n    }\n  }\n  return 0;\n}\nfunction numberToString(value) {\n  return String(value);\n}\nfunction createNumberFormatter(digits) {\n  return function (value) {\n    return value.toFixed(Math.max(Math.min(digits, 20), 0));\n  };\n}\nfunction mapRange(value, start1, end1, start2, end2) {\n  var p = (value - start1) / (end1 - start1);\n  return start2 + p * (end2 - start2);\n}\nfunction getDecimalDigits(value) {\n  var text = String(value.toFixed(10));\n  var frac = text.split('.')[1];\n  return frac.replace(/0+$/, '').length;\n}\nfunction constrainRange(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\nfunction loopRange(value, max) {\n  return (value % max + max) % max;\n}\nfunction getSuitableDecimalDigits(params, rawValue) {\n  return !isEmpty(params.step) ? getDecimalDigits(params.step) : Math.max(getDecimalDigits(rawValue), 2);\n}\nfunction getSuitableKeyScale(params) {\n  var _a;\n  return (_a = params.step) !== null && _a !== void 0 ? _a : 1;\n}\nfunction getSuitablePointerScale(params, rawValue) {\n  var _a;\n  var base = Math.abs((_a = params.step) !== null && _a !== void 0 ? _a : rawValue);\n  return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n}\nfunction createStepConstraint(params, initialValue) {\n  if (!isEmpty(params.step)) {\n    return new StepConstraint(params.step, initialValue);\n  }\n  return null;\n}\nfunction createRangeConstraint(params) {\n  if (!isEmpty(params.max) && !isEmpty(params.min)) {\n    return new DefiniteRangeConstraint({\n      max: params.max,\n      min: params.min\n    });\n  }\n  if (!isEmpty(params.max) || !isEmpty(params.min)) {\n    return new RangeConstraint({\n      max: params.max,\n      min: params.min\n    });\n  }\n  return null;\n}\nfunction createNumberTextPropsObject(params, initialValue) {\n  var _a, _b, _c;\n  return {\n    formatter: (_a = params.format) !== null && _a !== void 0 ? _a : createNumberFormatter(getSuitableDecimalDigits(params, initialValue)),\n    keyScale: (_b = params.keyScale) !== null && _b !== void 0 ? _b : getSuitableKeyScale(params),\n    pointerScale: (_c = params.pointerScale) !== null && _c !== void 0 ? _c : getSuitablePointerScale(params, initialValue)\n  };\n}\nfunction createNumberTextInputParamsParser(p) {\n  return {\n    format: p.optional.function,\n    keyScale: p.optional.number,\n    max: p.optional.number,\n    min: p.optional.number,\n    pointerScale: p.optional.number,\n    step: p.optional.number\n  };\n}\nfunction createPointAxis(config) {\n  return {\n    constraint: config.constraint,\n    textProps: ValueMap.fromObject(createNumberTextPropsObject(config.params, config.initialValue))\n  };\n}\nvar BladeApi = /*#__PURE__*/function () {\n  function BladeApi(controller) {\n    _classCallCheck(this, BladeApi);\n    this.controller = controller;\n  }\n  _createClass(BladeApi, [{\n    key: \"element\",\n    get: function get() {\n      return this.controller.view.element;\n    }\n  }, {\n    key: \"disabled\",\n    get: function get() {\n      return this.controller.viewProps.get('disabled');\n    },\n    set: function set(disabled) {\n      this.controller.viewProps.set('disabled', disabled);\n    }\n  }, {\n    key: \"hidden\",\n    get: function get() {\n      return this.controller.viewProps.get('hidden');\n    },\n    set: function set(hidden) {\n      this.controller.viewProps.set('hidden', hidden);\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.controller.viewProps.set('disposed', true);\n    }\n  }, {\n    key: \"importState\",\n    value: function importState(state) {\n      return this.controller.importState(state);\n    }\n  }, {\n    key: \"exportState\",\n    value: function exportState() {\n      return this.controller.exportState();\n    }\n  }]);\n  return BladeApi;\n}();\nvar TpEvent = /*#__PURE__*/_createClass(function TpEvent(target) {\n  _classCallCheck(this, TpEvent);\n  this.target = target;\n});\nvar TpChangeEvent = /*#__PURE__*/function (_TpEvent) {\n  _inherits(TpChangeEvent, _TpEvent);\n  var _super = _createSuper(TpChangeEvent);\n  function TpChangeEvent(target, value, last) {\n    var _this2;\n    _classCallCheck(this, TpChangeEvent);\n    _this2 = _super.call(this, target);\n    _this2.value = value;\n    _this2.last = last !== null && last !== void 0 ? last : true;\n    return _this2;\n  }\n  return _createClass(TpChangeEvent);\n}(TpEvent);\nvar TpFoldEvent = /*#__PURE__*/function (_TpEvent2) {\n  _inherits(TpFoldEvent, _TpEvent2);\n  var _super2 = _createSuper(TpFoldEvent);\n  function TpFoldEvent(target, expanded) {\n    var _this3;\n    _classCallCheck(this, TpFoldEvent);\n    _this3 = _super2.call(this, target);\n    _this3.expanded = expanded;\n    return _this3;\n  }\n  return _createClass(TpFoldEvent);\n}(TpEvent);\nvar TpTabSelectEvent = /*#__PURE__*/function (_TpEvent3) {\n  _inherits(TpTabSelectEvent, _TpEvent3);\n  var _super3 = _createSuper(TpTabSelectEvent);\n  function TpTabSelectEvent(target, index) {\n    var _this4;\n    _classCallCheck(this, TpTabSelectEvent);\n    _this4 = _super3.call(this, target);\n    _this4.index = index;\n    return _this4;\n  }\n  return _createClass(TpTabSelectEvent);\n}(TpEvent);\nvar BindingApi = /*#__PURE__*/function (_BladeApi) {\n  _inherits(BindingApi, _BladeApi);\n  var _super4 = _createSuper(BindingApi);\n  function BindingApi(controller) {\n    var _this5;\n    _classCallCheck(this, BindingApi);\n    _this5 = _super4.call(this, controller);\n    _this5.onValueChange_ = _this5.onValueChange_.bind(_assertThisInitialized(_this5));\n    _this5.emitter_ = new Emitter();\n    _this5.controller.value.emitter.on('change', _this5.onValueChange_);\n    return _this5;\n  }\n  _createClass(BindingApi, [{\n    key: \"label\",\n    get: function get() {\n      return this.controller.labelController.props.get('label');\n    },\n    set: function set(label) {\n      this.controller.labelController.props.set('label', label);\n    }\n  }, {\n    key: \"key\",\n    get: function get() {\n      return this.controller.value.binding.target.key;\n    }\n  }, {\n    key: \"tag\",\n    get: function get() {\n      return this.controller.tag;\n    },\n    set: function set(tag) {\n      this.controller.tag = tag;\n    }\n  }, {\n    key: \"on\",\n    value: function on(eventName, handler) {\n      var bh = handler.bind(this);\n      this.emitter_.on(eventName, function (ev) {\n        bh(ev);\n      });\n      return this;\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      this.controller.value.fetch();\n    }\n  }, {\n    key: \"onValueChange_\",\n    value: function onValueChange_(ev) {\n      var value = this.controller.value;\n      this.emitter_.emit('change', new TpChangeEvent(this, forceCast(value.binding.target.read()), ev.options.last));\n    }\n  }]);\n  return BindingApi;\n}(BladeApi);\nvar InputBindingValue = /*#__PURE__*/function () {\n  function InputBindingValue(value, binding) {\n    _classCallCheck(this, InputBindingValue);\n    this.onValueBeforeChange_ = this.onValueBeforeChange_.bind(this);\n    this.onValueChange_ = this.onValueChange_.bind(this);\n    this.binding = binding;\n    this.value_ = value;\n    this.value_.emitter.on('beforechange', this.onValueBeforeChange_);\n    this.value_.emitter.on('change', this.onValueChange_);\n    this.emitter = new Emitter();\n  }\n  _createClass(InputBindingValue, [{\n    key: \"rawValue\",\n    get: function get() {\n      return this.value_.rawValue;\n    },\n    set: function set(rawValue) {\n      this.value_.rawValue = rawValue;\n    }\n  }, {\n    key: \"setRawValue\",\n    value: function setRawValue(rawValue, options) {\n      this.value_.setRawValue(rawValue, options);\n    }\n  }, {\n    key: \"fetch\",\n    value: function fetch() {\n      this.value_.rawValue = this.binding.read();\n    }\n  }, {\n    key: \"push\",\n    value: function push() {\n      this.binding.write(this.value_.rawValue);\n    }\n  }, {\n    key: \"onValueBeforeChange_\",\n    value: function onValueBeforeChange_(ev) {\n      this.emitter.emit('beforechange', Object.assign(Object.assign({}, ev), {\n        sender: this\n      }));\n    }\n  }, {\n    key: \"onValueChange_\",\n    value: function onValueChange_(ev) {\n      this.push();\n      this.emitter.emit('change', Object.assign(Object.assign({}, ev), {\n        sender: this\n      }));\n    }\n  }]);\n  return InputBindingValue;\n}();\nfunction isInputBindingValue(v) {\n  if (!('binding' in v)) {\n    return false;\n  }\n  var b = v['binding'];\n  return isBinding(b) && 'read' in b && 'write' in b;\n}\nfunction parseObject(value, keyToParserMap) {\n  var keys = Object.keys(keyToParserMap);\n  var result = keys.reduce(function (tmp, key) {\n    if (tmp === undefined) {\n      return undefined;\n    }\n    var parser = keyToParserMap[key];\n    var result = parser(value[key]);\n    return result.succeeded ? Object.assign(Object.assign({}, tmp), _defineProperty({}, key, result.value)) : undefined;\n  }, {});\n  return forceCast(result);\n}\nfunction parseArray(value, parseItem) {\n  return value.reduce(function (tmp, item) {\n    if (tmp === undefined) {\n      return undefined;\n    }\n    var result = parseItem(item);\n    if (!result.succeeded || result.value === undefined) {\n      return undefined;\n    }\n    return [].concat(_toConsumableArray(tmp), [result.value]);\n  }, []);\n}\nfunction isObject(value) {\n  if (value === null) {\n    return false;\n  }\n  return typeof value === 'object';\n}\nfunction createMicroParserBuilder(parse) {\n  return function (optional) {\n    return function (v) {\n      if (!optional && v === undefined) {\n        return {\n          succeeded: false,\n          value: undefined\n        };\n      }\n      if (optional && v === undefined) {\n        return {\n          succeeded: true,\n          value: undefined\n        };\n      }\n      var result = parse(v);\n      return result !== undefined ? {\n        succeeded: true,\n        value: result\n      } : {\n        succeeded: false,\n        value: undefined\n      };\n    };\n  };\n}\nfunction createMicroParserBuilders(optional) {\n  return {\n    custom: function custom(parse) {\n      return createMicroParserBuilder(parse)(optional);\n    },\n    boolean: createMicroParserBuilder(function (v) {\n      return typeof v === 'boolean' ? v : undefined;\n    })(optional),\n    number: createMicroParserBuilder(function (v) {\n      return typeof v === 'number' ? v : undefined;\n    })(optional),\n    string: createMicroParserBuilder(function (v) {\n      return typeof v === 'string' ? v : undefined;\n    })(optional),\n    function: createMicroParserBuilder(function (v) {\n      return typeof v === 'function' ? v : undefined;\n    })(optional),\n    constant: function constant(value) {\n      return createMicroParserBuilder(function (v) {\n        return v === value ? value : undefined;\n      })(optional);\n    },\n    raw: createMicroParserBuilder(function (v) {\n      return v;\n    })(optional),\n    object: function object(keyToParserMap) {\n      return createMicroParserBuilder(function (v) {\n        if (!isObject(v)) {\n          return undefined;\n        }\n        return parseObject(v, keyToParserMap);\n      })(optional);\n    },\n    array: function array(itemParser) {\n      return createMicroParserBuilder(function (v) {\n        if (!Array.isArray(v)) {\n          return undefined;\n        }\n        return parseArray(v, itemParser);\n      })(optional);\n    }\n  };\n}\nvar MicroParsers = {\n  optional: createMicroParserBuilders(true),\n  required: createMicroParserBuilders(false)\n};\nfunction parseRecord(value, keyToParserMap) {\n  var map = keyToParserMap(MicroParsers);\n  var result = MicroParsers.required.object(map)(value);\n  return result.succeeded ? result.value : undefined;\n}\nfunction importBladeState(state, superImport, parser, callback) {\n  if (superImport && !superImport(state)) {\n    return false;\n  }\n  var result = parseRecord(state, parser);\n  return result ? callback(result) : false;\n}\nfunction exportBladeState(superExport, thisState) {\n  var _a;\n  return deepMerge((_a = superExport === null || superExport === void 0 ? void 0 : superExport()) !== null && _a !== void 0 ? _a : {}, thisState);\n}\nfunction isValueBladeController(bc) {\n  return 'value' in bc;\n}\nfunction isBindingValue(v) {\n  if (!isObject$1(v) || !('binding' in v)) {\n    return false;\n  }\n  var b = v.binding;\n  return isBinding(b);\n}\nvar SVG_NS = 'http://www.w3.org/2000/svg';\nfunction forceReflow(element) {\n  element.offsetHeight;\n}\nfunction disableTransitionTemporarily(element, callback) {\n  var t = element.style.transition;\n  element.style.transition = 'none';\n  callback();\n  element.style.transition = t;\n}\nfunction supportsTouch(doc) {\n  return doc.ontouchstart !== undefined;\n}\nfunction getGlobalObject() {\n  return globalThis;\n}\nfunction getWindowDocument() {\n  var globalObj = forceCast(getGlobalObject());\n  return globalObj.document;\n}\nfunction getCanvasContext(canvasElement) {\n  var win = canvasElement.ownerDocument.defaultView;\n  if (!win) {\n    return null;\n  }\n  var isBrowser = ('document' in win);\n  return isBrowser ? canvasElement.getContext('2d', {\n    willReadFrequently: true\n  }) : null;\n}\nvar ICON_ID_TO_INNER_HTML_MAP = {\n  check: '<path d=\"M2 8l4 4l8 -8\"/>',\n  dropdown: '<path d=\"M5 7h6l-3 3 z\"/>',\n  p2dpad: '<path d=\"M8 4v8\"/><path d=\"M4 8h8\"/><circle cx=\"12\" cy=\"12\" r=\"1.2\"/>'\n};\nfunction createSvgIconElement(document, iconId) {\n  var elem = document.createElementNS(SVG_NS, 'svg');\n  elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];\n  return elem;\n}\nfunction insertElementAt(parentElement, element, index) {\n  parentElement.insertBefore(element, parentElement.children[index]);\n}\nfunction removeElement(element) {\n  if (element.parentElement) {\n    element.parentElement.removeChild(element);\n  }\n}\nfunction removeChildElements(element) {\n  while (element.children.length > 0) {\n    element.removeChild(element.children[0]);\n  }\n}\nfunction removeChildNodes(element) {\n  while (element.childNodes.length > 0) {\n    element.removeChild(element.childNodes[0]);\n  }\n}\nfunction findNextTarget(ev) {\n  if (ev.relatedTarget) {\n    return forceCast(ev.relatedTarget);\n  }\n  if ('explicitOriginalTarget' in ev) {\n    return ev.explicitOriginalTarget;\n  }\n  return null;\n}\nfunction bindValue(value, applyValue) {\n  value.emitter.on('change', function (ev) {\n    applyValue(ev.rawValue);\n  });\n  applyValue(value.rawValue);\n}\nfunction bindValueMap(valueMap, key, applyValue) {\n  bindValue(valueMap.value(key), applyValue);\n}\nvar PREFIX = 'tp';\nfunction ClassName(viewName) {\n  var fn = function fn(opt_elementName, opt_modifier) {\n    return [PREFIX, '-', viewName, 'v', opt_elementName ? \"_\".concat(opt_elementName) : '', opt_modifier ? \"-\".concat(opt_modifier) : ''].join('');\n  };\n  return fn;\n}\nvar cn$r = ClassName('lbl');\nfunction createLabelNode(doc, label) {\n  var frag = doc.createDocumentFragment();\n  var lineNodes = label.split('\\n').map(function (line) {\n    return doc.createTextNode(line);\n  });\n  lineNodes.forEach(function (lineNode, index) {\n    if (index > 0) {\n      frag.appendChild(doc.createElement('br'));\n    }\n    frag.appendChild(lineNode);\n  });\n  return frag;\n}\nvar LabelView = /*#__PURE__*/_createClass(function LabelView(doc, config) {\n  var _this6 = this;\n  _classCallCheck(this, LabelView);\n  this.element = doc.createElement('div');\n  this.element.classList.add(cn$r());\n  config.viewProps.bindClassModifiers(this.element);\n  var labelElem = doc.createElement('div');\n  labelElem.classList.add(cn$r('l'));\n  bindValueMap(config.props, 'label', function (value) {\n    if (isEmpty(value)) {\n      _this6.element.classList.add(cn$r(undefined, 'nol'));\n    } else {\n      _this6.element.classList.remove(cn$r(undefined, 'nol'));\n      removeChildNodes(labelElem);\n      labelElem.appendChild(createLabelNode(doc, value));\n    }\n  });\n  this.element.appendChild(labelElem);\n  this.labelElement = labelElem;\n  var valueElem = doc.createElement('div');\n  valueElem.classList.add(cn$r('v'));\n  this.element.appendChild(valueElem);\n  this.valueElement = valueElem;\n});\nvar LabelController = /*#__PURE__*/function () {\n  function LabelController(doc, config) {\n    _classCallCheck(this, LabelController);\n    this.props = config.props;\n    this.valueController = config.valueController;\n    this.viewProps = config.valueController.viewProps;\n    this.view = new LabelView(doc, {\n      props: config.props,\n      viewProps: this.viewProps\n    });\n    this.view.valueElement.appendChild(this.valueController.view.element);\n  }\n  _createClass(LabelController, [{\n    key: \"importProps\",\n    value: function importProps(state) {\n      var _this7 = this;\n      return importBladeState(state, null, function (p) {\n        return {\n          label: p.optional.string\n        };\n      }, function (result) {\n        _this7.props.set('label', result.label);\n        return true;\n      });\n    }\n  }, {\n    key: \"exportProps\",\n    value: function exportProps() {\n      return exportBladeState(null, {\n        label: this.props.get('label')\n      });\n    }\n  }]);\n  return LabelController;\n}();\nfunction getAllBladePositions() {\n  return ['veryfirst', 'first', 'last', 'verylast'];\n}\nvar cn$q = ClassName('');\nvar POS_TO_CLASS_NAME_MAP = {\n  veryfirst: 'vfst',\n  first: 'fst',\n  last: 'lst',\n  verylast: 'vlst'\n};\nvar BladeController = /*#__PURE__*/function () {\n  function BladeController(config) {\n    var _this8 = this;\n    _classCallCheck(this, BladeController);\n    this.parent_ = null;\n    this.blade = config.blade;\n    this.view = config.view;\n    this.viewProps = config.viewProps;\n    var elem = this.view.element;\n    this.blade.value('positions').emitter.on('change', function () {\n      getAllBladePositions().forEach(function (pos) {\n        elem.classList.remove(cn$q(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n      });\n      _this8.blade.get('positions').forEach(function (pos) {\n        elem.classList.add(cn$q(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n      });\n    });\n    this.viewProps.handleDispose(function () {\n      removeElement(elem);\n    });\n  }\n  _createClass(BladeController, [{\n    key: \"parent\",\n    get: function get() {\n      return this.parent_;\n    },\n    set: function set(parent) {\n      this.parent_ = parent;\n      this.viewProps.set('parent', this.parent_ ? this.parent_.viewProps : null);\n    }\n  }, {\n    key: \"importState\",\n    value: function importState(state) {\n      var _this9 = this;\n      return importBladeState(state, null, function (p) {\n        return {\n          disabled: p.required.boolean,\n          hidden: p.required.boolean\n        };\n      }, function (result) {\n        _this9.viewProps.importState(result);\n        return true;\n      });\n    }\n  }, {\n    key: \"exportState\",\n    value: function exportState() {\n      return exportBladeState(null, Object.assign({}, this.viewProps.exportState()));\n    }\n  }]);\n  return BladeController;\n}();\nvar LabeledValueBladeController = /*#__PURE__*/function (_BladeController) {\n  _inherits(LabeledValueBladeController, _BladeController);\n  var _super5 = _createSuper(LabeledValueBladeController);\n  function LabeledValueBladeController(doc, config) {\n    var _this10;\n    _classCallCheck(this, LabeledValueBladeController);\n    if (config.value !== config.valueController.value) {\n      throw TpError.shouldNeverHappen();\n    }\n    var viewProps = config.valueController.viewProps;\n    var lc = new LabelController(doc, {\n      blade: config.blade,\n      props: config.props,\n      valueController: config.valueController\n    });\n    _this10 = _super5.call(this, Object.assign(Object.assign({}, config), {\n      view: new LabelView(doc, {\n        props: config.props,\n        viewProps: viewProps\n      }),\n      viewProps: viewProps\n    }));\n    _this10.labelController = lc;\n    _this10.value = config.value;\n    _this10.valueController = config.valueController;\n    _this10.view.valueElement.appendChild(_this10.valueController.view.element);\n    return _this10;\n  }\n  _createClass(LabeledValueBladeController, [{\n    key: \"importState\",\n    value: function importState(state) {\n      var _this11 = this;\n      return importBladeState(state, function (s) {\n        var _a, _b, _c;\n        return _get(_getPrototypeOf(LabeledValueBladeController.prototype), \"importState\", _this11).call(_this11, s) && _this11.labelController.importProps(s) && ((_c = (_b = (_a = _this11.valueController).importProps) === null || _b === void 0 ? void 0 : _b.call(_a, state)) !== null && _c !== void 0 ? _c : true);\n      }, function (p) {\n        return {\n          value: p.optional.raw\n        };\n      }, function (result) {\n        if (result.value) {\n          _this11.value.rawValue = result.value;\n        }\n        return true;\n      });\n    }\n  }, {\n    key: \"exportState\",\n    value: function exportState() {\n      var _this12 = this;\n      var _a, _b, _c;\n      return exportBladeState(function () {\n        return _get(_getPrototypeOf(LabeledValueBladeController.prototype), \"exportState\", _this12).call(_this12);\n      }, Object.assign(Object.assign({\n        value: this.value.rawValue\n      }, this.labelController.exportProps()), (_c = (_b = (_a = this.valueController).exportProps) === null || _b === void 0 ? void 0 : _b.call(_a)) !== null && _c !== void 0 ? _c : {}));\n    }\n  }]);\n  return LabeledValueBladeController;\n}(BladeController);\nfunction excludeValue(state) {\n  var result = Object.assign({}, state);\n  delete result.value;\n  return result;\n}\nvar BindingController = /*#__PURE__*/function (_LabeledValueBladeCon) {\n  _inherits(BindingController, _LabeledValueBladeCon);\n  var _super6 = _createSuper(BindingController);\n  function BindingController(doc, config) {\n    var _this13;\n    _classCallCheck(this, BindingController);\n    _this13 = _super6.call(this, doc, config);\n    _this13.tag = config.tag;\n    return _this13;\n  }\n  _createClass(BindingController, [{\n    key: \"importState\",\n    value: function importState(state) {\n      var _this14 = this;\n      return importBladeState(state, function (_s) {\n        return _get(_getPrototypeOf(BindingController.prototype), \"importState\", _this14).call(_this14, excludeValue(state));\n      }, function (p) {\n        return {\n          tag: p.optional.string\n        };\n      }, function (result) {\n        _this14.tag = result.tag;\n        return true;\n      });\n    }\n  }, {\n    key: \"exportState\",\n    value: function exportState() {\n      var _this15 = this;\n      return exportBladeState(function () {\n        return excludeValue(_get(_getPrototypeOf(BindingController.prototype), \"exportState\", _this15).call(_this15));\n      }, {\n        binding: {\n          key: this.value.binding.target.key,\n          value: this.value.binding.target.read()\n        },\n        tag: this.tag\n      });\n    }\n  }]);\n  return BindingController;\n}(LabeledValueBladeController);\nfunction isBindingController(bc) {\n  return isValueBladeController(bc) && isBindingValue(bc.value);\n}\nvar InputBindingController = /*#__PURE__*/function (_BindingController) {\n  _inherits(InputBindingController, _BindingController);\n  var _super7 = _createSuper(InputBindingController);\n  function InputBindingController() {\n    _classCallCheck(this, InputBindingController);\n    return _super7.apply(this, arguments);\n  }\n  _createClass(InputBindingController, [{\n    key: \"importState\",\n    value: function importState(state) {\n      var _this16 = this;\n      return importBladeState(state, function (s) {\n        return _get(_getPrototypeOf(InputBindingController.prototype), \"importState\", _this16).call(_this16, s);\n      }, function (p) {\n        return {\n          binding: p.required.object({\n            value: p.required.raw\n          })\n        };\n      }, function (result) {\n        _this16.value.binding.inject(result.binding.value);\n        _this16.value.fetch();\n        return true;\n      });\n    }\n  }]);\n  return InputBindingController;\n}(BindingController);\nfunction isInputBindingController(bc) {\n  return isValueBladeController(bc) && isInputBindingValue(bc.value);\n}\nfunction fillBuffer(buffer, bufferSize) {\n  while (buffer.length < bufferSize) {\n    buffer.push(undefined);\n  }\n}\nfunction initializeBuffer(bufferSize) {\n  var buffer = [];\n  fillBuffer(buffer, bufferSize);\n  return buffer;\n}\nfunction createTrimmedBuffer(buffer) {\n  var index = buffer.indexOf(undefined);\n  return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n}\nfunction createPushedBuffer(buffer, newValue) {\n  var newBuffer = [].concat(_toConsumableArray(createTrimmedBuffer(buffer)), [newValue]);\n  if (newBuffer.length > buffer.length) {\n    newBuffer.splice(0, newBuffer.length - buffer.length);\n  } else {\n    fillBuffer(newBuffer, buffer.length);\n  }\n  return newBuffer;\n}\nvar MonitorBindingValue = /*#__PURE__*/function () {\n  function MonitorBindingValue(config) {\n    _classCallCheck(this, MonitorBindingValue);\n    this.emitter = new Emitter();\n    this.onTick_ = this.onTick_.bind(this);\n    this.onValueBeforeChange_ = this.onValueBeforeChange_.bind(this);\n    this.onValueChange_ = this.onValueChange_.bind(this);\n    this.binding = config.binding;\n    this.value_ = createValue(initializeBuffer(config.bufferSize));\n    this.value_.emitter.on('beforechange', this.onValueBeforeChange_);\n    this.value_.emitter.on('change', this.onValueChange_);\n    this.ticker = config.ticker;\n    this.ticker.emitter.on('tick', this.onTick_);\n    this.fetch();\n  }\n  _createClass(MonitorBindingValue, [{\n    key: \"rawValue\",\n    get: function get() {\n      return this.value_.rawValue;\n    },\n    set: function set(rawValue) {\n      this.value_.rawValue = rawValue;\n    }\n  }, {\n    key: \"setRawValue\",\n    value: function setRawValue(rawValue, options) {\n      this.value_.setRawValue(rawValue, options);\n    }\n  }, {\n    key: \"fetch\",\n    value: function fetch() {\n      this.value_.rawValue = createPushedBuffer(this.value_.rawValue, this.binding.read());\n    }\n  }, {\n    key: \"onTick_\",\n    value: function onTick_() {\n      this.fetch();\n    }\n  }, {\n    key: \"onValueBeforeChange_\",\n    value: function onValueBeforeChange_(ev) {\n      this.emitter.emit('beforechange', Object.assign(Object.assign({}, ev), {\n        sender: this\n      }));\n    }\n  }, {\n    key: \"onValueChange_\",\n    value: function onValueChange_(ev) {\n      this.emitter.emit('change', Object.assign(Object.assign({}, ev), {\n        sender: this\n      }));\n    }\n  }]);\n  return MonitorBindingValue;\n}();\nfunction isMonitorBindingValue(v) {\n  if (!('binding' in v)) {\n    return false;\n  }\n  var b = v['binding'];\n  return isBinding(b) && 'read' in b && !('write' in b);\n}\nvar MonitorBindingController = /*#__PURE__*/function (_BindingController2) {\n  _inherits(MonitorBindingController, _BindingController2);\n  var _super8 = _createSuper(MonitorBindingController);\n  function MonitorBindingController() {\n    _classCallCheck(this, MonitorBindingController);\n    return _super8.apply(this, arguments);\n  }\n  _createClass(MonitorBindingController, [{\n    key: \"exportState\",\n    value: function exportState() {\n      var _this17 = this;\n      return exportBladeState(function () {\n        return _get(_getPrototypeOf(MonitorBindingController.prototype), \"exportState\", _this17).call(_this17);\n      }, {\n        binding: {\n          readonly: true\n        }\n      });\n    }\n  }]);\n  return MonitorBindingController;\n}(BindingController);\nfunction isMonitorBindingController(bc) {\n  return isValueBladeController(bc) && isMonitorBindingValue(bc.value);\n}\nvar ButtonApi = /*#__PURE__*/function (_BladeApi2) {\n  _inherits(ButtonApi, _BladeApi2);\n  var _super9 = _createSuper(ButtonApi);\n  function ButtonApi() {\n    _classCallCheck(this, ButtonApi);\n    return _super9.apply(this, arguments);\n  }\n  _createClass(ButtonApi, [{\n    key: \"label\",\n    get: function get() {\n      return this.controller.labelController.props.get('label');\n    },\n    set: function set(label) {\n      this.controller.labelController.props.set('label', label);\n    }\n  }, {\n    key: \"title\",\n    get: function get() {\n      var _a;\n      return (_a = this.controller.buttonController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n    },\n    set: function set(title) {\n      this.controller.buttonController.props.set('title', title);\n    }\n  }, {\n    key: \"on\",\n    value: function on(eventName, handler) {\n      var _this18 = this;\n      var bh = handler.bind(this);\n      var emitter = this.controller.buttonController.emitter;\n      emitter.on(eventName, function () {\n        bh(new TpEvent(_this18));\n      });\n      return this;\n    }\n  }]);\n  return ButtonApi;\n}(BladeApi);\nfunction applyClass(elem, className, active) {\n  if (active) {\n    elem.classList.add(className);\n  } else {\n    elem.classList.remove(className);\n  }\n}\nfunction valueToClassName(elem, className) {\n  return function (value) {\n    applyClass(elem, className, value);\n  };\n}\nfunction bindValueToTextContent(value, elem) {\n  bindValue(value, function (text) {\n    elem.textContent = text !== null && text !== void 0 ? text : '';\n  });\n}\nvar cn$p = ClassName('btn');\nvar ButtonView = /*#__PURE__*/_createClass(function ButtonView(doc, config) {\n  _classCallCheck(this, ButtonView);\n  this.element = doc.createElement('div');\n  this.element.classList.add(cn$p());\n  config.viewProps.bindClassModifiers(this.element);\n  var buttonElem = doc.createElement('button');\n  buttonElem.classList.add(cn$p('b'));\n  config.viewProps.bindDisabled(buttonElem);\n  this.element.appendChild(buttonElem);\n  this.buttonElement = buttonElem;\n  var titleElem = doc.createElement('div');\n  titleElem.classList.add(cn$p('t'));\n  bindValueToTextContent(config.props.value('title'), titleElem);\n  this.buttonElement.appendChild(titleElem);\n});\nvar ButtonController = /*#__PURE__*/function () {\n  function ButtonController(doc, config) {\n    _classCallCheck(this, ButtonController);\n    this.emitter = new Emitter();\n    this.onClick_ = this.onClick_.bind(this);\n    this.props = config.props;\n    this.viewProps = config.viewProps;\n    this.view = new ButtonView(doc, {\n      props: this.props,\n      viewProps: this.viewProps\n    });\n    this.view.buttonElement.addEventListener('click', this.onClick_);\n  }\n  _createClass(ButtonController, [{\n    key: \"importProps\",\n    value: function importProps(state) {\n      var _this19 = this;\n      return importBladeState(state, null, function (p) {\n        return {\n          title: p.optional.string\n        };\n      }, function (result) {\n        _this19.props.set('title', result.title);\n        return true;\n      });\n    }\n  }, {\n    key: \"exportProps\",\n    value: function exportProps() {\n      return exportBladeState(null, {\n        title: this.props.get('title')\n      });\n    }\n  }, {\n    key: \"onClick_\",\n    value: function onClick_() {\n      this.emitter.emit('click', {\n        sender: this\n      });\n    }\n  }]);\n  return ButtonController;\n}();\nvar ButtonBladeController = /*#__PURE__*/function (_BladeController2) {\n  _inherits(ButtonBladeController, _BladeController2);\n  var _super10 = _createSuper(ButtonBladeController);\n  function ButtonBladeController(doc, config) {\n    var _this20;\n    _classCallCheck(this, ButtonBladeController);\n    var bc = new ButtonController(doc, {\n      props: config.buttonProps,\n      viewProps: config.viewProps\n    });\n    var lc = new LabelController(doc, {\n      blade: config.blade,\n      props: config.labelProps,\n      valueController: bc\n    });\n    _this20 = _super10.call(this, {\n      blade: config.blade,\n      view: lc.view,\n      viewProps: config.viewProps\n    });\n    _this20.buttonController = bc;\n    _this20.labelController = lc;\n    return _this20;\n  }\n  _createClass(ButtonBladeController, [{\n    key: \"importState\",\n    value: function importState(state) {\n      var _this21 = this;\n      return importBladeState(state, function (s) {\n        return _get(_getPrototypeOf(ButtonBladeController.prototype), \"importState\", _this21).call(_this21, s) && _this21.buttonController.importProps(s) && _this21.labelController.importProps(s);\n      }, function () {\n        return {};\n      }, function () {\n        return true;\n      });\n    }\n  }, {\n    key: \"exportState\",\n    value: function exportState() {\n      var _this22 = this;\n      return exportBladeState(function () {\n        return _get(_getPrototypeOf(ButtonBladeController.prototype), \"exportState\", _this22).call(_this22);\n      }, Object.assign(Object.assign({}, this.buttonController.exportProps()), this.labelController.exportProps()));\n    }\n  }]);\n  return ButtonBladeController;\n}(BladeController);\nvar Semver = /*#__PURE__*/function () {\n  function Semver(text) {\n    _classCallCheck(this, Semver);\n    var _text$split = text.split('-'),\n      _text$split2 = _slicedToArray(_text$split, 2),\n      core = _text$split2[0],\n      prerelease = _text$split2[1];\n    var coreComps = core.split('.');\n    this.major = parseInt(coreComps[0], 10);\n    this.minor = parseInt(coreComps[1], 10);\n    this.patch = parseInt(coreComps[2], 10);\n    this.prerelease = prerelease !== null && prerelease !== void 0 ? prerelease : null;\n  }\n  _createClass(Semver, [{\n    key: \"toString\",\n    value: function toString() {\n      var core = [this.major, this.minor, this.patch].join('.');\n      return this.prerelease !== null ? [core, this.prerelease].join('-') : core;\n    }\n  }]);\n  return Semver;\n}();\nvar VERSION$1 = new Semver('2.0.1');\nfunction createPlugin(plugin) {\n  return Object.assign({\n    core: VERSION$1\n  }, plugin);\n}\nvar ButtonBladePlugin = createPlugin({\n  id: 'button',\n  type: 'blade',\n  accept: function accept(params) {\n    var result = parseRecord(params, function (p) {\n      return {\n        title: p.required.string,\n        view: p.required.constant('button'),\n        label: p.optional.string\n      };\n    });\n    return result ? {\n      params: result\n    } : null;\n  },\n  controller: function controller(args) {\n    return new ButtonBladeController(args.document, {\n      blade: args.blade,\n      buttonProps: ValueMap.fromObject({\n        title: args.params.title\n      }),\n      labelProps: ValueMap.fromObject({\n        label: args.params.label\n      }),\n      viewProps: args.viewProps\n    });\n  },\n  api: function api(args) {\n    if (args.controller instanceof ButtonBladeController) {\n      return new ButtonApi(args.controller);\n    }\n    return null;\n  }\n});\nfunction addButtonAsBlade(api, params) {\n  return api.addBlade(Object.assign(Object.assign({}, params), {\n    view: 'button'\n  }));\n}\nfunction addFolderAsBlade(api, params) {\n  return api.addBlade(Object.assign(Object.assign({}, params), {\n    view: 'folder'\n  }));\n}\nfunction addTabAsBlade(api, params) {\n  return api.addBlade(Object.assign(Object.assign({}, params), {\n    view: 'tab'\n  }));\n}\nfunction isRefreshable(value) {\n  if (!isObject$1(value)) {\n    return false;\n  }\n  return 'refresh' in value && typeof value.refresh === 'function';\n}\nfunction createBindingTarget(obj, key) {\n  if (!BindingTarget.isBindable(obj)) {\n    throw TpError.notBindable();\n  }\n  return new BindingTarget(obj, key);\n}\nvar RackApi = /*#__PURE__*/function () {\n  function RackApi(controller, pool) {\n    _classCallCheck(this, RackApi);\n    this.onRackValueChange_ = this.onRackValueChange_.bind(this);\n    this.controller_ = controller;\n    this.emitter_ = new Emitter();\n    this.pool_ = pool;\n    var rack = this.controller_.rack;\n    rack.emitter.on('valuechange', this.onRackValueChange_);\n  }\n  _createClass(RackApi, [{\n    key: \"children\",\n    get: function get() {\n      var _this23 = this;\n      return this.controller_.rack.children.map(function (bc) {\n        return _this23.pool_.createApi(bc);\n      });\n    }\n  }, {\n    key: \"addBinding\",\n    value: function addBinding(object, key, opt_params) {\n      var params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n      var doc = this.controller_.element.ownerDocument;\n      var bc = this.pool_.createBinding(doc, createBindingTarget(object, key), params);\n      var api = this.pool_.createBindingApi(bc);\n      return this.add(api, params.index);\n    }\n  }, {\n    key: \"addFolder\",\n    value: function addFolder(params) {\n      return addFolderAsBlade(this, params);\n    }\n  }, {\n    key: \"addButton\",\n    value: function addButton(params) {\n      return addButtonAsBlade(this, params);\n    }\n  }, {\n    key: \"addTab\",\n    value: function addTab(params) {\n      return addTabAsBlade(this, params);\n    }\n  }, {\n    key: \"add\",\n    value: function add(api, opt_index) {\n      var bc = api.controller;\n      this.controller_.rack.add(bc, opt_index);\n      return api;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(api) {\n      this.controller_.rack.remove(api.controller);\n    }\n  }, {\n    key: \"addBlade\",\n    value: function addBlade(params) {\n      var doc = this.controller_.element.ownerDocument;\n      var bc = this.pool_.createBlade(doc, params);\n      var api = this.pool_.createApi(bc);\n      return this.add(api, params.index);\n    }\n  }, {\n    key: \"on\",\n    value: function on(eventName, handler) {\n      var bh = handler.bind(this);\n      this.emitter_.on(eventName, function (ev) {\n        bh(ev);\n      });\n      return this;\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      this.children.forEach(function (c) {\n        if (isRefreshable(c)) {\n          c.refresh();\n        }\n      });\n    }\n  }, {\n    key: \"onRackValueChange_\",\n    value: function onRackValueChange_(ev) {\n      var bc = ev.bladeController;\n      var api = this.pool_.createApi(bc);\n      var binding = isBindingValue(bc.value) ? bc.value.binding : null;\n      this.emitter_.emit('change', new TpChangeEvent(api, binding ? binding.target.read() : bc.value.rawValue, ev.options.last));\n    }\n  }]);\n  return RackApi;\n}();\nvar ContainerBladeApi = /*#__PURE__*/function (_BladeApi3) {\n  _inherits(ContainerBladeApi, _BladeApi3);\n  var _super11 = _createSuper(ContainerBladeApi);\n  function ContainerBladeApi(controller, pool) {\n    var _this24;\n    _classCallCheck(this, ContainerBladeApi);\n    _this24 = _super11.call(this, controller);\n    _this24.rackApi_ = new RackApi(controller.rackController, pool);\n    return _this24;\n  }\n  _createClass(ContainerBladeApi, [{\n    key: \"refresh\",\n    value: function refresh() {\n      this.rackApi_.refresh();\n    }\n  }]);\n  return ContainerBladeApi;\n}(BladeApi);\nvar ContainerBladeController = /*#__PURE__*/function (_BladeController3) {\n  _inherits(ContainerBladeController, _BladeController3);\n  var _super12 = _createSuper(ContainerBladeController);\n  function ContainerBladeController(config) {\n    var _this25;\n    _classCallCheck(this, ContainerBladeController);\n    _this25 = _super12.call(this, {\n      blade: config.blade,\n      view: config.view,\n      viewProps: config.rackController.viewProps\n    });\n    _this25.rackController = config.rackController;\n    return _this25;\n  }\n  _createClass(ContainerBladeController, [{\n    key: \"importState\",\n    value: function importState(state) {\n      var _this26 = this;\n      return importBladeState(state, function (s) {\n        return _get(_getPrototypeOf(ContainerBladeController.prototype), \"importState\", _this26).call(_this26, s);\n      }, function (p) {\n        return {\n          children: p.required.array(p.required.raw)\n        };\n      }, function (result) {\n        return _this26.rackController.rack.children.every(function (c, index) {\n          return c.importState(result.children[index]);\n        });\n      });\n    }\n  }, {\n    key: \"exportState\",\n    value: function exportState() {\n      var _this27 = this;\n      return exportBladeState(function () {\n        return _get(_getPrototypeOf(ContainerBladeController.prototype), \"exportState\", _this27).call(_this27);\n      }, {\n        children: this.rackController.rack.children.map(function (c) {\n          return c.exportState();\n        })\n      });\n    }\n  }]);\n  return ContainerBladeController;\n}(BladeController);\nfunction isContainerBladeController(bc) {\n  return 'rackController' in bc;\n}\nvar NestedOrderedSet = /*#__PURE__*/function () {\n  function NestedOrderedSet(extract) {\n    _classCallCheck(this, NestedOrderedSet);\n    this.emitter = new Emitter();\n    this.items_ = [];\n    this.cache_ = new Set();\n    this.onSubListAdd_ = this.onSubListAdd_.bind(this);\n    this.onSubListRemove_ = this.onSubListRemove_.bind(this);\n    this.extract_ = extract;\n  }\n  _createClass(NestedOrderedSet, [{\n    key: \"items\",\n    get: function get() {\n      return this.items_;\n    }\n  }, {\n    key: \"allItems\",\n    value: function allItems() {\n      return Array.from(this.cache_);\n    }\n  }, {\n    key: \"find\",\n    value: function find(callback) {\n      var _iterator = _createForOfIteratorHelper(this.allItems()),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var item = _step.value;\n          if (callback(item)) {\n            return item;\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      return null;\n    }\n  }, {\n    key: \"includes\",\n    value: function includes(item) {\n      return this.cache_.has(item);\n    }\n  }, {\n    key: \"add\",\n    value: function add(item, opt_index) {\n      var _this28 = this;\n      if (this.includes(item)) {\n        throw TpError.shouldNeverHappen();\n      }\n      var index = opt_index !== undefined ? opt_index : this.items_.length;\n      this.items_.splice(index, 0, item);\n      this.cache_.add(item);\n      var subList = this.extract_(item);\n      if (subList) {\n        subList.emitter.on('add', this.onSubListAdd_);\n        subList.emitter.on('remove', this.onSubListRemove_);\n        subList.allItems().forEach(function (i) {\n          _this28.cache_.add(i);\n        });\n      }\n      this.emitter.emit('add', {\n        index: index,\n        item: item,\n        root: this,\n        target: this\n      });\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(item) {\n      var _this29 = this;\n      var index = this.items_.indexOf(item);\n      if (index < 0) {\n        return;\n      }\n      this.items_.splice(index, 1);\n      this.cache_.delete(item);\n      var subList = this.extract_(item);\n      if (subList) {\n        subList.allItems().forEach(function (i) {\n          _this29.cache_.delete(i);\n        });\n        subList.emitter.off('add', this.onSubListAdd_);\n        subList.emitter.off('remove', this.onSubListRemove_);\n      }\n      this.emitter.emit('remove', {\n        index: index,\n        item: item,\n        root: this,\n        target: this\n      });\n    }\n  }, {\n    key: \"onSubListAdd_\",\n    value: function onSubListAdd_(ev) {\n      this.cache_.add(ev.item);\n      this.emitter.emit('add', {\n        index: ev.index,\n        item: ev.item,\n        root: this,\n        target: ev.target\n      });\n    }\n  }, {\n    key: \"onSubListRemove_\",\n    value: function onSubListRemove_(ev) {\n      this.cache_.delete(ev.item);\n      this.emitter.emit('remove', {\n        index: ev.index,\n        item: ev.item,\n        root: this,\n        target: ev.target\n      });\n    }\n  }]);\n  return NestedOrderedSet;\n}();\nfunction findValueBladeController(bcs, v) {\n  for (var i = 0; i < bcs.length; i++) {\n    var bc = bcs[i];\n    if (isValueBladeController(bc) && bc.value === v) {\n      return bc;\n    }\n  }\n  return null;\n}\nfunction findSubBladeControllerSet(bc) {\n  return isContainerBladeController(bc) ? bc.rackController.rack['bcSet_'] : null;\n}\nvar Rack = /*#__PURE__*/function () {\n  function Rack(config) {\n    _classCallCheck(this, Rack);\n    var _a, _b;\n    this.emitter = new Emitter();\n    this.onBladePositionsChange_ = this.onBladePositionsChange_.bind(this);\n    this.onSetAdd_ = this.onSetAdd_.bind(this);\n    this.onSetRemove_ = this.onSetRemove_.bind(this);\n    this.onChildDispose_ = this.onChildDispose_.bind(this);\n    this.onChildPositionsChange_ = this.onChildPositionsChange_.bind(this);\n    this.onChildValueChange_ = this.onChildValueChange_.bind(this);\n    this.onChildViewPropsChange_ = this.onChildViewPropsChange_.bind(this);\n    this.onRackLayout_ = this.onRackLayout_.bind(this);\n    this.onRackValueChange_ = this.onRackValueChange_.bind(this);\n    this.blade_ = (_a = config.blade) !== null && _a !== void 0 ? _a : null;\n    (_b = this.blade_) === null || _b === void 0 ? void 0 : _b.value('positions').emitter.on('change', this.onBladePositionsChange_);\n    this.viewProps = config.viewProps;\n    this.bcSet_ = new NestedOrderedSet(findSubBladeControllerSet);\n    this.bcSet_.emitter.on('add', this.onSetAdd_);\n    this.bcSet_.emitter.on('remove', this.onSetRemove_);\n  }\n  _createClass(Rack, [{\n    key: \"children\",\n    get: function get() {\n      return this.bcSet_.items;\n    }\n  }, {\n    key: \"add\",\n    value: function add(bc, opt_index) {\n      var _a;\n      (_a = bc.parent) === null || _a === void 0 ? void 0 : _a.remove(bc);\n      bc.parent = this;\n      this.bcSet_.add(bc, opt_index);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(bc) {\n      bc.parent = null;\n      this.bcSet_.remove(bc);\n    }\n  }, {\n    key: \"find\",\n    value: function find(finder) {\n      return this.bcSet_.allItems().filter(finder);\n    }\n  }, {\n    key: \"onSetAdd_\",\n    value: function onSetAdd_(ev) {\n      this.updatePositions_();\n      var root = ev.target === ev.root;\n      this.emitter.emit('add', {\n        bladeController: ev.item,\n        index: ev.index,\n        root: root,\n        sender: this\n      });\n      if (!root) {\n        return;\n      }\n      var bc = ev.item;\n      bc.viewProps.emitter.on('change', this.onChildViewPropsChange_);\n      bc.blade.value('positions').emitter.on('change', this.onChildPositionsChange_);\n      bc.viewProps.handleDispose(this.onChildDispose_);\n      if (isValueBladeController(bc)) {\n        bc.value.emitter.on('change', this.onChildValueChange_);\n      } else if (isContainerBladeController(bc)) {\n        var rack = bc.rackController.rack;\n        if (rack) {\n          var emitter = rack.emitter;\n          emitter.on('layout', this.onRackLayout_);\n          emitter.on('valuechange', this.onRackValueChange_);\n        }\n      }\n    }\n  }, {\n    key: \"onSetRemove_\",\n    value: function onSetRemove_(ev) {\n      this.updatePositions_();\n      var root = ev.target === ev.root;\n      this.emitter.emit('remove', {\n        bladeController: ev.item,\n        root: root,\n        sender: this\n      });\n      if (!root) {\n        return;\n      }\n      var bc = ev.item;\n      if (isValueBladeController(bc)) {\n        bc.value.emitter.off('change', this.onChildValueChange_);\n      } else if (isContainerBladeController(bc)) {\n        var rack = bc.rackController.rack;\n        if (rack) {\n          var emitter = rack.emitter;\n          emitter.off('layout', this.onRackLayout_);\n          emitter.off('valuechange', this.onRackValueChange_);\n        }\n      }\n    }\n  }, {\n    key: \"updatePositions_\",\n    value: function updatePositions_() {\n      var _this30 = this;\n      var visibleItems = this.bcSet_.items.filter(function (bc) {\n        return !bc.viewProps.get('hidden');\n      });\n      var firstVisibleItem = visibleItems[0];\n      var lastVisibleItem = visibleItems[visibleItems.length - 1];\n      this.bcSet_.items.forEach(function (bc) {\n        var ps = [];\n        if (bc === firstVisibleItem) {\n          ps.push('first');\n          if (!_this30.blade_ || _this30.blade_.get('positions').includes('veryfirst')) {\n            ps.push('veryfirst');\n          }\n        }\n        if (bc === lastVisibleItem) {\n          ps.push('last');\n          if (!_this30.blade_ || _this30.blade_.get('positions').includes('verylast')) {\n            ps.push('verylast');\n          }\n        }\n        bc.blade.set('positions', ps);\n      });\n    }\n  }, {\n    key: \"onChildPositionsChange_\",\n    value: function onChildPositionsChange_() {\n      this.updatePositions_();\n      this.emitter.emit('layout', {\n        sender: this\n      });\n    }\n  }, {\n    key: \"onChildViewPropsChange_\",\n    value: function onChildViewPropsChange_(_ev) {\n      this.updatePositions_();\n      this.emitter.emit('layout', {\n        sender: this\n      });\n    }\n  }, {\n    key: \"onChildDispose_\",\n    value: function onChildDispose_() {\n      var _this31 = this;\n      var disposedUcs = this.bcSet_.items.filter(function (bc) {\n        return bc.viewProps.get('disposed');\n      });\n      disposedUcs.forEach(function (bc) {\n        _this31.bcSet_.remove(bc);\n      });\n    }\n  }, {\n    key: \"onChildValueChange_\",\n    value: function onChildValueChange_(ev) {\n      var bc = findValueBladeController(this.find(isValueBladeController), ev.sender);\n      if (!bc) {\n        throw TpError.alreadyDisposed();\n      }\n      this.emitter.emit('valuechange', {\n        bladeController: bc,\n        options: ev.options,\n        sender: this\n      });\n    }\n  }, {\n    key: \"onRackLayout_\",\n    value: function onRackLayout_(_) {\n      this.updatePositions_();\n      this.emitter.emit('layout', {\n        sender: this\n      });\n    }\n  }, {\n    key: \"onRackValueChange_\",\n    value: function onRackValueChange_(ev) {\n      this.emitter.emit('valuechange', {\n        bladeController: ev.bladeController,\n        options: ev.options,\n        sender: this\n      });\n    }\n  }, {\n    key: \"onBladePositionsChange_\",\n    value: function onBladePositionsChange_() {\n      this.updatePositions_();\n    }\n  }]);\n  return Rack;\n}();\nvar RackController = /*#__PURE__*/function () {\n  function RackController(config) {\n    var _this32 = this;\n    _classCallCheck(this, RackController);\n    this.onRackAdd_ = this.onRackAdd_.bind(this);\n    this.onRackRemove_ = this.onRackRemove_.bind(this);\n    this.element = config.element;\n    this.viewProps = config.viewProps;\n    var rack = new Rack({\n      blade: config.root ? undefined : config.blade,\n      viewProps: config.viewProps\n    });\n    rack.emitter.on('add', this.onRackAdd_);\n    rack.emitter.on('remove', this.onRackRemove_);\n    this.rack = rack;\n    this.viewProps.handleDispose(function () {\n      for (var i = _this32.rack.children.length - 1; i >= 0; i--) {\n        var bc = _this32.rack.children[i];\n        bc.viewProps.set('disposed', true);\n      }\n    });\n  }\n  _createClass(RackController, [{\n    key: \"onRackAdd_\",\n    value: function onRackAdd_(ev) {\n      if (!ev.root) {\n        return;\n      }\n      insertElementAt(this.element, ev.bladeController.view.element, ev.index);\n    }\n  }, {\n    key: \"onRackRemove_\",\n    value: function onRackRemove_(ev) {\n      if (!ev.root) {\n        return;\n      }\n      removeElement(ev.bladeController.view.element);\n    }\n  }]);\n  return RackController;\n}();\nfunction createBlade() {\n  return new ValueMap({\n    positions: createValue([], {\n      equals: deepEqualsArray\n    })\n  });\n}\nvar Foldable = /*#__PURE__*/function (_ValueMap) {\n  _inherits(Foldable, _ValueMap);\n  var _super13 = _createSuper(Foldable);\n  function Foldable(valueMap) {\n    _classCallCheck(this, Foldable);\n    return _super13.call(this, valueMap);\n  }\n  _createClass(Foldable, [{\n    key: \"styleExpanded\",\n    get: function get() {\n      var _a;\n      return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\n    }\n  }, {\n    key: \"styleHeight\",\n    get: function get() {\n      if (!this.styleExpanded) {\n        return '0';\n      }\n      var exHeight = this.get('expandedHeight');\n      if (this.get('shouldFixHeight') && !isEmpty(exHeight)) {\n        return \"\".concat(exHeight, \"px\");\n      }\n      return 'auto';\n    }\n  }, {\n    key: \"bindExpandedClass\",\n    value: function bindExpandedClass(elem, expandedClassName) {\n      var _this33 = this;\n      var onExpand = function onExpand() {\n        var expanded = _this33.styleExpanded;\n        if (expanded) {\n          elem.classList.add(expandedClassName);\n        } else {\n          elem.classList.remove(expandedClassName);\n        }\n      };\n      bindValueMap(this, 'expanded', onExpand);\n      bindValueMap(this, 'temporaryExpanded', onExpand);\n    }\n  }, {\n    key: \"cleanUpTransition\",\n    value: function cleanUpTransition() {\n      this.set('shouldFixHeight', false);\n      this.set('expandedHeight', null);\n      this.set('completed', true);\n    }\n  }], [{\n    key: \"create\",\n    value: function create(expanded) {\n      var coreObj = {\n        completed: true,\n        expanded: expanded,\n        expandedHeight: null,\n        shouldFixHeight: false,\n        temporaryExpanded: null\n      };\n      var core = ValueMap.createCore(coreObj);\n      return new Foldable(core);\n    }\n  }]);\n  return Foldable;\n}(ValueMap);\nfunction computeExpandedFolderHeight(folder, containerElement) {\n  var height = 0;\n  disableTransitionTemporarily(containerElement, function () {\n    folder.set('expandedHeight', null);\n    folder.set('temporaryExpanded', true);\n    forceReflow(containerElement);\n    height = containerElement.clientHeight;\n    folder.set('temporaryExpanded', null);\n    forceReflow(containerElement);\n  });\n  return height;\n}\nfunction applyHeight(foldable, elem) {\n  elem.style.height = foldable.styleHeight;\n}\nfunction bindFoldable(foldable, elem) {\n  foldable.value('expanded').emitter.on('beforechange', function () {\n    foldable.set('completed', false);\n    if (isEmpty(foldable.get('expandedHeight'))) {\n      var h = computeExpandedFolderHeight(foldable, elem);\n      if (h > 0) {\n        foldable.set('expandedHeight', h);\n      }\n    }\n    foldable.set('shouldFixHeight', true);\n    forceReflow(elem);\n  });\n  foldable.emitter.on('change', function () {\n    applyHeight(foldable, elem);\n  });\n  applyHeight(foldable, elem);\n  elem.addEventListener('transitionend', function (ev) {\n    if (ev.propertyName !== 'height') {\n      return;\n    }\n    foldable.cleanUpTransition();\n  });\n}\nvar FolderApi = /*#__PURE__*/function (_ContainerBladeApi) {\n  _inherits(FolderApi, _ContainerBladeApi);\n  var _super14 = _createSuper(FolderApi);\n  function FolderApi(controller, pool) {\n    var _this34;\n    _classCallCheck(this, FolderApi);\n    _this34 = _super14.call(this, controller, pool);\n    _this34.emitter_ = new Emitter();\n    _this34.controller.foldable.value('expanded').emitter.on('change', function (ev) {\n      _this34.emitter_.emit('fold', new TpFoldEvent(_assertThisInitialized(_this34), ev.sender.rawValue));\n    });\n    _this34.rackApi_.on('change', function (ev) {\n      _this34.emitter_.emit('change', ev);\n    });\n    return _this34;\n  }\n  _createClass(FolderApi, [{\n    key: \"expanded\",\n    get: function get() {\n      return this.controller.foldable.get('expanded');\n    },\n    set: function set(expanded) {\n      this.controller.foldable.set('expanded', expanded);\n    }\n  }, {\n    key: \"title\",\n    get: function get() {\n      return this.controller.props.get('title');\n    },\n    set: function set(title) {\n      this.controller.props.set('title', title);\n    }\n  }, {\n    key: \"children\",\n    get: function get() {\n      return this.rackApi_.children;\n    }\n  }, {\n    key: \"addBinding\",\n    value: function addBinding(object, key, opt_params) {\n      return this.rackApi_.addBinding(object, key, opt_params);\n    }\n  }, {\n    key: \"addFolder\",\n    value: function addFolder(params) {\n      return this.rackApi_.addFolder(params);\n    }\n  }, {\n    key: \"addButton\",\n    value: function addButton(params) {\n      return this.rackApi_.addButton(params);\n    }\n  }, {\n    key: \"addTab\",\n    value: function addTab(params) {\n      return this.rackApi_.addTab(params);\n    }\n  }, {\n    key: \"add\",\n    value: function add(api, opt_index) {\n      return this.rackApi_.add(api, opt_index);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(api) {\n      this.rackApi_.remove(api);\n    }\n  }, {\n    key: \"addBlade\",\n    value: function addBlade(params) {\n      return this.rackApi_.addBlade(params);\n    }\n  }, {\n    key: \"on\",\n    value: function on(eventName, handler) {\n      var bh = handler.bind(this);\n      this.emitter_.on(eventName, function (ev) {\n        bh(ev);\n      });\n      return this;\n    }\n  }]);\n  return FolderApi;\n}(ContainerBladeApi);\nvar bladeContainerClassName = ClassName('cnt');\nvar FolderView = /*#__PURE__*/_createClass(function FolderView(doc, config) {\n  var _this35 = this;\n  _classCallCheck(this, FolderView);\n  var _a;\n  this.className_ = ClassName((_a = config.viewName) !== null && _a !== void 0 ? _a : 'fld');\n  this.element = doc.createElement('div');\n  this.element.classList.add(this.className_(), bladeContainerClassName());\n  config.viewProps.bindClassModifiers(this.element);\n  this.foldable_ = config.foldable;\n  this.foldable_.bindExpandedClass(this.element, this.className_(undefined, 'expanded'));\n  bindValueMap(this.foldable_, 'completed', valueToClassName(this.element, this.className_(undefined, 'cpl')));\n  var buttonElem = doc.createElement('button');\n  buttonElem.classList.add(this.className_('b'));\n  bindValueMap(config.props, 'title', function (title) {\n    if (isEmpty(title)) {\n      _this35.element.classList.add(_this35.className_(undefined, 'not'));\n    } else {\n      _this35.element.classList.remove(_this35.className_(undefined, 'not'));\n    }\n  });\n  config.viewProps.bindDisabled(buttonElem);\n  this.element.appendChild(buttonElem);\n  this.buttonElement = buttonElem;\n  var indentElem = doc.createElement('div');\n  indentElem.classList.add(this.className_('i'));\n  this.element.appendChild(indentElem);\n  var titleElem = doc.createElement('div');\n  titleElem.classList.add(this.className_('t'));\n  bindValueToTextContent(config.props.value('title'), titleElem);\n  this.buttonElement.appendChild(titleElem);\n  this.titleElement = titleElem;\n  var markElem = doc.createElement('div');\n  markElem.classList.add(this.className_('m'));\n  this.buttonElement.appendChild(markElem);\n  var containerElem = doc.createElement('div');\n  containerElem.classList.add(this.className_('c'));\n  this.element.appendChild(containerElem);\n  this.containerElement = containerElem;\n});\nvar FolderController = /*#__PURE__*/function (_ContainerBladeContro) {\n  _inherits(FolderController, _ContainerBladeContro);\n  var _super15 = _createSuper(FolderController);\n  function FolderController(doc, config) {\n    var _this36;\n    _classCallCheck(this, FolderController);\n    var _a;\n    var foldable = Foldable.create((_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n    var view = new FolderView(doc, {\n      foldable: foldable,\n      props: config.props,\n      viewName: config.root ? 'rot' : undefined,\n      viewProps: config.viewProps\n    });\n    _this36 = _super15.call(this, Object.assign(Object.assign({}, config), {\n      rackController: new RackController({\n        blade: config.blade,\n        element: view.containerElement,\n        root: config.root,\n        viewProps: config.viewProps\n      }),\n      view: view\n    }));\n    _this36.onTitleClick_ = _this36.onTitleClick_.bind(_assertThisInitialized(_this36));\n    _this36.props = config.props;\n    _this36.foldable = foldable;\n    bindFoldable(_this36.foldable, _this36.view.containerElement);\n    _this36.rackController.rack.emitter.on('add', function () {\n      _this36.foldable.cleanUpTransition();\n    });\n    _this36.rackController.rack.emitter.on('remove', function () {\n      _this36.foldable.cleanUpTransition();\n    });\n    _this36.view.buttonElement.addEventListener('click', _this36.onTitleClick_);\n    return _this36;\n  }\n  _createClass(FolderController, [{\n    key: \"document\",\n    get: function get() {\n      return this.view.element.ownerDocument;\n    }\n  }, {\n    key: \"importState\",\n    value: function importState(state) {\n      var _this37 = this;\n      return importBladeState(state, function (s) {\n        return _get(_getPrototypeOf(FolderController.prototype), \"importState\", _this37).call(_this37, s);\n      }, function (p) {\n        return {\n          expanded: p.required.boolean,\n          title: p.optional.string\n        };\n      }, function (result) {\n        _this37.foldable.set('expanded', result.expanded);\n        _this37.props.set('title', result.title);\n        return true;\n      });\n    }\n  }, {\n    key: \"exportState\",\n    value: function exportState() {\n      var _this38 = this;\n      return exportBladeState(function () {\n        return _get(_getPrototypeOf(FolderController.prototype), \"exportState\", _this38).call(_this38);\n      }, {\n        expanded: this.foldable.get('expanded'),\n        title: this.props.get('title')\n      });\n    }\n  }, {\n    key: \"onTitleClick_\",\n    value: function onTitleClick_() {\n      this.foldable.set('expanded', !this.foldable.get('expanded'));\n    }\n  }]);\n  return FolderController;\n}(ContainerBladeController);\nvar FolderBladePlugin = createPlugin({\n  id: 'folder',\n  type: 'blade',\n  accept: function accept(params) {\n    var result = parseRecord(params, function (p) {\n      return {\n        title: p.required.string,\n        view: p.required.constant('folder'),\n        expanded: p.optional.boolean\n      };\n    });\n    return result ? {\n      params: result\n    } : null;\n  },\n  controller: function controller(args) {\n    return new FolderController(args.document, {\n      blade: args.blade,\n      expanded: args.params.expanded,\n      props: ValueMap.fromObject({\n        title: args.params.title\n      }),\n      viewProps: args.viewProps\n    });\n  },\n  api: function api(args) {\n    if (!(args.controller instanceof FolderController)) {\n      return null;\n    }\n    return new FolderApi(args.controller, args.pool);\n  }\n});\nvar cn$o = ClassName('');\nfunction valueToModifier(elem, modifier) {\n  return valueToClassName(elem, cn$o(undefined, modifier));\n}\nvar ViewProps = /*#__PURE__*/function (_ValueMap2) {\n  _inherits(ViewProps, _ValueMap2);\n  var _super16 = _createSuper(ViewProps);\n  function ViewProps(valueMap) {\n    var _this39;\n    _classCallCheck(this, ViewProps);\n    var _a;\n    _this39 = _super16.call(this, valueMap);\n    _this39.onDisabledChange_ = _this39.onDisabledChange_.bind(_assertThisInitialized(_this39));\n    _this39.onParentChange_ = _this39.onParentChange_.bind(_assertThisInitialized(_this39));\n    _this39.onParentGlobalDisabledChange_ = _this39.onParentGlobalDisabledChange_.bind(_assertThisInitialized(_this39));\n    var _createReadonlyValue = createReadonlyValue(createValue(_this39.getGlobalDisabled_()));\n    var _createReadonlyValue2 = _slicedToArray(_createReadonlyValue, 2);\n    _this39.globalDisabled_ = _createReadonlyValue2[0];\n    _this39.setGlobalDisabled_ = _createReadonlyValue2[1];\n    _this39.value('disabled').emitter.on('change', _this39.onDisabledChange_);\n    _this39.value('parent').emitter.on('change', _this39.onParentChange_);\n    (_a = _this39.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', _this39.onParentGlobalDisabledChange_);\n    return _this39;\n  }\n  _createClass(ViewProps, [{\n    key: \"globalDisabled\",\n    get: function get() {\n      return this.globalDisabled_;\n    }\n  }, {\n    key: \"bindClassModifiers\",\n    value: function bindClassModifiers(elem) {\n      bindValue(this.globalDisabled_, valueToModifier(elem, 'disabled'));\n      bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n    }\n  }, {\n    key: \"bindDisabled\",\n    value: function bindDisabled(target) {\n      bindValue(this.globalDisabled_, function (disabled) {\n        target.disabled = disabled;\n      });\n    }\n  }, {\n    key: \"bindTabIndex\",\n    value: function bindTabIndex(elem) {\n      bindValue(this.globalDisabled_, function (disabled) {\n        elem.tabIndex = disabled ? -1 : 0;\n      });\n    }\n  }, {\n    key: \"handleDispose\",\n    value: function handleDispose(callback) {\n      this.value('disposed').emitter.on('change', function (disposed) {\n        if (disposed) {\n          callback();\n        }\n      });\n    }\n  }, {\n    key: \"importState\",\n    value: function importState(state) {\n      this.set('disabled', state.disabled);\n      this.set('hidden', state.hidden);\n    }\n  }, {\n    key: \"exportState\",\n    value: function exportState() {\n      return {\n        disabled: this.get('disabled'),\n        hidden: this.get('hidden')\n      };\n    }\n  }, {\n    key: \"getGlobalDisabled_\",\n    value: function getGlobalDisabled_() {\n      var parent = this.get('parent');\n      var parentDisabled = parent ? parent.globalDisabled.rawValue : false;\n      return parentDisabled || this.get('disabled');\n    }\n  }, {\n    key: \"updateGlobalDisabled_\",\n    value: function updateGlobalDisabled_() {\n      this.setGlobalDisabled_(this.getGlobalDisabled_());\n    }\n  }, {\n    key: \"onDisabledChange_\",\n    value: function onDisabledChange_() {\n      this.updateGlobalDisabled_();\n    }\n  }, {\n    key: \"onParentGlobalDisabledChange_\",\n    value: function onParentGlobalDisabledChange_() {\n      this.updateGlobalDisabled_();\n    }\n  }, {\n    key: \"onParentChange_\",\n    value: function onParentChange_(ev) {\n      var _a;\n      var prevParent = ev.previousRawValue;\n      prevParent === null || prevParent === void 0 ? void 0 : prevParent.globalDisabled.emitter.off('change', this.onParentGlobalDisabledChange_);\n      (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n      this.updateGlobalDisabled_();\n    }\n  }], [{\n    key: \"create\",\n    value: function create(opt_initialValue) {\n      var _a, _b, _c;\n      var initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n      return new ViewProps(ValueMap.createCore({\n        disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n        disposed: false,\n        hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n        parent: (_c = initialValue.parent) !== null && _c !== void 0 ? _c : null\n      }));\n    }\n  }]);\n  return ViewProps;\n}(ValueMap);\nvar cn$n = ClassName('tbp');\nvar TabPageView = /*#__PURE__*/_createClass(function TabPageView(doc, config) {\n  _classCallCheck(this, TabPageView);\n  this.element = doc.createElement('div');\n  this.element.classList.add(cn$n());\n  config.viewProps.bindClassModifiers(this.element);\n  var containerElem = doc.createElement('div');\n  containerElem.classList.add(cn$n('c'));\n  this.element.appendChild(containerElem);\n  this.containerElement = containerElem;\n});\nvar cn$m = ClassName('tbi');\nvar TabItemView = /*#__PURE__*/_createClass(function TabItemView(doc, config) {\n  var _this40 = this;\n  _classCallCheck(this, TabItemView);\n  this.element = doc.createElement('div');\n  this.element.classList.add(cn$m());\n  config.viewProps.bindClassModifiers(this.element);\n  bindValueMap(config.props, 'selected', function (selected) {\n    if (selected) {\n      _this40.element.classList.add(cn$m(undefined, 'sel'));\n    } else {\n      _this40.element.classList.remove(cn$m(undefined, 'sel'));\n    }\n  });\n  var buttonElem = doc.createElement('button');\n  buttonElem.classList.add(cn$m('b'));\n  config.viewProps.bindDisabled(buttonElem);\n  this.element.appendChild(buttonElem);\n  this.buttonElement = buttonElem;\n  var titleElem = doc.createElement('div');\n  titleElem.classList.add(cn$m('t'));\n  bindValueToTextContent(config.props.value('title'), titleElem);\n  this.buttonElement.appendChild(titleElem);\n  this.titleElement = titleElem;\n});\nvar TabItemController = /*#__PURE__*/function () {\n  function TabItemController(doc, config) {\n    _classCallCheck(this, TabItemController);\n    this.emitter = new Emitter();\n    this.onClick_ = this.onClick_.bind(this);\n    this.props = config.props;\n    this.viewProps = config.viewProps;\n    this.view = new TabItemView(doc, {\n      props: config.props,\n      viewProps: config.viewProps\n    });\n    this.view.buttonElement.addEventListener('click', this.onClick_);\n  }\n  _createClass(TabItemController, [{\n    key: \"onClick_\",\n    value: function onClick_() {\n      this.emitter.emit('click', {\n        sender: this\n      });\n    }\n  }]);\n  return TabItemController;\n}();\nvar TabPageController = /*#__PURE__*/function (_ContainerBladeContro2) {\n  _inherits(TabPageController, _ContainerBladeContro2);\n  var _super17 = _createSuper(TabPageController);\n  function TabPageController(doc, config) {\n    var _this41;\n    _classCallCheck(this, TabPageController);\n    var view = new TabPageView(doc, {\n      viewProps: config.viewProps\n    });\n    _this41 = _super17.call(this, Object.assign(Object.assign({}, config), {\n      rackController: new RackController({\n        blade: config.blade,\n        element: view.containerElement,\n        viewProps: config.viewProps\n      }),\n      view: view\n    }));\n    _this41.onItemClick_ = _this41.onItemClick_.bind(_assertThisInitialized(_this41));\n    _this41.ic_ = new TabItemController(doc, {\n      props: config.itemProps,\n      viewProps: ViewProps.create()\n    });\n    _this41.ic_.emitter.on('click', _this41.onItemClick_);\n    _this41.props = config.props;\n    bindValueMap(_this41.props, 'selected', function (selected) {\n      _this41.itemController.props.set('selected', selected);\n      _this41.viewProps.set('hidden', !selected);\n    });\n    return _this41;\n  }\n  _createClass(TabPageController, [{\n    key: \"itemController\",\n    get: function get() {\n      return this.ic_;\n    }\n  }, {\n    key: \"importState\",\n    value: function importState(state) {\n      var _this42 = this;\n      return importBladeState(state, function (s) {\n        return _get(_getPrototypeOf(TabPageController.prototype), \"importState\", _this42).call(_this42, s);\n      }, function (p) {\n        return {\n          selected: p.required.boolean,\n          title: p.required.string\n        };\n      }, function (result) {\n        _this42.ic_.props.set('selected', result.selected);\n        _this42.ic_.props.set('title', result.title);\n        return true;\n      });\n    }\n  }, {\n    key: \"exportState\",\n    value: function exportState() {\n      var _this43 = this;\n      return exportBladeState(function () {\n        return _get(_getPrototypeOf(TabPageController.prototype), \"exportState\", _this43).call(_this43);\n      }, {\n        selected: this.ic_.props.get('selected'),\n        title: this.ic_.props.get('title')\n      });\n    }\n  }, {\n    key: \"onItemClick_\",\n    value: function onItemClick_() {\n      this.props.set('selected', true);\n    }\n  }]);\n  return TabPageController;\n}(ContainerBladeController);\nvar TabApi = /*#__PURE__*/function (_ContainerBladeApi2) {\n  _inherits(TabApi, _ContainerBladeApi2);\n  var _super18 = _createSuper(TabApi);\n  function TabApi(controller, pool) {\n    var _this44;\n    _classCallCheck(this, TabApi);\n    _this44 = _super18.call(this, controller, pool);\n    _this44.emitter_ = new Emitter();\n    _this44.onSelect_ = _this44.onSelect_.bind(_assertThisInitialized(_this44));\n    _this44.pool_ = pool;\n    _this44.rackApi_.on('change', function (ev) {\n      _this44.emitter_.emit('change', ev);\n    });\n    _this44.controller.tab.selectedIndex.emitter.on('change', _this44.onSelect_);\n    return _this44;\n  }\n  _createClass(TabApi, [{\n    key: \"pages\",\n    get: function get() {\n      return this.rackApi_.children;\n    }\n  }, {\n    key: \"addPage\",\n    value: function addPage(params) {\n      var doc = this.controller.view.element.ownerDocument;\n      var pc = new TabPageController(doc, {\n        blade: createBlade(),\n        itemProps: ValueMap.fromObject({\n          selected: false,\n          title: params.title\n        }),\n        props: ValueMap.fromObject({\n          selected: false\n        }),\n        viewProps: ViewProps.create()\n      });\n      var papi = this.pool_.createApi(pc);\n      return this.rackApi_.add(papi, params.index);\n    }\n  }, {\n    key: \"removePage\",\n    value: function removePage(index) {\n      this.rackApi_.remove(this.rackApi_.children[index]);\n    }\n  }, {\n    key: \"on\",\n    value: function on(eventName, handler) {\n      var bh = handler.bind(this);\n      this.emitter_.on(eventName, function (ev) {\n        bh(ev);\n      });\n      return this;\n    }\n  }, {\n    key: \"onSelect_\",\n    value: function onSelect_(ev) {\n      this.emitter_.emit('select', new TpTabSelectEvent(this, ev.rawValue));\n    }\n  }]);\n  return TabApi;\n}(ContainerBladeApi);\nvar TabPageApi = /*#__PURE__*/function (_ContainerBladeApi3) {\n  _inherits(TabPageApi, _ContainerBladeApi3);\n  var _super19 = _createSuper(TabPageApi);\n  function TabPageApi() {\n    _classCallCheck(this, TabPageApi);\n    return _super19.apply(this, arguments);\n  }\n  _createClass(TabPageApi, [{\n    key: \"title\",\n    get: function get() {\n      var _a;\n      return (_a = this.controller.itemController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n    },\n    set: function set(title) {\n      this.controller.itemController.props.set('title', title);\n    }\n  }, {\n    key: \"selected\",\n    get: function get() {\n      return this.controller.props.get('selected');\n    },\n    set: function set(selected) {\n      this.controller.props.set('selected', selected);\n    }\n  }, {\n    key: \"children\",\n    get: function get() {\n      return this.rackApi_.children;\n    }\n  }, {\n    key: \"addButton\",\n    value: function addButton(params) {\n      return this.rackApi_.addButton(params);\n    }\n  }, {\n    key: \"addFolder\",\n    value: function addFolder(params) {\n      return this.rackApi_.addFolder(params);\n    }\n  }, {\n    key: \"addTab\",\n    value: function addTab(params) {\n      return this.rackApi_.addTab(params);\n    }\n  }, {\n    key: \"add\",\n    value: function add(api, opt_index) {\n      this.rackApi_.add(api, opt_index);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(api) {\n      this.rackApi_.remove(api);\n    }\n  }, {\n    key: \"addBinding\",\n    value: function addBinding(object, key, opt_params) {\n      return this.rackApi_.addBinding(object, key, opt_params);\n    }\n  }, {\n    key: \"addBlade\",\n    value: function addBlade(params) {\n      return this.rackApi_.addBlade(params);\n    }\n  }]);\n  return TabPageApi;\n}(ContainerBladeApi);\nvar INDEX_NOT_SELECTED = -1;\nvar Tab = /*#__PURE__*/function () {\n  function Tab() {\n    _classCallCheck(this, Tab);\n    this.onItemSelectedChange_ = this.onItemSelectedChange_.bind(this);\n    this.empty = createValue(true);\n    this.selectedIndex = createValue(INDEX_NOT_SELECTED);\n    this.items_ = [];\n  }\n  _createClass(Tab, [{\n    key: \"add\",\n    value: function add(item, opt_index) {\n      var index = opt_index !== null && opt_index !== void 0 ? opt_index : this.items_.length;\n      this.items_.splice(index, 0, item);\n      item.emitter.on('change', this.onItemSelectedChange_);\n      this.keepSelection_();\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(item) {\n      var index = this.items_.indexOf(item);\n      if (index < 0) {\n        return;\n      }\n      this.items_.splice(index, 1);\n      item.emitter.off('change', this.onItemSelectedChange_);\n      this.keepSelection_();\n    }\n  }, {\n    key: \"keepSelection_\",\n    value: function keepSelection_() {\n      if (this.items_.length === 0) {\n        this.selectedIndex.rawValue = INDEX_NOT_SELECTED;\n        this.empty.rawValue = true;\n        return;\n      }\n      var firstSelIndex = this.items_.findIndex(function (s) {\n        return s.rawValue;\n      });\n      if (firstSelIndex < 0) {\n        this.items_.forEach(function (s, i) {\n          s.rawValue = i === 0;\n        });\n        this.selectedIndex.rawValue = 0;\n      } else {\n        this.items_.forEach(function (s, i) {\n          s.rawValue = i === firstSelIndex;\n        });\n        this.selectedIndex.rawValue = firstSelIndex;\n      }\n      this.empty.rawValue = false;\n    }\n  }, {\n    key: \"onItemSelectedChange_\",\n    value: function onItemSelectedChange_(ev) {\n      if (ev.rawValue) {\n        var index = this.items_.findIndex(function (s) {\n          return s === ev.sender;\n        });\n        this.items_.forEach(function (s, i) {\n          s.rawValue = i === index;\n        });\n        this.selectedIndex.rawValue = index;\n      } else {\n        this.keepSelection_();\n      }\n    }\n  }]);\n  return Tab;\n}();\nvar cn$l = ClassName('tab');\nvar TabView = /*#__PURE__*/_createClass(function TabView(doc, config) {\n  _classCallCheck(this, TabView);\n  this.element = doc.createElement('div');\n  this.element.classList.add(cn$l(), bladeContainerClassName());\n  config.viewProps.bindClassModifiers(this.element);\n  bindValue(config.empty, valueToClassName(this.element, cn$l(undefined, 'nop')));\n  var titleElem = doc.createElement('div');\n  titleElem.classList.add(cn$l('t'));\n  this.element.appendChild(titleElem);\n  this.itemsElement = titleElem;\n  var indentElem = doc.createElement('div');\n  indentElem.classList.add(cn$l('i'));\n  this.element.appendChild(indentElem);\n  var contentsElem = doc.createElement('div');\n  contentsElem.classList.add(cn$l('c'));\n  this.element.appendChild(contentsElem);\n  this.contentsElement = contentsElem;\n});\nvar TabController = /*#__PURE__*/function (_ContainerBladeContro3) {\n  _inherits(TabController, _ContainerBladeContro3);\n  var _super20 = _createSuper(TabController);\n  function TabController(doc, config) {\n    var _this45;\n    _classCallCheck(this, TabController);\n    var tab = new Tab();\n    var view = new TabView(doc, {\n      empty: tab.empty,\n      viewProps: config.viewProps\n    });\n    _this45 = _super20.call(this, {\n      blade: config.blade,\n      rackController: new RackController({\n        blade: config.blade,\n        element: view.contentsElement,\n        viewProps: config.viewProps\n      }),\n      view: view\n    });\n    _this45.onRackAdd_ = _this45.onRackAdd_.bind(_assertThisInitialized(_this45));\n    _this45.onRackRemove_ = _this45.onRackRemove_.bind(_assertThisInitialized(_this45));\n    var rack = _this45.rackController.rack;\n    rack.emitter.on('add', _this45.onRackAdd_);\n    rack.emitter.on('remove', _this45.onRackRemove_);\n    _this45.tab = tab;\n    return _this45;\n  }\n  _createClass(TabController, [{\n    key: \"add\",\n    value: function add(pc, opt_index) {\n      this.rackController.rack.add(pc, opt_index);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(index) {\n      this.rackController.rack.remove(this.rackController.rack.children[index]);\n    }\n  }, {\n    key: \"onRackAdd_\",\n    value: function onRackAdd_(ev) {\n      if (!ev.root) {\n        return;\n      }\n      var pc = ev.bladeController;\n      insertElementAt(this.view.itemsElement, pc.itemController.view.element, ev.index);\n      pc.itemController.viewProps.set('parent', this.viewProps);\n      this.tab.add(pc.props.value('selected'));\n    }\n  }, {\n    key: \"onRackRemove_\",\n    value: function onRackRemove_(ev) {\n      if (!ev.root) {\n        return;\n      }\n      var pc = ev.bladeController;\n      removeElement(pc.itemController.view.element);\n      pc.itemController.viewProps.set('parent', null);\n      this.tab.remove(pc.props.value('selected'));\n    }\n  }]);\n  return TabController;\n}(ContainerBladeController);\nvar TabBladePlugin = createPlugin({\n  id: 'tab',\n  type: 'blade',\n  accept: function accept(params) {\n    var result = parseRecord(params, function (p) {\n      return {\n        pages: p.required.array(p.required.object({\n          title: p.required.string\n        })),\n        view: p.required.constant('tab')\n      };\n    });\n    if (!result || result.pages.length === 0) {\n      return null;\n    }\n    return {\n      params: result\n    };\n  },\n  controller: function controller(args) {\n    var c = new TabController(args.document, {\n      blade: args.blade,\n      viewProps: args.viewProps\n    });\n    args.params.pages.forEach(function (p) {\n      var pc = new TabPageController(args.document, {\n        blade: createBlade(),\n        itemProps: ValueMap.fromObject({\n          selected: false,\n          title: p.title\n        }),\n        props: ValueMap.fromObject({\n          selected: false\n        }),\n        viewProps: ViewProps.create()\n      });\n      c.add(pc);\n    });\n    return c;\n  },\n  api: function api(args) {\n    if (args.controller instanceof TabController) {\n      return new TabApi(args.controller, args.pool);\n    }\n    if (args.controller instanceof TabPageController) {\n      return new TabPageApi(args.controller, args.pool);\n    }\n    return null;\n  }\n});\nfunction createBladeController(plugin, args) {\n  var ac = plugin.accept(args.params);\n  if (!ac) {\n    return null;\n  }\n  var params = parseRecord(args.params, function (p) {\n    return {\n      disabled: p.optional.boolean,\n      hidden: p.optional.boolean\n    };\n  });\n  return plugin.controller({\n    blade: createBlade(),\n    document: args.document,\n    params: forceCast(Object.assign(Object.assign({}, ac.params), {\n      disabled: params === null || params === void 0 ? void 0 : params.disabled,\n      hidden: params === null || params === void 0 ? void 0 : params.hidden\n    })),\n    viewProps: ViewProps.create({\n      disabled: params === null || params === void 0 ? void 0 : params.disabled,\n      hidden: params === null || params === void 0 ? void 0 : params.hidden\n    })\n  });\n}\nvar ListInputBindingApi = /*#__PURE__*/function (_BindingApi) {\n  _inherits(ListInputBindingApi, _BindingApi);\n  var _super21 = _createSuper(ListInputBindingApi);\n  function ListInputBindingApi() {\n    _classCallCheck(this, ListInputBindingApi);\n    return _super21.apply(this, arguments);\n  }\n  _createClass(ListInputBindingApi, [{\n    key: \"options\",\n    get: function get() {\n      return this.controller.valueController.props.get('options');\n    },\n    set: function set(options) {\n      this.controller.valueController.props.set('options', options);\n    }\n  }]);\n  return ListInputBindingApi;\n}(BindingApi);\nvar ManualTicker = /*#__PURE__*/function () {\n  function ManualTicker() {\n    _classCallCheck(this, ManualTicker);\n    this.disabled = false;\n    this.emitter = new Emitter();\n  }\n  _createClass(ManualTicker, [{\n    key: \"dispose\",\n    value: function dispose() {}\n  }, {\n    key: \"tick\",\n    value: function tick() {\n      if (this.disabled) {\n        return;\n      }\n      this.emitter.emit('tick', {\n        sender: this\n      });\n    }\n  }]);\n  return ManualTicker;\n}();\nvar IntervalTicker = /*#__PURE__*/function () {\n  function IntervalTicker(doc, interval) {\n    _classCallCheck(this, IntervalTicker);\n    this.disabled_ = false;\n    this.timerId_ = null;\n    this.onTick_ = this.onTick_.bind(this);\n    this.doc_ = doc;\n    this.emitter = new Emitter();\n    this.interval_ = interval;\n    this.setTimer_();\n  }\n  _createClass(IntervalTicker, [{\n    key: \"disabled\",\n    get: function get() {\n      return this.disabled_;\n    },\n    set: function set(inactive) {\n      this.disabled_ = inactive;\n      if (this.disabled_) {\n        this.clearTimer_();\n      } else {\n        this.setTimer_();\n      }\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.clearTimer_();\n    }\n  }, {\n    key: \"clearTimer_\",\n    value: function clearTimer_() {\n      if (this.timerId_ === null) {\n        return;\n      }\n      var win = this.doc_.defaultView;\n      if (win) {\n        win.clearInterval(this.timerId_);\n      }\n      this.timerId_ = null;\n    }\n  }, {\n    key: \"setTimer_\",\n    value: function setTimer_() {\n      this.clearTimer_();\n      if (this.interval_ <= 0) {\n        return;\n      }\n      var win = this.doc_.defaultView;\n      if (win) {\n        this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n      }\n    }\n  }, {\n    key: \"onTick_\",\n    value: function onTick_() {\n      if (this.disabled_) {\n        return;\n      }\n      this.emitter.emit('tick', {\n        sender: this\n      });\n    }\n  }]);\n  return IntervalTicker;\n}();\nvar CompositeConstraint = /*#__PURE__*/function () {\n  function CompositeConstraint(constraints) {\n    _classCallCheck(this, CompositeConstraint);\n    this.constraints = constraints;\n  }\n  _createClass(CompositeConstraint, [{\n    key: \"constrain\",\n    value: function constrain(value) {\n      return this.constraints.reduce(function (result, c) {\n        return c.constrain(result);\n      }, value);\n    }\n  }]);\n  return CompositeConstraint;\n}();\nfunction findConstraint(c, constraintClass) {\n  if (c instanceof constraintClass) {\n    return c;\n  }\n  if (c instanceof CompositeConstraint) {\n    var result = c.constraints.reduce(function (tmpResult, sc) {\n      if (tmpResult) {\n        return tmpResult;\n      }\n      return sc instanceof constraintClass ? sc : null;\n    }, null);\n    if (result) {\n      return result;\n    }\n  }\n  return null;\n}\nvar ListConstraint = /*#__PURE__*/function () {\n  function ListConstraint(options) {\n    _classCallCheck(this, ListConstraint);\n    this.values = ValueMap.fromObject({\n      options: options\n    });\n  }\n  _createClass(ListConstraint, [{\n    key: \"constrain\",\n    value: function constrain(value) {\n      var opts = this.values.get('options');\n      if (opts.length === 0) {\n        return value;\n      }\n      var matched = opts.filter(function (item) {\n        return item.value === value;\n      }).length > 0;\n      return matched ? value : opts[0].value;\n    }\n  }]);\n  return ListConstraint;\n}();\nfunction parseListOptions(value) {\n  var _a;\n  var p = MicroParsers;\n  if (Array.isArray(value)) {\n    return (_a = parseRecord({\n      items: value\n    }, function (p) {\n      return {\n        items: p.required.array(p.required.object({\n          text: p.required.string,\n          value: p.required.raw\n        }))\n      };\n    })) === null || _a === void 0 ? void 0 : _a.items;\n  }\n  if (typeof value === 'object') {\n    return p.required.raw(value).value;\n  }\n  return undefined;\n}\nfunction normalizeListOptions(options) {\n  if (Array.isArray(options)) {\n    return options;\n  }\n  var items = [];\n  Object.keys(options).forEach(function (text) {\n    items.push({\n      text: text,\n      value: options[text]\n    });\n  });\n  return items;\n}\nfunction createListConstraint(options) {\n  return !isEmpty(options) ? new ListConstraint(normalizeListOptions(forceCast(options))) : null;\n}\nvar cn$k = ClassName('lst');\nvar ListView = /*#__PURE__*/function () {\n  function ListView(doc, config) {\n    var _this46 = this;\n    _classCallCheck(this, ListView);\n    this.onValueChange_ = this.onValueChange_.bind(this);\n    this.props_ = config.props;\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$k());\n    config.viewProps.bindClassModifiers(this.element);\n    var selectElem = doc.createElement('select');\n    selectElem.classList.add(cn$k('s'));\n    config.viewProps.bindDisabled(selectElem);\n    this.element.appendChild(selectElem);\n    this.selectElement = selectElem;\n    var markElem = doc.createElement('div');\n    markElem.classList.add(cn$k('m'));\n    markElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n    this.element.appendChild(markElem);\n    config.value.emitter.on('change', this.onValueChange_);\n    this.value_ = config.value;\n    bindValueMap(this.props_, 'options', function (opts) {\n      removeChildElements(_this46.selectElement);\n      opts.forEach(function (item) {\n        var optionElem = doc.createElement('option');\n        optionElem.textContent = item.text;\n        _this46.selectElement.appendChild(optionElem);\n      });\n      _this46.update_();\n    });\n  }\n  _createClass(ListView, [{\n    key: \"update_\",\n    value: function update_() {\n      var values = this.props_.get('options').map(function (o) {\n        return o.value;\n      });\n      this.selectElement.selectedIndex = values.indexOf(this.value_.rawValue);\n    }\n  }, {\n    key: \"onValueChange_\",\n    value: function onValueChange_() {\n      this.update_();\n    }\n  }]);\n  return ListView;\n}();\nvar ListController = /*#__PURE__*/function () {\n  function ListController(doc, config) {\n    _classCallCheck(this, ListController);\n    this.onSelectChange_ = this.onSelectChange_.bind(this);\n    this.props = config.props;\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.view = new ListView(doc, {\n      props: this.props,\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.view.selectElement.addEventListener('change', this.onSelectChange_);\n  }\n  _createClass(ListController, [{\n    key: \"onSelectChange_\",\n    value: function onSelectChange_(e) {\n      var selectElem = forceCast(e.currentTarget);\n      this.value.rawValue = this.props.get('options')[selectElem.selectedIndex].value;\n    }\n  }, {\n    key: \"importProps\",\n    value: function importProps(state) {\n      var _this47 = this;\n      return importBladeState(state, null, function (p) {\n        return {\n          options: p.required.custom(parseListOptions)\n        };\n      }, function (result) {\n        _this47.props.set('options', normalizeListOptions(result.options));\n        return true;\n      });\n    }\n  }, {\n    key: \"exportProps\",\n    value: function exportProps() {\n      return exportBladeState(null, {\n        options: this.props.get('options')\n      });\n    }\n  }]);\n  return ListController;\n}();\nvar cn$j = ClassName('pop');\nvar PopupView = /*#__PURE__*/_createClass(function PopupView(doc, config) {\n  _classCallCheck(this, PopupView);\n  this.element = doc.createElement('div');\n  this.element.classList.add(cn$j());\n  config.viewProps.bindClassModifiers(this.element);\n  bindValue(config.shows, valueToClassName(this.element, cn$j(undefined, 'v')));\n});\nvar PopupController = /*#__PURE__*/_createClass(function PopupController(doc, config) {\n  _classCallCheck(this, PopupController);\n  this.shows = createValue(false);\n  this.viewProps = config.viewProps;\n  this.view = new PopupView(doc, {\n    shows: this.shows,\n    viewProps: this.viewProps\n  });\n});\nvar cn$i = ClassName('txt');\nvar TextView = /*#__PURE__*/function () {\n  function TextView(doc, config) {\n    _classCallCheck(this, TextView);\n    this.onChange_ = this.onChange_.bind(this);\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$i());\n    config.viewProps.bindClassModifiers(this.element);\n    this.props_ = config.props;\n    this.props_.emitter.on('change', this.onChange_);\n    var inputElem = doc.createElement('input');\n    inputElem.classList.add(cn$i('i'));\n    inputElem.type = 'text';\n    config.viewProps.bindDisabled(inputElem);\n    this.element.appendChild(inputElem);\n    this.inputElement = inputElem;\n    config.value.emitter.on('change', this.onChange_);\n    this.value_ = config.value;\n    this.refresh();\n  }\n  _createClass(TextView, [{\n    key: \"refresh\",\n    value: function refresh() {\n      var formatter = this.props_.get('formatter');\n      this.inputElement.value = formatter(this.value_.rawValue);\n    }\n  }, {\n    key: \"onChange_\",\n    value: function onChange_() {\n      this.refresh();\n    }\n  }]);\n  return TextView;\n}();\nvar TextController = /*#__PURE__*/function () {\n  function TextController(doc, config) {\n    _classCallCheck(this, TextController);\n    this.onInputChange_ = this.onInputChange_.bind(this);\n    this.parser_ = config.parser;\n    this.props = config.props;\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.view = new TextView(doc, {\n      props: config.props,\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.view.inputElement.addEventListener('change', this.onInputChange_);\n  }\n  _createClass(TextController, [{\n    key: \"onInputChange_\",\n    value: function onInputChange_(e) {\n      var inputElem = forceCast(e.currentTarget);\n      var value = inputElem.value;\n      var parsedValue = this.parser_(value);\n      if (!isEmpty(parsedValue)) {\n        this.value.rawValue = parsedValue;\n      }\n      this.view.refresh();\n    }\n  }]);\n  return TextController;\n}();\nfunction boolToString(value) {\n  return String(value);\n}\nfunction boolFromUnknown(value) {\n  if (value === 'false') {\n    return false;\n  }\n  return !!value;\n}\nfunction BooleanFormatter(value) {\n  return boolToString(value);\n}\nfunction composeParsers(parsers) {\n  return function (text) {\n    return parsers.reduce(function (result, parser) {\n      if (result !== null) {\n        return result;\n      }\n      return parser(text);\n    }, null);\n  };\n}\nvar innerFormatter = createNumberFormatter(0);\nfunction formatPercentage(value) {\n  return innerFormatter(value) + '%';\n}\nfunction stringFromUnknown(value) {\n  return String(value);\n}\nfunction formatString(value) {\n  return value;\n}\nfunction connectValues(_ref) {\n  var primary = _ref.primary,\n    secondary = _ref.secondary,\n    forward = _ref.forward,\n    backward = _ref.backward;\n  var changing = false;\n  function preventFeedback(callback) {\n    if (changing) {\n      return;\n    }\n    changing = true;\n    callback();\n    changing = false;\n  }\n  primary.emitter.on('change', function (ev) {\n    preventFeedback(function () {\n      secondary.setRawValue(forward(primary.rawValue, secondary.rawValue), ev.options);\n    });\n  });\n  secondary.emitter.on('change', function (ev) {\n    preventFeedback(function () {\n      primary.setRawValue(backward(primary.rawValue, secondary.rawValue), ev.options);\n    });\n    preventFeedback(function () {\n      secondary.setRawValue(forward(primary.rawValue, secondary.rawValue), ev.options);\n    });\n  });\n  preventFeedback(function () {\n    secondary.setRawValue(forward(primary.rawValue, secondary.rawValue), {\n      forceEmit: false,\n      last: true\n    });\n  });\n}\nfunction getStepForKey(keyScale, keys) {\n  var step = keyScale * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n  if (keys.upKey) {\n    return +step;\n  } else if (keys.downKey) {\n    return -step;\n  }\n  return 0;\n}\nfunction getVerticalStepKeys(ev) {\n  return {\n    altKey: ev.altKey,\n    downKey: ev.key === 'ArrowDown',\n    shiftKey: ev.shiftKey,\n    upKey: ev.key === 'ArrowUp'\n  };\n}\nfunction getHorizontalStepKeys(ev) {\n  return {\n    altKey: ev.altKey,\n    downKey: ev.key === 'ArrowLeft',\n    shiftKey: ev.shiftKey,\n    upKey: ev.key === 'ArrowRight'\n  };\n}\nfunction isVerticalArrowKey(key) {\n  return key === 'ArrowUp' || key === 'ArrowDown';\n}\nfunction isArrowKey(key) {\n  return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\n}\nfunction computeOffset$1(ev, elem) {\n  var _a, _b;\n  var win = elem.ownerDocument.defaultView;\n  var rect = elem.getBoundingClientRect();\n  return {\n    x: ev.pageX - (((_a = win && win.scrollX) !== null && _a !== void 0 ? _a : 0) + rect.left),\n    y: ev.pageY - (((_b = win && win.scrollY) !== null && _b !== void 0 ? _b : 0) + rect.top)\n  };\n}\nvar PointerHandler = /*#__PURE__*/function () {\n  function PointerHandler(element) {\n    _classCallCheck(this, PointerHandler);\n    this.lastTouch_ = null;\n    this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n    this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n    this.onMouseDown_ = this.onMouseDown_.bind(this);\n    this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n    this.onTouchMove_ = this.onTouchMove_.bind(this);\n    this.onTouchStart_ = this.onTouchStart_.bind(this);\n    this.elem_ = element;\n    this.emitter = new Emitter();\n    element.addEventListener('touchstart', this.onTouchStart_, {\n      passive: false\n    });\n    element.addEventListener('touchmove', this.onTouchMove_, {\n      passive: true\n    });\n    element.addEventListener('touchend', this.onTouchEnd_);\n    element.addEventListener('mousedown', this.onMouseDown_);\n  }\n  _createClass(PointerHandler, [{\n    key: \"computePosition_\",\n    value: function computePosition_(offset) {\n      var rect = this.elem_.getBoundingClientRect();\n      return {\n        bounds: {\n          width: rect.width,\n          height: rect.height\n        },\n        point: offset ? {\n          x: offset.x,\n          y: offset.y\n        } : null\n      };\n    }\n  }, {\n    key: \"onMouseDown_\",\n    value: function onMouseDown_(ev) {\n      var _a;\n      ev.preventDefault();\n      (_a = ev.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n      var doc = this.elem_.ownerDocument;\n      doc.addEventListener('mousemove', this.onDocumentMouseMove_);\n      doc.addEventListener('mouseup', this.onDocumentMouseUp_);\n      this.emitter.emit('down', {\n        altKey: ev.altKey,\n        data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n        sender: this,\n        shiftKey: ev.shiftKey\n      });\n    }\n  }, {\n    key: \"onDocumentMouseMove_\",\n    value: function onDocumentMouseMove_(ev) {\n      this.emitter.emit('move', {\n        altKey: ev.altKey,\n        data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n        sender: this,\n        shiftKey: ev.shiftKey\n      });\n    }\n  }, {\n    key: \"onDocumentMouseUp_\",\n    value: function onDocumentMouseUp_(ev) {\n      var doc = this.elem_.ownerDocument;\n      doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\n      doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\n      this.emitter.emit('up', {\n        altKey: ev.altKey,\n        data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n        sender: this,\n        shiftKey: ev.shiftKey\n      });\n    }\n  }, {\n    key: \"onTouchStart_\",\n    value: function onTouchStart_(ev) {\n      ev.preventDefault();\n      var touch = ev.targetTouches.item(0);\n      var rect = this.elem_.getBoundingClientRect();\n      this.emitter.emit('down', {\n        altKey: ev.altKey,\n        data: this.computePosition_(touch ? {\n          x: touch.clientX - rect.left,\n          y: touch.clientY - rect.top\n        } : undefined),\n        sender: this,\n        shiftKey: ev.shiftKey\n      });\n      this.lastTouch_ = touch;\n    }\n  }, {\n    key: \"onTouchMove_\",\n    value: function onTouchMove_(ev) {\n      var touch = ev.targetTouches.item(0);\n      var rect = this.elem_.getBoundingClientRect();\n      this.emitter.emit('move', {\n        altKey: ev.altKey,\n        data: this.computePosition_(touch ? {\n          x: touch.clientX - rect.left,\n          y: touch.clientY - rect.top\n        } : undefined),\n        sender: this,\n        shiftKey: ev.shiftKey\n      });\n      this.lastTouch_ = touch;\n    }\n  }, {\n    key: \"onTouchEnd_\",\n    value: function onTouchEnd_(ev) {\n      var _a;\n      var touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n      var rect = this.elem_.getBoundingClientRect();\n      this.emitter.emit('up', {\n        altKey: ev.altKey,\n        data: this.computePosition_(touch ? {\n          x: touch.clientX - rect.left,\n          y: touch.clientY - rect.top\n        } : undefined),\n        sender: this,\n        shiftKey: ev.shiftKey\n      });\n    }\n  }]);\n  return PointerHandler;\n}();\nvar cn$h = ClassName('txt');\nvar NumberTextView = /*#__PURE__*/function () {\n  function NumberTextView(doc, config) {\n    _classCallCheck(this, NumberTextView);\n    this.onChange_ = this.onChange_.bind(this);\n    this.props_ = config.props;\n    this.props_.emitter.on('change', this.onChange_);\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$h(), cn$h(undefined, 'num'));\n    if (config.arrayPosition) {\n      this.element.classList.add(cn$h(undefined, config.arrayPosition));\n    }\n    config.viewProps.bindClassModifiers(this.element);\n    var inputElem = doc.createElement('input');\n    inputElem.classList.add(cn$h('i'));\n    inputElem.type = 'text';\n    config.viewProps.bindDisabled(inputElem);\n    this.element.appendChild(inputElem);\n    this.inputElement = inputElem;\n    this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n    this.dragging_ = config.dragging;\n    this.dragging_.emitter.on('change', this.onDraggingChange_);\n    this.element.classList.add(cn$h());\n    this.inputElement.classList.add(cn$h('i'));\n    var knobElem = doc.createElement('div');\n    knobElem.classList.add(cn$h('k'));\n    this.element.appendChild(knobElem);\n    this.knobElement = knobElem;\n    var guideElem = doc.createElementNS(SVG_NS, 'svg');\n    guideElem.classList.add(cn$h('g'));\n    this.knobElement.appendChild(guideElem);\n    var bodyElem = doc.createElementNS(SVG_NS, 'path');\n    bodyElem.classList.add(cn$h('gb'));\n    guideElem.appendChild(bodyElem);\n    this.guideBodyElem_ = bodyElem;\n    var headElem = doc.createElementNS(SVG_NS, 'path');\n    headElem.classList.add(cn$h('gh'));\n    guideElem.appendChild(headElem);\n    this.guideHeadElem_ = headElem;\n    var tooltipElem = doc.createElement('div');\n    tooltipElem.classList.add(ClassName('tt')());\n    this.knobElement.appendChild(tooltipElem);\n    this.tooltipElem_ = tooltipElem;\n    config.value.emitter.on('change', this.onChange_);\n    this.value = config.value;\n    this.refresh();\n  }\n  _createClass(NumberTextView, [{\n    key: \"onDraggingChange_\",\n    value: function onDraggingChange_(ev) {\n      if (ev.rawValue === null) {\n        this.element.classList.remove(cn$h(undefined, 'drg'));\n        return;\n      }\n      this.element.classList.add(cn$h(undefined, 'drg'));\n      var x = ev.rawValue / this.props_.get('pointerScale');\n      var aox = x + (x > 0 ? -1 : x < 0 ? +1 : 0);\n      var adx = constrainRange(-aox, -4, +4);\n      this.guideHeadElem_.setAttributeNS(null, 'd', [\"M \".concat(aox + adx, \",0 L\").concat(aox, \",4 L\").concat(aox + adx, \",8\"), \"M \".concat(x, \",-1 L\").concat(x, \",9\")].join(' '));\n      this.guideBodyElem_.setAttributeNS(null, 'd', \"M 0,4 L\".concat(x, \",4\"));\n      var formatter = this.props_.get('formatter');\n      this.tooltipElem_.textContent = formatter(this.value.rawValue);\n      this.tooltipElem_.style.left = \"\".concat(x, \"px\");\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      var formatter = this.props_.get('formatter');\n      this.inputElement.value = formatter(this.value.rawValue);\n    }\n  }, {\n    key: \"onChange_\",\n    value: function onChange_() {\n      this.refresh();\n    }\n  }]);\n  return NumberTextView;\n}();\nvar NumberTextController = /*#__PURE__*/function () {\n  function NumberTextController(doc, config) {\n    _classCallCheck(this, NumberTextController);\n    var _a;\n    this.originRawValue_ = 0;\n    this.onInputChange_ = this.onInputChange_.bind(this);\n    this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n    this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n    this.onPointerDown_ = this.onPointerDown_.bind(this);\n    this.onPointerMove_ = this.onPointerMove_.bind(this);\n    this.onPointerUp_ = this.onPointerUp_.bind(this);\n    this.parser_ = config.parser;\n    this.props = config.props;\n    this.sliderProps_ = (_a = config.sliderProps) !== null && _a !== void 0 ? _a : null;\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.dragging_ = createValue(null);\n    this.view = new NumberTextView(doc, {\n      arrayPosition: config.arrayPosition,\n      dragging: this.dragging_,\n      props: this.props,\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.view.inputElement.addEventListener('change', this.onInputChange_);\n    this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\n    this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\n    var ph = new PointerHandler(this.view.knobElement);\n    ph.emitter.on('down', this.onPointerDown_);\n    ph.emitter.on('move', this.onPointerMove_);\n    ph.emitter.on('up', this.onPointerUp_);\n  }\n  _createClass(NumberTextController, [{\n    key: \"constrainValue_\",\n    value: function constrainValue_(value) {\n      var _a, _b;\n      var min = (_a = this.sliderProps_) === null || _a === void 0 ? void 0 : _a.get('min');\n      var max = (_b = this.sliderProps_) === null || _b === void 0 ? void 0 : _b.get('max');\n      var v = value;\n      if (min !== undefined) {\n        v = Math.max(v, min);\n      }\n      if (max !== undefined) {\n        v = Math.min(v, max);\n      }\n      return v;\n    }\n  }, {\n    key: \"onInputChange_\",\n    value: function onInputChange_(e) {\n      var inputElem = forceCast(e.currentTarget);\n      var value = inputElem.value;\n      var parsedValue = this.parser_(value);\n      if (!isEmpty(parsedValue)) {\n        this.value.rawValue = this.constrainValue_(parsedValue);\n      }\n      this.view.refresh();\n    }\n  }, {\n    key: \"onInputKeyDown_\",\n    value: function onInputKeyDown_(ev) {\n      var step = getStepForKey(this.props.get('keyScale'), getVerticalStepKeys(ev));\n      if (step === 0) {\n        return;\n      }\n      this.value.setRawValue(this.constrainValue_(this.value.rawValue + step), {\n        forceEmit: false,\n        last: false\n      });\n    }\n  }, {\n    key: \"onInputKeyUp_\",\n    value: function onInputKeyUp_(ev) {\n      var step = getStepForKey(this.props.get('keyScale'), getVerticalStepKeys(ev));\n      if (step === 0) {\n        return;\n      }\n      this.value.setRawValue(this.value.rawValue, {\n        forceEmit: true,\n        last: true\n      });\n    }\n  }, {\n    key: \"onPointerDown_\",\n    value: function onPointerDown_() {\n      this.originRawValue_ = this.value.rawValue;\n      this.dragging_.rawValue = 0;\n    }\n  }, {\n    key: \"computeDraggingValue_\",\n    value: function computeDraggingValue_(data) {\n      if (!data.point) {\n        return null;\n      }\n      var dx = data.point.x - data.bounds.width / 2;\n      return this.constrainValue_(this.originRawValue_ + dx * this.props.get('pointerScale'));\n    }\n  }, {\n    key: \"onPointerMove_\",\n    value: function onPointerMove_(ev) {\n      var v = this.computeDraggingValue_(ev.data);\n      if (v === null) {\n        return;\n      }\n      this.value.setRawValue(v, {\n        forceEmit: false,\n        last: false\n      });\n      this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n    }\n  }, {\n    key: \"onPointerUp_\",\n    value: function onPointerUp_(ev) {\n      var v = this.computeDraggingValue_(ev.data);\n      if (v === null) {\n        return;\n      }\n      this.value.setRawValue(v, {\n        forceEmit: true,\n        last: true\n      });\n      this.dragging_.rawValue = null;\n    }\n  }]);\n  return NumberTextController;\n}();\nvar cn$g = ClassName('sld');\nvar SliderView = /*#__PURE__*/function () {\n  function SliderView(doc, config) {\n    _classCallCheck(this, SliderView);\n    this.onChange_ = this.onChange_.bind(this);\n    this.props_ = config.props;\n    this.props_.emitter.on('change', this.onChange_);\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$g());\n    config.viewProps.bindClassModifiers(this.element);\n    var trackElem = doc.createElement('div');\n    trackElem.classList.add(cn$g('t'));\n    config.viewProps.bindTabIndex(trackElem);\n    this.element.appendChild(trackElem);\n    this.trackElement = trackElem;\n    var knobElem = doc.createElement('div');\n    knobElem.classList.add(cn$g('k'));\n    this.trackElement.appendChild(knobElem);\n    this.knobElement = knobElem;\n    config.value.emitter.on('change', this.onChange_);\n    this.value = config.value;\n    this.update_();\n  }\n  _createClass(SliderView, [{\n    key: \"update_\",\n    value: function update_() {\n      var p = constrainRange(mapRange(this.value.rawValue, this.props_.get('min'), this.props_.get('max'), 0, 100), 0, 100);\n      this.knobElement.style.width = \"\".concat(p, \"%\");\n    }\n  }, {\n    key: \"onChange_\",\n    value: function onChange_() {\n      this.update_();\n    }\n  }]);\n  return SliderView;\n}();\nvar SliderController = /*#__PURE__*/function () {\n  function SliderController(doc, config) {\n    _classCallCheck(this, SliderController);\n    this.onKeyDown_ = this.onKeyDown_.bind(this);\n    this.onKeyUp_ = this.onKeyUp_.bind(this);\n    this.onPointerDownOrMove_ = this.onPointerDownOrMove_.bind(this);\n    this.onPointerUp_ = this.onPointerUp_.bind(this);\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.props = config.props;\n    this.view = new SliderView(doc, {\n      props: this.props,\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.ptHandler_ = new PointerHandler(this.view.trackElement);\n    this.ptHandler_.emitter.on('down', this.onPointerDownOrMove_);\n    this.ptHandler_.emitter.on('move', this.onPointerDownOrMove_);\n    this.ptHandler_.emitter.on('up', this.onPointerUp_);\n    this.view.trackElement.addEventListener('keydown', this.onKeyDown_);\n    this.view.trackElement.addEventListener('keyup', this.onKeyUp_);\n  }\n  _createClass(SliderController, [{\n    key: \"handlePointerEvent_\",\n    value: function handlePointerEvent_(d, opts) {\n      if (!d.point) {\n        return;\n      }\n      this.value.setRawValue(mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, this.props.get('min'), this.props.get('max')), opts);\n    }\n  }, {\n    key: \"onPointerDownOrMove_\",\n    value: function onPointerDownOrMove_(ev) {\n      this.handlePointerEvent_(ev.data, {\n        forceEmit: false,\n        last: false\n      });\n    }\n  }, {\n    key: \"onPointerUp_\",\n    value: function onPointerUp_(ev) {\n      this.handlePointerEvent_(ev.data, {\n        forceEmit: true,\n        last: true\n      });\n    }\n  }, {\n    key: \"onKeyDown_\",\n    value: function onKeyDown_(ev) {\n      var step = getStepForKey(this.props.get('keyScale'), getHorizontalStepKeys(ev));\n      if (step === 0) {\n        return;\n      }\n      this.value.setRawValue(this.value.rawValue + step, {\n        forceEmit: false,\n        last: false\n      });\n    }\n  }, {\n    key: \"onKeyUp_\",\n    value: function onKeyUp_(ev) {\n      var step = getStepForKey(this.props.get('keyScale'), getHorizontalStepKeys(ev));\n      if (step === 0) {\n        return;\n      }\n      this.value.setRawValue(this.value.rawValue, {\n        forceEmit: true,\n        last: true\n      });\n    }\n  }]);\n  return SliderController;\n}();\nvar cn$f = ClassName('sldtxt');\nvar SliderTextView = /*#__PURE__*/_createClass(function SliderTextView(doc, config) {\n  _classCallCheck(this, SliderTextView);\n  this.element = doc.createElement('div');\n  this.element.classList.add(cn$f());\n  var sliderElem = doc.createElement('div');\n  sliderElem.classList.add(cn$f('s'));\n  this.sliderView_ = config.sliderView;\n  sliderElem.appendChild(this.sliderView_.element);\n  this.element.appendChild(sliderElem);\n  var textElem = doc.createElement('div');\n  textElem.classList.add(cn$f('t'));\n  this.textView_ = config.textView;\n  textElem.appendChild(this.textView_.element);\n  this.element.appendChild(textElem);\n});\nvar SliderTextController = /*#__PURE__*/function () {\n  function SliderTextController(doc, config) {\n    _classCallCheck(this, SliderTextController);\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.sliderC_ = new SliderController(doc, {\n      props: config.sliderProps,\n      value: config.value,\n      viewProps: this.viewProps\n    });\n    this.textC_ = new NumberTextController(doc, {\n      parser: config.parser,\n      props: config.textProps,\n      sliderProps: config.sliderProps,\n      value: config.value,\n      viewProps: config.viewProps\n    });\n    this.view = new SliderTextView(doc, {\n      sliderView: this.sliderC_.view,\n      textView: this.textC_.view\n    });\n  }\n  _createClass(SliderTextController, [{\n    key: \"sliderController\",\n    get: function get() {\n      return this.sliderC_;\n    }\n  }, {\n    key: \"textController\",\n    get: function get() {\n      return this.textC_;\n    }\n  }, {\n    key: \"importProps\",\n    value: function importProps(state) {\n      var _this48 = this;\n      return importBladeState(state, null, function (p) {\n        return {\n          max: p.required.number,\n          min: p.required.number\n        };\n      }, function (result) {\n        var sliderProps = _this48.sliderC_.props;\n        sliderProps.set('max', result.max);\n        sliderProps.set('min', result.min);\n        return true;\n      });\n    }\n  }, {\n    key: \"exportProps\",\n    value: function exportProps() {\n      var sliderProps = this.sliderC_.props;\n      return exportBladeState(null, {\n        max: sliderProps.get('max'),\n        min: sliderProps.get('min')\n      });\n    }\n  }]);\n  return SliderTextController;\n}();\nfunction createSliderTextProps(config) {\n  return {\n    sliderProps: new ValueMap({\n      keyScale: config.keyScale,\n      max: config.max,\n      min: config.min\n    }),\n    textProps: new ValueMap({\n      formatter: createValue(config.formatter),\n      keyScale: config.keyScale,\n      pointerScale: createValue(config.pointerScale)\n    })\n  };\n}\nvar CSS_VAR_MAP = {\n  containerUnitSize: 'cnt-usz'\n};\nfunction getCssVar(key) {\n  return \"--\".concat(CSS_VAR_MAP[key]);\n}\nfunction createPointDimensionParser(p) {\n  return createNumberTextInputParamsParser(p);\n}\nfunction parsePointDimensionParams(value) {\n  if (!isRecord(value)) {\n    return undefined;\n  }\n  return parseRecord(value, createPointDimensionParser);\n}\nfunction createDimensionConstraint(params, initialValue) {\n  if (!params) {\n    return undefined;\n  }\n  var constraints = [];\n  var cs = createStepConstraint(params, initialValue);\n  if (cs) {\n    constraints.push(cs);\n  }\n  var rs = createRangeConstraint(params);\n  if (rs) {\n    constraints.push(rs);\n  }\n  return new CompositeConstraint(constraints);\n}\nfunction isCompatible(ver) {\n  if (!ver) {\n    return false;\n  }\n  return ver.major === VERSION$1.major;\n}\nfunction parsePickerLayout(value) {\n  if (value === 'inline' || value === 'popup') {\n    return value;\n  }\n  return undefined;\n}\nfunction writePrimitive(target, value) {\n  target.write(value);\n}\nvar cn$e = ClassName('ckb');\nvar CheckboxView = /*#__PURE__*/function () {\n  function CheckboxView(doc, config) {\n    _classCallCheck(this, CheckboxView);\n    this.onValueChange_ = this.onValueChange_.bind(this);\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$e());\n    config.viewProps.bindClassModifiers(this.element);\n    var labelElem = doc.createElement('label');\n    labelElem.classList.add(cn$e('l'));\n    this.element.appendChild(labelElem);\n    var inputElem = doc.createElement('input');\n    inputElem.classList.add(cn$e('i'));\n    inputElem.type = 'checkbox';\n    labelElem.appendChild(inputElem);\n    this.inputElement = inputElem;\n    config.viewProps.bindDisabled(this.inputElement);\n    var wrapperElem = doc.createElement('div');\n    wrapperElem.classList.add(cn$e('w'));\n    labelElem.appendChild(wrapperElem);\n    var markElem = createSvgIconElement(doc, 'check');\n    wrapperElem.appendChild(markElem);\n    config.value.emitter.on('change', this.onValueChange_);\n    this.value = config.value;\n    this.update_();\n  }\n  _createClass(CheckboxView, [{\n    key: \"update_\",\n    value: function update_() {\n      this.inputElement.checked = this.value.rawValue;\n    }\n  }, {\n    key: \"onValueChange_\",\n    value: function onValueChange_() {\n      this.update_();\n    }\n  }]);\n  return CheckboxView;\n}();\nvar CheckboxController = /*#__PURE__*/function () {\n  function CheckboxController(doc, config) {\n    _classCallCheck(this, CheckboxController);\n    this.onInputChange_ = this.onInputChange_.bind(this);\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.view = new CheckboxView(doc, {\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.view.inputElement.addEventListener('change', this.onInputChange_);\n  }\n  _createClass(CheckboxController, [{\n    key: \"onInputChange_\",\n    value: function onInputChange_(e) {\n      var inputElem = forceCast(e.currentTarget);\n      this.value.rawValue = inputElem.checked;\n    }\n  }]);\n  return CheckboxController;\n}();\nfunction createConstraint$6(params) {\n  var constraints = [];\n  var lc = createListConstraint(params.options);\n  if (lc) {\n    constraints.push(lc);\n  }\n  return new CompositeConstraint(constraints);\n}\nvar BooleanInputPlugin = createPlugin({\n  id: 'input-bool',\n  type: 'input',\n  accept: function accept(value, params) {\n    if (typeof value !== 'boolean') {\n      return null;\n    }\n    var result = parseRecord(params, function (p) {\n      return {\n        options: p.optional.custom(parseListOptions),\n        readonly: p.optional.constant(false)\n      };\n    });\n    return result ? {\n      initialValue: value,\n      params: result\n    } : null;\n  },\n  binding: {\n    reader: function reader(_args) {\n      return boolFromUnknown;\n    },\n    constraint: function constraint(args) {\n      return createConstraint$6(args.params);\n    },\n    writer: function writer(_args) {\n      return writePrimitive;\n    }\n  },\n  controller: function controller(args) {\n    var doc = args.document;\n    var value = args.value;\n    var c = args.constraint;\n    var lc = c && findConstraint(c, ListConstraint);\n    if (lc) {\n      return new ListController(doc, {\n        props: new ValueMap({\n          options: lc.values.value('options')\n        }),\n        value: value,\n        viewProps: args.viewProps\n      });\n    }\n    return new CheckboxController(doc, {\n      value: value,\n      viewProps: args.viewProps\n    });\n  },\n  api: function api(args) {\n    if (typeof args.controller.value.rawValue !== 'boolean') {\n      return null;\n    }\n    if (args.controller.valueController instanceof ListController) {\n      return new ListInputBindingApi(args.controller);\n    }\n    return null;\n  }\n});\nvar cn$d = ClassName('col');\nvar ColorView = /*#__PURE__*/_createClass(function ColorView(doc, config) {\n  _classCallCheck(this, ColorView);\n  this.element = doc.createElement('div');\n  this.element.classList.add(cn$d());\n  config.foldable.bindExpandedClass(this.element, cn$d(undefined, 'expanded'));\n  bindValueMap(config.foldable, 'completed', valueToClassName(this.element, cn$d(undefined, 'cpl')));\n  var headElem = doc.createElement('div');\n  headElem.classList.add(cn$d('h'));\n  this.element.appendChild(headElem);\n  var swatchElem = doc.createElement('div');\n  swatchElem.classList.add(cn$d('s'));\n  headElem.appendChild(swatchElem);\n  this.swatchElement = swatchElem;\n  var textElem = doc.createElement('div');\n  textElem.classList.add(cn$d('t'));\n  headElem.appendChild(textElem);\n  this.textElement = textElem;\n  if (config.pickerLayout === 'inline') {\n    var pickerElem = doc.createElement('div');\n    pickerElem.classList.add(cn$d('p'));\n    this.element.appendChild(pickerElem);\n    this.pickerElement = pickerElem;\n  } else {\n    this.pickerElement = null;\n  }\n});\nfunction rgbToHslInt(r, g, b) {\n  var rp = constrainRange(r / 255, 0, 1);\n  var gp = constrainRange(g / 255, 0, 1);\n  var bp = constrainRange(b / 255, 0, 1);\n  var cmax = Math.max(rp, gp, bp);\n  var cmin = Math.min(rp, gp, bp);\n  var c = cmax - cmin;\n  var h = 0;\n  var s = 0;\n  var l = (cmin + cmax) / 2;\n  if (c !== 0) {\n    s = c / (1 - Math.abs(cmax + cmin - 1));\n    if (rp === cmax) {\n      h = (gp - bp) / c;\n    } else if (gp === cmax) {\n      h = 2 + (bp - rp) / c;\n    } else {\n      h = 4 + (rp - gp) / c;\n    }\n    h = h / 6 + (h < 0 ? 1 : 0);\n  }\n  return [h * 360, s * 100, l * 100];\n}\nfunction hslToRgbInt(h, s, l) {\n  var hp = (h % 360 + 360) % 360;\n  var sp = constrainRange(s / 100, 0, 1);\n  var lp = constrainRange(l / 100, 0, 1);\n  var c = (1 - Math.abs(2 * lp - 1)) * sp;\n  var x = c * (1 - Math.abs(hp / 60 % 2 - 1));\n  var m = lp - c / 2;\n  var rp, gp, bp;\n  if (hp >= 0 && hp < 60) {\n    rp = c;\n    gp = x;\n    bp = 0;\n  } else if (hp >= 60 && hp < 120) {\n    rp = x;\n    gp = c;\n    bp = 0;\n  } else if (hp >= 120 && hp < 180) {\n    rp = 0;\n    gp = c;\n    bp = x;\n  } else if (hp >= 180 && hp < 240) {\n    rp = 0;\n    gp = x;\n    bp = c;\n  } else if (hp >= 240 && hp < 300) {\n    rp = x;\n    gp = 0;\n    bp = c;\n  } else {\n    rp = c;\n    gp = 0;\n    bp = x;\n  }\n  return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n}\nfunction rgbToHsvInt(r, g, b) {\n  var rp = constrainRange(r / 255, 0, 1);\n  var gp = constrainRange(g / 255, 0, 1);\n  var bp = constrainRange(b / 255, 0, 1);\n  var cmax = Math.max(rp, gp, bp);\n  var cmin = Math.min(rp, gp, bp);\n  var d = cmax - cmin;\n  var h;\n  if (d === 0) {\n    h = 0;\n  } else if (cmax === rp) {\n    h = 60 * (((gp - bp) / d % 6 + 6) % 6);\n  } else if (cmax === gp) {\n    h = 60 * ((bp - rp) / d + 2);\n  } else {\n    h = 60 * ((rp - gp) / d + 4);\n  }\n  var s = cmax === 0 ? 0 : d / cmax;\n  var v = cmax;\n  return [h, s * 100, v * 100];\n}\nfunction hsvToRgbInt(h, s, v) {\n  var hp = loopRange(h, 360);\n  var sp = constrainRange(s / 100, 0, 1);\n  var vp = constrainRange(v / 100, 0, 1);\n  var c = vp * sp;\n  var x = c * (1 - Math.abs(hp / 60 % 2 - 1));\n  var m = vp - c;\n  var rp, gp, bp;\n  if (hp >= 0 && hp < 60) {\n    rp = c;\n    gp = x;\n    bp = 0;\n  } else if (hp >= 60 && hp < 120) {\n    rp = x;\n    gp = c;\n    bp = 0;\n  } else if (hp >= 120 && hp < 180) {\n    rp = 0;\n    gp = c;\n    bp = x;\n  } else if (hp >= 180 && hp < 240) {\n    rp = 0;\n    gp = x;\n    bp = c;\n  } else if (hp >= 240 && hp < 300) {\n    rp = x;\n    gp = 0;\n    bp = c;\n  } else {\n    rp = c;\n    gp = 0;\n    bp = x;\n  }\n  return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n}\nfunction hslToHsvInt(h, s, l) {\n  var sd = l + s * (100 - Math.abs(2 * l - 100)) / (2 * 100);\n  return [h, sd !== 0 ? s * (100 - Math.abs(2 * l - 100)) / sd : 0, l + s * (100 - Math.abs(2 * l - 100)) / (2 * 100)];\n}\nfunction hsvToHslInt(h, s, v) {\n  var sd = 100 - Math.abs(v * (200 - s) / 100 - 100);\n  return [h, sd !== 0 ? s * v / sd : 0, v * (200 - s) / (2 * 100)];\n}\nfunction removeAlphaComponent(comps) {\n  return [comps[0], comps[1], comps[2]];\n}\nfunction appendAlphaComponent(comps, alpha) {\n  return [comps[0], comps[1], comps[2], alpha];\n}\nvar MODE_CONVERTER_MAP = {\n  hsl: {\n    hsl: function hsl(h, s, l) {\n      return [h, s, l];\n    },\n    hsv: hslToHsvInt,\n    rgb: hslToRgbInt\n  },\n  hsv: {\n    hsl: hsvToHslInt,\n    hsv: function hsv(h, s, v) {\n      return [h, s, v];\n    },\n    rgb: hsvToRgbInt\n  },\n  rgb: {\n    hsl: rgbToHslInt,\n    hsv: rgbToHsvInt,\n    rgb: function rgb(r, g, b) {\n      return [r, g, b];\n    }\n  }\n};\nfunction getColorMaxComponents(mode, type) {\n  return [type === 'float' ? 1 : mode === 'rgb' ? 255 : 360, type === 'float' ? 1 : mode === 'rgb' ? 255 : 100, type === 'float' ? 1 : mode === 'rgb' ? 255 : 100];\n}\nfunction loopHueRange(hue, max) {\n  return hue === max ? max : loopRange(hue, max);\n}\nfunction constrainColorComponents(components, mode, type) {\n  var _a;\n  var ms = getColorMaxComponents(mode, type);\n  return [mode === 'rgb' ? constrainRange(components[0], 0, ms[0]) : loopHueRange(components[0], ms[0]), constrainRange(components[1], 0, ms[1]), constrainRange(components[2], 0, ms[2]), constrainRange((_a = components[3]) !== null && _a !== void 0 ? _a : 1, 0, 1)];\n}\nfunction convertColorType(comps, mode, from, to) {\n  var fms = getColorMaxComponents(mode, from);\n  var tms = getColorMaxComponents(mode, to);\n  return comps.map(function (c, index) {\n    return c / fms[index] * tms[index];\n  });\n}\nfunction convertColor(components, from, to) {\n  var _MODE_CONVERTER_MAP$f;\n  var intComps = convertColorType(components, from.mode, from.type, 'int');\n  var result = (_MODE_CONVERTER_MAP$f = MODE_CONVERTER_MAP[from.mode])[to.mode].apply(_MODE_CONVERTER_MAP$f, _toConsumableArray(intComps));\n  return convertColorType(result, to.mode, 'int', to.type);\n}\nvar IntColor = /*#__PURE__*/function () {\n  function IntColor(comps, mode) {\n    _classCallCheck(this, IntColor);\n    this.type = 'int';\n    this.mode = mode;\n    this.comps_ = constrainColorComponents(comps, mode, this.type);\n  }\n  _createClass(IntColor, [{\n    key: \"getComponents\",\n    value: function getComponents(opt_mode) {\n      return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_), {\n        mode: this.mode,\n        type: this.type\n      }, {\n        mode: opt_mode !== null && opt_mode !== void 0 ? opt_mode : this.mode,\n        type: this.type\n      }), this.comps_[3]);\n    }\n  }, {\n    key: \"toRgbaObject\",\n    value: function toRgbaObject() {\n      var rgbComps = this.getComponents('rgb');\n      return {\n        r: rgbComps[0],\n        g: rgbComps[1],\n        b: rgbComps[2],\n        a: rgbComps[3]\n      };\n    }\n  }], [{\n    key: \"black\",\n    value: function black() {\n      return new IntColor([0, 0, 0], 'rgb');\n    }\n  }]);\n  return IntColor;\n}();\nvar cn$c = ClassName('colp');\nvar ColorPickerView = /*#__PURE__*/function () {\n  function ColorPickerView(doc, config) {\n    _classCallCheck(this, ColorPickerView);\n    this.alphaViews_ = null;\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$c());\n    config.viewProps.bindClassModifiers(this.element);\n    var hsvElem = doc.createElement('div');\n    hsvElem.classList.add(cn$c('hsv'));\n    var svElem = doc.createElement('div');\n    svElem.classList.add(cn$c('sv'));\n    this.svPaletteView_ = config.svPaletteView;\n    svElem.appendChild(this.svPaletteView_.element);\n    hsvElem.appendChild(svElem);\n    var hElem = doc.createElement('div');\n    hElem.classList.add(cn$c('h'));\n    this.hPaletteView_ = config.hPaletteView;\n    hElem.appendChild(this.hPaletteView_.element);\n    hsvElem.appendChild(hElem);\n    this.element.appendChild(hsvElem);\n    var rgbElem = doc.createElement('div');\n    rgbElem.classList.add(cn$c('rgb'));\n    this.textsView_ = config.textsView;\n    rgbElem.appendChild(this.textsView_.element);\n    this.element.appendChild(rgbElem);\n    if (config.alphaViews) {\n      this.alphaViews_ = {\n        palette: config.alphaViews.palette,\n        text: config.alphaViews.text\n      };\n      var aElem = doc.createElement('div');\n      aElem.classList.add(cn$c('a'));\n      var apElem = doc.createElement('div');\n      apElem.classList.add(cn$c('ap'));\n      apElem.appendChild(this.alphaViews_.palette.element);\n      aElem.appendChild(apElem);\n      var atElem = doc.createElement('div');\n      atElem.classList.add(cn$c('at'));\n      atElem.appendChild(this.alphaViews_.text.element);\n      aElem.appendChild(atElem);\n      this.element.appendChild(aElem);\n    }\n  }\n  _createClass(ColorPickerView, [{\n    key: \"allFocusableElements\",\n    get: function get() {\n      var elems = [this.svPaletteView_.element, this.hPaletteView_.element, this.textsView_.modeSelectElement].concat(_toConsumableArray(this.textsView_.inputViews.map(function (v) {\n        return v.inputElement;\n      })));\n      if (this.alphaViews_) {\n        elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);\n      }\n      return elems;\n    }\n  }]);\n  return ColorPickerView;\n}();\nfunction parseColorType(value) {\n  return value === 'int' ? 'int' : value === 'float' ? 'float' : undefined;\n}\nfunction parseColorInputParams(params) {\n  return parseRecord(params, function (p) {\n    return {\n      color: p.optional.object({\n        alpha: p.optional.boolean,\n        type: p.optional.custom(parseColorType)\n      }),\n      expanded: p.optional.boolean,\n      picker: p.optional.custom(parsePickerLayout),\n      readonly: p.optional.constant(false)\n    };\n  });\n}\nfunction getKeyScaleForColor(forAlpha) {\n  return forAlpha ? 0.1 : 1;\n}\nfunction extractColorType(params) {\n  var _a;\n  return (_a = params.color) === null || _a === void 0 ? void 0 : _a.type;\n}\nvar FloatColor = /*#__PURE__*/function () {\n  function FloatColor(comps, mode) {\n    _classCallCheck(this, FloatColor);\n    this.type = 'float';\n    this.mode = mode;\n    this.comps_ = constrainColorComponents(comps, mode, this.type);\n  }\n  _createClass(FloatColor, [{\n    key: \"getComponents\",\n    value: function getComponents(opt_mode) {\n      return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_), {\n        mode: this.mode,\n        type: this.type\n      }, {\n        mode: opt_mode !== null && opt_mode !== void 0 ? opt_mode : this.mode,\n        type: this.type\n      }), this.comps_[3]);\n    }\n  }, {\n    key: \"toRgbaObject\",\n    value: function toRgbaObject() {\n      var rgbComps = this.getComponents('rgb');\n      return {\n        r: rgbComps[0],\n        g: rgbComps[1],\n        b: rgbComps[2],\n        a: rgbComps[3]\n      };\n    }\n  }]);\n  return FloatColor;\n}();\nvar TYPE_TO_CONSTRUCTOR_MAP = {\n  int: function int(comps, mode) {\n    return new IntColor(comps, mode);\n  },\n  float: function float(comps, mode) {\n    return new FloatColor(comps, mode);\n  }\n};\nfunction createColor(comps, mode, type) {\n  return TYPE_TO_CONSTRUCTOR_MAP[type](comps, mode);\n}\nfunction isFloatColor(c) {\n  return c.type === 'float';\n}\nfunction isIntColor(c) {\n  return c.type === 'int';\n}\nfunction convertFloatToInt(cf) {\n  var comps = cf.getComponents();\n  var ms = getColorMaxComponents(cf.mode, 'int');\n  return new IntColor([Math.round(mapRange(comps[0], 0, 1, 0, ms[0])), Math.round(mapRange(comps[1], 0, 1, 0, ms[1])), Math.round(mapRange(comps[2], 0, 1, 0, ms[2])), comps[3]], cf.mode);\n}\nfunction convertIntToFloat(ci) {\n  var comps = ci.getComponents();\n  var ms = getColorMaxComponents(ci.mode, 'int');\n  return new FloatColor([mapRange(comps[0], 0, ms[0], 0, 1), mapRange(comps[1], 0, ms[1], 0, 1), mapRange(comps[2], 0, ms[2], 0, 1), comps[3]], ci.mode);\n}\nfunction mapColorType(c, type) {\n  if (c.type === type) {\n    return c;\n  }\n  if (isIntColor(c) && type === 'float') {\n    return convertIntToFloat(c);\n  }\n  if (isFloatColor(c) && type === 'int') {\n    return convertFloatToInt(c);\n  }\n  throw TpError.shouldNeverHappen();\n}\nfunction equalsStringColorFormat(f1, f2) {\n  return f1.alpha === f2.alpha && f1.mode === f2.mode && f1.notation === f2.notation && f1.type === f2.type;\n}\nfunction parseCssNumberOrPercentage(text, max) {\n  var m = text.match(/^(.+)%$/);\n  if (!m) {\n    return Math.min(parseFloat(text), max);\n  }\n  return Math.min(parseFloat(m[1]) * 0.01 * max, max);\n}\nvar ANGLE_TO_DEG_MAP = {\n  deg: function deg(angle) {\n    return angle;\n  },\n  grad: function grad(angle) {\n    return angle * 360 / 400;\n  },\n  rad: function rad(angle) {\n    return angle * 360 / (2 * Math.PI);\n  },\n  turn: function turn(angle) {\n    return angle * 360;\n  }\n};\nfunction parseCssNumberOrAngle(text) {\n  var m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);\n  if (!m) {\n    return parseFloat(text);\n  }\n  var angle = parseFloat(m[1]);\n  var unit = m[2];\n  return ANGLE_TO_DEG_MAP[unit](angle);\n}\nfunction parseFunctionalRgbColorComponents(text) {\n  var m = text.match(/^rgb\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n  if (!m) {\n    return null;\n  }\n  var comps = [parseCssNumberOrPercentage(m[1], 255), parseCssNumberOrPercentage(m[2], 255), parseCssNumberOrPercentage(m[3], 255)];\n  if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n    return null;\n  }\n  return comps;\n}\nfunction parseFunctionalRgbColor(text) {\n  var comps = parseFunctionalRgbColorComponents(text);\n  return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseFunctionalRgbaColorComponents(text) {\n  var m = text.match(/^rgba\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n  if (!m) {\n    return null;\n  }\n  var comps = [parseCssNumberOrPercentage(m[1], 255), parseCssNumberOrPercentage(m[2], 255), parseCssNumberOrPercentage(m[3], 255), parseCssNumberOrPercentage(m[4], 1)];\n  if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2]) || isNaN(comps[3])) {\n    return null;\n  }\n  return comps;\n}\nfunction parseFunctionalRgbaColor(text) {\n  var comps = parseFunctionalRgbaColorComponents(text);\n  return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseFunctionalHslColorComponents(text) {\n  var m = text.match(/^hsl\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n  if (!m) {\n    return null;\n  }\n  var comps = [parseCssNumberOrAngle(m[1]), parseCssNumberOrPercentage(m[2], 100), parseCssNumberOrPercentage(m[3], 100)];\n  if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n    return null;\n  }\n  return comps;\n}\nfunction parseFunctionalHslColor(text) {\n  var comps = parseFunctionalHslColorComponents(text);\n  return comps ? new IntColor(comps, 'hsl') : null;\n}\nfunction parseHslaColorComponents(text) {\n  var m = text.match(/^hsla\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n  if (!m) {\n    return null;\n  }\n  var comps = [parseCssNumberOrAngle(m[1]), parseCssNumberOrPercentage(m[2], 100), parseCssNumberOrPercentage(m[3], 100), parseCssNumberOrPercentage(m[4], 1)];\n  if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2]) || isNaN(comps[3])) {\n    return null;\n  }\n  return comps;\n}\nfunction parseFunctionalHslaColor(text) {\n  var comps = parseHslaColorComponents(text);\n  return comps ? new IntColor(comps, 'hsl') : null;\n}\nfunction parseHexRgbColorComponents(text) {\n  var mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n  if (mRgb) {\n    return [parseInt(mRgb[1] + mRgb[1], 16), parseInt(mRgb[2] + mRgb[2], 16), parseInt(mRgb[3] + mRgb[3], 16)];\n  }\n  var mRrggbb = text.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n  if (mRrggbb) {\n    return [parseInt(mRrggbb[1], 16), parseInt(mRrggbb[2], 16), parseInt(mRrggbb[3], 16)];\n  }\n  return null;\n}\nfunction parseHexRgbColor(text) {\n  var comps = parseHexRgbColorComponents(text);\n  return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseHexRgbaColorComponents(text) {\n  var mRgb = text.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n  if (mRgb) {\n    return [parseInt(mRgb[1] + mRgb[1], 16), parseInt(mRgb[2] + mRgb[2], 16), parseInt(mRgb[3] + mRgb[3], 16), mapRange(parseInt(mRgb[4] + mRgb[4], 16), 0, 255, 0, 1)];\n  }\n  var mRrggbb = text.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n  if (mRrggbb) {\n    return [parseInt(mRrggbb[1], 16), parseInt(mRrggbb[2], 16), parseInt(mRrggbb[3], 16), mapRange(parseInt(mRrggbb[4], 16), 0, 255, 0, 1)];\n  }\n  return null;\n}\nfunction parseHexRgbaColor(text) {\n  var comps = parseHexRgbaColorComponents(text);\n  return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseObjectRgbColorComponents(text) {\n  var m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n  if (!m) {\n    return null;\n  }\n  var comps = [parseFloat(m[1]), parseFloat(m[2]), parseFloat(m[3])];\n  if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n    return null;\n  }\n  return comps;\n}\nfunction createObjectRgbColorParser(type) {\n  return function (text) {\n    var comps = parseObjectRgbColorComponents(text);\n    return comps ? createColor(comps, 'rgb', type) : null;\n  };\n}\nfunction parseObjectRgbaColorComponents(text) {\n  var m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*a\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n  if (!m) {\n    return null;\n  }\n  var comps = [parseFloat(m[1]), parseFloat(m[2]), parseFloat(m[3]), parseFloat(m[4])];\n  if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2]) || isNaN(comps[3])) {\n    return null;\n  }\n  return comps;\n}\nfunction createObjectRgbaColorParser(type) {\n  return function (text) {\n    var comps = parseObjectRgbaColorComponents(text);\n    return comps ? createColor(comps, 'rgb', type) : null;\n  };\n}\nvar PARSER_AND_RESULT = [{\n  parser: parseHexRgbColorComponents,\n  result: {\n    alpha: false,\n    mode: 'rgb',\n    notation: 'hex'\n  }\n}, {\n  parser: parseHexRgbaColorComponents,\n  result: {\n    alpha: true,\n    mode: 'rgb',\n    notation: 'hex'\n  }\n}, {\n  parser: parseFunctionalRgbColorComponents,\n  result: {\n    alpha: false,\n    mode: 'rgb',\n    notation: 'func'\n  }\n}, {\n  parser: parseFunctionalRgbaColorComponents,\n  result: {\n    alpha: true,\n    mode: 'rgb',\n    notation: 'func'\n  }\n}, {\n  parser: parseFunctionalHslColorComponents,\n  result: {\n    alpha: false,\n    mode: 'hsl',\n    notation: 'func'\n  }\n}, {\n  parser: parseHslaColorComponents,\n  result: {\n    alpha: true,\n    mode: 'hsl',\n    notation: 'func'\n  }\n}, {\n  parser: parseObjectRgbColorComponents,\n  result: {\n    alpha: false,\n    mode: 'rgb',\n    notation: 'object'\n  }\n}, {\n  parser: parseObjectRgbaColorComponents,\n  result: {\n    alpha: true,\n    mode: 'rgb',\n    notation: 'object'\n  }\n}];\nfunction detectStringColor(text) {\n  return PARSER_AND_RESULT.reduce(function (prev, _ref2) {\n    var parser = _ref2.parser,\n      detection = _ref2.result;\n    if (prev) {\n      return prev;\n    }\n    return parser(text) ? detection : null;\n  }, null);\n}\nfunction detectStringColorFormat(text) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'int';\n  var r = detectStringColor(text);\n  if (!r) {\n    return null;\n  }\n  if (r.notation === 'hex' && type !== 'float') {\n    return Object.assign(Object.assign({}, r), {\n      type: 'int'\n    });\n  }\n  if (r.notation === 'func') {\n    return Object.assign(Object.assign({}, r), {\n      type: type\n    });\n  }\n  return null;\n}\nfunction createColorStringParser(type) {\n  var parsers = [parseHexRgbColor, parseHexRgbaColor, parseFunctionalRgbColor, parseFunctionalRgbaColor, parseFunctionalHslColor, parseFunctionalHslaColor];\n  if (type === 'int') {\n    parsers.push(createObjectRgbColorParser('int'), createObjectRgbaColorParser('int'));\n  }\n  if (type === 'float') {\n    parsers.push(createObjectRgbColorParser('float'), createObjectRgbaColorParser('float'));\n  }\n  var parser = composeParsers(parsers);\n  return function (text) {\n    var result = parser(text);\n    return result ? mapColorType(result, type) : null;\n  };\n}\nfunction readIntColorString(value) {\n  var parser = createColorStringParser('int');\n  if (typeof value !== 'string') {\n    return IntColor.black();\n  }\n  var result = parser(value);\n  return result !== null && result !== void 0 ? result : IntColor.black();\n}\nfunction zerofill(comp) {\n  var hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n  return hex.length === 1 ? \"0\".concat(hex) : hex;\n}\nfunction colorToHexRgbString(value) {\n  var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '#';\n  var hexes = removeAlphaComponent(value.getComponents('rgb')).map(zerofill).join('');\n  return \"\".concat(prefix).concat(hexes);\n}\nfunction colorToHexRgbaString(value) {\n  var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '#';\n  var rgbaComps = value.getComponents('rgb');\n  var hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255].map(zerofill).join('');\n  return \"\".concat(prefix).concat(hexes);\n}\nfunction colorToFunctionalRgbString(value) {\n  var formatter = createNumberFormatter(0);\n  var ci = mapColorType(value, 'int');\n  var comps = removeAlphaComponent(ci.getComponents('rgb')).map(function (comp) {\n    return formatter(comp);\n  });\n  return \"rgb(\".concat(comps.join(', '), \")\");\n}\nfunction colorToFunctionalRgbaString(value) {\n  var aFormatter = createNumberFormatter(2);\n  var rgbFormatter = createNumberFormatter(0);\n  var ci = mapColorType(value, 'int');\n  var comps = ci.getComponents('rgb').map(function (comp, index) {\n    var formatter = index === 3 ? aFormatter : rgbFormatter;\n    return formatter(comp);\n  });\n  return \"rgba(\".concat(comps.join(', '), \")\");\n}\nfunction colorToFunctionalHslString(value) {\n  var formatters = [createNumberFormatter(0), formatPercentage, formatPercentage];\n  var ci = mapColorType(value, 'int');\n  var comps = removeAlphaComponent(ci.getComponents('hsl')).map(function (comp, index) {\n    return formatters[index](comp);\n  });\n  return \"hsl(\".concat(comps.join(', '), \")\");\n}\nfunction colorToFunctionalHslaString(value) {\n  var formatters = [createNumberFormatter(0), formatPercentage, formatPercentage, createNumberFormatter(2)];\n  var ci = mapColorType(value, 'int');\n  var comps = ci.getComponents('hsl').map(function (comp, index) {\n    return formatters[index](comp);\n  });\n  return \"hsla(\".concat(comps.join(', '), \")\");\n}\nfunction colorToObjectRgbString(value, type) {\n  var formatter = createNumberFormatter(type === 'float' ? 2 : 0);\n  var names = ['r', 'g', 'b'];\n  var cc = mapColorType(value, type);\n  var comps = removeAlphaComponent(cc.getComponents('rgb')).map(function (comp, index) {\n    return \"\".concat(names[index], \": \").concat(formatter(comp));\n  });\n  return \"{\".concat(comps.join(', '), \"}\");\n}\nfunction createObjectRgbColorFormatter(type) {\n  return function (value) {\n    return colorToObjectRgbString(value, type);\n  };\n}\nfunction colorToObjectRgbaString(value, type) {\n  var aFormatter = createNumberFormatter(2);\n  var rgbFormatter = createNumberFormatter(type === 'float' ? 2 : 0);\n  var names = ['r', 'g', 'b', 'a'];\n  var cc = mapColorType(value, type);\n  var comps = cc.getComponents('rgb').map(function (comp, index) {\n    var formatter = index === 3 ? aFormatter : rgbFormatter;\n    return \"\".concat(names[index], \": \").concat(formatter(comp));\n  });\n  return \"{\".concat(comps.join(', '), \"}\");\n}\nfunction createObjectRgbaColorFormatter(type) {\n  return function (value) {\n    return colorToObjectRgbaString(value, type);\n  };\n}\nvar FORMAT_AND_STRINGIFIERS = [{\n  format: {\n    alpha: false,\n    mode: 'rgb',\n    notation: 'hex',\n    type: 'int'\n  },\n  stringifier: colorToHexRgbString\n}, {\n  format: {\n    alpha: true,\n    mode: 'rgb',\n    notation: 'hex',\n    type: 'int'\n  },\n  stringifier: colorToHexRgbaString\n}, {\n  format: {\n    alpha: false,\n    mode: 'rgb',\n    notation: 'func',\n    type: 'int'\n  },\n  stringifier: colorToFunctionalRgbString\n}, {\n  format: {\n    alpha: true,\n    mode: 'rgb',\n    notation: 'func',\n    type: 'int'\n  },\n  stringifier: colorToFunctionalRgbaString\n}, {\n  format: {\n    alpha: false,\n    mode: 'hsl',\n    notation: 'func',\n    type: 'int'\n  },\n  stringifier: colorToFunctionalHslString\n}, {\n  format: {\n    alpha: true,\n    mode: 'hsl',\n    notation: 'func',\n    type: 'int'\n  },\n  stringifier: colorToFunctionalHslaString\n}].concat(_toConsumableArray(['int', 'float'].reduce(function (prev, type) {\n  return [].concat(_toConsumableArray(prev), [{\n    format: {\n      alpha: false,\n      mode: 'rgb',\n      notation: 'object',\n      type: type\n    },\n    stringifier: createObjectRgbColorFormatter(type)\n  }, {\n    format: {\n      alpha: true,\n      mode: 'rgb',\n      notation: 'object',\n      type: type\n    },\n    stringifier: createObjectRgbaColorFormatter(type)\n  }]);\n}, [])));\nfunction findColorStringifier(format) {\n  return FORMAT_AND_STRINGIFIERS.reduce(function (prev, fas) {\n    if (prev) {\n      return prev;\n    }\n    return equalsStringColorFormat(fas.format, format) ? fas.stringifier : null;\n  }, null);\n}\nvar cn$b = ClassName('apl');\nvar APaletteView = /*#__PURE__*/function () {\n  function APaletteView(doc, config) {\n    _classCallCheck(this, APaletteView);\n    this.onValueChange_ = this.onValueChange_.bind(this);\n    this.value = config.value;\n    this.value.emitter.on('change', this.onValueChange_);\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$b());\n    config.viewProps.bindClassModifiers(this.element);\n    config.viewProps.bindTabIndex(this.element);\n    var barElem = doc.createElement('div');\n    barElem.classList.add(cn$b('b'));\n    this.element.appendChild(barElem);\n    var colorElem = doc.createElement('div');\n    colorElem.classList.add(cn$b('c'));\n    barElem.appendChild(colorElem);\n    this.colorElem_ = colorElem;\n    var markerElem = doc.createElement('div');\n    markerElem.classList.add(cn$b('m'));\n    this.element.appendChild(markerElem);\n    this.markerElem_ = markerElem;\n    var previewElem = doc.createElement('div');\n    previewElem.classList.add(cn$b('p'));\n    this.markerElem_.appendChild(previewElem);\n    this.previewElem_ = previewElem;\n    this.update_();\n  }\n  _createClass(APaletteView, [{\n    key: \"update_\",\n    value: function update_() {\n      var c = this.value.rawValue;\n      var rgbaComps = c.getComponents('rgb');\n      var leftColor = new IntColor([rgbaComps[0], rgbaComps[1], rgbaComps[2], 0], 'rgb');\n      var rightColor = new IntColor([rgbaComps[0], rgbaComps[1], rgbaComps[2], 255], 'rgb');\n      var gradientComps = ['to right', colorToFunctionalRgbaString(leftColor), colorToFunctionalRgbaString(rightColor)];\n      this.colorElem_.style.background = \"linear-gradient(\".concat(gradientComps.join(','), \")\");\n      this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);\n      var left = mapRange(rgbaComps[3], 0, 1, 0, 100);\n      this.markerElem_.style.left = \"\".concat(left, \"%\");\n    }\n  }, {\n    key: \"onValueChange_\",\n    value: function onValueChange_() {\n      this.update_();\n    }\n  }]);\n  return APaletteView;\n}();\nvar APaletteController = /*#__PURE__*/function () {\n  function APaletteController(doc, config) {\n    _classCallCheck(this, APaletteController);\n    this.onKeyDown_ = this.onKeyDown_.bind(this);\n    this.onKeyUp_ = this.onKeyUp_.bind(this);\n    this.onPointerDown_ = this.onPointerDown_.bind(this);\n    this.onPointerMove_ = this.onPointerMove_.bind(this);\n    this.onPointerUp_ = this.onPointerUp_.bind(this);\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.view = new APaletteView(doc, {\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.ptHandler_ = new PointerHandler(this.view.element);\n    this.ptHandler_.emitter.on('down', this.onPointerDown_);\n    this.ptHandler_.emitter.on('move', this.onPointerMove_);\n    this.ptHandler_.emitter.on('up', this.onPointerUp_);\n    this.view.element.addEventListener('keydown', this.onKeyDown_);\n    this.view.element.addEventListener('keyup', this.onKeyUp_);\n  }\n  _createClass(APaletteController, [{\n    key: \"handlePointerEvent_\",\n    value: function handlePointerEvent_(d, opts) {\n      if (!d.point) {\n        return;\n      }\n      var alpha = d.point.x / d.bounds.width;\n      var c = this.value.rawValue;\n      var _c$getComponents = c.getComponents('hsv'),\n        _c$getComponents2 = _slicedToArray(_c$getComponents, 3),\n        h = _c$getComponents2[0],\n        s = _c$getComponents2[1],\n        v = _c$getComponents2[2];\n      this.value.setRawValue(new IntColor([h, s, v, alpha], 'hsv'), opts);\n    }\n  }, {\n    key: \"onPointerDown_\",\n    value: function onPointerDown_(ev) {\n      this.handlePointerEvent_(ev.data, {\n        forceEmit: false,\n        last: false\n      });\n    }\n  }, {\n    key: \"onPointerMove_\",\n    value: function onPointerMove_(ev) {\n      this.handlePointerEvent_(ev.data, {\n        forceEmit: false,\n        last: false\n      });\n    }\n  }, {\n    key: \"onPointerUp_\",\n    value: function onPointerUp_(ev) {\n      this.handlePointerEvent_(ev.data, {\n        forceEmit: true,\n        last: true\n      });\n    }\n  }, {\n    key: \"onKeyDown_\",\n    value: function onKeyDown_(ev) {\n      var step = getStepForKey(getKeyScaleForColor(true), getHorizontalStepKeys(ev));\n      if (step === 0) {\n        return;\n      }\n      var c = this.value.rawValue;\n      var _c$getComponents3 = c.getComponents('hsv'),\n        _c$getComponents4 = _slicedToArray(_c$getComponents3, 4),\n        h = _c$getComponents4[0],\n        s = _c$getComponents4[1],\n        v = _c$getComponents4[2],\n        a = _c$getComponents4[3];\n      this.value.setRawValue(new IntColor([h, s, v, a + step], 'hsv'), {\n        forceEmit: false,\n        last: false\n      });\n    }\n  }, {\n    key: \"onKeyUp_\",\n    value: function onKeyUp_(ev) {\n      var step = getStepForKey(getKeyScaleForColor(true), getHorizontalStepKeys(ev));\n      if (step === 0) {\n        return;\n      }\n      this.value.setRawValue(this.value.rawValue, {\n        forceEmit: true,\n        last: true\n      });\n    }\n  }]);\n  return APaletteController;\n}();\nvar cn$a = ClassName('coltxt');\nfunction createModeSelectElement(doc) {\n  var selectElem = doc.createElement('select');\n  var items = [{\n    text: 'RGB',\n    value: 'rgb'\n  }, {\n    text: 'HSL',\n    value: 'hsl'\n  }, {\n    text: 'HSV',\n    value: 'hsv'\n  }, {\n    text: 'HEX',\n    value: 'hex'\n  }];\n  selectElem.appendChild(items.reduce(function (frag, item) {\n    var optElem = doc.createElement('option');\n    optElem.textContent = item.text;\n    optElem.value = item.value;\n    frag.appendChild(optElem);\n    return frag;\n  }, doc.createDocumentFragment()));\n  return selectElem;\n}\nvar ColorTextsView = /*#__PURE__*/function () {\n  function ColorTextsView(doc, config) {\n    var _this49 = this;\n    _classCallCheck(this, ColorTextsView);\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$a());\n    config.viewProps.bindClassModifiers(this.element);\n    var modeElem = doc.createElement('div');\n    modeElem.classList.add(cn$a('m'));\n    this.modeElem_ = createModeSelectElement(doc);\n    this.modeElem_.classList.add(cn$a('ms'));\n    modeElem.appendChild(this.modeSelectElement);\n    config.viewProps.bindDisabled(this.modeElem_);\n    var modeMarkerElem = doc.createElement('div');\n    modeMarkerElem.classList.add(cn$a('mm'));\n    modeMarkerElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n    modeElem.appendChild(modeMarkerElem);\n    this.element.appendChild(modeElem);\n    var inputsElem = doc.createElement('div');\n    inputsElem.classList.add(cn$a('w'));\n    this.element.appendChild(inputsElem);\n    this.inputsElem_ = inputsElem;\n    this.inputViews_ = config.inputViews;\n    this.applyInputViews_();\n    bindValue(config.mode, function (mode) {\n      _this49.modeElem_.value = mode;\n    });\n  }\n  _createClass(ColorTextsView, [{\n    key: \"modeSelectElement\",\n    get: function get() {\n      return this.modeElem_;\n    }\n  }, {\n    key: \"inputViews\",\n    get: function get() {\n      return this.inputViews_;\n    },\n    set: function set(inputViews) {\n      this.inputViews_ = inputViews;\n      this.applyInputViews_();\n    }\n  }, {\n    key: \"applyInputViews_\",\n    value: function applyInputViews_() {\n      var _this50 = this;\n      removeChildElements(this.inputsElem_);\n      var doc = this.element.ownerDocument;\n      this.inputViews_.forEach(function (v) {\n        var compElem = doc.createElement('div');\n        compElem.classList.add(cn$a('c'));\n        compElem.appendChild(v.element);\n        _this50.inputsElem_.appendChild(compElem);\n      });\n    }\n  }]);\n  return ColorTextsView;\n}();\nfunction createFormatter$2(type) {\n  return createNumberFormatter(type === 'float' ? 2 : 0);\n}\nfunction createConstraint$5(mode, type, index) {\n  var max = getColorMaxComponents(mode, type)[index];\n  return new DefiniteRangeConstraint({\n    min: 0,\n    max: max\n  });\n}\nfunction createComponentController(doc, config, index) {\n  return new NumberTextController(doc, {\n    arrayPosition: index === 0 ? 'fst' : index === 3 - 1 ? 'lst' : 'mid',\n    parser: config.parser,\n    props: ValueMap.fromObject({\n      formatter: createFormatter$2(config.colorType),\n      keyScale: getKeyScaleForColor(false),\n      pointerScale: config.colorType === 'float' ? 0.01 : 1\n    }),\n    value: createValue(0, {\n      constraint: createConstraint$5(config.colorMode, config.colorType, index)\n    }),\n    viewProps: config.viewProps\n  });\n}\nfunction createComponentControllers(doc, config) {\n  var cc = {\n    colorMode: config.colorMode,\n    colorType: config.colorType,\n    parser: parseNumber,\n    viewProps: config.viewProps\n  };\n  return [0, 1, 2].map(function (i) {\n    var c = createComponentController(doc, cc, i);\n    connectValues({\n      primary: config.value,\n      secondary: c.value,\n      forward: function forward(p) {\n        var mc = mapColorType(p, config.colorType);\n        return mc.getComponents(config.colorMode)[i];\n      },\n      backward: function backward(p, s) {\n        var pickedMode = config.colorMode;\n        var mc = mapColorType(p, config.colorType);\n        var comps = mc.getComponents(pickedMode);\n        comps[i] = s;\n        var c = createColor(appendAlphaComponent(removeAlphaComponent(comps), comps[3]), pickedMode, config.colorType);\n        return mapColorType(c, 'int');\n      }\n    });\n    return c;\n  });\n}\nfunction createHexController(doc, config) {\n  var c = new TextController(doc, {\n    parser: createColorStringParser('int'),\n    props: ValueMap.fromObject({\n      formatter: colorToHexRgbString\n    }),\n    value: createValue(IntColor.black()),\n    viewProps: config.viewProps\n  });\n  connectValues({\n    primary: config.value,\n    secondary: c.value,\n    forward: function forward(p) {\n      return new IntColor(removeAlphaComponent(p.getComponents()), p.mode);\n    },\n    backward: function backward(p, s) {\n      return new IntColor(appendAlphaComponent(removeAlphaComponent(s.getComponents(p.mode)), p.getComponents()[3]), p.mode);\n    }\n  });\n  return [c];\n}\nfunction isColorMode(mode) {\n  return mode !== 'hex';\n}\nvar ColorTextsController = /*#__PURE__*/function () {\n  function ColorTextsController(doc, config) {\n    _classCallCheck(this, ColorTextsController);\n    this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);\n    this.colorType_ = config.colorType;\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.colorMode = createValue(this.value.rawValue.mode);\n    this.ccs_ = this.createComponentControllers_(doc);\n    this.view = new ColorTextsView(doc, {\n      mode: this.colorMode,\n      inputViews: [this.ccs_[0].view, this.ccs_[1].view, this.ccs_[2].view],\n      viewProps: this.viewProps\n    });\n    this.view.modeSelectElement.addEventListener('change', this.onModeSelectChange_);\n  }\n  _createClass(ColorTextsController, [{\n    key: \"createComponentControllers_\",\n    value: function createComponentControllers_(doc) {\n      var mode = this.colorMode.rawValue;\n      if (isColorMode(mode)) {\n        return createComponentControllers(doc, {\n          colorMode: mode,\n          colorType: this.colorType_,\n          value: this.value,\n          viewProps: this.viewProps\n        });\n      }\n      return createHexController(doc, {\n        value: this.value,\n        viewProps: this.viewProps\n      });\n    }\n  }, {\n    key: \"onModeSelectChange_\",\n    value: function onModeSelectChange_(ev) {\n      var selectElem = ev.currentTarget;\n      this.colorMode.rawValue = selectElem.value;\n      this.ccs_ = this.createComponentControllers_(this.view.element.ownerDocument);\n      this.view.inputViews = this.ccs_.map(function (cc) {\n        return cc.view;\n      });\n    }\n  }]);\n  return ColorTextsController;\n}();\nvar cn$9 = ClassName('hpl');\nvar HPaletteView = /*#__PURE__*/function () {\n  function HPaletteView(doc, config) {\n    _classCallCheck(this, HPaletteView);\n    this.onValueChange_ = this.onValueChange_.bind(this);\n    this.value = config.value;\n    this.value.emitter.on('change', this.onValueChange_);\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$9());\n    config.viewProps.bindClassModifiers(this.element);\n    config.viewProps.bindTabIndex(this.element);\n    var colorElem = doc.createElement('div');\n    colorElem.classList.add(cn$9('c'));\n    this.element.appendChild(colorElem);\n    var markerElem = doc.createElement('div');\n    markerElem.classList.add(cn$9('m'));\n    this.element.appendChild(markerElem);\n    this.markerElem_ = markerElem;\n    this.update_();\n  }\n  _createClass(HPaletteView, [{\n    key: \"update_\",\n    value: function update_() {\n      var c = this.value.rawValue;\n      var _c$getComponents5 = c.getComponents('hsv'),\n        _c$getComponents6 = _slicedToArray(_c$getComponents5, 1),\n        h = _c$getComponents6[0];\n      this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new IntColor([h, 100, 100], 'hsv'));\n      var left = mapRange(h, 0, 360, 0, 100);\n      this.markerElem_.style.left = \"\".concat(left, \"%\");\n    }\n  }, {\n    key: \"onValueChange_\",\n    value: function onValueChange_() {\n      this.update_();\n    }\n  }]);\n  return HPaletteView;\n}();\nvar HPaletteController = /*#__PURE__*/function () {\n  function HPaletteController(doc, config) {\n    _classCallCheck(this, HPaletteController);\n    this.onKeyDown_ = this.onKeyDown_.bind(this);\n    this.onKeyUp_ = this.onKeyUp_.bind(this);\n    this.onPointerDown_ = this.onPointerDown_.bind(this);\n    this.onPointerMove_ = this.onPointerMove_.bind(this);\n    this.onPointerUp_ = this.onPointerUp_.bind(this);\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.view = new HPaletteView(doc, {\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.ptHandler_ = new PointerHandler(this.view.element);\n    this.ptHandler_.emitter.on('down', this.onPointerDown_);\n    this.ptHandler_.emitter.on('move', this.onPointerMove_);\n    this.ptHandler_.emitter.on('up', this.onPointerUp_);\n    this.view.element.addEventListener('keydown', this.onKeyDown_);\n    this.view.element.addEventListener('keyup', this.onKeyUp_);\n  }\n  _createClass(HPaletteController, [{\n    key: \"handlePointerEvent_\",\n    value: function handlePointerEvent_(d, opts) {\n      if (!d.point) {\n        return;\n      }\n      var hue = mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, 0, 360);\n      var c = this.value.rawValue;\n      var _c$getComponents7 = c.getComponents('hsv'),\n        _c$getComponents8 = _slicedToArray(_c$getComponents7, 4),\n        s = _c$getComponents8[1],\n        v = _c$getComponents8[2],\n        a = _c$getComponents8[3];\n      this.value.setRawValue(new IntColor([hue, s, v, a], 'hsv'), opts);\n    }\n  }, {\n    key: \"onPointerDown_\",\n    value: function onPointerDown_(ev) {\n      this.handlePointerEvent_(ev.data, {\n        forceEmit: false,\n        last: false\n      });\n    }\n  }, {\n    key: \"onPointerMove_\",\n    value: function onPointerMove_(ev) {\n      this.handlePointerEvent_(ev.data, {\n        forceEmit: false,\n        last: false\n      });\n    }\n  }, {\n    key: \"onPointerUp_\",\n    value: function onPointerUp_(ev) {\n      this.handlePointerEvent_(ev.data, {\n        forceEmit: true,\n        last: true\n      });\n    }\n  }, {\n    key: \"onKeyDown_\",\n    value: function onKeyDown_(ev) {\n      var step = getStepForKey(getKeyScaleForColor(false), getHorizontalStepKeys(ev));\n      if (step === 0) {\n        return;\n      }\n      var c = this.value.rawValue;\n      var _c$getComponents9 = c.getComponents('hsv'),\n        _c$getComponents10 = _slicedToArray(_c$getComponents9, 4),\n        h = _c$getComponents10[0],\n        s = _c$getComponents10[1],\n        v = _c$getComponents10[2],\n        a = _c$getComponents10[3];\n      this.value.setRawValue(new IntColor([h + step, s, v, a], 'hsv'), {\n        forceEmit: false,\n        last: false\n      });\n    }\n  }, {\n    key: \"onKeyUp_\",\n    value: function onKeyUp_(ev) {\n      var step = getStepForKey(getKeyScaleForColor(false), getHorizontalStepKeys(ev));\n      if (step === 0) {\n        return;\n      }\n      this.value.setRawValue(this.value.rawValue, {\n        forceEmit: true,\n        last: true\n      });\n    }\n  }]);\n  return HPaletteController;\n}();\nvar cn$8 = ClassName('svp');\nvar CANVAS_RESOL = 64;\nvar SvPaletteView = /*#__PURE__*/function () {\n  function SvPaletteView(doc, config) {\n    _classCallCheck(this, SvPaletteView);\n    this.onValueChange_ = this.onValueChange_.bind(this);\n    this.value = config.value;\n    this.value.emitter.on('change', this.onValueChange_);\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$8());\n    config.viewProps.bindClassModifiers(this.element);\n    config.viewProps.bindTabIndex(this.element);\n    var canvasElem = doc.createElement('canvas');\n    canvasElem.height = CANVAS_RESOL;\n    canvasElem.width = CANVAS_RESOL;\n    canvasElem.classList.add(cn$8('c'));\n    this.element.appendChild(canvasElem);\n    this.canvasElement = canvasElem;\n    var markerElem = doc.createElement('div');\n    markerElem.classList.add(cn$8('m'));\n    this.element.appendChild(markerElem);\n    this.markerElem_ = markerElem;\n    this.update_();\n  }\n  _createClass(SvPaletteView, [{\n    key: \"update_\",\n    value: function update_() {\n      var ctx = getCanvasContext(this.canvasElement);\n      if (!ctx) {\n        return;\n      }\n      var c = this.value.rawValue;\n      var hsvComps = c.getComponents('hsv');\n      var width = this.canvasElement.width;\n      var height = this.canvasElement.height;\n      var imgData = ctx.getImageData(0, 0, width, height);\n      var data = imgData.data;\n      for (var iy = 0; iy < height; iy++) {\n        for (var ix = 0; ix < width; ix++) {\n          var s = mapRange(ix, 0, width, 0, 100);\n          var v = mapRange(iy, 0, height, 100, 0);\n          var rgbComps = hsvToRgbInt(hsvComps[0], s, v);\n          var i = (iy * width + ix) * 4;\n          data[i] = rgbComps[0];\n          data[i + 1] = rgbComps[1];\n          data[i + 2] = rgbComps[2];\n          data[i + 3] = 255;\n        }\n      }\n      ctx.putImageData(imgData, 0, 0);\n      var left = mapRange(hsvComps[1], 0, 100, 0, 100);\n      this.markerElem_.style.left = \"\".concat(left, \"%\");\n      var top = mapRange(hsvComps[2], 0, 100, 100, 0);\n      this.markerElem_.style.top = \"\".concat(top, \"%\");\n    }\n  }, {\n    key: \"onValueChange_\",\n    value: function onValueChange_() {\n      this.update_();\n    }\n  }]);\n  return SvPaletteView;\n}();\nvar SvPaletteController = /*#__PURE__*/function () {\n  function SvPaletteController(doc, config) {\n    _classCallCheck(this, SvPaletteController);\n    this.onKeyDown_ = this.onKeyDown_.bind(this);\n    this.onKeyUp_ = this.onKeyUp_.bind(this);\n    this.onPointerDown_ = this.onPointerDown_.bind(this);\n    this.onPointerMove_ = this.onPointerMove_.bind(this);\n    this.onPointerUp_ = this.onPointerUp_.bind(this);\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.view = new SvPaletteView(doc, {\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.ptHandler_ = new PointerHandler(this.view.element);\n    this.ptHandler_.emitter.on('down', this.onPointerDown_);\n    this.ptHandler_.emitter.on('move', this.onPointerMove_);\n    this.ptHandler_.emitter.on('up', this.onPointerUp_);\n    this.view.element.addEventListener('keydown', this.onKeyDown_);\n    this.view.element.addEventListener('keyup', this.onKeyUp_);\n  }\n  _createClass(SvPaletteController, [{\n    key: \"handlePointerEvent_\",\n    value: function handlePointerEvent_(d, opts) {\n      if (!d.point) {\n        return;\n      }\n      var saturation = mapRange(d.point.x, 0, d.bounds.width, 0, 100);\n      var value = mapRange(d.point.y, 0, d.bounds.height, 100, 0);\n      var _this$value$rawValue$ = this.value.rawValue.getComponents('hsv'),\n        _this$value$rawValue$2 = _slicedToArray(_this$value$rawValue$, 4),\n        h = _this$value$rawValue$2[0],\n        a = _this$value$rawValue$2[3];\n      this.value.setRawValue(new IntColor([h, saturation, value, a], 'hsv'), opts);\n    }\n  }, {\n    key: \"onPointerDown_\",\n    value: function onPointerDown_(ev) {\n      this.handlePointerEvent_(ev.data, {\n        forceEmit: false,\n        last: false\n      });\n    }\n  }, {\n    key: \"onPointerMove_\",\n    value: function onPointerMove_(ev) {\n      this.handlePointerEvent_(ev.data, {\n        forceEmit: false,\n        last: false\n      });\n    }\n  }, {\n    key: \"onPointerUp_\",\n    value: function onPointerUp_(ev) {\n      this.handlePointerEvent_(ev.data, {\n        forceEmit: true,\n        last: true\n      });\n    }\n  }, {\n    key: \"onKeyDown_\",\n    value: function onKeyDown_(ev) {\n      if (isArrowKey(ev.key)) {\n        ev.preventDefault();\n      }\n      var _this$value$rawValue$3 = this.value.rawValue.getComponents('hsv'),\n        _this$value$rawValue$4 = _slicedToArray(_this$value$rawValue$3, 4),\n        h = _this$value$rawValue$4[0],\n        s = _this$value$rawValue$4[1],\n        v = _this$value$rawValue$4[2],\n        a = _this$value$rawValue$4[3];\n      var keyScale = getKeyScaleForColor(false);\n      var ds = getStepForKey(keyScale, getHorizontalStepKeys(ev));\n      var dv = getStepForKey(keyScale, getVerticalStepKeys(ev));\n      if (ds === 0 && dv === 0) {\n        return;\n      }\n      this.value.setRawValue(new IntColor([h, s + ds, v + dv, a], 'hsv'), {\n        forceEmit: false,\n        last: false\n      });\n    }\n  }, {\n    key: \"onKeyUp_\",\n    value: function onKeyUp_(ev) {\n      var keyScale = getKeyScaleForColor(false);\n      var ds = getStepForKey(keyScale, getHorizontalStepKeys(ev));\n      var dv = getStepForKey(keyScale, getVerticalStepKeys(ev));\n      if (ds === 0 && dv === 0) {\n        return;\n      }\n      this.value.setRawValue(this.value.rawValue, {\n        forceEmit: true,\n        last: true\n      });\n    }\n  }]);\n  return SvPaletteController;\n}();\nvar ColorPickerController = /*#__PURE__*/function () {\n  function ColorPickerController(doc, config) {\n    _classCallCheck(this, ColorPickerController);\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.hPaletteC_ = new HPaletteController(doc, {\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.svPaletteC_ = new SvPaletteController(doc, {\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.alphaIcs_ = config.supportsAlpha ? {\n      palette: new APaletteController(doc, {\n        value: this.value,\n        viewProps: this.viewProps\n      }),\n      text: new NumberTextController(doc, {\n        parser: parseNumber,\n        props: ValueMap.fromObject({\n          pointerScale: 0.01,\n          keyScale: 0.1,\n          formatter: createNumberFormatter(2)\n        }),\n        value: createValue(0, {\n          constraint: new DefiniteRangeConstraint({\n            min: 0,\n            max: 1\n          })\n        }),\n        viewProps: this.viewProps\n      })\n    } : null;\n    if (this.alphaIcs_) {\n      connectValues({\n        primary: this.value,\n        secondary: this.alphaIcs_.text.value,\n        forward: function forward(p) {\n          return p.getComponents()[3];\n        },\n        backward: function backward(p, s) {\n          var comps = p.getComponents();\n          comps[3] = s;\n          return new IntColor(comps, p.mode);\n        }\n      });\n    }\n    this.textsC_ = new ColorTextsController(doc, {\n      colorType: config.colorType,\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.view = new ColorPickerView(doc, {\n      alphaViews: this.alphaIcs_ ? {\n        palette: this.alphaIcs_.palette.view,\n        text: this.alphaIcs_.text.view\n      } : null,\n      hPaletteView: this.hPaletteC_.view,\n      supportsAlpha: config.supportsAlpha,\n      svPaletteView: this.svPaletteC_.view,\n      textsView: this.textsC_.view,\n      viewProps: this.viewProps\n    });\n  }\n  _createClass(ColorPickerController, [{\n    key: \"textsController\",\n    get: function get() {\n      return this.textsC_;\n    }\n  }]);\n  return ColorPickerController;\n}();\nvar cn$7 = ClassName('colsw');\nvar ColorSwatchView = /*#__PURE__*/function () {\n  function ColorSwatchView(doc, config) {\n    _classCallCheck(this, ColorSwatchView);\n    this.onValueChange_ = this.onValueChange_.bind(this);\n    config.value.emitter.on('change', this.onValueChange_);\n    this.value = config.value;\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$7());\n    config.viewProps.bindClassModifiers(this.element);\n    var swatchElem = doc.createElement('div');\n    swatchElem.classList.add(cn$7('sw'));\n    this.element.appendChild(swatchElem);\n    this.swatchElem_ = swatchElem;\n    var buttonElem = doc.createElement('button');\n    buttonElem.classList.add(cn$7('b'));\n    config.viewProps.bindDisabled(buttonElem);\n    this.element.appendChild(buttonElem);\n    this.buttonElement = buttonElem;\n    this.update_();\n  }\n  _createClass(ColorSwatchView, [{\n    key: \"update_\",\n    value: function update_() {\n      var value = this.value.rawValue;\n      this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);\n    }\n  }, {\n    key: \"onValueChange_\",\n    value: function onValueChange_() {\n      this.update_();\n    }\n  }]);\n  return ColorSwatchView;\n}();\nvar ColorSwatchController = /*#__PURE__*/_createClass(function ColorSwatchController(doc, config) {\n  _classCallCheck(this, ColorSwatchController);\n  this.value = config.value;\n  this.viewProps = config.viewProps;\n  this.view = new ColorSwatchView(doc, {\n    value: this.value,\n    viewProps: this.viewProps\n  });\n});\nvar ColorController = /*#__PURE__*/function () {\n  function ColorController(doc, config) {\n    var _this51 = this;\n    _classCallCheck(this, ColorController);\n    this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n    this.onButtonClick_ = this.onButtonClick_.bind(this);\n    this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n    this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.foldable_ = Foldable.create(config.expanded);\n    this.swatchC_ = new ColorSwatchController(doc, {\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    var buttonElem = this.swatchC_.view.buttonElement;\n    buttonElem.addEventListener('blur', this.onButtonBlur_);\n    buttonElem.addEventListener('click', this.onButtonClick_);\n    this.textC_ = new TextController(doc, {\n      parser: config.parser,\n      props: ValueMap.fromObject({\n        formatter: config.formatter\n      }),\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.view = new ColorView(doc, {\n      foldable: this.foldable_,\n      pickerLayout: config.pickerLayout\n    });\n    this.view.swatchElement.appendChild(this.swatchC_.view.element);\n    this.view.textElement.appendChild(this.textC_.view.element);\n    this.popC_ = config.pickerLayout === 'popup' ? new PopupController(doc, {\n      viewProps: this.viewProps\n    }) : null;\n    var pickerC = new ColorPickerController(doc, {\n      colorType: config.colorType,\n      supportsAlpha: config.supportsAlpha,\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    pickerC.view.allFocusableElements.forEach(function (elem) {\n      elem.addEventListener('blur', _this51.onPopupChildBlur_);\n      elem.addEventListener('keydown', _this51.onPopupChildKeydown_);\n    });\n    this.pickerC_ = pickerC;\n    if (this.popC_) {\n      this.view.element.appendChild(this.popC_.view.element);\n      this.popC_.view.element.appendChild(pickerC.view.element);\n      connectValues({\n        primary: this.foldable_.value('expanded'),\n        secondary: this.popC_.shows,\n        forward: function forward(p) {\n          return p;\n        },\n        backward: function backward(_, s) {\n          return s;\n        }\n      });\n    } else if (this.view.pickerElement) {\n      this.view.pickerElement.appendChild(this.pickerC_.view.element);\n      bindFoldable(this.foldable_, this.view.pickerElement);\n    }\n  }\n  _createClass(ColorController, [{\n    key: \"textController\",\n    get: function get() {\n      return this.textC_;\n    }\n  }, {\n    key: \"onButtonBlur_\",\n    value: function onButtonBlur_(e) {\n      if (!this.popC_) {\n        return;\n      }\n      var elem = this.view.element;\n      var nextTarget = forceCast(e.relatedTarget);\n      if (!nextTarget || !elem.contains(nextTarget)) {\n        this.popC_.shows.rawValue = false;\n      }\n    }\n  }, {\n    key: \"onButtonClick_\",\n    value: function onButtonClick_() {\n      this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n      if (this.foldable_.get('expanded')) {\n        this.pickerC_.view.allFocusableElements[0].focus();\n      }\n    }\n  }, {\n    key: \"onPopupChildBlur_\",\n    value: function onPopupChildBlur_(ev) {\n      if (!this.popC_) {\n        return;\n      }\n      var elem = this.popC_.view.element;\n      var nextTarget = findNextTarget(ev);\n      if (nextTarget && elem.contains(nextTarget)) {\n        return;\n      }\n      if (nextTarget && nextTarget === this.swatchC_.view.buttonElement && !supportsTouch(elem.ownerDocument)) {\n        return;\n      }\n      this.popC_.shows.rawValue = false;\n    }\n  }, {\n    key: \"onPopupChildKeydown_\",\n    value: function onPopupChildKeydown_(ev) {\n      if (this.popC_) {\n        if (ev.key === 'Escape') {\n          this.popC_.shows.rawValue = false;\n        }\n      } else if (this.view.pickerElement) {\n        if (ev.key === 'Escape') {\n          this.swatchC_.view.buttonElement.focus();\n        }\n      }\n    }\n  }]);\n  return ColorController;\n}();\nfunction colorToRgbNumber(value) {\n  return removeAlphaComponent(value.getComponents('rgb')).reduce(function (result, comp) {\n    return result << 8 | Math.floor(comp) & 0xff;\n  }, 0);\n}\nfunction colorToRgbaNumber(value) {\n  return value.getComponents('rgb').reduce(function (result, comp, index) {\n    var hex = Math.floor(index === 3 ? comp * 255 : comp) & 0xff;\n    return result << 8 | hex;\n  }, 0) >>> 0;\n}\nfunction numberToRgbColor(num) {\n  return new IntColor([num >> 16 & 0xff, num >> 8 & 0xff, num & 0xff], 'rgb');\n}\nfunction numberToRgbaColor(num) {\n  return new IntColor([num >> 24 & 0xff, num >> 16 & 0xff, num >> 8 & 0xff, mapRange(num & 0xff, 0, 255, 0, 1)], 'rgb');\n}\nfunction colorFromRgbNumber(value) {\n  if (typeof value !== 'number') {\n    return IntColor.black();\n  }\n  return numberToRgbColor(value);\n}\nfunction colorFromRgbaNumber(value) {\n  if (typeof value !== 'number') {\n    return IntColor.black();\n  }\n  return numberToRgbaColor(value);\n}\nfunction isRgbColorComponent(obj, key) {\n  if (typeof obj !== 'object' || isEmpty(obj)) {\n    return false;\n  }\n  return key in obj && typeof obj[key] === 'number';\n}\nfunction isRgbColorObject(obj) {\n  return isRgbColorComponent(obj, 'r') && isRgbColorComponent(obj, 'g') && isRgbColorComponent(obj, 'b');\n}\nfunction isRgbaColorObject(obj) {\n  return isRgbColorObject(obj) && isRgbColorComponent(obj, 'a');\n}\nfunction isColorObject(obj) {\n  return isRgbColorObject(obj);\n}\nfunction equalsColor(v1, v2) {\n  if (v1.mode !== v2.mode) {\n    return false;\n  }\n  if (v1.type !== v2.type) {\n    return false;\n  }\n  var comps1 = v1.getComponents();\n  var comps2 = v2.getComponents();\n  for (var i = 0; i < comps1.length; i++) {\n    if (comps1[i] !== comps2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction createColorComponentsFromRgbObject(obj) {\n  return 'a' in obj ? [obj.r, obj.g, obj.b, obj.a] : [obj.r, obj.g, obj.b];\n}\nfunction createColorStringWriter(format) {\n  var stringify = findColorStringifier(format);\n  return stringify ? function (target, value) {\n    writePrimitive(target, stringify(value));\n  } : null;\n}\nfunction createColorNumberWriter(supportsAlpha) {\n  var colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;\n  return function (target, value) {\n    writePrimitive(target, colorToNumber(value));\n  };\n}\nfunction writeRgbaColorObject(target, value, type) {\n  var cc = mapColorType(value, type);\n  var obj = cc.toRgbaObject();\n  target.writeProperty('r', obj.r);\n  target.writeProperty('g', obj.g);\n  target.writeProperty('b', obj.b);\n  target.writeProperty('a', obj.a);\n}\nfunction writeRgbColorObject(target, value, type) {\n  var cc = mapColorType(value, type);\n  var obj = cc.toRgbaObject();\n  target.writeProperty('r', obj.r);\n  target.writeProperty('g', obj.g);\n  target.writeProperty('b', obj.b);\n}\nfunction createColorObjectWriter(supportsAlpha, type) {\n  return function (target, inValue) {\n    if (supportsAlpha) {\n      writeRgbaColorObject(target, inValue, type);\n    } else {\n      writeRgbColorObject(target, inValue, type);\n    }\n  };\n}\nfunction shouldSupportAlpha$1(inputParams) {\n  var _a;\n  if ((_a = inputParams === null || inputParams === void 0 ? void 0 : inputParams.color) === null || _a === void 0 ? void 0 : _a.alpha) {\n    return true;\n  }\n  return false;\n}\nfunction createFormatter$1(supportsAlpha) {\n  return supportsAlpha ? function (v) {\n    return colorToHexRgbaString(v, '0x');\n  } : function (v) {\n    return colorToHexRgbString(v, '0x');\n  };\n}\nfunction isForColor(params) {\n  if ('color' in params) {\n    return true;\n  }\n  if (params.view === 'color') {\n    return true;\n  }\n  return false;\n}\nvar NumberColorInputPlugin = createPlugin({\n  id: 'input-color-number',\n  type: 'input',\n  accept: function accept(value, params) {\n    if (typeof value !== 'number') {\n      return null;\n    }\n    if (!isForColor(params)) {\n      return null;\n    }\n    var result = parseColorInputParams(params);\n    return result ? {\n      initialValue: value,\n      params: Object.assign(Object.assign({}, result), {\n        supportsAlpha: shouldSupportAlpha$1(params)\n      })\n    } : null;\n  },\n  binding: {\n    reader: function reader(args) {\n      return args.params.supportsAlpha ? colorFromRgbaNumber : colorFromRgbNumber;\n    },\n    equals: equalsColor,\n    writer: function writer(args) {\n      return createColorNumberWriter(args.params.supportsAlpha);\n    }\n  },\n  controller: function controller(args) {\n    var _a, _b;\n    return new ColorController(args.document, {\n      colorType: 'int',\n      expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n      formatter: createFormatter$1(args.params.supportsAlpha),\n      parser: createColorStringParser('int'),\n      pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n      supportsAlpha: args.params.supportsAlpha,\n      value: args.value,\n      viewProps: args.viewProps\n    });\n  }\n});\nfunction colorFromObject(value, type) {\n  if (!isColorObject(value)) {\n    return mapColorType(IntColor.black(), type);\n  }\n  if (type === 'int') {\n    var comps = createColorComponentsFromRgbObject(value);\n    return new IntColor(comps, 'rgb');\n  }\n  if (type === 'float') {\n    var _comps = createColorComponentsFromRgbObject(value);\n    return new FloatColor(_comps, 'rgb');\n  }\n  return mapColorType(IntColor.black(), 'int');\n}\nfunction shouldSupportAlpha(initialValue) {\n  return isRgbaColorObject(initialValue);\n}\nfunction createColorObjectBindingReader(type) {\n  return function (value) {\n    var c = colorFromObject(value, type);\n    return mapColorType(c, 'int');\n  };\n}\nfunction createColorObjectFormatter(supportsAlpha, type) {\n  return function (value) {\n    if (supportsAlpha) {\n      return colorToObjectRgbaString(value, type);\n    }\n    return colorToObjectRgbString(value, type);\n  };\n}\nvar ObjectColorInputPlugin = createPlugin({\n  id: 'input-color-object',\n  type: 'input',\n  accept: function accept(value, params) {\n    var _a;\n    if (!isColorObject(value)) {\n      return null;\n    }\n    var result = parseColorInputParams(params);\n    return result ? {\n      initialValue: value,\n      params: Object.assign(Object.assign({}, result), {\n        colorType: (_a = extractColorType(params)) !== null && _a !== void 0 ? _a : 'int'\n      })\n    } : null;\n  },\n  binding: {\n    reader: function reader(args) {\n      return createColorObjectBindingReader(args.params.colorType);\n    },\n    equals: equalsColor,\n    writer: function writer(args) {\n      return createColorObjectWriter(shouldSupportAlpha(args.initialValue), args.params.colorType);\n    }\n  },\n  controller: function controller(args) {\n    var _a, _b;\n    var supportsAlpha = isRgbaColorObject(args.initialValue);\n    return new ColorController(args.document, {\n      colorType: args.params.colorType,\n      expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n      formatter: createColorObjectFormatter(supportsAlpha, args.params.colorType),\n      parser: createColorStringParser('int'),\n      pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n      supportsAlpha: supportsAlpha,\n      value: args.value,\n      viewProps: args.viewProps\n    });\n  }\n});\nvar StringColorInputPlugin = createPlugin({\n  id: 'input-color-string',\n  type: 'input',\n  accept: function accept(value, params) {\n    if (typeof value !== 'string') {\n      return null;\n    }\n    if (params.view === 'text') {\n      return null;\n    }\n    var format = detectStringColorFormat(value, extractColorType(params));\n    if (!format) {\n      return null;\n    }\n    var stringifier = findColorStringifier(format);\n    if (!stringifier) {\n      return null;\n    }\n    var result = parseColorInputParams(params);\n    return result ? {\n      initialValue: value,\n      params: Object.assign(Object.assign({}, result), {\n        format: format,\n        stringifier: stringifier\n      })\n    } : null;\n  },\n  binding: {\n    reader: function reader() {\n      return readIntColorString;\n    },\n    equals: equalsColor,\n    writer: function writer(args) {\n      var writer = createColorStringWriter(args.params.format);\n      if (!writer) {\n        throw TpError.notBindable();\n      }\n      return writer;\n    }\n  },\n  controller: function controller(args) {\n    var _a, _b;\n    return new ColorController(args.document, {\n      colorType: args.params.format.type,\n      expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n      formatter: args.params.stringifier,\n      parser: createColorStringParser('int'),\n      pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n      supportsAlpha: args.params.format.alpha,\n      value: args.value,\n      viewProps: args.viewProps\n    });\n  }\n});\nvar PointNdConstraint = /*#__PURE__*/function () {\n  function PointNdConstraint(config) {\n    _classCallCheck(this, PointNdConstraint);\n    this.components = config.components;\n    this.asm_ = config.assembly;\n  }\n  _createClass(PointNdConstraint, [{\n    key: \"constrain\",\n    value: function constrain(value) {\n      var _this52 = this;\n      var comps = this.asm_.toComponents(value).map(function (comp, index) {\n        var _a, _b;\n        return (_b = (_a = _this52.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp;\n      });\n      return this.asm_.fromComponents(comps);\n    }\n  }]);\n  return PointNdConstraint;\n}();\nvar cn$6 = ClassName('pndtxt');\nvar PointNdTextView = /*#__PURE__*/_createClass(function PointNdTextView(doc, config) {\n  var _this53 = this;\n  _classCallCheck(this, PointNdTextView);\n  this.textViews = config.textViews;\n  this.element = doc.createElement('div');\n  this.element.classList.add(cn$6());\n  this.textViews.forEach(function (v) {\n    var axisElem = doc.createElement('div');\n    axisElem.classList.add(cn$6('a'));\n    axisElem.appendChild(v.element);\n    _this53.element.appendChild(axisElem);\n  });\n});\nfunction createAxisController(doc, config, index) {\n  return new NumberTextController(doc, {\n    arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\n    parser: config.parser,\n    props: config.axes[index].textProps,\n    value: createValue(0, {\n      constraint: config.axes[index].constraint\n    }),\n    viewProps: config.viewProps\n  });\n}\nvar PointNdTextController = /*#__PURE__*/function () {\n  function PointNdTextController(doc, config) {\n    var _this54 = this;\n    _classCallCheck(this, PointNdTextController);\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.acs_ = config.axes.map(function (_, index) {\n      return createAxisController(doc, config, index);\n    });\n    this.acs_.forEach(function (c, index) {\n      connectValues({\n        primary: _this54.value,\n        secondary: c.value,\n        forward: function forward(p) {\n          return config.assembly.toComponents(p)[index];\n        },\n        backward: function backward(p, s) {\n          var comps = config.assembly.toComponents(p);\n          comps[index] = s;\n          return config.assembly.fromComponents(comps);\n        }\n      });\n    });\n    this.view = new PointNdTextView(doc, {\n      textViews: this.acs_.map(function (ac) {\n        return ac.view;\n      })\n    });\n  }\n  _createClass(PointNdTextController, [{\n    key: \"textControllers\",\n    get: function get() {\n      return this.acs_;\n    }\n  }]);\n  return PointNdTextController;\n}();\nvar SliderInputBindingApi = /*#__PURE__*/function (_BindingApi2) {\n  _inherits(SliderInputBindingApi, _BindingApi2);\n  var _super22 = _createSuper(SliderInputBindingApi);\n  function SliderInputBindingApi() {\n    _classCallCheck(this, SliderInputBindingApi);\n    return _super22.apply(this, arguments);\n  }\n  _createClass(SliderInputBindingApi, [{\n    key: \"max\",\n    get: function get() {\n      return this.controller.valueController.sliderController.props.get('max');\n    },\n    set: function set(max) {\n      this.controller.valueController.sliderController.props.set('max', max);\n    }\n  }, {\n    key: \"min\",\n    get: function get() {\n      return this.controller.valueController.sliderController.props.get('min');\n    },\n    set: function set(max) {\n      this.controller.valueController.sliderController.props.set('min', max);\n    }\n  }]);\n  return SliderInputBindingApi;\n}(BindingApi);\nfunction createConstraint$4(params, initialValue) {\n  var constraints = [];\n  var sc = createStepConstraint(params, initialValue);\n  if (sc) {\n    constraints.push(sc);\n  }\n  var rc = createRangeConstraint(params);\n  if (rc) {\n    constraints.push(rc);\n  }\n  var lc = createListConstraint(params.options);\n  if (lc) {\n    constraints.push(lc);\n  }\n  return new CompositeConstraint(constraints);\n}\nvar NumberInputPlugin = createPlugin({\n  id: 'input-number',\n  type: 'input',\n  accept: function accept(value, params) {\n    if (typeof value !== 'number') {\n      return null;\n    }\n    var result = parseRecord(params, function (p) {\n      return Object.assign(Object.assign({}, createNumberTextInputParamsParser(p)), {\n        options: p.optional.custom(parseListOptions),\n        readonly: p.optional.constant(false)\n      });\n    });\n    return result ? {\n      initialValue: value,\n      params: result\n    } : null;\n  },\n  binding: {\n    reader: function reader(_args) {\n      return numberFromUnknown;\n    },\n    constraint: function constraint(args) {\n      return createConstraint$4(args.params, args.initialValue);\n    },\n    writer: function writer(_args) {\n      return writePrimitive;\n    }\n  },\n  controller: function controller(args) {\n    var value = args.value;\n    var c = args.constraint;\n    var lc = c && findConstraint(c, ListConstraint);\n    if (lc) {\n      return new ListController(args.document, {\n        props: new ValueMap({\n          options: lc.values.value('options')\n        }),\n        value: value,\n        viewProps: args.viewProps\n      });\n    }\n    var textPropsObj = createNumberTextPropsObject(args.params, value.rawValue);\n    var drc = c && findConstraint(c, DefiniteRangeConstraint);\n    if (drc) {\n      return new SliderTextController(args.document, Object.assign(Object.assign({}, createSliderTextProps(Object.assign(Object.assign({}, textPropsObj), {\n        keyScale: createValue(textPropsObj.keyScale),\n        max: drc.values.value('max'),\n        min: drc.values.value('min')\n      }))), {\n        parser: parseNumber,\n        value: value,\n        viewProps: args.viewProps\n      }));\n    }\n    return new NumberTextController(args.document, {\n      parser: parseNumber,\n      props: ValueMap.fromObject(textPropsObj),\n      value: value,\n      viewProps: args.viewProps\n    });\n  },\n  api: function api(args) {\n    if (typeof args.controller.value.rawValue !== 'number') {\n      return null;\n    }\n    if (args.controller.valueController instanceof SliderTextController) {\n      return new SliderInputBindingApi(args.controller);\n    }\n    if (args.controller.valueController instanceof ListController) {\n      return new ListInputBindingApi(args.controller);\n    }\n    return null;\n  }\n});\nvar Point2d = /*#__PURE__*/function () {\n  function Point2d() {\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    _classCallCheck(this, Point2d);\n    this.x = x;\n    this.y = y;\n  }\n  _createClass(Point2d, [{\n    key: \"getComponents\",\n    value: function getComponents() {\n      return [this.x, this.y];\n    }\n  }, {\n    key: \"toObject\",\n    value: function toObject() {\n      return {\n        x: this.x,\n        y: this.y\n      };\n    }\n  }], [{\n    key: \"isObject\",\n    value: function isObject(obj) {\n      if (isEmpty(obj)) {\n        return false;\n      }\n      var x = obj.x;\n      var y = obj.y;\n      if (typeof x !== 'number' || typeof y !== 'number') {\n        return false;\n      }\n      return true;\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(v1, v2) {\n      return v1.x === v2.x && v1.y === v2.y;\n    }\n  }]);\n  return Point2d;\n}();\nvar Point2dAssembly = {\n  toComponents: function toComponents(p) {\n    return p.getComponents();\n  },\n  fromComponents: function fromComponents(comps) {\n    return _construct(Point2d, _toConsumableArray(comps));\n  }\n};\nvar cn$5 = ClassName('p2d');\nvar Point2dView = /*#__PURE__*/_createClass(function Point2dView(doc, config) {\n  _classCallCheck(this, Point2dView);\n  this.element = doc.createElement('div');\n  this.element.classList.add(cn$5());\n  config.viewProps.bindClassModifiers(this.element);\n  bindValue(config.expanded, valueToClassName(this.element, cn$5(undefined, 'expanded')));\n  var headElem = doc.createElement('div');\n  headElem.classList.add(cn$5('h'));\n  this.element.appendChild(headElem);\n  var buttonElem = doc.createElement('button');\n  buttonElem.classList.add(cn$5('b'));\n  buttonElem.appendChild(createSvgIconElement(doc, 'p2dpad'));\n  config.viewProps.bindDisabled(buttonElem);\n  headElem.appendChild(buttonElem);\n  this.buttonElement = buttonElem;\n  var textElem = doc.createElement('div');\n  textElem.classList.add(cn$5('t'));\n  headElem.appendChild(textElem);\n  this.textElement = textElem;\n  if (config.pickerLayout === 'inline') {\n    var pickerElem = doc.createElement('div');\n    pickerElem.classList.add(cn$5('p'));\n    this.element.appendChild(pickerElem);\n    this.pickerElement = pickerElem;\n  } else {\n    this.pickerElement = null;\n  }\n});\nvar cn$4 = ClassName('p2dp');\nvar Point2dPickerView = /*#__PURE__*/function () {\n  function Point2dPickerView(doc, config) {\n    _classCallCheck(this, Point2dPickerView);\n    this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n    this.onPropsChange_ = this.onPropsChange_.bind(this);\n    this.onValueChange_ = this.onValueChange_.bind(this);\n    this.props_ = config.props;\n    this.props_.emitter.on('change', this.onPropsChange_);\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$4());\n    if (config.layout === 'popup') {\n      this.element.classList.add(cn$4(undefined, 'p'));\n    }\n    config.viewProps.bindClassModifiers(this.element);\n    var padElem = doc.createElement('div');\n    padElem.classList.add(cn$4('p'));\n    config.viewProps.bindTabIndex(padElem);\n    this.element.appendChild(padElem);\n    this.padElement = padElem;\n    var svgElem = doc.createElementNS(SVG_NS, 'svg');\n    svgElem.classList.add(cn$4('g'));\n    this.padElement.appendChild(svgElem);\n    this.svgElem_ = svgElem;\n    var xAxisElem = doc.createElementNS(SVG_NS, 'line');\n    xAxisElem.classList.add(cn$4('ax'));\n    xAxisElem.setAttributeNS(null, 'x1', '0');\n    xAxisElem.setAttributeNS(null, 'y1', '50%');\n    xAxisElem.setAttributeNS(null, 'x2', '100%');\n    xAxisElem.setAttributeNS(null, 'y2', '50%');\n    this.svgElem_.appendChild(xAxisElem);\n    var yAxisElem = doc.createElementNS(SVG_NS, 'line');\n    yAxisElem.classList.add(cn$4('ax'));\n    yAxisElem.setAttributeNS(null, 'x1', '50%');\n    yAxisElem.setAttributeNS(null, 'y1', '0');\n    yAxisElem.setAttributeNS(null, 'x2', '50%');\n    yAxisElem.setAttributeNS(null, 'y2', '100%');\n    this.svgElem_.appendChild(yAxisElem);\n    var lineElem = doc.createElementNS(SVG_NS, 'line');\n    lineElem.classList.add(cn$4('l'));\n    lineElem.setAttributeNS(null, 'x1', '50%');\n    lineElem.setAttributeNS(null, 'y1', '50%');\n    this.svgElem_.appendChild(lineElem);\n    this.lineElem_ = lineElem;\n    var markerElem = doc.createElement('div');\n    markerElem.classList.add(cn$4('m'));\n    this.padElement.appendChild(markerElem);\n    this.markerElem_ = markerElem;\n    config.value.emitter.on('change', this.onValueChange_);\n    this.value = config.value;\n    this.update_();\n  }\n  _createClass(Point2dPickerView, [{\n    key: \"allFocusableElements\",\n    get: function get() {\n      return [this.padElement];\n    }\n  }, {\n    key: \"update_\",\n    value: function update_() {\n      var _this$value$rawValue$5 = this.value.rawValue.getComponents(),\n        _this$value$rawValue$6 = _slicedToArray(_this$value$rawValue$5, 2),\n        x = _this$value$rawValue$6[0],\n        y = _this$value$rawValue$6[1];\n      var max = this.props_.get('max');\n      var px = mapRange(x, -max, +max, 0, 100);\n      var py = mapRange(y, -max, +max, 0, 100);\n      var ipy = this.props_.get('invertsY') ? 100 - py : py;\n      this.lineElem_.setAttributeNS(null, 'x2', \"\".concat(px, \"%\"));\n      this.lineElem_.setAttributeNS(null, 'y2', \"\".concat(ipy, \"%\"));\n      this.markerElem_.style.left = \"\".concat(px, \"%\");\n      this.markerElem_.style.top = \"\".concat(ipy, \"%\");\n    }\n  }, {\n    key: \"onValueChange_\",\n    value: function onValueChange_() {\n      this.update_();\n    }\n  }, {\n    key: \"onPropsChange_\",\n    value: function onPropsChange_() {\n      this.update_();\n    }\n  }, {\n    key: \"onFoldableChange_\",\n    value: function onFoldableChange_() {\n      this.update_();\n    }\n  }]);\n  return Point2dPickerView;\n}();\nfunction computeOffset(ev, keyScales, invertsY) {\n  return [getStepForKey(keyScales[0], getHorizontalStepKeys(ev)), getStepForKey(keyScales[1], getVerticalStepKeys(ev)) * (invertsY ? 1 : -1)];\n}\nvar Point2dPickerController = /*#__PURE__*/function () {\n  function Point2dPickerController(doc, config) {\n    _classCallCheck(this, Point2dPickerController);\n    this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\n    this.onPadKeyUp_ = this.onPadKeyUp_.bind(this);\n    this.onPointerDown_ = this.onPointerDown_.bind(this);\n    this.onPointerMove_ = this.onPointerMove_.bind(this);\n    this.onPointerUp_ = this.onPointerUp_.bind(this);\n    this.props = config.props;\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.view = new Point2dPickerView(doc, {\n      layout: config.layout,\n      props: this.props,\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.ptHandler_ = new PointerHandler(this.view.padElement);\n    this.ptHandler_.emitter.on('down', this.onPointerDown_);\n    this.ptHandler_.emitter.on('move', this.onPointerMove_);\n    this.ptHandler_.emitter.on('up', this.onPointerUp_);\n    this.view.padElement.addEventListener('keydown', this.onPadKeyDown_);\n    this.view.padElement.addEventListener('keyup', this.onPadKeyUp_);\n  }\n  _createClass(Point2dPickerController, [{\n    key: \"handlePointerEvent_\",\n    value: function handlePointerEvent_(d, opts) {\n      if (!d.point) {\n        return;\n      }\n      var max = this.props.get('max');\n      var px = mapRange(d.point.x, 0, d.bounds.width, -max, +max);\n      var py = mapRange(this.props.get('invertsY') ? d.bounds.height - d.point.y : d.point.y, 0, d.bounds.height, -max, +max);\n      this.value.setRawValue(new Point2d(px, py), opts);\n    }\n  }, {\n    key: \"onPointerDown_\",\n    value: function onPointerDown_(ev) {\n      this.handlePointerEvent_(ev.data, {\n        forceEmit: false,\n        last: false\n      });\n    }\n  }, {\n    key: \"onPointerMove_\",\n    value: function onPointerMove_(ev) {\n      this.handlePointerEvent_(ev.data, {\n        forceEmit: false,\n        last: false\n      });\n    }\n  }, {\n    key: \"onPointerUp_\",\n    value: function onPointerUp_(ev) {\n      this.handlePointerEvent_(ev.data, {\n        forceEmit: true,\n        last: true\n      });\n    }\n  }, {\n    key: \"onPadKeyDown_\",\n    value: function onPadKeyDown_(ev) {\n      if (isArrowKey(ev.key)) {\n        ev.preventDefault();\n      }\n      var _computeOffset = computeOffset(ev, [this.props.get('xKeyScale'), this.props.get('yKeyScale')], this.props.get('invertsY')),\n        _computeOffset2 = _slicedToArray(_computeOffset, 2),\n        dx = _computeOffset2[0],\n        dy = _computeOffset2[1];\n      if (dx === 0 && dy === 0) {\n        return;\n      }\n      this.value.setRawValue(new Point2d(this.value.rawValue.x + dx, this.value.rawValue.y + dy), {\n        forceEmit: false,\n        last: false\n      });\n    }\n  }, {\n    key: \"onPadKeyUp_\",\n    value: function onPadKeyUp_(ev) {\n      var _computeOffset3 = computeOffset(ev, [this.props.get('xKeyScale'), this.props.get('yKeyScale')], this.props.get('invertsY')),\n        _computeOffset4 = _slicedToArray(_computeOffset3, 2),\n        dx = _computeOffset4[0],\n        dy = _computeOffset4[1];\n      if (dx === 0 && dy === 0) {\n        return;\n      }\n      this.value.setRawValue(this.value.rawValue, {\n        forceEmit: true,\n        last: true\n      });\n    }\n  }]);\n  return Point2dPickerController;\n}();\nvar Point2dController = /*#__PURE__*/function () {\n  function Point2dController(doc, config) {\n    var _this55 = this;\n    _classCallCheck(this, Point2dController);\n    var _a, _b;\n    this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n    this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n    this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);\n    this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.foldable_ = Foldable.create(config.expanded);\n    this.popC_ = config.pickerLayout === 'popup' ? new PopupController(doc, {\n      viewProps: this.viewProps\n    }) : null;\n    var padC = new Point2dPickerController(doc, {\n      layout: config.pickerLayout,\n      props: new ValueMap({\n        invertsY: createValue(config.invertsY),\n        max: createValue(config.max),\n        xKeyScale: config.axes[0].textProps.value('keyScale'),\n        yKeyScale: config.axes[1].textProps.value('keyScale')\n      }),\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    padC.view.allFocusableElements.forEach(function (elem) {\n      elem.addEventListener('blur', _this55.onPopupChildBlur_);\n      elem.addEventListener('keydown', _this55.onPopupChildKeydown_);\n    });\n    this.pickerC_ = padC;\n    this.textC_ = new PointNdTextController(doc, {\n      assembly: Point2dAssembly,\n      axes: config.axes,\n      parser: config.parser,\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    this.view = new Point2dView(doc, {\n      expanded: this.foldable_.value('expanded'),\n      pickerLayout: config.pickerLayout,\n      viewProps: this.viewProps\n    });\n    this.view.textElement.appendChild(this.textC_.view.element);\n    (_a = this.view.buttonElement) === null || _a === void 0 ? void 0 : _a.addEventListener('blur', this.onPadButtonBlur_);\n    (_b = this.view.buttonElement) === null || _b === void 0 ? void 0 : _b.addEventListener('click', this.onPadButtonClick_);\n    if (this.popC_) {\n      this.view.element.appendChild(this.popC_.view.element);\n      this.popC_.view.element.appendChild(this.pickerC_.view.element);\n      connectValues({\n        primary: this.foldable_.value('expanded'),\n        secondary: this.popC_.shows,\n        forward: function forward(p) {\n          return p;\n        },\n        backward: function backward(_, s) {\n          return s;\n        }\n      });\n    } else if (this.view.pickerElement) {\n      this.view.pickerElement.appendChild(this.pickerC_.view.element);\n      bindFoldable(this.foldable_, this.view.pickerElement);\n    }\n  }\n  _createClass(Point2dController, [{\n    key: \"textController\",\n    get: function get() {\n      return this.textC_;\n    }\n  }, {\n    key: \"onPadButtonBlur_\",\n    value: function onPadButtonBlur_(e) {\n      if (!this.popC_) {\n        return;\n      }\n      var elem = this.view.element;\n      var nextTarget = forceCast(e.relatedTarget);\n      if (!nextTarget || !elem.contains(nextTarget)) {\n        this.popC_.shows.rawValue = false;\n      }\n    }\n  }, {\n    key: \"onPadButtonClick_\",\n    value: function onPadButtonClick_() {\n      this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n      if (this.foldable_.get('expanded')) {\n        this.pickerC_.view.allFocusableElements[0].focus();\n      }\n    }\n  }, {\n    key: \"onPopupChildBlur_\",\n    value: function onPopupChildBlur_(ev) {\n      if (!this.popC_) {\n        return;\n      }\n      var elem = this.popC_.view.element;\n      var nextTarget = findNextTarget(ev);\n      if (nextTarget && elem.contains(nextTarget)) {\n        return;\n      }\n      if (nextTarget && nextTarget === this.view.buttonElement && !supportsTouch(elem.ownerDocument)) {\n        return;\n      }\n      this.popC_.shows.rawValue = false;\n    }\n  }, {\n    key: \"onPopupChildKeydown_\",\n    value: function onPopupChildKeydown_(ev) {\n      if (this.popC_) {\n        if (ev.key === 'Escape') {\n          this.popC_.shows.rawValue = false;\n        }\n      } else if (this.view.pickerElement) {\n        if (ev.key === 'Escape') {\n          this.view.buttonElement.focus();\n        }\n      }\n    }\n  }]);\n  return Point2dController;\n}();\nfunction point2dFromUnknown(value) {\n  return Point2d.isObject(value) ? new Point2d(value.x, value.y) : new Point2d();\n}\nfunction writePoint2d(target, value) {\n  target.writeProperty('x', value.x);\n  target.writeProperty('y', value.y);\n}\nfunction createConstraint$3(params, initialValue) {\n  return new PointNdConstraint({\n    assembly: Point2dAssembly,\n    components: [createDimensionConstraint(Object.assign(Object.assign({}, params), params.x), initialValue.x), createDimensionConstraint(Object.assign(Object.assign({}, params), params.y), initialValue.y)]\n  });\n}\nfunction getSuitableMaxDimensionValue(params, rawValue) {\n  var _a, _b;\n  if (!isEmpty(params.min) || !isEmpty(params.max)) {\n    return Math.max(Math.abs((_a = params.min) !== null && _a !== void 0 ? _a : 0), Math.abs((_b = params.max) !== null && _b !== void 0 ? _b : 0));\n  }\n  var step = getSuitableKeyScale(params);\n  return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);\n}\nfunction getSuitableMax(params, initialValue) {\n  var _a, _b;\n  var xr = getSuitableMaxDimensionValue(deepMerge(params, (_a = params.x) !== null && _a !== void 0 ? _a : {}), initialValue.x);\n  var yr = getSuitableMaxDimensionValue(deepMerge(params, (_b = params.y) !== null && _b !== void 0 ? _b : {}), initialValue.y);\n  return Math.max(xr, yr);\n}\nfunction shouldInvertY(params) {\n  if (!('y' in params)) {\n    return false;\n  }\n  var yParams = params.y;\n  if (!yParams) {\n    return false;\n  }\n  return 'inverted' in yParams ? !!yParams.inverted : false;\n}\nvar Point2dInputPlugin = createPlugin({\n  id: 'input-point2d',\n  type: 'input',\n  accept: function accept(value, params) {\n    if (!Point2d.isObject(value)) {\n      return null;\n    }\n    var result = parseRecord(params, function (p) {\n      return Object.assign(Object.assign({}, createPointDimensionParser(p)), {\n        expanded: p.optional.boolean,\n        picker: p.optional.custom(parsePickerLayout),\n        readonly: p.optional.constant(false),\n        x: p.optional.custom(parsePointDimensionParams),\n        y: p.optional.object(Object.assign(Object.assign({}, createPointDimensionParser(p)), {\n          inverted: p.optional.boolean\n        }))\n      });\n    });\n    return result ? {\n      initialValue: value,\n      params: result\n    } : null;\n  },\n  binding: {\n    reader: function reader() {\n      return point2dFromUnknown;\n    },\n    constraint: function constraint(args) {\n      return createConstraint$3(args.params, args.initialValue);\n    },\n    equals: Point2d.equals,\n    writer: function writer() {\n      return writePoint2d;\n    }\n  },\n  controller: function controller(args) {\n    var _a, _b;\n    var doc = args.document;\n    var value = args.value;\n    var c = args.constraint;\n    var dParams = [args.params.x, args.params.y];\n    return new Point2dController(doc, {\n      axes: value.rawValue.getComponents().map(function (comp, i) {\n        var _a;\n        return createPointAxis({\n          constraint: c.components[i],\n          initialValue: comp,\n          params: deepMerge(args.params, (_a = dParams[i]) !== null && _a !== void 0 ? _a : {})\n        });\n      }),\n      expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n      invertsY: shouldInvertY(args.params),\n      max: getSuitableMax(args.params, value.rawValue),\n      parser: parseNumber,\n      pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n      value: value,\n      viewProps: args.viewProps\n    });\n  }\n});\nvar Point3d = /*#__PURE__*/function () {\n  function Point3d() {\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    _classCallCheck(this, Point3d);\n    this.x = x;\n    this.y = y;\n    this.z = z;\n  }\n  _createClass(Point3d, [{\n    key: \"getComponents\",\n    value: function getComponents() {\n      return [this.x, this.y, this.z];\n    }\n  }, {\n    key: \"toObject\",\n    value: function toObject() {\n      return {\n        x: this.x,\n        y: this.y,\n        z: this.z\n      };\n    }\n  }], [{\n    key: \"isObject\",\n    value: function isObject(obj) {\n      if (isEmpty(obj)) {\n        return false;\n      }\n      var x = obj.x;\n      var y = obj.y;\n      var z = obj.z;\n      if (typeof x !== 'number' || typeof y !== 'number' || typeof z !== 'number') {\n        return false;\n      }\n      return true;\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(v1, v2) {\n      return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;\n    }\n  }]);\n  return Point3d;\n}();\nvar Point3dAssembly = {\n  toComponents: function toComponents(p) {\n    return p.getComponents();\n  },\n  fromComponents: function fromComponents(comps) {\n    return _construct(Point3d, _toConsumableArray(comps));\n  }\n};\nfunction point3dFromUnknown(value) {\n  return Point3d.isObject(value) ? new Point3d(value.x, value.y, value.z) : new Point3d();\n}\nfunction writePoint3d(target, value) {\n  target.writeProperty('x', value.x);\n  target.writeProperty('y', value.y);\n  target.writeProperty('z', value.z);\n}\nfunction createConstraint$2(params, initialValue) {\n  return new PointNdConstraint({\n    assembly: Point3dAssembly,\n    components: [createDimensionConstraint(Object.assign(Object.assign({}, params), params.x), initialValue.x), createDimensionConstraint(Object.assign(Object.assign({}, params), params.y), initialValue.y), createDimensionConstraint(Object.assign(Object.assign({}, params), params.z), initialValue.z)]\n  });\n}\nvar Point3dInputPlugin = createPlugin({\n  id: 'input-point3d',\n  type: 'input',\n  accept: function accept(value, params) {\n    if (!Point3d.isObject(value)) {\n      return null;\n    }\n    var result = parseRecord(params, function (p) {\n      return Object.assign(Object.assign({}, createPointDimensionParser(p)), {\n        readonly: p.optional.constant(false),\n        x: p.optional.custom(parsePointDimensionParams),\n        y: p.optional.custom(parsePointDimensionParams),\n        z: p.optional.custom(parsePointDimensionParams)\n      });\n    });\n    return result ? {\n      initialValue: value,\n      params: result\n    } : null;\n  },\n  binding: {\n    reader: function reader(_args) {\n      return point3dFromUnknown;\n    },\n    constraint: function constraint(args) {\n      return createConstraint$2(args.params, args.initialValue);\n    },\n    equals: Point3d.equals,\n    writer: function writer(_args) {\n      return writePoint3d;\n    }\n  },\n  controller: function controller(args) {\n    var value = args.value;\n    var c = args.constraint;\n    var dParams = [args.params.x, args.params.y, args.params.z];\n    return new PointNdTextController(args.document, {\n      assembly: Point3dAssembly,\n      axes: value.rawValue.getComponents().map(function (comp, i) {\n        var _a;\n        return createPointAxis({\n          constraint: c.components[i],\n          initialValue: comp,\n          params: deepMerge(args.params, (_a = dParams[i]) !== null && _a !== void 0 ? _a : {})\n        });\n      }),\n      parser: parseNumber,\n      value: value,\n      viewProps: args.viewProps\n    });\n  }\n});\nvar Point4d = /*#__PURE__*/function () {\n  function Point4d() {\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var w = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n    _classCallCheck(this, Point4d);\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.w = w;\n  }\n  _createClass(Point4d, [{\n    key: \"getComponents\",\n    value: function getComponents() {\n      return [this.x, this.y, this.z, this.w];\n    }\n  }, {\n    key: \"toObject\",\n    value: function toObject() {\n      return {\n        x: this.x,\n        y: this.y,\n        z: this.z,\n        w: this.w\n      };\n    }\n  }], [{\n    key: \"isObject\",\n    value: function isObject(obj) {\n      if (isEmpty(obj)) {\n        return false;\n      }\n      var x = obj.x;\n      var y = obj.y;\n      var z = obj.z;\n      var w = obj.w;\n      if (typeof x !== 'number' || typeof y !== 'number' || typeof z !== 'number' || typeof w !== 'number') {\n        return false;\n      }\n      return true;\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(v1, v2) {\n      return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z && v1.w === v2.w;\n    }\n  }]);\n  return Point4d;\n}();\nvar Point4dAssembly = {\n  toComponents: function toComponents(p) {\n    return p.getComponents();\n  },\n  fromComponents: function fromComponents(comps) {\n    return _construct(Point4d, _toConsumableArray(comps));\n  }\n};\nfunction point4dFromUnknown(value) {\n  return Point4d.isObject(value) ? new Point4d(value.x, value.y, value.z, value.w) : new Point4d();\n}\nfunction writePoint4d(target, value) {\n  target.writeProperty('x', value.x);\n  target.writeProperty('y', value.y);\n  target.writeProperty('z', value.z);\n  target.writeProperty('w', value.w);\n}\nfunction createConstraint$1(params, initialValue) {\n  return new PointNdConstraint({\n    assembly: Point4dAssembly,\n    components: [createDimensionConstraint(Object.assign(Object.assign({}, params), params.x), initialValue.x), createDimensionConstraint(Object.assign(Object.assign({}, params), params.y), initialValue.y), createDimensionConstraint(Object.assign(Object.assign({}, params), params.z), initialValue.z), createDimensionConstraint(Object.assign(Object.assign({}, params), params.w), initialValue.w)]\n  });\n}\nvar Point4dInputPlugin = createPlugin({\n  id: 'input-point4d',\n  type: 'input',\n  accept: function accept(value, params) {\n    if (!Point4d.isObject(value)) {\n      return null;\n    }\n    var result = parseRecord(params, function (p) {\n      return Object.assign(Object.assign({}, createPointDimensionParser(p)), {\n        readonly: p.optional.constant(false),\n        w: p.optional.custom(parsePointDimensionParams),\n        x: p.optional.custom(parsePointDimensionParams),\n        y: p.optional.custom(parsePointDimensionParams),\n        z: p.optional.custom(parsePointDimensionParams)\n      });\n    });\n    return result ? {\n      initialValue: value,\n      params: result\n    } : null;\n  },\n  binding: {\n    reader: function reader(_args) {\n      return point4dFromUnknown;\n    },\n    constraint: function constraint(args) {\n      return createConstraint$1(args.params, args.initialValue);\n    },\n    equals: Point4d.equals,\n    writer: function writer(_args) {\n      return writePoint4d;\n    }\n  },\n  controller: function controller(args) {\n    var value = args.value;\n    var c = args.constraint;\n    var dParams = [args.params.x, args.params.y, args.params.z, args.params.w];\n    return new PointNdTextController(args.document, {\n      assembly: Point4dAssembly,\n      axes: value.rawValue.getComponents().map(function (comp, i) {\n        var _a;\n        return createPointAxis({\n          constraint: c.components[i],\n          initialValue: comp,\n          params: deepMerge(args.params, (_a = dParams[i]) !== null && _a !== void 0 ? _a : {})\n        });\n      }),\n      parser: parseNumber,\n      value: value,\n      viewProps: args.viewProps\n    });\n  }\n});\nfunction createConstraint(params) {\n  var constraints = [];\n  var lc = createListConstraint(params.options);\n  if (lc) {\n    constraints.push(lc);\n  }\n  return new CompositeConstraint(constraints);\n}\nvar StringInputPlugin = createPlugin({\n  id: 'input-string',\n  type: 'input',\n  accept: function accept(value, params) {\n    if (typeof value !== 'string') {\n      return null;\n    }\n    var result = parseRecord(params, function (p) {\n      return {\n        readonly: p.optional.constant(false),\n        options: p.optional.custom(parseListOptions)\n      };\n    });\n    return result ? {\n      initialValue: value,\n      params: result\n    } : null;\n  },\n  binding: {\n    reader: function reader(_args) {\n      return stringFromUnknown;\n    },\n    constraint: function constraint(args) {\n      return createConstraint(args.params);\n    },\n    writer: function writer(_args) {\n      return writePrimitive;\n    }\n  },\n  controller: function controller(args) {\n    var doc = args.document;\n    var value = args.value;\n    var c = args.constraint;\n    var lc = c && findConstraint(c, ListConstraint);\n    if (lc) {\n      return new ListController(doc, {\n        props: new ValueMap({\n          options: lc.values.value('options')\n        }),\n        value: value,\n        viewProps: args.viewProps\n      });\n    }\n    return new TextController(doc, {\n      parser: function parser(v) {\n        return v;\n      },\n      props: ValueMap.fromObject({\n        formatter: formatString\n      }),\n      value: value,\n      viewProps: args.viewProps\n    });\n  },\n  api: function api(args) {\n    if (typeof args.controller.value.rawValue !== 'string') {\n      return null;\n    }\n    if (args.controller.valueController instanceof ListController) {\n      return new ListInputBindingApi(args.controller);\n    }\n    return null;\n  }\n});\nvar Constants = {\n  monitor: {\n    defaultInterval: 200,\n    defaultRows: 3\n  }\n};\nvar cn$3 = ClassName('mll');\nvar MultiLogView = /*#__PURE__*/function () {\n  function MultiLogView(doc, config) {\n    _classCallCheck(this, MultiLogView);\n    this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n    this.formatter_ = config.formatter;\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$3());\n    config.viewProps.bindClassModifiers(this.element);\n    var textareaElem = doc.createElement('textarea');\n    textareaElem.classList.add(cn$3('i'));\n    textareaElem.style.height = \"calc(var(\".concat(getCssVar('containerUnitSize'), \") * \").concat(config.rows, \")\");\n    textareaElem.readOnly = true;\n    config.viewProps.bindDisabled(textareaElem);\n    this.element.appendChild(textareaElem);\n    this.textareaElem_ = textareaElem;\n    config.value.emitter.on('change', this.onValueUpdate_);\n    this.value = config.value;\n    this.update_();\n  }\n  _createClass(MultiLogView, [{\n    key: \"update_\",\n    value: function update_() {\n      var _this56 = this;\n      var elem = this.textareaElem_;\n      var shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;\n      var lines = [];\n      this.value.rawValue.forEach(function (value) {\n        if (value !== undefined) {\n          lines.push(_this56.formatter_(value));\n        }\n      });\n      elem.textContent = lines.join('\\n');\n      if (shouldScroll) {\n        elem.scrollTop = elem.scrollHeight;\n      }\n    }\n  }, {\n    key: \"onValueUpdate_\",\n    value: function onValueUpdate_() {\n      this.update_();\n    }\n  }]);\n  return MultiLogView;\n}();\nvar MultiLogController = /*#__PURE__*/_createClass(function MultiLogController(doc, config) {\n  _classCallCheck(this, MultiLogController);\n  this.value = config.value;\n  this.viewProps = config.viewProps;\n  this.view = new MultiLogView(doc, {\n    formatter: config.formatter,\n    rows: config.rows,\n    value: this.value,\n    viewProps: this.viewProps\n  });\n});\nvar cn$2 = ClassName('sgl');\nvar SingleLogView = /*#__PURE__*/function () {\n  function SingleLogView(doc, config) {\n    _classCallCheck(this, SingleLogView);\n    this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n    this.formatter_ = config.formatter;\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$2());\n    config.viewProps.bindClassModifiers(this.element);\n    var inputElem = doc.createElement('input');\n    inputElem.classList.add(cn$2('i'));\n    inputElem.readOnly = true;\n    inputElem.type = 'text';\n    config.viewProps.bindDisabled(inputElem);\n    this.element.appendChild(inputElem);\n    this.inputElement = inputElem;\n    config.value.emitter.on('change', this.onValueUpdate_);\n    this.value = config.value;\n    this.update_();\n  }\n  _createClass(SingleLogView, [{\n    key: \"update_\",\n    value: function update_() {\n      var values = this.value.rawValue;\n      var lastValue = values[values.length - 1];\n      this.inputElement.value = lastValue !== undefined ? this.formatter_(lastValue) : '';\n    }\n  }, {\n    key: \"onValueUpdate_\",\n    value: function onValueUpdate_() {\n      this.update_();\n    }\n  }]);\n  return SingleLogView;\n}();\nvar SingleLogController = /*#__PURE__*/_createClass(function SingleLogController(doc, config) {\n  _classCallCheck(this, SingleLogController);\n  this.value = config.value;\n  this.viewProps = config.viewProps;\n  this.view = new SingleLogView(doc, {\n    formatter: config.formatter,\n    value: this.value,\n    viewProps: this.viewProps\n  });\n});\nvar BooleanMonitorPlugin = createPlugin({\n  id: 'monitor-bool',\n  type: 'monitor',\n  accept: function accept(value, params) {\n    if (typeof value !== 'boolean') {\n      return null;\n    }\n    var result = parseRecord(params, function (p) {\n      return {\n        readonly: p.required.constant(true),\n        rows: p.optional.number\n      };\n    });\n    return result ? {\n      initialValue: value,\n      params: result\n    } : null;\n  },\n  binding: {\n    reader: function reader(_args) {\n      return boolFromUnknown;\n    }\n  },\n  controller: function controller(args) {\n    var _a;\n    if (args.value.rawValue.length === 1) {\n      return new SingleLogController(args.document, {\n        formatter: BooleanFormatter,\n        value: args.value,\n        viewProps: args.viewProps\n      });\n    }\n    return new MultiLogController(args.document, {\n      formatter: BooleanFormatter,\n      rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n      value: args.value,\n      viewProps: args.viewProps\n    });\n  }\n});\nvar GraphLogMonitorBindingApi = /*#__PURE__*/function (_BindingApi3) {\n  _inherits(GraphLogMonitorBindingApi, _BindingApi3);\n  var _super23 = _createSuper(GraphLogMonitorBindingApi);\n  function GraphLogMonitorBindingApi() {\n    _classCallCheck(this, GraphLogMonitorBindingApi);\n    return _super23.apply(this, arguments);\n  }\n  _createClass(GraphLogMonitorBindingApi, [{\n    key: \"max\",\n    get: function get() {\n      return this.controller.valueController.props.get('max');\n    },\n    set: function set(max) {\n      this.controller.valueController.props.set('max', max);\n    }\n  }, {\n    key: \"min\",\n    get: function get() {\n      return this.controller.valueController.props.get('min');\n    },\n    set: function set(min) {\n      this.controller.valueController.props.set('min', min);\n    }\n  }]);\n  return GraphLogMonitorBindingApi;\n}(BindingApi);\nvar cn$1 = ClassName('grl');\nvar GraphLogView = /*#__PURE__*/function () {\n  function GraphLogView(doc, config) {\n    _classCallCheck(this, GraphLogView);\n    this.onCursorChange_ = this.onCursorChange_.bind(this);\n    this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n    this.element = doc.createElement('div');\n    this.element.classList.add(cn$1());\n    config.viewProps.bindClassModifiers(this.element);\n    this.formatter_ = config.formatter;\n    this.props_ = config.props;\n    this.cursor_ = config.cursor;\n    this.cursor_.emitter.on('change', this.onCursorChange_);\n    var svgElem = doc.createElementNS(SVG_NS, 'svg');\n    svgElem.classList.add(cn$1('g'));\n    svgElem.style.height = \"calc(var(\".concat(getCssVar('containerUnitSize'), \") * \").concat(config.rows, \")\");\n    this.element.appendChild(svgElem);\n    this.svgElem_ = svgElem;\n    var lineElem = doc.createElementNS(SVG_NS, 'polyline');\n    this.svgElem_.appendChild(lineElem);\n    this.lineElem_ = lineElem;\n    var tooltipElem = doc.createElement('div');\n    tooltipElem.classList.add(cn$1('t'), ClassName('tt')());\n    this.element.appendChild(tooltipElem);\n    this.tooltipElem_ = tooltipElem;\n    config.value.emitter.on('change', this.onValueUpdate_);\n    this.value = config.value;\n    this.update_();\n  }\n  _createClass(GraphLogView, [{\n    key: \"graphElement\",\n    get: function get() {\n      return this.svgElem_;\n    }\n  }, {\n    key: \"update_\",\n    value: function update_() {\n      var bounds = this.svgElem_.getBoundingClientRect();\n      var maxIndex = this.value.rawValue.length - 1;\n      var min = this.props_.get('min');\n      var max = this.props_.get('max');\n      var points = [];\n      this.value.rawValue.forEach(function (v, index) {\n        if (v === undefined) {\n          return;\n        }\n        var x = mapRange(index, 0, maxIndex, 0, bounds.width);\n        var y = mapRange(v, min, max, bounds.height, 0);\n        points.push([x, y].join(','));\n      });\n      this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n      var tooltipElem = this.tooltipElem_;\n      var value = this.value.rawValue[this.cursor_.rawValue];\n      if (value === undefined) {\n        tooltipElem.classList.remove(cn$1('t', 'a'));\n        return;\n      }\n      var tx = mapRange(this.cursor_.rawValue, 0, maxIndex, 0, bounds.width);\n      var ty = mapRange(value, min, max, bounds.height, 0);\n      tooltipElem.style.left = \"\".concat(tx, \"px\");\n      tooltipElem.style.top = \"\".concat(ty, \"px\");\n      tooltipElem.textContent = \"\".concat(this.formatter_(value));\n      if (!tooltipElem.classList.contains(cn$1('t', 'a'))) {\n        tooltipElem.classList.add(cn$1('t', 'a'), cn$1('t', 'in'));\n        forceReflow(tooltipElem);\n        tooltipElem.classList.remove(cn$1('t', 'in'));\n      }\n    }\n  }, {\n    key: \"onValueUpdate_\",\n    value: function onValueUpdate_() {\n      this.update_();\n    }\n  }, {\n    key: \"onCursorChange_\",\n    value: function onCursorChange_() {\n      this.update_();\n    }\n  }]);\n  return GraphLogView;\n}();\nvar GraphLogController = /*#__PURE__*/function () {\n  function GraphLogController(doc, config) {\n    _classCallCheck(this, GraphLogController);\n    this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n    this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n    this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n    this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n    this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n    this.props = config.props;\n    this.value = config.value;\n    this.viewProps = config.viewProps;\n    this.cursor_ = createValue(-1);\n    this.view = new GraphLogView(doc, {\n      cursor: this.cursor_,\n      formatter: config.formatter,\n      rows: config.rows,\n      props: this.props,\n      value: this.value,\n      viewProps: this.viewProps\n    });\n    if (!supportsTouch(doc)) {\n      this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n      this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n    } else {\n      var ph = new PointerHandler(this.view.element);\n      ph.emitter.on('down', this.onGraphPointerDown_);\n      ph.emitter.on('move', this.onGraphPointerMove_);\n      ph.emitter.on('up', this.onGraphPointerUp_);\n    }\n  }\n  _createClass(GraphLogController, [{\n    key: \"importProps\",\n    value: function importProps(state) {\n      var _this57 = this;\n      return importBladeState(state, null, function (p) {\n        return {\n          max: p.required.number,\n          min: p.required.number\n        };\n      }, function (result) {\n        _this57.props.set('max', result.max);\n        _this57.props.set('min', result.min);\n        return true;\n      });\n    }\n  }, {\n    key: \"exportProps\",\n    value: function exportProps() {\n      return exportBladeState(null, {\n        max: this.props.get('max'),\n        min: this.props.get('min')\n      });\n    }\n  }, {\n    key: \"onGraphMouseLeave_\",\n    value: function onGraphMouseLeave_() {\n      this.cursor_.rawValue = -1;\n    }\n  }, {\n    key: \"onGraphMouseMove_\",\n    value: function onGraphMouseMove_(ev) {\n      var bounds = this.view.element.getBoundingClientRect();\n      this.cursor_.rawValue = Math.floor(mapRange(ev.offsetX, 0, bounds.width, 0, this.value.rawValue.length));\n    }\n  }, {\n    key: \"onGraphPointerDown_\",\n    value: function onGraphPointerDown_(ev) {\n      this.onGraphPointerMove_(ev);\n    }\n  }, {\n    key: \"onGraphPointerMove_\",\n    value: function onGraphPointerMove_(ev) {\n      if (!ev.data.point) {\n        this.cursor_.rawValue = -1;\n        return;\n      }\n      this.cursor_.rawValue = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n    }\n  }, {\n    key: \"onGraphPointerUp_\",\n    value: function onGraphPointerUp_() {\n      this.cursor_.rawValue = -1;\n    }\n  }]);\n  return GraphLogController;\n}();\nfunction createFormatter(params) {\n  return !isEmpty(params.format) ? params.format : createNumberFormatter(2);\n}\nfunction createTextMonitor(args) {\n  var _a;\n  if (args.value.rawValue.length === 1) {\n    return new SingleLogController(args.document, {\n      formatter: createFormatter(args.params),\n      value: args.value,\n      viewProps: args.viewProps\n    });\n  }\n  return new MultiLogController(args.document, {\n    formatter: createFormatter(args.params),\n    rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n    value: args.value,\n    viewProps: args.viewProps\n  });\n}\nfunction createGraphMonitor(args) {\n  var _a, _b, _c;\n  return new GraphLogController(args.document, {\n    formatter: createFormatter(args.params),\n    rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n    props: ValueMap.fromObject({\n      max: (_b = args.params.max) !== null && _b !== void 0 ? _b : 100,\n      min: (_c = args.params.min) !== null && _c !== void 0 ? _c : 0\n    }),\n    value: args.value,\n    viewProps: args.viewProps\n  });\n}\nfunction shouldShowGraph(params) {\n  return params.view === 'graph';\n}\nvar NumberMonitorPlugin = createPlugin({\n  id: 'monitor-number',\n  type: 'monitor',\n  accept: function accept(value, params) {\n    if (typeof value !== 'number') {\n      return null;\n    }\n    var result = parseRecord(params, function (p) {\n      return {\n        format: p.optional.function,\n        max: p.optional.number,\n        min: p.optional.number,\n        readonly: p.required.constant(true),\n        rows: p.optional.number,\n        view: p.optional.string\n      };\n    });\n    return result ? {\n      initialValue: value,\n      params: result\n    } : null;\n  },\n  binding: {\n    defaultBufferSize: function defaultBufferSize(params) {\n      return shouldShowGraph(params) ? 64 : 1;\n    },\n    reader: function reader(_args) {\n      return numberFromUnknown;\n    }\n  },\n  controller: function controller(args) {\n    if (shouldShowGraph(args.params)) {\n      return createGraphMonitor(args);\n    }\n    return createTextMonitor(args);\n  },\n  api: function api(args) {\n    if (args.controller.valueController instanceof GraphLogController) {\n      return new GraphLogMonitorBindingApi(args.controller);\n    }\n    return null;\n  }\n});\nvar StringMonitorPlugin = createPlugin({\n  id: 'monitor-string',\n  type: 'monitor',\n  accept: function accept(value, params) {\n    if (typeof value !== 'string') {\n      return null;\n    }\n    var result = parseRecord(params, function (p) {\n      return {\n        multiline: p.optional.boolean,\n        readonly: p.required.constant(true),\n        rows: p.optional.number\n      };\n    });\n    return result ? {\n      initialValue: value,\n      params: result\n    } : null;\n  },\n  binding: {\n    reader: function reader(_args) {\n      return stringFromUnknown;\n    }\n  },\n  controller: function controller(args) {\n    var _a;\n    var value = args.value;\n    var multiline = value.rawValue.length > 1 || args.params.multiline;\n    if (multiline) {\n      return new MultiLogController(args.document, {\n        formatter: formatString,\n        rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n        value: value,\n        viewProps: args.viewProps\n      });\n    }\n    return new SingleLogController(args.document, {\n      formatter: formatString,\n      value: value,\n      viewProps: args.viewProps\n    });\n  }\n});\nvar BladeApiCache = /*#__PURE__*/function () {\n  function BladeApiCache() {\n    _classCallCheck(this, BladeApiCache);\n    this.map_ = new Map();\n  }\n  _createClass(BladeApiCache, [{\n    key: \"get\",\n    value: function get(bc) {\n      var _a;\n      return (_a = this.map_.get(bc)) !== null && _a !== void 0 ? _a : null;\n    }\n  }, {\n    key: \"has\",\n    value: function has(bc) {\n      return this.map_.has(bc);\n    }\n  }, {\n    key: \"add\",\n    value: function add(bc, api) {\n      var _this58 = this;\n      this.map_.set(bc, api);\n      bc.viewProps.handleDispose(function () {\n        _this58.map_.delete(bc);\n      });\n      return api;\n    }\n  }]);\n  return BladeApiCache;\n}();\nvar ReadWriteBinding = /*#__PURE__*/function () {\n  function ReadWriteBinding(config) {\n    _classCallCheck(this, ReadWriteBinding);\n    this.target = config.target;\n    this.reader_ = config.reader;\n    this.writer_ = config.writer;\n  }\n  _createClass(ReadWriteBinding, [{\n    key: \"read\",\n    value: function read() {\n      return this.reader_(this.target.read());\n    }\n  }, {\n    key: \"write\",\n    value: function write(value) {\n      this.writer_(this.target, value);\n    }\n  }, {\n    key: \"inject\",\n    value: function inject(value) {\n      this.write(this.reader_(value));\n    }\n  }]);\n  return ReadWriteBinding;\n}();\nfunction createInputBindingController(plugin, args) {\n  var _a;\n  var result = plugin.accept(args.target.read(), args.params);\n  if (isEmpty(result)) {\n    return null;\n  }\n  var valueArgs = {\n    target: args.target,\n    initialValue: result.initialValue,\n    params: result.params\n  };\n  var params = parseRecord(args.params, function (p) {\n    return {\n      disabled: p.optional.boolean,\n      hidden: p.optional.boolean,\n      label: p.optional.string,\n      tag: p.optional.string\n    };\n  });\n  var reader = plugin.binding.reader(valueArgs);\n  var constraint = plugin.binding.constraint ? plugin.binding.constraint(valueArgs) : undefined;\n  var binding = new ReadWriteBinding({\n    reader: reader,\n    target: args.target,\n    writer: plugin.binding.writer(valueArgs)\n  });\n  var value = new InputBindingValue(createValue(reader(result.initialValue), {\n    constraint: constraint,\n    equals: plugin.binding.equals\n  }), binding);\n  var controller = plugin.controller({\n    constraint: constraint,\n    document: args.document,\n    initialValue: result.initialValue,\n    params: result.params,\n    value: value,\n    viewProps: ViewProps.create({\n      disabled: params === null || params === void 0 ? void 0 : params.disabled,\n      hidden: params === null || params === void 0 ? void 0 : params.hidden\n    })\n  });\n  return new InputBindingController(args.document, {\n    blade: createBlade(),\n    props: ValueMap.fromObject({\n      label: 'label' in args.params ? (_a = params === null || params === void 0 ? void 0 : params.label) !== null && _a !== void 0 ? _a : null : args.target.key\n    }),\n    tag: params === null || params === void 0 ? void 0 : params.tag,\n    value: value,\n    valueController: controller\n  });\n}\nvar ReadonlyBinding = /*#__PURE__*/function () {\n  function ReadonlyBinding(config) {\n    _classCallCheck(this, ReadonlyBinding);\n    this.target = config.target;\n    this.reader_ = config.reader;\n  }\n  _createClass(ReadonlyBinding, [{\n    key: \"read\",\n    value: function read() {\n      return this.reader_(this.target.read());\n    }\n  }]);\n  return ReadonlyBinding;\n}();\nfunction createTicker(document, interval) {\n  return interval === 0 ? new ManualTicker() : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n}\nfunction createMonitorBindingController(plugin, args) {\n  var _a, _b, _c;\n  var result = plugin.accept(args.target.read(), args.params);\n  if (isEmpty(result)) {\n    return null;\n  }\n  var bindingArgs = {\n    target: args.target,\n    initialValue: result.initialValue,\n    params: result.params\n  };\n  var params = parseRecord(args.params, function (p) {\n    return {\n      bufferSize: p.optional.number,\n      disabled: p.optional.boolean,\n      hidden: p.optional.boolean,\n      interval: p.optional.number,\n      label: p.optional.string\n    };\n  });\n  var reader = plugin.binding.reader(bindingArgs);\n  var bufferSize = (_b = (_a = params === null || params === void 0 ? void 0 : params.bufferSize) !== null && _a !== void 0 ? _a : plugin.binding.defaultBufferSize && plugin.binding.defaultBufferSize(result.params)) !== null && _b !== void 0 ? _b : 1;\n  var value = new MonitorBindingValue({\n    binding: new ReadonlyBinding({\n      reader: reader,\n      target: args.target\n    }),\n    bufferSize: bufferSize,\n    ticker: createTicker(args.document, params === null || params === void 0 ? void 0 : params.interval)\n  });\n  var controller = plugin.controller({\n    document: args.document,\n    params: result.params,\n    value: value,\n    viewProps: ViewProps.create({\n      disabled: params === null || params === void 0 ? void 0 : params.disabled,\n      hidden: params === null || params === void 0 ? void 0 : params.hidden\n    })\n  });\n  controller.viewProps.bindDisabled(value.ticker);\n  controller.viewProps.handleDispose(function () {\n    value.ticker.dispose();\n  });\n  return new MonitorBindingController(args.document, {\n    blade: createBlade(),\n    props: ValueMap.fromObject({\n      label: 'label' in args.params ? (_c = params === null || params === void 0 ? void 0 : params.label) !== null && _c !== void 0 ? _c : null : args.target.key\n    }),\n    value: value,\n    valueController: controller\n  });\n}\nvar PluginPool = /*#__PURE__*/function () {\n  function PluginPool(apiCache) {\n    _classCallCheck(this, PluginPool);\n    this.pluginsMap_ = {\n      blades: [],\n      inputs: [],\n      monitors: []\n    };\n    this.apiCache_ = apiCache;\n  }\n  _createClass(PluginPool, [{\n    key: \"getAll\",\n    value: function getAll() {\n      return [].concat(_toConsumableArray(this.pluginsMap_.blades), _toConsumableArray(this.pluginsMap_.inputs), _toConsumableArray(this.pluginsMap_.monitors));\n    }\n  }, {\n    key: \"register\",\n    value: function register(bundleId, r) {\n      if (!isCompatible(r.core)) {\n        throw TpError.notCompatible(bundleId, r.id);\n      }\n      if (r.type === 'blade') {\n        this.pluginsMap_.blades.unshift(r);\n      } else if (r.type === 'input') {\n        this.pluginsMap_.inputs.unshift(r);\n      } else if (r.type === 'monitor') {\n        this.pluginsMap_.monitors.unshift(r);\n      }\n    }\n  }, {\n    key: \"createInput_\",\n    value: function createInput_(document, target, params) {\n      return this.pluginsMap_.inputs.reduce(function (result, plugin) {\n        return result !== null && result !== void 0 ? result : createInputBindingController(plugin, {\n          document: document,\n          target: target,\n          params: params\n        });\n      }, null);\n    }\n  }, {\n    key: \"createMonitor_\",\n    value: function createMonitor_(document, target, params) {\n      return this.pluginsMap_.monitors.reduce(function (result, plugin) {\n        return result !== null && result !== void 0 ? result : createMonitorBindingController(plugin, {\n          document: document,\n          params: params,\n          target: target\n        });\n      }, null);\n    }\n  }, {\n    key: \"createBinding\",\n    value: function createBinding(doc, target, params) {\n      var initialValue = target.read();\n      if (isEmpty(initialValue)) {\n        throw new TpError({\n          context: {\n            key: target.key\n          },\n          type: 'nomatchingcontroller'\n        });\n      }\n      var ic = this.createInput_(doc, target, params);\n      if (ic) {\n        return ic;\n      }\n      var mc = this.createMonitor_(doc, target, params);\n      if (mc) {\n        return mc;\n      }\n      throw new TpError({\n        context: {\n          key: target.key\n        },\n        type: 'nomatchingcontroller'\n      });\n    }\n  }, {\n    key: \"createBlade\",\n    value: function createBlade(document, params) {\n      var bc = this.pluginsMap_.blades.reduce(function (result, plugin) {\n        return result !== null && result !== void 0 ? result : createBladeController(plugin, {\n          document: document,\n          params: params\n        });\n      }, null);\n      if (!bc) {\n        throw new TpError({\n          type: 'nomatchingview',\n          context: {\n            params: params\n          }\n        });\n      }\n      return bc;\n    }\n  }, {\n    key: \"createInputBindingApi_\",\n    value: function createInputBindingApi_(bc) {\n      var api = this.pluginsMap_.inputs.reduce(function (result, plugin) {\n        var _a, _b;\n        if (result) {\n          return result;\n        }\n        return (_b = (_a = plugin.api) === null || _a === void 0 ? void 0 : _a.call(plugin, {\n          controller: bc\n        })) !== null && _b !== void 0 ? _b : null;\n      }, null);\n      return this.apiCache_.add(bc, api !== null && api !== void 0 ? api : new BindingApi(bc));\n    }\n  }, {\n    key: \"createMonitorBindingApi_\",\n    value: function createMonitorBindingApi_(bc) {\n      var api = this.pluginsMap_.monitors.reduce(function (result, plugin) {\n        var _a, _b;\n        if (result) {\n          return result;\n        }\n        return (_b = (_a = plugin.api) === null || _a === void 0 ? void 0 : _a.call(plugin, {\n          controller: bc\n        })) !== null && _b !== void 0 ? _b : null;\n      }, null);\n      return this.apiCache_.add(bc, api !== null && api !== void 0 ? api : new BindingApi(bc));\n    }\n  }, {\n    key: \"createBindingApi\",\n    value: function createBindingApi(bc) {\n      if (this.apiCache_.has(bc)) {\n        return this.apiCache_.get(bc);\n      }\n      if (isInputBindingController(bc)) {\n        return this.createInputBindingApi_(bc);\n      }\n      if (isMonitorBindingController(bc)) {\n        return this.createMonitorBindingApi_(bc);\n      }\n      throw TpError.shouldNeverHappen();\n    }\n  }, {\n    key: \"createApi\",\n    value: function createApi(bc) {\n      var _this59 = this;\n      if (this.apiCache_.has(bc)) {\n        return this.apiCache_.get(bc);\n      }\n      if (isBindingController(bc)) {\n        return this.createBindingApi(bc);\n      }\n      var api = this.pluginsMap_.blades.reduce(function (result, plugin) {\n        return result !== null && result !== void 0 ? result : plugin.api({\n          controller: bc,\n          pool: _this59\n        });\n      }, null);\n      if (!api) {\n        throw TpError.shouldNeverHappen();\n      }\n      return this.apiCache_.add(bc, api);\n    }\n  }]);\n  return PluginPool;\n}();\nvar sharedCache = new BladeApiCache();\nfunction createDefaultPluginPool() {\n  var pool = new PluginPool(sharedCache);\n  [Point2dInputPlugin, Point3dInputPlugin, Point4dInputPlugin, StringInputPlugin, NumberInputPlugin, StringColorInputPlugin, ObjectColorInputPlugin, NumberColorInputPlugin, BooleanInputPlugin, BooleanMonitorPlugin, StringMonitorPlugin, NumberMonitorPlugin, ButtonBladePlugin, FolderBladePlugin, TabBladePlugin].forEach(function (p) {\n    pool.register('core', p);\n  });\n  return pool;\n}\nvar ListBladeApi = /*#__PURE__*/function (_BladeApi4) {\n  _inherits(ListBladeApi, _BladeApi4);\n  var _super24 = _createSuper(ListBladeApi);\n  /**\n   * @hidden\n   */\n  function ListBladeApi(controller) {\n    var _this60;\n    _classCallCheck(this, ListBladeApi);\n    _this60 = _super24.call(this, controller);\n    _this60.emitter_ = new Emitter();\n    _this60.controller.value.emitter.on('change', function (ev) {\n      _this60.emitter_.emit('change', new TpChangeEvent(_assertThisInitialized(_this60), ev.rawValue));\n    });\n    return _this60;\n  }\n  _createClass(ListBladeApi, [{\n    key: \"label\",\n    get: function get() {\n      return this.controller.labelController.props.get('label');\n    },\n    set: function set(label) {\n      this.controller.labelController.props.set('label', label);\n    }\n  }, {\n    key: \"options\",\n    get: function get() {\n      return this.controller.valueController.props.get('options');\n    },\n    set: function set(options) {\n      this.controller.valueController.props.set('options', options);\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this.controller.value.rawValue;\n    },\n    set: function set(value) {\n      this.controller.value.rawValue = value;\n    }\n  }, {\n    key: \"on\",\n    value: function on(eventName, handler) {\n      var bh = handler.bind(this);\n      this.emitter_.on(eventName, function (ev) {\n        bh(ev);\n      });\n      return this;\n    }\n  }]);\n  return ListBladeApi;\n}(BladeApi);\nvar SeparatorBladeApi = /*#__PURE__*/function (_BladeApi5) {\n  _inherits(SeparatorBladeApi, _BladeApi5);\n  var _super25 = _createSuper(SeparatorBladeApi);\n  function SeparatorBladeApi() {\n    _classCallCheck(this, SeparatorBladeApi);\n    return _super25.apply(this, arguments);\n  }\n  return _createClass(SeparatorBladeApi);\n}(BladeApi);\nvar SliderBladeApi = /*#__PURE__*/function (_BladeApi6) {\n  _inherits(SliderBladeApi, _BladeApi6);\n  var _super26 = _createSuper(SliderBladeApi);\n  /**\n   * @hidden\n   */\n  function SliderBladeApi(controller) {\n    var _this61;\n    _classCallCheck(this, SliderBladeApi);\n    _this61 = _super26.call(this, controller);\n    _this61.emitter_ = new Emitter();\n    _this61.controller.value.emitter.on('change', function (ev) {\n      _this61.emitter_.emit('change', new TpChangeEvent(_assertThisInitialized(_this61), ev.rawValue));\n    });\n    return _this61;\n  }\n  _createClass(SliderBladeApi, [{\n    key: \"label\",\n    get: function get() {\n      return this.controller.labelController.props.get('label');\n    },\n    set: function set(label) {\n      this.controller.labelController.props.set('label', label);\n    }\n  }, {\n    key: \"max\",\n    get: function get() {\n      return this.controller.valueController.sliderController.props.get('max');\n    },\n    set: function set(max) {\n      this.controller.valueController.sliderController.props.set('max', max);\n    }\n  }, {\n    key: \"min\",\n    get: function get() {\n      return this.controller.valueController.sliderController.props.get('min');\n    },\n    set: function set(min) {\n      this.controller.valueController.sliderController.props.set('min', min);\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this.controller.value.rawValue;\n    },\n    set: function set(value) {\n      this.controller.value.rawValue = value;\n    }\n  }, {\n    key: \"on\",\n    value: function on(eventName, handler) {\n      var bh = handler.bind(this);\n      this.emitter_.on(eventName, function (ev) {\n        bh(ev);\n      });\n      return this;\n    }\n  }]);\n  return SliderBladeApi;\n}(BladeApi);\nvar TextBladeApi = /*#__PURE__*/function (_BladeApi7) {\n  _inherits(TextBladeApi, _BladeApi7);\n  var _super27 = _createSuper(TextBladeApi);\n  /**\n   * @hidden\n   */\n  function TextBladeApi(controller) {\n    var _this62;\n    _classCallCheck(this, TextBladeApi);\n    _this62 = _super27.call(this, controller);\n    _this62.emitter_ = new Emitter();\n    _this62.controller.value.emitter.on('change', function (ev) {\n      _this62.emitter_.emit('change', new TpChangeEvent(_assertThisInitialized(_this62), ev.rawValue));\n    });\n    return _this62;\n  }\n  _createClass(TextBladeApi, [{\n    key: \"label\",\n    get: function get() {\n      return this.controller.labelController.props.get('label');\n    },\n    set: function set(label) {\n      this.controller.labelController.props.set('label', label);\n    }\n  }, {\n    key: \"formatter\",\n    get: function get() {\n      return this.controller.valueController.props.get('formatter');\n    },\n    set: function set(formatter) {\n      this.controller.valueController.props.set('formatter', formatter);\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this.controller.value.rawValue;\n    },\n    set: function set(value) {\n      this.controller.value.rawValue = value;\n    }\n  }, {\n    key: \"on\",\n    value: function on(eventName, handler) {\n      var bh = handler.bind(this);\n      this.emitter_.on(eventName, function (ev) {\n        bh(ev);\n      });\n      return this;\n    }\n  }]);\n  return TextBladeApi;\n}(BladeApi);\nvar ListBladePlugin = function () {\n  return {\n    id: 'list',\n    type: 'blade',\n    core: VERSION$1,\n    accept: function accept(params) {\n      var result = parseRecord(params, function (p) {\n        return {\n          options: p.required.custom(parseListOptions),\n          value: p.required.raw,\n          view: p.required.constant('list'),\n          label: p.optional.string\n        };\n      });\n      return result ? {\n        params: result\n      } : null;\n    },\n    controller: function controller(args) {\n      var lc = new ListConstraint(normalizeListOptions(args.params.options));\n      var value = createValue(args.params.value, {\n        constraint: lc\n      });\n      var ic = new ListController(args.document, {\n        props: new ValueMap({\n          options: lc.values.value('options')\n        }),\n        value: value,\n        viewProps: args.viewProps\n      });\n      return new LabeledValueBladeController(args.document, {\n        blade: args.blade,\n        props: ValueMap.fromObject({\n          label: args.params.label\n        }),\n        value: value,\n        valueController: ic\n      });\n    },\n    api: function api(args) {\n      if (!(args.controller instanceof LabeledValueBladeController)) {\n        return null;\n      }\n      if (!(args.controller.valueController instanceof ListController)) {\n        return null;\n      }\n      return new ListBladeApi(args.controller);\n    }\n  };\n}();\nvar RootApi = /*#__PURE__*/function (_FolderApi) {\n  _inherits(RootApi, _FolderApi);\n  var _super28 = _createSuper(RootApi);\n  /**\n   * @hidden\n   */\n  function RootApi(controller, pool) {\n    _classCallCheck(this, RootApi);\n    return _super28.call(this, controller, pool);\n  }\n  _createClass(RootApi, [{\n    key: \"element\",\n    get: function get() {\n      return this.controller.view.element;\n    }\n  }]);\n  return RootApi;\n}(FolderApi);\n/**\n * @hidden\n */\nvar RootController = /*#__PURE__*/function (_FolderController) {\n  _inherits(RootController, _FolderController);\n  var _super29 = _createSuper(RootController);\n  function RootController(doc, config) {\n    _classCallCheck(this, RootController);\n    return _super29.call(this, doc, {\n      expanded: config.expanded,\n      blade: config.blade,\n      props: config.props,\n      root: true,\n      viewProps: config.viewProps\n    });\n  }\n  return _createClass(RootController);\n}(FolderController);\nvar cn = ClassName('spr');\n/**\n * @hidden\n */\nvar SeparatorView = /*#__PURE__*/_createClass(function SeparatorView(doc, config) {\n  _classCallCheck(this, SeparatorView);\n  this.element = doc.createElement('div');\n  this.element.classList.add(cn());\n  config.viewProps.bindClassModifiers(this.element);\n  var hrElem = doc.createElement('hr');\n  hrElem.classList.add(cn('r'));\n  this.element.appendChild(hrElem);\n});\n/**\n * @hidden\n */\nvar SeparatorController = /*#__PURE__*/function (_BladeController4) {\n  _inherits(SeparatorController, _BladeController4);\n  var _super30 = _createSuper(SeparatorController);\n  /**\n   * @hidden\n   */\n  function SeparatorController(doc, config) {\n    _classCallCheck(this, SeparatorController);\n    return _super30.call(this, Object.assign(Object.assign({}, config), {\n      view: new SeparatorView(doc, {\n        viewProps: config.viewProps\n      })\n    }));\n  }\n  return _createClass(SeparatorController);\n}(BladeController);\nvar SeparatorBladePlugin = {\n  id: 'separator',\n  type: 'blade',\n  core: VERSION$1,\n  accept: function accept(params) {\n    var result = parseRecord(params, function (p) {\n      return {\n        view: p.required.constant('separator')\n      };\n    });\n    return result ? {\n      params: result\n    } : null;\n  },\n  controller: function controller(args) {\n    return new SeparatorController(args.document, {\n      blade: args.blade,\n      viewProps: args.viewProps\n    });\n  },\n  api: function api(args) {\n    if (!(args.controller instanceof SeparatorController)) {\n      return null;\n    }\n    return new SeparatorBladeApi(args.controller);\n  }\n};\nvar SliderBladePlugin = {\n  id: 'slider',\n  type: 'blade',\n  core: VERSION$1,\n  accept: function accept(params) {\n    var result = parseRecord(params, function (p) {\n      return {\n        max: p.required.number,\n        min: p.required.number,\n        view: p.required.constant('slider'),\n        format: p.optional.function,\n        label: p.optional.string,\n        value: p.optional.number\n      };\n    });\n    return result ? {\n      params: result\n    } : null;\n  },\n  controller: function controller(args) {\n    var _a, _b;\n    var initialValue = (_a = args.params.value) !== null && _a !== void 0 ? _a : 0;\n    var drc = new DefiniteRangeConstraint({\n      max: args.params.max,\n      min: args.params.min\n    });\n    var v = createValue(initialValue, {\n      constraint: drc\n    });\n    var vc = new SliderTextController(args.document, Object.assign(Object.assign({}, createSliderTextProps({\n      formatter: (_b = args.params.format) !== null && _b !== void 0 ? _b : numberToString,\n      keyScale: createValue(1),\n      max: drc.values.value('max'),\n      min: drc.values.value('min'),\n      pointerScale: getSuitablePointerScale(args.params, initialValue)\n    })), {\n      parser: parseNumber,\n      value: v,\n      viewProps: args.viewProps\n    }));\n    return new LabeledValueBladeController(args.document, {\n      blade: args.blade,\n      props: ValueMap.fromObject({\n        label: args.params.label\n      }),\n      value: v,\n      valueController: vc\n    });\n  },\n  api: function api(args) {\n    if (!(args.controller instanceof LabeledValueBladeController)) {\n      return null;\n    }\n    if (!(args.controller.valueController instanceof SliderTextController)) {\n      return null;\n    }\n    return new SliderBladeApi(args.controller);\n  }\n};\nvar TextBladePlugin = function () {\n  return {\n    id: 'text',\n    type: 'blade',\n    core: VERSION$1,\n    accept: function accept(params) {\n      var result = parseRecord(params, function (p) {\n        return {\n          parse: p.required.function,\n          value: p.required.raw,\n          view: p.required.constant('text'),\n          format: p.optional.function,\n          label: p.optional.string\n        };\n      });\n      return result ? {\n        params: result\n      } : null;\n    },\n    controller: function controller(args) {\n      var _a;\n      var v = createValue(args.params.value);\n      var ic = new TextController(args.document, {\n        parser: args.params.parse,\n        props: ValueMap.fromObject({\n          formatter: (_a = args.params.format) !== null && _a !== void 0 ? _a : function (v) {\n            return String(v);\n          }\n        }),\n        value: v,\n        viewProps: args.viewProps\n      });\n      return new LabeledValueBladeController(args.document, {\n        blade: args.blade,\n        props: ValueMap.fromObject({\n          label: args.params.label\n        }),\n        value: v,\n        valueController: ic\n      });\n    },\n    api: function api(args) {\n      if (!(args.controller instanceof LabeledValueBladeController)) {\n        return null;\n      }\n      if (!(args.controller.valueController instanceof TextController)) {\n        return null;\n      }\n      return new TextBladeApi(args.controller);\n    }\n  };\n}();\nfunction createDefaultWrapperElement(doc) {\n  var elem = doc.createElement('div');\n  elem.classList.add(ClassName('dfw')());\n  if (doc.body) {\n    doc.body.appendChild(elem);\n  }\n  return elem;\n}\nfunction embedStyle(doc, id, css) {\n  if (doc.querySelector(\"style[data-tp-style=\".concat(id, \"]\"))) {\n    return;\n  }\n  var styleElem = doc.createElement('style');\n  styleElem.dataset.tpStyle = id;\n  styleElem.textContent = css;\n  doc.head.appendChild(styleElem);\n}\n/**\n * The root pane of Tweakpane.\n */\nvar Pane = /*#__PURE__*/function (_RootApi) {\n  _inherits(Pane, _RootApi);\n  var _super31 = _createSuper(Pane);\n  function Pane(opt_config) {\n    var _this63;\n    _classCallCheck(this, Pane);\n    var _a, _b;\n    var config = opt_config !== null && opt_config !== void 0 ? opt_config : {};\n    var doc = (_a = config.document) !== null && _a !== void 0 ? _a : getWindowDocument();\n    var pool = createDefaultPluginPool();\n    var rootController = new RootController(doc, {\n      expanded: config.expanded,\n      blade: createBlade(),\n      props: ValueMap.fromObject({\n        title: config.title\n      }),\n      viewProps: ViewProps.create()\n    });\n    _this63 = _super31.call(this, rootController, pool);\n    _this63.pool_ = pool;\n    _this63.containerElem_ = (_b = config.container) !== null && _b !== void 0 ? _b : createDefaultWrapperElement(doc);\n    _this63.containerElem_.appendChild(_this63.element);\n    _this63.doc_ = doc;\n    _this63.usesDefaultWrapper_ = !config.container;\n    _this63.setUpDefaultPlugins_();\n    return _this63;\n  }\n  _createClass(Pane, [{\n    key: \"document\",\n    get: function get() {\n      if (!this.doc_) {\n        throw TpError.alreadyDisposed();\n      }\n      return this.doc_;\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var containerElem = this.containerElem_;\n      if (!containerElem) {\n        throw TpError.alreadyDisposed();\n      }\n      if (this.usesDefaultWrapper_) {\n        var parentElem = containerElem.parentElement;\n        if (parentElem) {\n          parentElem.removeChild(containerElem);\n        }\n      }\n      this.containerElem_ = null;\n      this.doc_ = null;\n      _get(_getPrototypeOf(Pane.prototype), \"dispose\", this).call(this);\n    }\n  }, {\n    key: \"registerPlugin\",\n    value: function registerPlugin(bundle) {\n      var _this64 = this;\n      if (bundle.css) {\n        embedStyle(this.document, \"plugin-\".concat(bundle.id), bundle.css);\n      }\n      var plugins = 'plugin' in bundle ? [bundle.plugin] : 'plugins' in bundle ? bundle.plugins : [];\n      plugins.forEach(function (p) {\n        _this64.pool_.register(bundle.id, p);\n      });\n    }\n  }, {\n    key: \"setUpDefaultPlugins_\",\n    value: function setUpDefaultPlugins_() {\n      this.registerPlugin({\n        id: 'default',\n        // NOTE: This string literal will be replaced with the default CSS by Rollup at the compilation time\n        css: '.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1 * var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(\t\t2px * 2 + var(--cnt-usz) + var(--cnt-hp)\t);position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:\"\";display:block;height:6px;right:calc(\t\tvar(--cnt-hp) + (\t\t\t\tvar(--cnt-usz) + 4px - 6px\t\t\t) / 2 - 2px\t);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1 * var(--cnt-hp));right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(\t\t\tvar(--cnt-vp) + 2px\t\t);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:\"\";height:2px;left:calc(-1 * var(--cnt-hp));position:absolute;right:calc(-1 * var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);bottom:0;content:\"\";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz) * 3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1 * var(--cnt-hp));right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:\"\";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:\"\";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:\"\";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:\"\";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(\t\t\tvar(--bld-hp) - 5px\t\t);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:\"\";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(\t\t\t2px * 2 + var(--cnt-usz) + var(--cnt-hp)\t\t);text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1 * var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1 * var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',\n        plugins: [ListBladePlugin, SeparatorBladePlugin, SliderBladePlugin, TabBladePlugin, TextBladePlugin]\n      });\n    }\n  }]);\n  return Pane;\n}(RootApi);\nvar VERSION = new Semver('4.0.1');\nexport { BladeApi, ButtonApi, FolderApi, ListBladeApi, ListInputBindingApi, Pane, Semver, SeparatorBladeApi, SliderBladeApi, SliderInputBindingApi, TabApi, TabPageApi, TextBladeApi, TpChangeEvent, VERSION };","map":{"version":3,"names":["forceCast","v","isEmpty","value","undefined","isObject$1","isRecord","deepEqualsArray","a1","a2","length","i","deepMerge","r1","r2","keys","Array","from","Set","concat","_toConsumableArray","Object","reduce","result","key","v1","v2","assign","_defineProperty","isBinding","CREATE_MESSAGE_MAP","alreadydisposed","invalidparams","context","name","nomatchingcontroller","nomatchingview","JSON","stringify","params","notbindable","notcompatible","id","propertynotfound","shouldneverhappen","TpError","config","_classCallCheck","_a","message","type","constructor","stack","Error","_createClass","toString","alreadyDisposed","notBindable","notCompatible","bundleId","propertyNotFound","shouldNeverHappen","BindingTarget","obj","obj_","read","write","writeProperty","valueObj","isBindable","Emitter","observers_","on","eventName","handler","observers","push","off","filter","observer","emit","event","forEach","ComplexValue","initialValue","constraint_","constraint","equals_","equals","emitter","rawValue_","get","set","rawValue","setRawValue","forceEmit","last","options","opts","constrainedValue","constrain","prevValue","changed","sender","previousRawValue","PrimitiveValue","value_","ReadonlyPrimitiveValue","onValueBeforeChange_","bind","onValueChange_","ev","createValue","createReadonlyValue","ValueMap","valueMap","_this","valMap_","_loop","createCore","o","fromObject","core","DefiniteRangeConstraint","values","max","min","Math","RangeConstraint","StepConstraint","step","origin","arguments","r","round","NumberLiteralNode","text","evaluate","Number","BINARY_OPERATION_MAP","_","pow","BinaryOperationNode","operator","left","right","op","join","UNARY_OPERATION_MAP","UnaryOperationNode","expr","expression","combineReader","parsers","cursor","readWhitespace","m","substr","match","readNonZeroDigit","ch","readDecimalDigits","readSignedInteger","ds","sign","sds","readExponentPart","e","toLowerCase","si","readDecimalIntegerLiteral","nzd","readDecimalLiteral1","dil","dot","dds","readDecimalLiteral2","readDecimalLiteral3","readDecimalLiteral","parseBinaryDigits","readBinaryIntegerLiteral","prefix","bds","readOctalDigits","readOctalIntegerLiteral","ods","readHexDigits","readHexIntegerLiteral","hds","readNonDecimalIntegerLiteral","readNumericLiteral","parseLiteral","num","evaluable","parseParenthesizedExpression","parseExpression","cl","parsePrimaryExpression","parseUnaryExpression","readBinaryOperator","ops","startsWith","createBinaryOperationExpressionParser","exprParser","firstExpr","nextExpr","parseBinaryOperationExpression","parser","parseEcmaNumberExpression","parseNumber","numberFromUnknown","pv","numberToString","String","createNumberFormatter","digits","toFixed","mapRange","start1","end1","start2","end2","p","getDecimalDigits","frac","split","replace","constrainRange","loopRange","getSuitableDecimalDigits","getSuitableKeyScale","getSuitablePointerScale","base","abs","floor","log10","createStepConstraint","createRangeConstraint","createNumberTextPropsObject","_b","_c","formatter","format","keyScale","pointerScale","createNumberTextInputParamsParser","optional","function","number","createPointAxis","textProps","BladeApi","controller","view","element","viewProps","disabled","hidden","dispose","importState","state","exportState","TpEvent","target","TpChangeEvent","_TpEvent","_inherits","_super","_createSuper","_this2","call","TpFoldEvent","_TpEvent2","_super2","expanded","_this3","TpTabSelectEvent","_TpEvent3","_super3","index","_this4","BindingApi","_BladeApi","_super4","_this5","_assertThisInitialized","emitter_","labelController","props","label","binding","tag","bh","refresh","fetch","InputBindingValue","isInputBindingValue","b","parseObject","keyToParserMap","tmp","succeeded","parseArray","parseItem","item","isObject","createMicroParserBuilder","parse","createMicroParserBuilders","custom","boolean","string","constant","raw","object","array","itemParser","isArray","MicroParsers","required","parseRecord","map","importBladeState","superImport","callback","exportBladeState","superExport","thisState","isValueBladeController","bc","isBindingValue","SVG_NS","forceReflow","offsetHeight","disableTransitionTemporarily","t","style","transition","supportsTouch","doc","ontouchstart","getGlobalObject","globalThis","getWindowDocument","globalObj","document","getCanvasContext","canvasElement","win","ownerDocument","defaultView","isBrowser","getContext","willReadFrequently","ICON_ID_TO_INNER_HTML_MAP","check","dropdown","p2dpad","createSvgIconElement","iconId","elem","createElementNS","innerHTML","insertElementAt","parentElement","insertBefore","children","removeElement","removeChild","removeChildElements","removeChildNodes","childNodes","findNextTarget","relatedTarget","explicitOriginalTarget","bindValue","applyValue","bindValueMap","PREFIX","ClassName","viewName","fn","opt_elementName","opt_modifier","cn$r","createLabelNode","frag","createDocumentFragment","lineNodes","line","createTextNode","lineNode","appendChild","createElement","LabelView","_this6","classList","add","bindClassModifiers","labelElem","remove","labelElement","valueElem","valueElement","LabelController","valueController","importProps","_this7","exportProps","getAllBladePositions","cn$q","POS_TO_CLASS_NAME_MAP","veryfirst","first","verylast","BladeController","_this8","parent_","blade","pos","handleDispose","parent","_this9","LabeledValueBladeController","_BladeController","_super5","_this10","lc","_this11","s","_get","_getPrototypeOf","prototype","_this12","excludeValue","BindingController","_LabeledValueBladeCon","_super6","_this13","_this14","_s","_this15","isBindingController","InputBindingController","_BindingController","_super7","apply","_this16","inject","isInputBindingController","fillBuffer","buffer","bufferSize","initializeBuffer","createTrimmedBuffer","indexOf","slice","createPushedBuffer","newValue","newBuffer","splice","MonitorBindingValue","onTick_","ticker","isMonitorBindingValue","MonitorBindingController","_BindingController2","_super8","_this17","readonly","isMonitorBindingController","ButtonApi","_BladeApi2","_super9","buttonController","title","_this18","applyClass","className","active","valueToClassName","bindValueToTextContent","textContent","cn$p","ButtonView","buttonElem","bindDisabled","buttonElement","titleElem","ButtonController","onClick_","addEventListener","_this19","ButtonBladeController","_BladeController2","_super10","_this20","buttonProps","labelProps","_this21","_this22","Semver","_text$split","_text$split2","_slicedToArray","prerelease","coreComps","major","parseInt","minor","patch","VERSION$1","createPlugin","plugin","ButtonBladePlugin","accept","args","api","addButtonAsBlade","addBlade","addFolderAsBlade","addTabAsBlade","isRefreshable","createBindingTarget","RackApi","pool","onRackValueChange_","controller_","pool_","rack","_this23","createApi","addBinding","opt_params","createBinding","createBindingApi","addFolder","addButton","addTab","opt_index","createBlade","c","bladeController","ContainerBladeApi","_BladeApi3","_super11","_this24","rackApi_","rackController","ContainerBladeController","_BladeController3","_super12","_this25","_this26","every","_this27","isContainerBladeController","NestedOrderedSet","extract","items_","cache_","onSubListAdd_","onSubListRemove_","extract_","allItems","find","_iterator","_createForOfIteratorHelper","_step","n","done","err","f","includes","has","_this28","subList","root","_this29","delete","findValueBladeController","bcs","findSubBladeControllerSet","Rack","onBladePositionsChange_","onSetAdd_","onSetRemove_","onChildDispose_","onChildPositionsChange_","onChildValueChange_","onChildViewPropsChange_","onRackLayout_","blade_","bcSet_","items","finder","updatePositions_","_this30","visibleItems","firstVisibleItem","lastVisibleItem","ps","_ev","_this31","disposedUcs","RackController","_this32","onRackAdd_","onRackRemove_","positions","Foldable","_ValueMap","_super13","styleExpanded","exHeight","bindExpandedClass","expandedClassName","_this33","onExpand","cleanUpTransition","create","coreObj","completed","expandedHeight","shouldFixHeight","temporaryExpanded","computeExpandedFolderHeight","folder","containerElement","height","clientHeight","applyHeight","foldable","styleHeight","bindFoldable","h","propertyName","FolderApi","_ContainerBladeApi","_super14","_this34","bladeContainerClassName","FolderView","_this35","className_","foldable_","indentElem","titleElement","markElem","containerElem","FolderController","_ContainerBladeContro","_super15","_this36","onTitleClick_","_this37","_this38","FolderBladePlugin","cn$o","valueToModifier","modifier","ViewProps","_ValueMap2","_super16","_this39","onDisabledChange_","onParentChange_","onParentGlobalDisabledChange_","_createReadonlyValue","getGlobalDisabled_","_createReadonlyValue2","globalDisabled_","setGlobalDisabled_","globalDisabled","bindTabIndex","tabIndex","disposed","parentDisabled","updateGlobalDisabled_","prevParent","opt_initialValue","cn$n","TabPageView","cn$m","TabItemView","_this40","selected","TabItemController","TabPageController","_ContainerBladeContro2","_super17","_this41","onItemClick_","ic_","itemProps","itemController","_this42","_this43","TabApi","_ContainerBladeApi2","_super18","_this44","onSelect_","tab","selectedIndex","addPage","pc","papi","removePage","TabPageApi","_ContainerBladeApi3","_super19","INDEX_NOT_SELECTED","Tab","onItemSelectedChange_","empty","keepSelection_","firstSelIndex","findIndex","cn$l","TabView","itemsElement","contentsElem","contentsElement","TabController","_ContainerBladeContro3","_super20","_this45","TabBladePlugin","pages","createBladeController","ac","ListInputBindingApi","_BindingApi","_super21","ManualTicker","tick","IntervalTicker","interval","disabled_","timerId_","doc_","interval_","setTimer_","inactive","clearTimer_","clearInterval","setInterval","CompositeConstraint","constraints","findConstraint","constraintClass","tmpResult","sc","ListConstraint","matched","parseListOptions","normalizeListOptions","createListConstraint","cn$k","ListView","_this46","props_","selectElem","selectElement","optionElem","update_","ListController","onSelectChange_","currentTarget","_this47","cn$j","PopupView","shows","PopupController","cn$i","TextView","onChange_","inputElem","inputElement","TextController","onInputChange_","parser_","parsedValue","boolToString","boolFromUnknown","BooleanFormatter","composeParsers","innerFormatter","formatPercentage","stringFromUnknown","formatString","connectValues","_ref","primary","secondary","forward","backward","changing","preventFeedback","getStepForKey","altKey","shiftKey","upKey","downKey","getVerticalStepKeys","getHorizontalStepKeys","isVerticalArrowKey","isArrowKey","computeOffset$1","rect","getBoundingClientRect","x","pageX","scrollX","y","pageY","scrollY","top","PointerHandler","lastTouch_","onDocumentMouseMove_","onDocumentMouseUp_","onMouseDown_","onTouchEnd_","onTouchMove_","onTouchStart_","elem_","passive","computePosition_","offset","bounds","width","point","preventDefault","focus","data","removeEventListener","touch","targetTouches","clientX","clientY","cn$h","NumberTextView","arrayPosition","onDraggingChange_","dragging_","dragging","knobElem","knobElement","guideElem","bodyElem","guideBodyElem_","headElem","guideHeadElem_","tooltipElem","tooltipElem_","aox","adx","setAttributeNS","NumberTextController","originRawValue_","onInputKeyDown_","onInputKeyUp_","onPointerDown_","onPointerMove_","onPointerUp_","sliderProps_","sliderProps","ph","constrainValue_","computeDraggingValue_","dx","cn$g","SliderView","trackElem","trackElement","SliderController","onKeyDown_","onKeyUp_","onPointerDownOrMove_","ptHandler_","handlePointerEvent_","d","cn$f","SliderTextView","sliderElem","sliderView_","sliderView","textElem","textView_","textView","SliderTextController","sliderC_","textC_","_this48","createSliderTextProps","CSS_VAR_MAP","containerUnitSize","getCssVar","createPointDimensionParser","parsePointDimensionParams","createDimensionConstraint","cs","rs","isCompatible","ver","parsePickerLayout","writePrimitive","cn$e","CheckboxView","wrapperElem","checked","CheckboxController","createConstraint$6","BooleanInputPlugin","reader","_args","writer","cn$d","ColorView","swatchElem","swatchElement","textElement","pickerLayout","pickerElem","pickerElement","rgbToHslInt","g","rp","gp","bp","cmax","cmin","l","hslToRgbInt","hp","sp","lp","rgbToHsvInt","hsvToRgbInt","vp","hslToHsvInt","sd","hsvToHslInt","removeAlphaComponent","comps","appendAlphaComponent","alpha","MODE_CONVERTER_MAP","hsl","hsv","rgb","getColorMaxComponents","mode","loopHueRange","hue","constrainColorComponents","components","ms","convertColorType","to","fms","tms","convertColor","_MODE_CONVERTER_MAP$f","intComps","IntColor","comps_","getComponents","opt_mode","toRgbaObject","rgbComps","a","black","cn$c","ColorPickerView","alphaViews_","hsvElem","svElem","svPaletteView_","svPaletteView","hElem","hPaletteView_","hPaletteView","rgbElem","textsView_","textsView","alphaViews","palette","aElem","apElem","atElem","elems","modeSelectElement","inputViews","parseColorType","parseColorInputParams","color","picker","getKeyScaleForColor","forAlpha","extractColorType","FloatColor","TYPE_TO_CONSTRUCTOR_MAP","int","float","createColor","isFloatColor","isIntColor","convertFloatToInt","cf","convertIntToFloat","ci","mapColorType","equalsStringColorFormat","f1","f2","notation","parseCssNumberOrPercentage","parseFloat","ANGLE_TO_DEG_MAP","deg","angle","grad","rad","PI","turn","parseCssNumberOrAngle","unit","parseFunctionalRgbColorComponents","isNaN","parseFunctionalRgbColor","parseFunctionalRgbaColorComponents","parseFunctionalRgbaColor","parseFunctionalHslColorComponents","parseFunctionalHslColor","parseHslaColorComponents","parseFunctionalHslaColor","parseHexRgbColorComponents","mRgb","mRrggbb","parseHexRgbColor","parseHexRgbaColorComponents","parseHexRgbaColor","parseObjectRgbColorComponents","createObjectRgbColorParser","parseObjectRgbaColorComponents","createObjectRgbaColorParser","PARSER_AND_RESULT","detectStringColor","prev","_ref2","detection","detectStringColorFormat","createColorStringParser","readIntColorString","zerofill","comp","hex","colorToHexRgbString","hexes","colorToHexRgbaString","rgbaComps","colorToFunctionalRgbString","colorToFunctionalRgbaString","aFormatter","rgbFormatter","colorToFunctionalHslString","formatters","colorToFunctionalHslaString","colorToObjectRgbString","names","cc","createObjectRgbColorFormatter","colorToObjectRgbaString","createObjectRgbaColorFormatter","FORMAT_AND_STRINGIFIERS","stringifier","findColorStringifier","fas","cn$b","APaletteView","barElem","colorElem","colorElem_","markerElem","markerElem_","previewElem","previewElem_","leftColor","rightColor","gradientComps","background","backgroundColor","APaletteController","_c$getComponents","_c$getComponents2","_c$getComponents3","_c$getComponents4","cn$a","createModeSelectElement","optElem","ColorTextsView","_this49","modeElem","modeElem_","modeMarkerElem","inputsElem","inputsElem_","inputViews_","applyInputViews_","_this50","compElem","createFormatter$2","createConstraint$5","createComponentController","colorType","colorMode","createComponentControllers","mc","pickedMode","createHexController","isColorMode","ColorTextsController","onModeSelectChange_","colorType_","ccs_","createComponentControllers_","cn$9","HPaletteView","_c$getComponents5","_c$getComponents6","HPaletteController","_c$getComponents7","_c$getComponents8","_c$getComponents9","_c$getComponents10","cn$8","CANVAS_RESOL","SvPaletteView","canvasElem","ctx","hsvComps","imgData","getImageData","iy","ix","putImageData","SvPaletteController","saturation","_this$value$rawValue$","_this$value$rawValue$2","_this$value$rawValue$3","_this$value$rawValue$4","dv","ColorPickerController","hPaletteC_","svPaletteC_","alphaIcs_","supportsAlpha","textsC_","cn$7","ColorSwatchView","swatchElem_","ColorSwatchController","ColorController","_this51","onButtonBlur_","onButtonClick_","onPopupChildBlur_","onPopupChildKeydown_","swatchC_","popC_","pickerC","allFocusableElements","pickerC_","nextTarget","contains","colorToRgbNumber","colorToRgbaNumber","numberToRgbColor","numberToRgbaColor","colorFromRgbNumber","colorFromRgbaNumber","isRgbColorComponent","isRgbColorObject","isRgbaColorObject","isColorObject","equalsColor","comps1","comps2","createColorComponentsFromRgbObject","createColorStringWriter","createColorNumberWriter","colorToNumber","writeRgbaColorObject","writeRgbColorObject","createColorObjectWriter","inValue","shouldSupportAlpha$1","inputParams","createFormatter$1","isForColor","NumberColorInputPlugin","colorFromObject","shouldSupportAlpha","createColorObjectBindingReader","createColorObjectFormatter","ObjectColorInputPlugin","StringColorInputPlugin","PointNdConstraint","asm_","assembly","_this52","toComponents","fromComponents","cn$6","PointNdTextView","_this53","textViews","axisElem","createAxisController","axes","PointNdTextController","_this54","acs_","SliderInputBindingApi","_BindingApi2","_super22","sliderController","createConstraint$4","rc","NumberInputPlugin","textPropsObj","drc","Point2d","toObject","Point2dAssembly","_construct","cn$5","Point2dView","cn$4","Point2dPickerView","onFoldableChange_","onPropsChange_","layout","padElem","padElement","svgElem","svgElem_","xAxisElem","yAxisElem","lineElem","lineElem_","_this$value$rawValue$5","_this$value$rawValue$6","px","py","ipy","computeOffset","keyScales","invertsY","Point2dPickerController","onPadKeyDown_","onPadKeyUp_","_computeOffset","_computeOffset2","dy","_computeOffset3","_computeOffset4","Point2dController","_this55","onPadButtonBlur_","onPadButtonClick_","padC","xKeyScale","yKeyScale","point2dFromUnknown","writePoint2d","createConstraint$3","getSuitableMaxDimensionValue","getSuitableMax","xr","yr","shouldInvertY","yParams","inverted","Point2dInputPlugin","dParams","Point3d","z","Point3dAssembly","point3dFromUnknown","writePoint3d","createConstraint$2","Point3dInputPlugin","Point4d","w","Point4dAssembly","point4dFromUnknown","writePoint4d","createConstraint$1","Point4dInputPlugin","createConstraint","StringInputPlugin","Constants","monitor","defaultInterval","defaultRows","cn$3","MultiLogView","onValueUpdate_","formatter_","textareaElem","rows","readOnly","textareaElem_","_this56","shouldScroll","scrollTop","scrollHeight","lines","MultiLogController","cn$2","SingleLogView","lastValue","SingleLogController","BooleanMonitorPlugin","GraphLogMonitorBindingApi","_BindingApi3","_super23","cn$1","GraphLogView","onCursorChange_","cursor_","maxIndex","points","tx","ty","GraphLogController","onGraphMouseMove_","onGraphMouseLeave_","onGraphPointerDown_","onGraphPointerMove_","onGraphPointerUp_","_this57","offsetX","createFormatter","createTextMonitor","createGraphMonitor","shouldShowGraph","NumberMonitorPlugin","defaultBufferSize","StringMonitorPlugin","multiline","BladeApiCache","map_","Map","_this58","ReadWriteBinding","reader_","writer_","createInputBindingController","valueArgs","ReadonlyBinding","createTicker","createMonitorBindingController","bindingArgs","PluginPool","apiCache","pluginsMap_","blades","inputs","monitors","apiCache_","getAll","register","unshift","createInput_","createMonitor_","ic","createInputBindingApi_","createMonitorBindingApi_","_this59","sharedCache","createDefaultPluginPool","ListBladeApi","_BladeApi4","_super24","_this60","SeparatorBladeApi","_BladeApi5","_super25","SliderBladeApi","_BladeApi6","_super26","_this61","TextBladeApi","_BladeApi7","_super27","_this62","ListBladePlugin","RootApi","_FolderApi","_super28","RootController","_FolderController","_super29","cn","SeparatorView","hrElem","SeparatorController","_BladeController4","_super30","SeparatorBladePlugin","SliderBladePlugin","vc","TextBladePlugin","createDefaultWrapperElement","body","embedStyle","css","querySelector","styleElem","dataset","tpStyle","head","Pane","_RootApi","_super31","opt_config","_this63","rootController","containerElem_","container","usesDefaultWrapper_","setUpDefaultPlugins_","parentElem","registerPlugin","bundle","_this64","plugins","VERSION"],"sources":["/Users/noamsebahoun/Documents/MMI/MMI_3/karl/three-reader-live/node_modules/tweakpane/dist/tweakpane.js"],"sourcesContent":["/*! Tweakpane 4.0.1 (c) 2016 cocopon, licensed under the MIT license. */\nfunction forceCast(v) {\n    return v;\n}\nfunction isEmpty(value) {\n    return value === null || value === undefined;\n}\nfunction isObject$1(value) {\n    return value !== null && typeof value === 'object';\n}\nfunction isRecord(value) {\n    return value !== null && typeof value === 'object';\n}\nfunction deepEqualsArray(a1, a2) {\n    if (a1.length !== a2.length) {\n        return false;\n    }\n    for (let i = 0; i < a1.length; i++) {\n        if (a1[i] !== a2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction deepMerge(r1, r2) {\n    const keys = Array.from(new Set([...Object.keys(r1), ...Object.keys(r2)]));\n    return keys.reduce((result, key) => {\n        const v1 = r1[key];\n        const v2 = r2[key];\n        return isRecord(v1) && isRecord(v2)\n            ? Object.assign(Object.assign({}, result), { [key]: deepMerge(v1, v2) }) : Object.assign(Object.assign({}, result), { [key]: key in r2 ? v2 : v1 });\n    }, {});\n}\n\nfunction isBinding(value) {\n    if (!isObject$1(value)) {\n        return false;\n    }\n    return 'target' in value;\n}\n\nconst CREATE_MESSAGE_MAP = {\n    alreadydisposed: () => 'View has been already disposed',\n    invalidparams: (context) => `Invalid parameters for '${context.name}'`,\n    nomatchingcontroller: (context) => `No matching controller for '${context.key}'`,\n    nomatchingview: (context) => `No matching view for '${JSON.stringify(context.params)}'`,\n    notbindable: () => `Value is not bindable`,\n    notcompatible: (context) => `Not compatible with  plugin '${context.id}'`,\n    propertynotfound: (context) => `Property '${context.name}' not found`,\n    shouldneverhappen: () => 'This error should never happen',\n};\nclass TpError {\n    static alreadyDisposed() {\n        return new TpError({ type: 'alreadydisposed' });\n    }\n    static notBindable() {\n        return new TpError({\n            type: 'notbindable',\n        });\n    }\n    static notCompatible(bundleId, id) {\n        return new TpError({\n            type: 'notcompatible',\n            context: {\n                id: `${bundleId}.${id}`,\n            },\n        });\n    }\n    static propertyNotFound(name) {\n        return new TpError({\n            type: 'propertynotfound',\n            context: {\n                name: name,\n            },\n        });\n    }\n    static shouldNeverHappen() {\n        return new TpError({ type: 'shouldneverhappen' });\n    }\n    constructor(config) {\n        var _a;\n        this.message =\n            (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n        this.name = this.constructor.name;\n        this.stack = new Error(this.message).stack;\n        this.type = config.type;\n    }\n    toString() {\n        return this.message;\n    }\n}\n\nclass BindingTarget {\n    constructor(obj, key) {\n        this.obj_ = obj;\n        this.key = key;\n    }\n    static isBindable(obj) {\n        if (obj === null) {\n            return false;\n        }\n        if (typeof obj !== 'object' && typeof obj !== 'function') {\n            return false;\n        }\n        return true;\n    }\n    read() {\n        return this.obj_[this.key];\n    }\n    write(value) {\n        this.obj_[this.key] = value;\n    }\n    writeProperty(name, value) {\n        const valueObj = this.read();\n        if (!BindingTarget.isBindable(valueObj)) {\n            throw TpError.notBindable();\n        }\n        if (!(name in valueObj)) {\n            throw TpError.propertyNotFound(name);\n        }\n        valueObj[name] = value;\n    }\n}\n\nclass Emitter {\n    constructor() {\n        this.observers_ = {};\n    }\n    on(eventName, handler) {\n        let observers = this.observers_[eventName];\n        if (!observers) {\n            observers = this.observers_[eventName] = [];\n        }\n        observers.push({\n            handler: handler,\n        });\n        return this;\n    }\n    off(eventName, handler) {\n        const observers = this.observers_[eventName];\n        if (observers) {\n            this.observers_[eventName] = observers.filter((observer) => {\n                return observer.handler !== handler;\n            });\n        }\n        return this;\n    }\n    emit(eventName, event) {\n        const observers = this.observers_[eventName];\n        if (!observers) {\n            return;\n        }\n        observers.forEach((observer) => {\n            observer.handler(event);\n        });\n    }\n}\n\nclass ComplexValue {\n    constructor(initialValue, config) {\n        var _a;\n        this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n        this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : ((v1, v2) => v1 === v2);\n        this.emitter = new Emitter();\n        this.rawValue_ = initialValue;\n    }\n    get constraint() {\n        return this.constraint_;\n    }\n    get rawValue() {\n        return this.rawValue_;\n    }\n    set rawValue(rawValue) {\n        this.setRawValue(rawValue, {\n            forceEmit: false,\n            last: true,\n        });\n    }\n    setRawValue(rawValue, options) {\n        const opts = options !== null && options !== void 0 ? options : {\n            forceEmit: false,\n            last: true,\n        };\n        const constrainedValue = this.constraint_\n            ? this.constraint_.constrain(rawValue)\n            : rawValue;\n        const prevValue = this.rawValue_;\n        const changed = !this.equals_(prevValue, constrainedValue);\n        if (!changed && !opts.forceEmit) {\n            return;\n        }\n        this.emitter.emit('beforechange', {\n            sender: this,\n        });\n        this.rawValue_ = constrainedValue;\n        this.emitter.emit('change', {\n            options: opts,\n            previousRawValue: prevValue,\n            rawValue: constrainedValue,\n            sender: this,\n        });\n    }\n}\n\nclass PrimitiveValue {\n    constructor(initialValue) {\n        this.emitter = new Emitter();\n        this.value_ = initialValue;\n    }\n    get rawValue() {\n        return this.value_;\n    }\n    set rawValue(value) {\n        this.setRawValue(value, {\n            forceEmit: false,\n            last: true,\n        });\n    }\n    setRawValue(value, options) {\n        const opts = options !== null && options !== void 0 ? options : {\n            forceEmit: false,\n            last: true,\n        };\n        const prevValue = this.value_;\n        if (prevValue === value && !opts.forceEmit) {\n            return;\n        }\n        this.emitter.emit('beforechange', {\n            sender: this,\n        });\n        this.value_ = value;\n        this.emitter.emit('change', {\n            options: opts,\n            previousRawValue: prevValue,\n            rawValue: this.value_,\n            sender: this,\n        });\n    }\n}\n\nclass ReadonlyPrimitiveValue {\n    constructor(value) {\n        this.emitter = new Emitter();\n        this.onValueBeforeChange_ = this.onValueBeforeChange_.bind(this);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.value_ = value;\n        this.value_.emitter.on('beforechange', this.onValueBeforeChange_);\n        this.value_.emitter.on('change', this.onValueChange_);\n    }\n    get rawValue() {\n        return this.value_.rawValue;\n    }\n    onValueBeforeChange_(ev) {\n        this.emitter.emit('beforechange', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n    onValueChange_(ev) {\n        this.emitter.emit('change', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n}\n\nfunction createValue(initialValue, config) {\n    const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n    const equals = config === null || config === void 0 ? void 0 : config.equals;\n    if (!constraint && !equals) {\n        return new PrimitiveValue(initialValue);\n    }\n    return new ComplexValue(initialValue, config);\n}\nfunction createReadonlyValue(value) {\n    return [\n        new ReadonlyPrimitiveValue(value),\n        (rawValue, options) => {\n            value.setRawValue(rawValue, options);\n        },\n    ];\n}\n\nclass ValueMap {\n    constructor(valueMap) {\n        this.emitter = new Emitter();\n        this.valMap_ = valueMap;\n        for (const key in this.valMap_) {\n            const v = this.valMap_[key];\n            v.emitter.on('change', () => {\n                this.emitter.emit('change', {\n                    key: key,\n                    sender: this,\n                });\n            });\n        }\n    }\n    static createCore(initialValue) {\n        const keys = Object.keys(initialValue);\n        return keys.reduce((o, key) => {\n            return Object.assign(o, {\n                [key]: createValue(initialValue[key]),\n            });\n        }, {});\n    }\n    static fromObject(initialValue) {\n        const core = this.createCore(initialValue);\n        return new ValueMap(core);\n    }\n    get(key) {\n        return this.valMap_[key].rawValue;\n    }\n    set(key, value) {\n        this.valMap_[key].rawValue = value;\n    }\n    value(key) {\n        return this.valMap_[key];\n    }\n}\n\nclass DefiniteRangeConstraint {\n    constructor(config) {\n        this.values = ValueMap.fromObject({\n            max: config.max,\n            min: config.min,\n        });\n    }\n    constrain(value) {\n        const max = this.values.get('max');\n        const min = this.values.get('min');\n        return Math.min(Math.max(value, min), max);\n    }\n}\n\nclass RangeConstraint {\n    constructor(config) {\n        this.values = ValueMap.fromObject({\n            max: config.max,\n            min: config.min,\n        });\n    }\n    constrain(value) {\n        const max = this.values.get('max');\n        const min = this.values.get('min');\n        let result = value;\n        if (!isEmpty(min)) {\n            result = Math.max(result, min);\n        }\n        if (!isEmpty(max)) {\n            result = Math.min(result, max);\n        }\n        return result;\n    }\n}\n\nclass StepConstraint {\n    constructor(step, origin = 0) {\n        this.step = step;\n        this.origin = origin;\n    }\n    constrain(value) {\n        const o = this.origin % this.step;\n        const r = Math.round((value - o) / this.step);\n        return o + r * this.step;\n    }\n}\n\nclass NumberLiteralNode {\n    constructor(text) {\n        this.text = text;\n    }\n    evaluate() {\n        return Number(this.text);\n    }\n    toString() {\n        return this.text;\n    }\n}\nconst BINARY_OPERATION_MAP = {\n    '**': (v1, v2) => Math.pow(v1, v2),\n    '*': (v1, v2) => v1 * v2,\n    '/': (v1, v2) => v1 / v2,\n    '%': (v1, v2) => v1 % v2,\n    '+': (v1, v2) => v1 + v2,\n    '-': (v1, v2) => v1 - v2,\n    '<<': (v1, v2) => v1 << v2,\n    '>>': (v1, v2) => v1 >> v2,\n    '>>>': (v1, v2) => v1 >>> v2,\n    '&': (v1, v2) => v1 & v2,\n    '^': (v1, v2) => v1 ^ v2,\n    '|': (v1, v2) => v1 | v2,\n};\nclass BinaryOperationNode {\n    constructor(operator, left, right) {\n        this.left = left;\n        this.operator = operator;\n        this.right = right;\n    }\n    evaluate() {\n        const op = BINARY_OPERATION_MAP[this.operator];\n        if (!op) {\n            throw new Error(`unexpected binary operator: '${this.operator}`);\n        }\n        return op(this.left.evaluate(), this.right.evaluate());\n    }\n    toString() {\n        return [\n            'b(',\n            this.left.toString(),\n            this.operator,\n            this.right.toString(),\n            ')',\n        ].join(' ');\n    }\n}\nconst UNARY_OPERATION_MAP = {\n    '+': (v) => v,\n    '-': (v) => -v,\n    '~': (v) => ~v,\n};\nclass UnaryOperationNode {\n    constructor(operator, expr) {\n        this.operator = operator;\n        this.expression = expr;\n    }\n    evaluate() {\n        const op = UNARY_OPERATION_MAP[this.operator];\n        if (!op) {\n            throw new Error(`unexpected unary operator: '${this.operator}`);\n        }\n        return op(this.expression.evaluate());\n    }\n    toString() {\n        return ['u(', this.operator, this.expression.toString(), ')'].join(' ');\n    }\n}\n\nfunction combineReader(parsers) {\n    return (text, cursor) => {\n        for (let i = 0; i < parsers.length; i++) {\n            const result = parsers[i](text, cursor);\n            if (result !== '') {\n                return result;\n            }\n        }\n        return '';\n    };\n}\nfunction readWhitespace(text, cursor) {\n    var _a;\n    const m = text.substr(cursor).match(/^\\s+/);\n    return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n}\nfunction readNonZeroDigit(text, cursor) {\n    const ch = text.substr(cursor, 1);\n    return ch.match(/^[1-9]$/) ? ch : '';\n}\nfunction readDecimalDigits(text, cursor) {\n    var _a;\n    const m = text.substr(cursor).match(/^[0-9]+/);\n    return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n}\nfunction readSignedInteger(text, cursor) {\n    const ds = readDecimalDigits(text, cursor);\n    if (ds !== '') {\n        return ds;\n    }\n    const sign = text.substr(cursor, 1);\n    cursor += 1;\n    if (sign !== '-' && sign !== '+') {\n        return '';\n    }\n    const sds = readDecimalDigits(text, cursor);\n    if (sds === '') {\n        return '';\n    }\n    return sign + sds;\n}\nfunction readExponentPart(text, cursor) {\n    const e = text.substr(cursor, 1);\n    cursor += 1;\n    if (e.toLowerCase() !== 'e') {\n        return '';\n    }\n    const si = readSignedInteger(text, cursor);\n    if (si === '') {\n        return '';\n    }\n    return e + si;\n}\nfunction readDecimalIntegerLiteral(text, cursor) {\n    const ch = text.substr(cursor, 1);\n    if (ch === '0') {\n        return ch;\n    }\n    const nzd = readNonZeroDigit(text, cursor);\n    cursor += nzd.length;\n    if (nzd === '') {\n        return '';\n    }\n    return nzd + readDecimalDigits(text, cursor);\n}\nfunction readDecimalLiteral1(text, cursor) {\n    const dil = readDecimalIntegerLiteral(text, cursor);\n    cursor += dil.length;\n    if (dil === '') {\n        return '';\n    }\n    const dot = text.substr(cursor, 1);\n    cursor += dot.length;\n    if (dot !== '.') {\n        return '';\n    }\n    const dds = readDecimalDigits(text, cursor);\n    cursor += dds.length;\n    return dil + dot + dds + readExponentPart(text, cursor);\n}\nfunction readDecimalLiteral2(text, cursor) {\n    const dot = text.substr(cursor, 1);\n    cursor += dot.length;\n    if (dot !== '.') {\n        return '';\n    }\n    const dds = readDecimalDigits(text, cursor);\n    cursor += dds.length;\n    if (dds === '') {\n        return '';\n    }\n    return dot + dds + readExponentPart(text, cursor);\n}\nfunction readDecimalLiteral3(text, cursor) {\n    const dil = readDecimalIntegerLiteral(text, cursor);\n    cursor += dil.length;\n    if (dil === '') {\n        return '';\n    }\n    return dil + readExponentPart(text, cursor);\n}\nconst readDecimalLiteral = combineReader([\n    readDecimalLiteral1,\n    readDecimalLiteral2,\n    readDecimalLiteral3,\n]);\nfunction parseBinaryDigits(text, cursor) {\n    var _a;\n    const m = text.substr(cursor).match(/^[01]+/);\n    return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n}\nfunction readBinaryIntegerLiteral(text, cursor) {\n    const prefix = text.substr(cursor, 2);\n    cursor += prefix.length;\n    if (prefix.toLowerCase() !== '0b') {\n        return '';\n    }\n    const bds = parseBinaryDigits(text, cursor);\n    if (bds === '') {\n        return '';\n    }\n    return prefix + bds;\n}\nfunction readOctalDigits(text, cursor) {\n    var _a;\n    const m = text.substr(cursor).match(/^[0-7]+/);\n    return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n}\nfunction readOctalIntegerLiteral(text, cursor) {\n    const prefix = text.substr(cursor, 2);\n    cursor += prefix.length;\n    if (prefix.toLowerCase() !== '0o') {\n        return '';\n    }\n    const ods = readOctalDigits(text, cursor);\n    if (ods === '') {\n        return '';\n    }\n    return prefix + ods;\n}\nfunction readHexDigits(text, cursor) {\n    var _a;\n    const m = text.substr(cursor).match(/^[0-9a-f]+/i);\n    return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n}\nfunction readHexIntegerLiteral(text, cursor) {\n    const prefix = text.substr(cursor, 2);\n    cursor += prefix.length;\n    if (prefix.toLowerCase() !== '0x') {\n        return '';\n    }\n    const hds = readHexDigits(text, cursor);\n    if (hds === '') {\n        return '';\n    }\n    return prefix + hds;\n}\nconst readNonDecimalIntegerLiteral = combineReader([\n    readBinaryIntegerLiteral,\n    readOctalIntegerLiteral,\n    readHexIntegerLiteral,\n]);\nconst readNumericLiteral = combineReader([\n    readNonDecimalIntegerLiteral,\n    readDecimalLiteral,\n]);\n\nfunction parseLiteral(text, cursor) {\n    const num = readNumericLiteral(text, cursor);\n    cursor += num.length;\n    if (num === '') {\n        return null;\n    }\n    return {\n        evaluable: new NumberLiteralNode(num),\n        cursor: cursor,\n    };\n}\nfunction parseParenthesizedExpression(text, cursor) {\n    const op = text.substr(cursor, 1);\n    cursor += op.length;\n    if (op !== '(') {\n        return null;\n    }\n    const expr = parseExpression(text, cursor);\n    if (!expr) {\n        return null;\n    }\n    cursor = expr.cursor;\n    cursor += readWhitespace(text, cursor).length;\n    const cl = text.substr(cursor, 1);\n    cursor += cl.length;\n    if (cl !== ')') {\n        return null;\n    }\n    return {\n        evaluable: expr.evaluable,\n        cursor: cursor,\n    };\n}\nfunction parsePrimaryExpression(text, cursor) {\n    var _a;\n    return ((_a = parseLiteral(text, cursor)) !== null && _a !== void 0 ? _a : parseParenthesizedExpression(text, cursor));\n}\nfunction parseUnaryExpression(text, cursor) {\n    const expr = parsePrimaryExpression(text, cursor);\n    if (expr) {\n        return expr;\n    }\n    const op = text.substr(cursor, 1);\n    cursor += op.length;\n    if (op !== '+' && op !== '-' && op !== '~') {\n        return null;\n    }\n    const num = parseUnaryExpression(text, cursor);\n    if (!num) {\n        return null;\n    }\n    cursor = num.cursor;\n    return {\n        cursor: cursor,\n        evaluable: new UnaryOperationNode(op, num.evaluable),\n    };\n}\nfunction readBinaryOperator(ops, text, cursor) {\n    cursor += readWhitespace(text, cursor).length;\n    const op = ops.filter((op) => text.startsWith(op, cursor))[0];\n    if (!op) {\n        return null;\n    }\n    cursor += op.length;\n    cursor += readWhitespace(text, cursor).length;\n    return {\n        cursor: cursor,\n        operator: op,\n    };\n}\nfunction createBinaryOperationExpressionParser(exprParser, ops) {\n    return (text, cursor) => {\n        const firstExpr = exprParser(text, cursor);\n        if (!firstExpr) {\n            return null;\n        }\n        cursor = firstExpr.cursor;\n        let expr = firstExpr.evaluable;\n        for (;;) {\n            const op = readBinaryOperator(ops, text, cursor);\n            if (!op) {\n                break;\n            }\n            cursor = op.cursor;\n            const nextExpr = exprParser(text, cursor);\n            if (!nextExpr) {\n                return null;\n            }\n            cursor = nextExpr.cursor;\n            expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n        }\n        return expr\n            ? {\n                cursor: cursor,\n                evaluable: expr,\n            }\n            : null;\n    };\n}\nconst parseBinaryOperationExpression = [\n    ['**'],\n    ['*', '/', '%'],\n    ['+', '-'],\n    ['<<', '>>>', '>>'],\n    ['&'],\n    ['^'],\n    ['|'],\n].reduce((parser, ops) => {\n    return createBinaryOperationExpressionParser(parser, ops);\n}, parseUnaryExpression);\nfunction parseExpression(text, cursor) {\n    cursor += readWhitespace(text, cursor).length;\n    return parseBinaryOperationExpression(text, cursor);\n}\nfunction parseEcmaNumberExpression(text) {\n    const expr = parseExpression(text, 0);\n    if (!expr) {\n        return null;\n    }\n    const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n    if (cursor !== text.length) {\n        return null;\n    }\n    return expr.evaluable;\n}\n\nfunction parseNumber(text) {\n    var _a;\n    const r = parseEcmaNumberExpression(text);\n    return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n}\nfunction numberFromUnknown(value) {\n    if (typeof value === 'number') {\n        return value;\n    }\n    if (typeof value === 'string') {\n        const pv = parseNumber(value);\n        if (!isEmpty(pv)) {\n            return pv;\n        }\n    }\n    return 0;\n}\nfunction numberToString(value) {\n    return String(value);\n}\nfunction createNumberFormatter(digits) {\n    return (value) => {\n        return value.toFixed(Math.max(Math.min(digits, 20), 0));\n    };\n}\n\nfunction mapRange(value, start1, end1, start2, end2) {\n    const p = (value - start1) / (end1 - start1);\n    return start2 + p * (end2 - start2);\n}\nfunction getDecimalDigits(value) {\n    const text = String(value.toFixed(10));\n    const frac = text.split('.')[1];\n    return frac.replace(/0+$/, '').length;\n}\nfunction constrainRange(value, min, max) {\n    return Math.min(Math.max(value, min), max);\n}\nfunction loopRange(value, max) {\n    return ((value % max) + max) % max;\n}\nfunction getSuitableDecimalDigits(params, rawValue) {\n    return !isEmpty(params.step)\n        ? getDecimalDigits(params.step)\n        : Math.max(getDecimalDigits(rawValue), 2);\n}\nfunction getSuitableKeyScale(params) {\n    var _a;\n    return (_a = params.step) !== null && _a !== void 0 ? _a : 1;\n}\nfunction getSuitablePointerScale(params, rawValue) {\n    var _a;\n    const base = Math.abs((_a = params.step) !== null && _a !== void 0 ? _a : rawValue);\n    return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n}\nfunction createStepConstraint(params, initialValue) {\n    if (!isEmpty(params.step)) {\n        return new StepConstraint(params.step, initialValue);\n    }\n    return null;\n}\nfunction createRangeConstraint(params) {\n    if (!isEmpty(params.max) && !isEmpty(params.min)) {\n        return new DefiniteRangeConstraint({\n            max: params.max,\n            min: params.min,\n        });\n    }\n    if (!isEmpty(params.max) || !isEmpty(params.min)) {\n        return new RangeConstraint({\n            max: params.max,\n            min: params.min,\n        });\n    }\n    return null;\n}\nfunction createNumberTextPropsObject(params, initialValue) {\n    var _a, _b, _c;\n    return {\n        formatter: (_a = params.format) !== null && _a !== void 0 ? _a : createNumberFormatter(getSuitableDecimalDigits(params, initialValue)),\n        keyScale: (_b = params.keyScale) !== null && _b !== void 0 ? _b : getSuitableKeyScale(params),\n        pointerScale: (_c = params.pointerScale) !== null && _c !== void 0 ? _c : getSuitablePointerScale(params, initialValue),\n    };\n}\nfunction createNumberTextInputParamsParser(p) {\n    return {\n        format: p.optional.function,\n        keyScale: p.optional.number,\n        max: p.optional.number,\n        min: p.optional.number,\n        pointerScale: p.optional.number,\n        step: p.optional.number,\n    };\n}\n\nfunction createPointAxis(config) {\n    return {\n        constraint: config.constraint,\n        textProps: ValueMap.fromObject(createNumberTextPropsObject(config.params, config.initialValue)),\n    };\n}\n\nclass BladeApi {\n    constructor(controller) {\n        this.controller = controller;\n    }\n    get element() {\n        return this.controller.view.element;\n    }\n    get disabled() {\n        return this.controller.viewProps.get('disabled');\n    }\n    set disabled(disabled) {\n        this.controller.viewProps.set('disabled', disabled);\n    }\n    get hidden() {\n        return this.controller.viewProps.get('hidden');\n    }\n    set hidden(hidden) {\n        this.controller.viewProps.set('hidden', hidden);\n    }\n    dispose() {\n        this.controller.viewProps.set('disposed', true);\n    }\n    importState(state) {\n        return this.controller.importState(state);\n    }\n    exportState() {\n        return this.controller.exportState();\n    }\n}\n\nclass TpEvent {\n    constructor(target) {\n        this.target = target;\n    }\n}\nclass TpChangeEvent extends TpEvent {\n    constructor(target, value, last) {\n        super(target);\n        this.value = value;\n        this.last = last !== null && last !== void 0 ? last : true;\n    }\n}\nclass TpFoldEvent extends TpEvent {\n    constructor(target, expanded) {\n        super(target);\n        this.expanded = expanded;\n    }\n}\nclass TpTabSelectEvent extends TpEvent {\n    constructor(target, index) {\n        super(target);\n        this.index = index;\n    }\n}\n\nclass BindingApi extends BladeApi {\n    constructor(controller) {\n        super(controller);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.emitter_ = new Emitter();\n        this.controller.value.emitter.on('change', this.onValueChange_);\n    }\n    get label() {\n        return this.controller.labelController.props.get('label');\n    }\n    set label(label) {\n        this.controller.labelController.props.set('label', label);\n    }\n    get key() {\n        return this.controller.value.binding.target.key;\n    }\n    get tag() {\n        return this.controller.tag;\n    }\n    set tag(tag) {\n        this.controller.tag = tag;\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        });\n        return this;\n    }\n    refresh() {\n        this.controller.value.fetch();\n    }\n    onValueChange_(ev) {\n        const value = this.controller.value;\n        this.emitter_.emit('change', new TpChangeEvent(this, forceCast(value.binding.target.read()), ev.options.last));\n    }\n}\n\nclass InputBindingValue {\n    constructor(value, binding) {\n        this.onValueBeforeChange_ = this.onValueBeforeChange_.bind(this);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.binding = binding;\n        this.value_ = value;\n        this.value_.emitter.on('beforechange', this.onValueBeforeChange_);\n        this.value_.emitter.on('change', this.onValueChange_);\n        this.emitter = new Emitter();\n    }\n    get rawValue() {\n        return this.value_.rawValue;\n    }\n    set rawValue(rawValue) {\n        this.value_.rawValue = rawValue;\n    }\n    setRawValue(rawValue, options) {\n        this.value_.setRawValue(rawValue, options);\n    }\n    fetch() {\n        this.value_.rawValue = this.binding.read();\n    }\n    push() {\n        this.binding.write(this.value_.rawValue);\n    }\n    onValueBeforeChange_(ev) {\n        this.emitter.emit('beforechange', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n    onValueChange_(ev) {\n        this.push();\n        this.emitter.emit('change', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n}\nfunction isInputBindingValue(v) {\n    if (!('binding' in v)) {\n        return false;\n    }\n    const b = v['binding'];\n    return isBinding(b) && 'read' in b && 'write' in b;\n}\n\nfunction parseObject(value, keyToParserMap) {\n    const keys = Object.keys(keyToParserMap);\n    const result = keys.reduce((tmp, key) => {\n        if (tmp === undefined) {\n            return undefined;\n        }\n        const parser = keyToParserMap[key];\n        const result = parser(value[key]);\n        return result.succeeded\n            ? Object.assign(Object.assign({}, tmp), { [key]: result.value }) : undefined;\n    }, {});\n    return forceCast(result);\n}\nfunction parseArray(value, parseItem) {\n    return value.reduce((tmp, item) => {\n        if (tmp === undefined) {\n            return undefined;\n        }\n        const result = parseItem(item);\n        if (!result.succeeded || result.value === undefined) {\n            return undefined;\n        }\n        return [...tmp, result.value];\n    }, []);\n}\nfunction isObject(value) {\n    if (value === null) {\n        return false;\n    }\n    return typeof value === 'object';\n}\nfunction createMicroParserBuilder(parse) {\n    return (optional) => (v) => {\n        if (!optional && v === undefined) {\n            return {\n                succeeded: false,\n                value: undefined,\n            };\n        }\n        if (optional && v === undefined) {\n            return {\n                succeeded: true,\n                value: undefined,\n            };\n        }\n        const result = parse(v);\n        return result !== undefined\n            ? {\n                succeeded: true,\n                value: result,\n            }\n            : {\n                succeeded: false,\n                value: undefined,\n            };\n    };\n}\nfunction createMicroParserBuilders(optional) {\n    return {\n        custom: (parse) => createMicroParserBuilder(parse)(optional),\n        boolean: createMicroParserBuilder((v) => typeof v === 'boolean' ? v : undefined)(optional),\n        number: createMicroParserBuilder((v) => typeof v === 'number' ? v : undefined)(optional),\n        string: createMicroParserBuilder((v) => typeof v === 'string' ? v : undefined)(optional),\n        function: createMicroParserBuilder((v) =>\n        typeof v === 'function' ? v : undefined)(optional),\n        constant: (value) => createMicroParserBuilder((v) => (v === value ? value : undefined))(optional),\n        raw: createMicroParserBuilder((v) => v)(optional),\n        object: (keyToParserMap) => createMicroParserBuilder((v) => {\n            if (!isObject(v)) {\n                return undefined;\n            }\n            return parseObject(v, keyToParserMap);\n        })(optional),\n        array: (itemParser) => createMicroParserBuilder((v) => {\n            if (!Array.isArray(v)) {\n                return undefined;\n            }\n            return parseArray(v, itemParser);\n        })(optional),\n    };\n}\nconst MicroParsers = {\n    optional: createMicroParserBuilders(true),\n    required: createMicroParserBuilders(false),\n};\nfunction parseRecord(value, keyToParserMap) {\n    const map = keyToParserMap(MicroParsers);\n    const result = MicroParsers.required.object(map)(value);\n    return result.succeeded ? result.value : undefined;\n}\n\nfunction importBladeState(state, superImport, parser, callback) {\n    if (superImport && !superImport(state)) {\n        return false;\n    }\n    const result = parseRecord(state, parser);\n    return result ? callback(result) : false;\n}\nfunction exportBladeState(superExport, thisState) {\n    var _a;\n    return deepMerge((_a = superExport === null || superExport === void 0 ? void 0 : superExport()) !== null && _a !== void 0 ? _a : {}, thisState);\n}\n\nfunction isValueBladeController(bc) {\n    return 'value' in bc;\n}\n\nfunction isBindingValue(v) {\n    if (!isObject$1(v) || !('binding' in v)) {\n        return false;\n    }\n    const b = v.binding;\n    return isBinding(b);\n}\n\nconst SVG_NS = 'http://www.w3.org/2000/svg';\nfunction forceReflow(element) {\n    element.offsetHeight;\n}\nfunction disableTransitionTemporarily(element, callback) {\n    const t = element.style.transition;\n    element.style.transition = 'none';\n    callback();\n    element.style.transition = t;\n}\nfunction supportsTouch(doc) {\n    return doc.ontouchstart !== undefined;\n}\nfunction getGlobalObject() {\n    return globalThis;\n}\nfunction getWindowDocument() {\n    const globalObj = forceCast(getGlobalObject());\n    return globalObj.document;\n}\nfunction getCanvasContext(canvasElement) {\n    const win = canvasElement.ownerDocument.defaultView;\n    if (!win) {\n        return null;\n    }\n    const isBrowser = 'document' in win;\n    return isBrowser\n        ? canvasElement.getContext('2d', {\n            willReadFrequently: true,\n        })\n        : null;\n}\nconst ICON_ID_TO_INNER_HTML_MAP = {\n    check: '<path d=\"M2 8l4 4l8 -8\"/>',\n    dropdown: '<path d=\"M5 7h6l-3 3 z\"/>',\n    p2dpad: '<path d=\"M8 4v8\"/><path d=\"M4 8h8\"/><circle cx=\"12\" cy=\"12\" r=\"1.2\"/>',\n};\nfunction createSvgIconElement(document, iconId) {\n    const elem = document.createElementNS(SVG_NS, 'svg');\n    elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];\n    return elem;\n}\nfunction insertElementAt(parentElement, element, index) {\n    parentElement.insertBefore(element, parentElement.children[index]);\n}\nfunction removeElement(element) {\n    if (element.parentElement) {\n        element.parentElement.removeChild(element);\n    }\n}\nfunction removeChildElements(element) {\n    while (element.children.length > 0) {\n        element.removeChild(element.children[0]);\n    }\n}\nfunction removeChildNodes(element) {\n    while (element.childNodes.length > 0) {\n        element.removeChild(element.childNodes[0]);\n    }\n}\nfunction findNextTarget(ev) {\n    if (ev.relatedTarget) {\n        return forceCast(ev.relatedTarget);\n    }\n    if ('explicitOriginalTarget' in ev) {\n        return ev.explicitOriginalTarget;\n    }\n    return null;\n}\n\nfunction bindValue(value, applyValue) {\n    value.emitter.on('change', (ev) => {\n        applyValue(ev.rawValue);\n    });\n    applyValue(value.rawValue);\n}\nfunction bindValueMap(valueMap, key, applyValue) {\n    bindValue(valueMap.value(key), applyValue);\n}\n\nconst PREFIX = 'tp';\nfunction ClassName(viewName) {\n    const fn = (opt_elementName, opt_modifier) => {\n        return [\n            PREFIX,\n            '-',\n            viewName,\n            'v',\n            opt_elementName ? `_${opt_elementName}` : '',\n            opt_modifier ? `-${opt_modifier}` : '',\n        ].join('');\n    };\n    return fn;\n}\n\nconst cn$r = ClassName('lbl');\nfunction createLabelNode(doc, label) {\n    const frag = doc.createDocumentFragment();\n    const lineNodes = label.split('\\n').map((line) => {\n        return doc.createTextNode(line);\n    });\n    lineNodes.forEach((lineNode, index) => {\n        if (index > 0) {\n            frag.appendChild(doc.createElement('br'));\n        }\n        frag.appendChild(lineNode);\n    });\n    return frag;\n}\nclass LabelView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$r());\n        config.viewProps.bindClassModifiers(this.element);\n        const labelElem = doc.createElement('div');\n        labelElem.classList.add(cn$r('l'));\n        bindValueMap(config.props, 'label', (value) => {\n            if (isEmpty(value)) {\n                this.element.classList.add(cn$r(undefined, 'nol'));\n            }\n            else {\n                this.element.classList.remove(cn$r(undefined, 'nol'));\n                removeChildNodes(labelElem);\n                labelElem.appendChild(createLabelNode(doc, value));\n            }\n        });\n        this.element.appendChild(labelElem);\n        this.labelElement = labelElem;\n        const valueElem = doc.createElement('div');\n        valueElem.classList.add(cn$r('v'));\n        this.element.appendChild(valueElem);\n        this.valueElement = valueElem;\n    }\n}\n\nclass LabelController {\n    constructor(doc, config) {\n        this.props = config.props;\n        this.valueController = config.valueController;\n        this.viewProps = config.valueController.viewProps;\n        this.view = new LabelView(doc, {\n            props: config.props,\n            viewProps: this.viewProps,\n        });\n        this.view.valueElement.appendChild(this.valueController.view.element);\n    }\n    importProps(state) {\n        return importBladeState(state, null, (p) => ({\n            label: p.optional.string,\n        }), (result) => {\n            this.props.set('label', result.label);\n            return true;\n        });\n    }\n    exportProps() {\n        return exportBladeState(null, {\n            label: this.props.get('label'),\n        });\n    }\n}\n\nfunction getAllBladePositions() {\n    return ['veryfirst', 'first', 'last', 'verylast'];\n}\n\nconst cn$q = ClassName('');\nconst POS_TO_CLASS_NAME_MAP = {\n    veryfirst: 'vfst',\n    first: 'fst',\n    last: 'lst',\n    verylast: 'vlst',\n};\nclass BladeController {\n    constructor(config) {\n        this.parent_ = null;\n        this.blade = config.blade;\n        this.view = config.view;\n        this.viewProps = config.viewProps;\n        const elem = this.view.element;\n        this.blade.value('positions').emitter.on('change', () => {\n            getAllBladePositions().forEach((pos) => {\n                elem.classList.remove(cn$q(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n            });\n            this.blade.get('positions').forEach((pos) => {\n                elem.classList.add(cn$q(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n            });\n        });\n        this.viewProps.handleDispose(() => {\n            removeElement(elem);\n        });\n    }\n    get parent() {\n        return this.parent_;\n    }\n    set parent(parent) {\n        this.parent_ = parent;\n        this.viewProps.set('parent', this.parent_ ? this.parent_.viewProps : null);\n    }\n    importState(state) {\n        return importBladeState(state, null, (p) => ({\n            disabled: p.required.boolean,\n            hidden: p.required.boolean,\n        }), (result) => {\n            this.viewProps.importState(result);\n            return true;\n        });\n    }\n    exportState() {\n        return exportBladeState(null, Object.assign({}, this.viewProps.exportState()));\n    }\n}\n\nclass LabeledValueBladeController extends BladeController {\n    constructor(doc, config) {\n        if (config.value !== config.valueController.value) {\n            throw TpError.shouldNeverHappen();\n        }\n        const viewProps = config.valueController.viewProps;\n        const lc = new LabelController(doc, {\n            blade: config.blade,\n            props: config.props,\n            valueController: config.valueController,\n        });\n        super(Object.assign(Object.assign({}, config), { view: new LabelView(doc, {\n                props: config.props,\n                viewProps: viewProps,\n            }), viewProps: viewProps }));\n        this.labelController = lc;\n        this.value = config.value;\n        this.valueController = config.valueController;\n        this.view.valueElement.appendChild(this.valueController.view.element);\n    }\n    importState(state) {\n        return importBladeState(state, (s) => {\n            var _a, _b, _c;\n            return super.importState(s) &&\n                this.labelController.importProps(s) &&\n                ((_c = (_b = (_a = this.valueController).importProps) === null || _b === void 0 ? void 0 : _b.call(_a, state)) !== null && _c !== void 0 ? _c : true);\n        }, (p) => ({\n            value: p.optional.raw,\n        }), (result) => {\n            if (result.value) {\n                this.value.rawValue = result.value;\n            }\n            return true;\n        });\n    }\n    exportState() {\n        var _a, _b, _c;\n        return exportBladeState(() => super.exportState(), Object.assign(Object.assign({ value: this.value.rawValue }, this.labelController.exportProps()), ((_c = (_b = (_a = this.valueController).exportProps) === null || _b === void 0 ? void 0 : _b.call(_a)) !== null && _c !== void 0 ? _c : {})));\n    }\n}\n\nfunction excludeValue(state) {\n    const result = Object.assign({}, state);\n    delete result.value;\n    return result;\n}\nclass BindingController extends LabeledValueBladeController {\n    constructor(doc, config) {\n        super(doc, config);\n        this.tag = config.tag;\n    }\n    importState(state) {\n        return importBladeState(state,\n        (_s) => super.importState(excludeValue(state)), (p) => ({\n            tag: p.optional.string,\n        }), (result) => {\n            this.tag = result.tag;\n            return true;\n        });\n    }\n    exportState() {\n        return exportBladeState(() => excludeValue(super.exportState()), {\n            binding: {\n                key: this.value.binding.target.key,\n                value: this.value.binding.target.read(),\n            },\n            tag: this.tag,\n        });\n    }\n}\nfunction isBindingController(bc) {\n    return isValueBladeController(bc) && isBindingValue(bc.value);\n}\n\nclass InputBindingController extends BindingController {\n    importState(state) {\n        return importBladeState(state, (s) => super.importState(s), (p) => ({\n            binding: p.required.object({\n                value: p.required.raw,\n            }),\n        }), (result) => {\n            this.value.binding.inject(result.binding.value);\n            this.value.fetch();\n            return true;\n        });\n    }\n}\nfunction isInputBindingController(bc) {\n    return isValueBladeController(bc) && isInputBindingValue(bc.value);\n}\n\nfunction fillBuffer(buffer, bufferSize) {\n    while (buffer.length < bufferSize) {\n        buffer.push(undefined);\n    }\n}\nfunction initializeBuffer(bufferSize) {\n    const buffer = [];\n    fillBuffer(buffer, bufferSize);\n    return buffer;\n}\nfunction createTrimmedBuffer(buffer) {\n    const index = buffer.indexOf(undefined);\n    return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n}\nfunction createPushedBuffer(buffer, newValue) {\n    const newBuffer = [...createTrimmedBuffer(buffer), newValue];\n    if (newBuffer.length > buffer.length) {\n        newBuffer.splice(0, newBuffer.length - buffer.length);\n    }\n    else {\n        fillBuffer(newBuffer, buffer.length);\n    }\n    return newBuffer;\n}\n\nclass MonitorBindingValue {\n    constructor(config) {\n        this.emitter = new Emitter();\n        this.onTick_ = this.onTick_.bind(this);\n        this.onValueBeforeChange_ = this.onValueBeforeChange_.bind(this);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.binding = config.binding;\n        this.value_ = createValue(initializeBuffer(config.bufferSize));\n        this.value_.emitter.on('beforechange', this.onValueBeforeChange_);\n        this.value_.emitter.on('change', this.onValueChange_);\n        this.ticker = config.ticker;\n        this.ticker.emitter.on('tick', this.onTick_);\n        this.fetch();\n    }\n    get rawValue() {\n        return this.value_.rawValue;\n    }\n    set rawValue(rawValue) {\n        this.value_.rawValue = rawValue;\n    }\n    setRawValue(rawValue, options) {\n        this.value_.setRawValue(rawValue, options);\n    }\n    fetch() {\n        this.value_.rawValue = createPushedBuffer(this.value_.rawValue, this.binding.read());\n    }\n    onTick_() {\n        this.fetch();\n    }\n    onValueBeforeChange_(ev) {\n        this.emitter.emit('beforechange', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n    onValueChange_(ev) {\n        this.emitter.emit('change', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n}\nfunction isMonitorBindingValue(v) {\n    if (!('binding' in v)) {\n        return false;\n    }\n    const b = v['binding'];\n    return isBinding(b) && 'read' in b && !('write' in b);\n}\n\nclass MonitorBindingController extends BindingController {\n    exportState() {\n        return exportBladeState(() => super.exportState(), {\n            binding: {\n                readonly: true,\n            },\n        });\n    }\n}\nfunction isMonitorBindingController(bc) {\n    return (isValueBladeController(bc) &&\n        isMonitorBindingValue(bc.value));\n}\n\nclass ButtonApi extends BladeApi {\n    get label() {\n        return this.controller.labelController.props.get('label');\n    }\n    set label(label) {\n        this.controller.labelController.props.set('label', label);\n    }\n    get title() {\n        var _a;\n        return (_a = this.controller.buttonController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n    }\n    set title(title) {\n        this.controller.buttonController.props.set('title', title);\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        const emitter = this.controller.buttonController.emitter;\n        emitter.on(eventName, () => {\n            bh(new TpEvent(this));\n        });\n        return this;\n    }\n}\n\nfunction applyClass(elem, className, active) {\n    if (active) {\n        elem.classList.add(className);\n    }\n    else {\n        elem.classList.remove(className);\n    }\n}\nfunction valueToClassName(elem, className) {\n    return (value) => {\n        applyClass(elem, className, value);\n    };\n}\nfunction bindValueToTextContent(value, elem) {\n    bindValue(value, (text) => {\n        elem.textContent = text !== null && text !== void 0 ? text : '';\n    });\n}\n\nconst cn$p = ClassName('btn');\nclass ButtonView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$p());\n        config.viewProps.bindClassModifiers(this.element);\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(cn$p('b'));\n        config.viewProps.bindDisabled(buttonElem);\n        this.element.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        const titleElem = doc.createElement('div');\n        titleElem.classList.add(cn$p('t'));\n        bindValueToTextContent(config.props.value('title'), titleElem);\n        this.buttonElement.appendChild(titleElem);\n    }\n}\n\nclass ButtonController {\n    constructor(doc, config) {\n        this.emitter = new Emitter();\n        this.onClick_ = this.onClick_.bind(this);\n        this.props = config.props;\n        this.viewProps = config.viewProps;\n        this.view = new ButtonView(doc, {\n            props: this.props,\n            viewProps: this.viewProps,\n        });\n        this.view.buttonElement.addEventListener('click', this.onClick_);\n    }\n    importProps(state) {\n        return importBladeState(state, null, (p) => ({\n            title: p.optional.string,\n        }), (result) => {\n            this.props.set('title', result.title);\n            return true;\n        });\n    }\n    exportProps() {\n        return exportBladeState(null, {\n            title: this.props.get('title'),\n        });\n    }\n    onClick_() {\n        this.emitter.emit('click', {\n            sender: this,\n        });\n    }\n}\n\nclass ButtonBladeController extends BladeController {\n    constructor(doc, config) {\n        const bc = new ButtonController(doc, {\n            props: config.buttonProps,\n            viewProps: config.viewProps,\n        });\n        const lc = new LabelController(doc, {\n            blade: config.blade,\n            props: config.labelProps,\n            valueController: bc,\n        });\n        super({\n            blade: config.blade,\n            view: lc.view,\n            viewProps: config.viewProps,\n        });\n        this.buttonController = bc;\n        this.labelController = lc;\n    }\n    importState(state) {\n        return importBladeState(state, (s) => super.importState(s) &&\n            this.buttonController.importProps(s) &&\n            this.labelController.importProps(s), () => ({}), () => true);\n    }\n    exportState() {\n        return exportBladeState(() => super.exportState(), Object.assign(Object.assign({}, this.buttonController.exportProps()), this.labelController.exportProps()));\n    }\n}\n\nclass Semver {\n    constructor(text) {\n        const [core, prerelease] = text.split('-');\n        const coreComps = core.split('.');\n        this.major = parseInt(coreComps[0], 10);\n        this.minor = parseInt(coreComps[1], 10);\n        this.patch = parseInt(coreComps[2], 10);\n        this.prerelease = prerelease !== null && prerelease !== void 0 ? prerelease : null;\n    }\n    toString() {\n        const core = [this.major, this.minor, this.patch].join('.');\n        return this.prerelease !== null ? [core, this.prerelease].join('-') : core;\n    }\n}\n\nconst VERSION$1 = new Semver('2.0.1');\n\nfunction createPlugin(plugin) {\n    return Object.assign({ core: VERSION$1 }, plugin);\n}\n\nconst ButtonBladePlugin = createPlugin({\n    id: 'button',\n    type: 'blade',\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            title: p.required.string,\n            view: p.required.constant('button'),\n            label: p.optional.string,\n        }));\n        return result ? { params: result } : null;\n    },\n    controller(args) {\n        return new ButtonBladeController(args.document, {\n            blade: args.blade,\n            buttonProps: ValueMap.fromObject({\n                title: args.params.title,\n            }),\n            labelProps: ValueMap.fromObject({\n                label: args.params.label,\n            }),\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (args.controller instanceof ButtonBladeController) {\n            return new ButtonApi(args.controller);\n        }\n        return null;\n    },\n});\n\nfunction addButtonAsBlade(api, params) {\n    return api.addBlade(Object.assign(Object.assign({}, params), { view: 'button' }));\n}\nfunction addFolderAsBlade(api, params) {\n    return api.addBlade(Object.assign(Object.assign({}, params), { view: 'folder' }));\n}\nfunction addTabAsBlade(api, params) {\n    return api.addBlade(Object.assign(Object.assign({}, params), { view: 'tab' }));\n}\n\nfunction isRefreshable(value) {\n    if (!isObject$1(value)) {\n        return false;\n    }\n    return 'refresh' in value && typeof value.refresh === 'function';\n}\n\nfunction createBindingTarget(obj, key) {\n    if (!BindingTarget.isBindable(obj)) {\n        throw TpError.notBindable();\n    }\n    return new BindingTarget(obj, key);\n}\nclass RackApi {\n    constructor(controller, pool) {\n        this.onRackValueChange_ = this.onRackValueChange_.bind(this);\n        this.controller_ = controller;\n        this.emitter_ = new Emitter();\n        this.pool_ = pool;\n        const rack = this.controller_.rack;\n        rack.emitter.on('valuechange', this.onRackValueChange_);\n    }\n    get children() {\n        return this.controller_.rack.children.map((bc) => this.pool_.createApi(bc));\n    }\n    addBinding(object, key, opt_params) {\n        const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n        const doc = this.controller_.element.ownerDocument;\n        const bc = this.pool_.createBinding(doc, createBindingTarget(object, key), params);\n        const api = this.pool_.createBindingApi(bc);\n        return this.add(api, params.index);\n    }\n    addFolder(params) {\n        return addFolderAsBlade(this, params);\n    }\n    addButton(params) {\n        return addButtonAsBlade(this, params);\n    }\n    addTab(params) {\n        return addTabAsBlade(this, params);\n    }\n    add(api, opt_index) {\n        const bc = api.controller;\n        this.controller_.rack.add(bc, opt_index);\n        return api;\n    }\n    remove(api) {\n        this.controller_.rack.remove(api.controller);\n    }\n    addBlade(params) {\n        const doc = this.controller_.element.ownerDocument;\n        const bc = this.pool_.createBlade(doc, params);\n        const api = this.pool_.createApi(bc);\n        return this.add(api, params.index);\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        });\n        return this;\n    }\n    refresh() {\n        this.children.forEach((c) => {\n            if (isRefreshable(c)) {\n                c.refresh();\n            }\n        });\n    }\n    onRackValueChange_(ev) {\n        const bc = ev.bladeController;\n        const api = this.pool_.createApi(bc);\n        const binding = isBindingValue(bc.value) ? bc.value.binding : null;\n        this.emitter_.emit('change', new TpChangeEvent(api, binding ? binding.target.read() : bc.value.rawValue, ev.options.last));\n    }\n}\n\nclass ContainerBladeApi extends BladeApi {\n    constructor(controller, pool) {\n        super(controller);\n        this.rackApi_ = new RackApi(controller.rackController, pool);\n    }\n    refresh() {\n        this.rackApi_.refresh();\n    }\n}\n\nclass ContainerBladeController extends BladeController {\n    constructor(config) {\n        super({\n            blade: config.blade,\n            view: config.view,\n            viewProps: config.rackController.viewProps,\n        });\n        this.rackController = config.rackController;\n    }\n    importState(state) {\n        return importBladeState(state, (s) => super.importState(s), (p) => ({\n            children: p.required.array(p.required.raw),\n        }), (result) => {\n            return this.rackController.rack.children.every((c, index) => {\n                return c.importState(result.children[index]);\n            });\n        });\n    }\n    exportState() {\n        return exportBladeState(() => super.exportState(), {\n            children: this.rackController.rack.children.map((c) => c.exportState()),\n        });\n    }\n}\nfunction isContainerBladeController(bc) {\n    return 'rackController' in bc;\n}\n\nclass NestedOrderedSet {\n    constructor(extract) {\n        this.emitter = new Emitter();\n        this.items_ = [];\n        this.cache_ = new Set();\n        this.onSubListAdd_ = this.onSubListAdd_.bind(this);\n        this.onSubListRemove_ = this.onSubListRemove_.bind(this);\n        this.extract_ = extract;\n    }\n    get items() {\n        return this.items_;\n    }\n    allItems() {\n        return Array.from(this.cache_);\n    }\n    find(callback) {\n        for (const item of this.allItems()) {\n            if (callback(item)) {\n                return item;\n            }\n        }\n        return null;\n    }\n    includes(item) {\n        return this.cache_.has(item);\n    }\n    add(item, opt_index) {\n        if (this.includes(item)) {\n            throw TpError.shouldNeverHappen();\n        }\n        const index = opt_index !== undefined ? opt_index : this.items_.length;\n        this.items_.splice(index, 0, item);\n        this.cache_.add(item);\n        const subList = this.extract_(item);\n        if (subList) {\n            subList.emitter.on('add', this.onSubListAdd_);\n            subList.emitter.on('remove', this.onSubListRemove_);\n            subList.allItems().forEach((i) => {\n                this.cache_.add(i);\n            });\n        }\n        this.emitter.emit('add', {\n            index: index,\n            item: item,\n            root: this,\n            target: this,\n        });\n    }\n    remove(item) {\n        const index = this.items_.indexOf(item);\n        if (index < 0) {\n            return;\n        }\n        this.items_.splice(index, 1);\n        this.cache_.delete(item);\n        const subList = this.extract_(item);\n        if (subList) {\n            subList.allItems().forEach((i) => {\n                this.cache_.delete(i);\n            });\n            subList.emitter.off('add', this.onSubListAdd_);\n            subList.emitter.off('remove', this.onSubListRemove_);\n        }\n        this.emitter.emit('remove', {\n            index: index,\n            item: item,\n            root: this,\n            target: this,\n        });\n    }\n    onSubListAdd_(ev) {\n        this.cache_.add(ev.item);\n        this.emitter.emit('add', {\n            index: ev.index,\n            item: ev.item,\n            root: this,\n            target: ev.target,\n        });\n    }\n    onSubListRemove_(ev) {\n        this.cache_.delete(ev.item);\n        this.emitter.emit('remove', {\n            index: ev.index,\n            item: ev.item,\n            root: this,\n            target: ev.target,\n        });\n    }\n}\n\nfunction findValueBladeController(bcs, v) {\n    for (let i = 0; i < bcs.length; i++) {\n        const bc = bcs[i];\n        if (isValueBladeController(bc) && bc.value === v) {\n            return bc;\n        }\n    }\n    return null;\n}\nfunction findSubBladeControllerSet(bc) {\n    return isContainerBladeController(bc)\n        ? bc.rackController.rack['bcSet_']\n        : null;\n}\nclass Rack {\n    constructor(config) {\n        var _a, _b;\n        this.emitter = new Emitter();\n        this.onBladePositionsChange_ = this.onBladePositionsChange_.bind(this);\n        this.onSetAdd_ = this.onSetAdd_.bind(this);\n        this.onSetRemove_ = this.onSetRemove_.bind(this);\n        this.onChildDispose_ = this.onChildDispose_.bind(this);\n        this.onChildPositionsChange_ = this.onChildPositionsChange_.bind(this);\n        this.onChildValueChange_ = this.onChildValueChange_.bind(this);\n        this.onChildViewPropsChange_ = this.onChildViewPropsChange_.bind(this);\n        this.onRackLayout_ = this.onRackLayout_.bind(this);\n        this.onRackValueChange_ = this.onRackValueChange_.bind(this);\n        this.blade_ = (_a = config.blade) !== null && _a !== void 0 ? _a : null;\n        (_b = this.blade_) === null || _b === void 0 ? void 0 : _b.value('positions').emitter.on('change', this.onBladePositionsChange_);\n        this.viewProps = config.viewProps;\n        this.bcSet_ = new NestedOrderedSet(findSubBladeControllerSet);\n        this.bcSet_.emitter.on('add', this.onSetAdd_);\n        this.bcSet_.emitter.on('remove', this.onSetRemove_);\n    }\n    get children() {\n        return this.bcSet_.items;\n    }\n    add(bc, opt_index) {\n        var _a;\n        (_a = bc.parent) === null || _a === void 0 ? void 0 : _a.remove(bc);\n        bc.parent = this;\n        this.bcSet_.add(bc, opt_index);\n    }\n    remove(bc) {\n        bc.parent = null;\n        this.bcSet_.remove(bc);\n    }\n    find(finder) {\n        return this.bcSet_.allItems().filter(finder);\n    }\n    onSetAdd_(ev) {\n        this.updatePositions_();\n        const root = ev.target === ev.root;\n        this.emitter.emit('add', {\n            bladeController: ev.item,\n            index: ev.index,\n            root: root,\n            sender: this,\n        });\n        if (!root) {\n            return;\n        }\n        const bc = ev.item;\n        bc.viewProps.emitter.on('change', this.onChildViewPropsChange_);\n        bc.blade\n            .value('positions')\n            .emitter.on('change', this.onChildPositionsChange_);\n        bc.viewProps.handleDispose(this.onChildDispose_);\n        if (isValueBladeController(bc)) {\n            bc.value.emitter.on('change', this.onChildValueChange_);\n        }\n        else if (isContainerBladeController(bc)) {\n            const rack = bc.rackController.rack;\n            if (rack) {\n                const emitter = rack.emitter;\n                emitter.on('layout', this.onRackLayout_);\n                emitter.on('valuechange', this.onRackValueChange_);\n            }\n        }\n    }\n    onSetRemove_(ev) {\n        this.updatePositions_();\n        const root = ev.target === ev.root;\n        this.emitter.emit('remove', {\n            bladeController: ev.item,\n            root: root,\n            sender: this,\n        });\n        if (!root) {\n            return;\n        }\n        const bc = ev.item;\n        if (isValueBladeController(bc)) {\n            bc.value.emitter.off('change', this.onChildValueChange_);\n        }\n        else if (isContainerBladeController(bc)) {\n            const rack = bc.rackController.rack;\n            if (rack) {\n                const emitter = rack.emitter;\n                emitter.off('layout', this.onRackLayout_);\n                emitter.off('valuechange', this.onRackValueChange_);\n            }\n        }\n    }\n    updatePositions_() {\n        const visibleItems = this.bcSet_.items.filter((bc) => !bc.viewProps.get('hidden'));\n        const firstVisibleItem = visibleItems[0];\n        const lastVisibleItem = visibleItems[visibleItems.length - 1];\n        this.bcSet_.items.forEach((bc) => {\n            const ps = [];\n            if (bc === firstVisibleItem) {\n                ps.push('first');\n                if (!this.blade_ ||\n                    this.blade_.get('positions').includes('veryfirst')) {\n                    ps.push('veryfirst');\n                }\n            }\n            if (bc === lastVisibleItem) {\n                ps.push('last');\n                if (!this.blade_ || this.blade_.get('positions').includes('verylast')) {\n                    ps.push('verylast');\n                }\n            }\n            bc.blade.set('positions', ps);\n        });\n    }\n    onChildPositionsChange_() {\n        this.updatePositions_();\n        this.emitter.emit('layout', {\n            sender: this,\n        });\n    }\n    onChildViewPropsChange_(_ev) {\n        this.updatePositions_();\n        this.emitter.emit('layout', {\n            sender: this,\n        });\n    }\n    onChildDispose_() {\n        const disposedUcs = this.bcSet_.items.filter((bc) => {\n            return bc.viewProps.get('disposed');\n        });\n        disposedUcs.forEach((bc) => {\n            this.bcSet_.remove(bc);\n        });\n    }\n    onChildValueChange_(ev) {\n        const bc = findValueBladeController(this.find(isValueBladeController), ev.sender);\n        if (!bc) {\n            throw TpError.alreadyDisposed();\n        }\n        this.emitter.emit('valuechange', {\n            bladeController: bc,\n            options: ev.options,\n            sender: this,\n        });\n    }\n    onRackLayout_(_) {\n        this.updatePositions_();\n        this.emitter.emit('layout', {\n            sender: this,\n        });\n    }\n    onRackValueChange_(ev) {\n        this.emitter.emit('valuechange', {\n            bladeController: ev.bladeController,\n            options: ev.options,\n            sender: this,\n        });\n    }\n    onBladePositionsChange_() {\n        this.updatePositions_();\n    }\n}\n\nclass RackController {\n    constructor(config) {\n        this.onRackAdd_ = this.onRackAdd_.bind(this);\n        this.onRackRemove_ = this.onRackRemove_.bind(this);\n        this.element = config.element;\n        this.viewProps = config.viewProps;\n        const rack = new Rack({\n            blade: config.root ? undefined : config.blade,\n            viewProps: config.viewProps,\n        });\n        rack.emitter.on('add', this.onRackAdd_);\n        rack.emitter.on('remove', this.onRackRemove_);\n        this.rack = rack;\n        this.viewProps.handleDispose(() => {\n            for (let i = this.rack.children.length - 1; i >= 0; i--) {\n                const bc = this.rack.children[i];\n                bc.viewProps.set('disposed', true);\n            }\n        });\n    }\n    onRackAdd_(ev) {\n        if (!ev.root) {\n            return;\n        }\n        insertElementAt(this.element, ev.bladeController.view.element, ev.index);\n    }\n    onRackRemove_(ev) {\n        if (!ev.root) {\n            return;\n        }\n        removeElement(ev.bladeController.view.element);\n    }\n}\n\nfunction createBlade() {\n    return new ValueMap({\n        positions: createValue([], {\n            equals: deepEqualsArray,\n        }),\n    });\n}\n\nclass Foldable extends ValueMap {\n    constructor(valueMap) {\n        super(valueMap);\n    }\n    static create(expanded) {\n        const coreObj = {\n            completed: true,\n            expanded: expanded,\n            expandedHeight: null,\n            shouldFixHeight: false,\n            temporaryExpanded: null,\n        };\n        const core = ValueMap.createCore(coreObj);\n        return new Foldable(core);\n    }\n    get styleExpanded() {\n        var _a;\n        return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\n    }\n    get styleHeight() {\n        if (!this.styleExpanded) {\n            return '0';\n        }\n        const exHeight = this.get('expandedHeight');\n        if (this.get('shouldFixHeight') && !isEmpty(exHeight)) {\n            return `${exHeight}px`;\n        }\n        return 'auto';\n    }\n    bindExpandedClass(elem, expandedClassName) {\n        const onExpand = () => {\n            const expanded = this.styleExpanded;\n            if (expanded) {\n                elem.classList.add(expandedClassName);\n            }\n            else {\n                elem.classList.remove(expandedClassName);\n            }\n        };\n        bindValueMap(this, 'expanded', onExpand);\n        bindValueMap(this, 'temporaryExpanded', onExpand);\n    }\n    cleanUpTransition() {\n        this.set('shouldFixHeight', false);\n        this.set('expandedHeight', null);\n        this.set('completed', true);\n    }\n}\nfunction computeExpandedFolderHeight(folder, containerElement) {\n    let height = 0;\n    disableTransitionTemporarily(containerElement, () => {\n        folder.set('expandedHeight', null);\n        folder.set('temporaryExpanded', true);\n        forceReflow(containerElement);\n        height = containerElement.clientHeight;\n        folder.set('temporaryExpanded', null);\n        forceReflow(containerElement);\n    });\n    return height;\n}\nfunction applyHeight(foldable, elem) {\n    elem.style.height = foldable.styleHeight;\n}\nfunction bindFoldable(foldable, elem) {\n    foldable.value('expanded').emitter.on('beforechange', () => {\n        foldable.set('completed', false);\n        if (isEmpty(foldable.get('expandedHeight'))) {\n            const h = computeExpandedFolderHeight(foldable, elem);\n            if (h > 0) {\n                foldable.set('expandedHeight', h);\n            }\n        }\n        foldable.set('shouldFixHeight', true);\n        forceReflow(elem);\n    });\n    foldable.emitter.on('change', () => {\n        applyHeight(foldable, elem);\n    });\n    applyHeight(foldable, elem);\n    elem.addEventListener('transitionend', (ev) => {\n        if (ev.propertyName !== 'height') {\n            return;\n        }\n        foldable.cleanUpTransition();\n    });\n}\n\nclass FolderApi extends ContainerBladeApi {\n    constructor(controller, pool) {\n        super(controller, pool);\n        this.emitter_ = new Emitter();\n        this.controller.foldable\n            .value('expanded')\n            .emitter.on('change', (ev) => {\n            this.emitter_.emit('fold', new TpFoldEvent(this, ev.sender.rawValue));\n        });\n        this.rackApi_.on('change', (ev) => {\n            this.emitter_.emit('change', ev);\n        });\n    }\n    get expanded() {\n        return this.controller.foldable.get('expanded');\n    }\n    set expanded(expanded) {\n        this.controller.foldable.set('expanded', expanded);\n    }\n    get title() {\n        return this.controller.props.get('title');\n    }\n    set title(title) {\n        this.controller.props.set('title', title);\n    }\n    get children() {\n        return this.rackApi_.children;\n    }\n    addBinding(object, key, opt_params) {\n        return this.rackApi_.addBinding(object, key, opt_params);\n    }\n    addFolder(params) {\n        return this.rackApi_.addFolder(params);\n    }\n    addButton(params) {\n        return this.rackApi_.addButton(params);\n    }\n    addTab(params) {\n        return this.rackApi_.addTab(params);\n    }\n    add(api, opt_index) {\n        return this.rackApi_.add(api, opt_index);\n    }\n    remove(api) {\n        this.rackApi_.remove(api);\n    }\n    addBlade(params) {\n        return this.rackApi_.addBlade(params);\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        });\n        return this;\n    }\n}\n\nconst bladeContainerClassName = ClassName('cnt');\n\nclass FolderView {\n    constructor(doc, config) {\n        var _a;\n        this.className_ = ClassName((_a = config.viewName) !== null && _a !== void 0 ? _a : 'fld');\n        this.element = doc.createElement('div');\n        this.element.classList.add(this.className_(), bladeContainerClassName());\n        config.viewProps.bindClassModifiers(this.element);\n        this.foldable_ = config.foldable;\n        this.foldable_.bindExpandedClass(this.element, this.className_(undefined, 'expanded'));\n        bindValueMap(this.foldable_, 'completed', valueToClassName(this.element, this.className_(undefined, 'cpl')));\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(this.className_('b'));\n        bindValueMap(config.props, 'title', (title) => {\n            if (isEmpty(title)) {\n                this.element.classList.add(this.className_(undefined, 'not'));\n            }\n            else {\n                this.element.classList.remove(this.className_(undefined, 'not'));\n            }\n        });\n        config.viewProps.bindDisabled(buttonElem);\n        this.element.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        const indentElem = doc.createElement('div');\n        indentElem.classList.add(this.className_('i'));\n        this.element.appendChild(indentElem);\n        const titleElem = doc.createElement('div');\n        titleElem.classList.add(this.className_('t'));\n        bindValueToTextContent(config.props.value('title'), titleElem);\n        this.buttonElement.appendChild(titleElem);\n        this.titleElement = titleElem;\n        const markElem = doc.createElement('div');\n        markElem.classList.add(this.className_('m'));\n        this.buttonElement.appendChild(markElem);\n        const containerElem = doc.createElement('div');\n        containerElem.classList.add(this.className_('c'));\n        this.element.appendChild(containerElem);\n        this.containerElement = containerElem;\n    }\n}\n\nclass FolderController extends ContainerBladeController {\n    constructor(doc, config) {\n        var _a;\n        const foldable = Foldable.create((_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n        const view = new FolderView(doc, {\n            foldable: foldable,\n            props: config.props,\n            viewName: config.root ? 'rot' : undefined,\n            viewProps: config.viewProps,\n        });\n        super(Object.assign(Object.assign({}, config), { rackController: new RackController({\n                blade: config.blade,\n                element: view.containerElement,\n                root: config.root,\n                viewProps: config.viewProps,\n            }), view: view }));\n        this.onTitleClick_ = this.onTitleClick_.bind(this);\n        this.props = config.props;\n        this.foldable = foldable;\n        bindFoldable(this.foldable, this.view.containerElement);\n        this.rackController.rack.emitter.on('add', () => {\n            this.foldable.cleanUpTransition();\n        });\n        this.rackController.rack.emitter.on('remove', () => {\n            this.foldable.cleanUpTransition();\n        });\n        this.view.buttonElement.addEventListener('click', this.onTitleClick_);\n    }\n    get document() {\n        return this.view.element.ownerDocument;\n    }\n    importState(state) {\n        return importBladeState(state, (s) => super.importState(s), (p) => ({\n            expanded: p.required.boolean,\n            title: p.optional.string,\n        }), (result) => {\n            this.foldable.set('expanded', result.expanded);\n            this.props.set('title', result.title);\n            return true;\n        });\n    }\n    exportState() {\n        return exportBladeState(() => super.exportState(), {\n            expanded: this.foldable.get('expanded'),\n            title: this.props.get('title'),\n        });\n    }\n    onTitleClick_() {\n        this.foldable.set('expanded', !this.foldable.get('expanded'));\n    }\n}\n\nconst FolderBladePlugin = createPlugin({\n    id: 'folder',\n    type: 'blade',\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            title: p.required.string,\n            view: p.required.constant('folder'),\n            expanded: p.optional.boolean,\n        }));\n        return result ? { params: result } : null;\n    },\n    controller(args) {\n        return new FolderController(args.document, {\n            blade: args.blade,\n            expanded: args.params.expanded,\n            props: ValueMap.fromObject({\n                title: args.params.title,\n            }),\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (!(args.controller instanceof FolderController)) {\n            return null;\n        }\n        return new FolderApi(args.controller, args.pool);\n    },\n});\n\nconst cn$o = ClassName('');\nfunction valueToModifier(elem, modifier) {\n    return valueToClassName(elem, cn$o(undefined, modifier));\n}\nclass ViewProps extends ValueMap {\n    constructor(valueMap) {\n        var _a;\n        super(valueMap);\n        this.onDisabledChange_ = this.onDisabledChange_.bind(this);\n        this.onParentChange_ = this.onParentChange_.bind(this);\n        this.onParentGlobalDisabledChange_ =\n            this.onParentGlobalDisabledChange_.bind(this);\n        [this.globalDisabled_, this.setGlobalDisabled_] = createReadonlyValue(createValue(this.getGlobalDisabled_()));\n        this.value('disabled').emitter.on('change', this.onDisabledChange_);\n        this.value('parent').emitter.on('change', this.onParentChange_);\n        (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n    }\n    static create(opt_initialValue) {\n        var _a, _b, _c;\n        const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n        return new ViewProps(ValueMap.createCore({\n            disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n            disposed: false,\n            hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n            parent: (_c = initialValue.parent) !== null && _c !== void 0 ? _c : null,\n        }));\n    }\n    get globalDisabled() {\n        return this.globalDisabled_;\n    }\n    bindClassModifiers(elem) {\n        bindValue(this.globalDisabled_, valueToModifier(elem, 'disabled'));\n        bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n    }\n    bindDisabled(target) {\n        bindValue(this.globalDisabled_, (disabled) => {\n            target.disabled = disabled;\n        });\n    }\n    bindTabIndex(elem) {\n        bindValue(this.globalDisabled_, (disabled) => {\n            elem.tabIndex = disabled ? -1 : 0;\n        });\n    }\n    handleDispose(callback) {\n        this.value('disposed').emitter.on('change', (disposed) => {\n            if (disposed) {\n                callback();\n            }\n        });\n    }\n    importState(state) {\n        this.set('disabled', state.disabled);\n        this.set('hidden', state.hidden);\n    }\n    exportState() {\n        return {\n            disabled: this.get('disabled'),\n            hidden: this.get('hidden'),\n        };\n    }\n    getGlobalDisabled_() {\n        const parent = this.get('parent');\n        const parentDisabled = parent ? parent.globalDisabled.rawValue : false;\n        return parentDisabled || this.get('disabled');\n    }\n    updateGlobalDisabled_() {\n        this.setGlobalDisabled_(this.getGlobalDisabled_());\n    }\n    onDisabledChange_() {\n        this.updateGlobalDisabled_();\n    }\n    onParentGlobalDisabledChange_() {\n        this.updateGlobalDisabled_();\n    }\n    onParentChange_(ev) {\n        var _a;\n        const prevParent = ev.previousRawValue;\n        prevParent === null || prevParent === void 0 ? void 0 : prevParent.globalDisabled.emitter.off('change', this.onParentGlobalDisabledChange_);\n        (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n        this.updateGlobalDisabled_();\n    }\n}\n\nconst cn$n = ClassName('tbp');\nclass TabPageView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$n());\n        config.viewProps.bindClassModifiers(this.element);\n        const containerElem = doc.createElement('div');\n        containerElem.classList.add(cn$n('c'));\n        this.element.appendChild(containerElem);\n        this.containerElement = containerElem;\n    }\n}\n\nconst cn$m = ClassName('tbi');\nclass TabItemView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$m());\n        config.viewProps.bindClassModifiers(this.element);\n        bindValueMap(config.props, 'selected', (selected) => {\n            if (selected) {\n                this.element.classList.add(cn$m(undefined, 'sel'));\n            }\n            else {\n                this.element.classList.remove(cn$m(undefined, 'sel'));\n            }\n        });\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(cn$m('b'));\n        config.viewProps.bindDisabled(buttonElem);\n        this.element.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        const titleElem = doc.createElement('div');\n        titleElem.classList.add(cn$m('t'));\n        bindValueToTextContent(config.props.value('title'), titleElem);\n        this.buttonElement.appendChild(titleElem);\n        this.titleElement = titleElem;\n    }\n}\n\nclass TabItemController {\n    constructor(doc, config) {\n        this.emitter = new Emitter();\n        this.onClick_ = this.onClick_.bind(this);\n        this.props = config.props;\n        this.viewProps = config.viewProps;\n        this.view = new TabItemView(doc, {\n            props: config.props,\n            viewProps: config.viewProps,\n        });\n        this.view.buttonElement.addEventListener('click', this.onClick_);\n    }\n    onClick_() {\n        this.emitter.emit('click', {\n            sender: this,\n        });\n    }\n}\n\nclass TabPageController extends ContainerBladeController {\n    constructor(doc, config) {\n        const view = new TabPageView(doc, {\n            viewProps: config.viewProps,\n        });\n        super(Object.assign(Object.assign({}, config), { rackController: new RackController({\n                blade: config.blade,\n                element: view.containerElement,\n                viewProps: config.viewProps,\n            }), view: view }));\n        this.onItemClick_ = this.onItemClick_.bind(this);\n        this.ic_ = new TabItemController(doc, {\n            props: config.itemProps,\n            viewProps: ViewProps.create(),\n        });\n        this.ic_.emitter.on('click', this.onItemClick_);\n        this.props = config.props;\n        bindValueMap(this.props, 'selected', (selected) => {\n            this.itemController.props.set('selected', selected);\n            this.viewProps.set('hidden', !selected);\n        });\n    }\n    get itemController() {\n        return this.ic_;\n    }\n    importState(state) {\n        return importBladeState(state, (s) => super.importState(s), (p) => ({\n            selected: p.required.boolean,\n            title: p.required.string,\n        }), (result) => {\n            this.ic_.props.set('selected', result.selected);\n            this.ic_.props.set('title', result.title);\n            return true;\n        });\n    }\n    exportState() {\n        return exportBladeState(() => super.exportState(), {\n            selected: this.ic_.props.get('selected'),\n            title: this.ic_.props.get('title'),\n        });\n    }\n    onItemClick_() {\n        this.props.set('selected', true);\n    }\n}\n\nclass TabApi extends ContainerBladeApi {\n    constructor(controller, pool) {\n        super(controller, pool);\n        this.emitter_ = new Emitter();\n        this.onSelect_ = this.onSelect_.bind(this);\n        this.pool_ = pool;\n        this.rackApi_.on('change', (ev) => {\n            this.emitter_.emit('change', ev);\n        });\n        this.controller.tab.selectedIndex.emitter.on('change', this.onSelect_);\n    }\n    get pages() {\n        return this.rackApi_.children;\n    }\n    addPage(params) {\n        const doc = this.controller.view.element.ownerDocument;\n        const pc = new TabPageController(doc, {\n            blade: createBlade(),\n            itemProps: ValueMap.fromObject({\n                selected: false,\n                title: params.title,\n            }),\n            props: ValueMap.fromObject({\n                selected: false,\n            }),\n            viewProps: ViewProps.create(),\n        });\n        const papi = this.pool_.createApi(pc);\n        return this.rackApi_.add(papi, params.index);\n    }\n    removePage(index) {\n        this.rackApi_.remove(this.rackApi_.children[index]);\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        });\n        return this;\n    }\n    onSelect_(ev) {\n        this.emitter_.emit('select', new TpTabSelectEvent(this, ev.rawValue));\n    }\n}\n\nclass TabPageApi extends ContainerBladeApi {\n    get title() {\n        var _a;\n        return (_a = this.controller.itemController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n    }\n    set title(title) {\n        this.controller.itemController.props.set('title', title);\n    }\n    get selected() {\n        return this.controller.props.get('selected');\n    }\n    set selected(selected) {\n        this.controller.props.set('selected', selected);\n    }\n    get children() {\n        return this.rackApi_.children;\n    }\n    addButton(params) {\n        return this.rackApi_.addButton(params);\n    }\n    addFolder(params) {\n        return this.rackApi_.addFolder(params);\n    }\n    addTab(params) {\n        return this.rackApi_.addTab(params);\n    }\n    add(api, opt_index) {\n        this.rackApi_.add(api, opt_index);\n    }\n    remove(api) {\n        this.rackApi_.remove(api);\n    }\n    addBinding(object, key, opt_params) {\n        return this.rackApi_.addBinding(object, key, opt_params);\n    }\n    addBlade(params) {\n        return this.rackApi_.addBlade(params);\n    }\n}\n\nconst INDEX_NOT_SELECTED = -1;\nclass Tab {\n    constructor() {\n        this.onItemSelectedChange_ = this.onItemSelectedChange_.bind(this);\n        this.empty = createValue(true);\n        this.selectedIndex = createValue(INDEX_NOT_SELECTED);\n        this.items_ = [];\n    }\n    add(item, opt_index) {\n        const index = opt_index !== null && opt_index !== void 0 ? opt_index : this.items_.length;\n        this.items_.splice(index, 0, item);\n        item.emitter.on('change', this.onItemSelectedChange_);\n        this.keepSelection_();\n    }\n    remove(item) {\n        const index = this.items_.indexOf(item);\n        if (index < 0) {\n            return;\n        }\n        this.items_.splice(index, 1);\n        item.emitter.off('change', this.onItemSelectedChange_);\n        this.keepSelection_();\n    }\n    keepSelection_() {\n        if (this.items_.length === 0) {\n            this.selectedIndex.rawValue = INDEX_NOT_SELECTED;\n            this.empty.rawValue = true;\n            return;\n        }\n        const firstSelIndex = this.items_.findIndex((s) => s.rawValue);\n        if (firstSelIndex < 0) {\n            this.items_.forEach((s, i) => {\n                s.rawValue = i === 0;\n            });\n            this.selectedIndex.rawValue = 0;\n        }\n        else {\n            this.items_.forEach((s, i) => {\n                s.rawValue = i === firstSelIndex;\n            });\n            this.selectedIndex.rawValue = firstSelIndex;\n        }\n        this.empty.rawValue = false;\n    }\n    onItemSelectedChange_(ev) {\n        if (ev.rawValue) {\n            const index = this.items_.findIndex((s) => s === ev.sender);\n            this.items_.forEach((s, i) => {\n                s.rawValue = i === index;\n            });\n            this.selectedIndex.rawValue = index;\n        }\n        else {\n            this.keepSelection_();\n        }\n    }\n}\n\nconst cn$l = ClassName('tab');\nclass TabView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$l(), bladeContainerClassName());\n        config.viewProps.bindClassModifiers(this.element);\n        bindValue(config.empty, valueToClassName(this.element, cn$l(undefined, 'nop')));\n        const titleElem = doc.createElement('div');\n        titleElem.classList.add(cn$l('t'));\n        this.element.appendChild(titleElem);\n        this.itemsElement = titleElem;\n        const indentElem = doc.createElement('div');\n        indentElem.classList.add(cn$l('i'));\n        this.element.appendChild(indentElem);\n        const contentsElem = doc.createElement('div');\n        contentsElem.classList.add(cn$l('c'));\n        this.element.appendChild(contentsElem);\n        this.contentsElement = contentsElem;\n    }\n}\n\nclass TabController extends ContainerBladeController {\n    constructor(doc, config) {\n        const tab = new Tab();\n        const view = new TabView(doc, {\n            empty: tab.empty,\n            viewProps: config.viewProps,\n        });\n        super({\n            blade: config.blade,\n            rackController: new RackController({\n                blade: config.blade,\n                element: view.contentsElement,\n                viewProps: config.viewProps,\n            }),\n            view: view,\n        });\n        this.onRackAdd_ = this.onRackAdd_.bind(this);\n        this.onRackRemove_ = this.onRackRemove_.bind(this);\n        const rack = this.rackController.rack;\n        rack.emitter.on('add', this.onRackAdd_);\n        rack.emitter.on('remove', this.onRackRemove_);\n        this.tab = tab;\n    }\n    add(pc, opt_index) {\n        this.rackController.rack.add(pc, opt_index);\n    }\n    remove(index) {\n        this.rackController.rack.remove(this.rackController.rack.children[index]);\n    }\n    onRackAdd_(ev) {\n        if (!ev.root) {\n            return;\n        }\n        const pc = ev.bladeController;\n        insertElementAt(this.view.itemsElement, pc.itemController.view.element, ev.index);\n        pc.itemController.viewProps.set('parent', this.viewProps);\n        this.tab.add(pc.props.value('selected'));\n    }\n    onRackRemove_(ev) {\n        if (!ev.root) {\n            return;\n        }\n        const pc = ev.bladeController;\n        removeElement(pc.itemController.view.element);\n        pc.itemController.viewProps.set('parent', null);\n        this.tab.remove(pc.props.value('selected'));\n    }\n}\n\nconst TabBladePlugin = createPlugin({\n    id: 'tab',\n    type: 'blade',\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            pages: p.required.array(p.required.object({ title: p.required.string })),\n            view: p.required.constant('tab'),\n        }));\n        if (!result || result.pages.length === 0) {\n            return null;\n        }\n        return { params: result };\n    },\n    controller(args) {\n        const c = new TabController(args.document, {\n            blade: args.blade,\n            viewProps: args.viewProps,\n        });\n        args.params.pages.forEach((p) => {\n            const pc = new TabPageController(args.document, {\n                blade: createBlade(),\n                itemProps: ValueMap.fromObject({\n                    selected: false,\n                    title: p.title,\n                }),\n                props: ValueMap.fromObject({\n                    selected: false,\n                }),\n                viewProps: ViewProps.create(),\n            });\n            c.add(pc);\n        });\n        return c;\n    },\n    api(args) {\n        if (args.controller instanceof TabController) {\n            return new TabApi(args.controller, args.pool);\n        }\n        if (args.controller instanceof TabPageController) {\n            return new TabPageApi(args.controller, args.pool);\n        }\n        return null;\n    },\n});\n\nfunction createBladeController(plugin, args) {\n    const ac = plugin.accept(args.params);\n    if (!ac) {\n        return null;\n    }\n    const params = parseRecord(args.params, (p) => ({\n        disabled: p.optional.boolean,\n        hidden: p.optional.boolean,\n    }));\n    return plugin.controller({\n        blade: createBlade(),\n        document: args.document,\n        params: forceCast(Object.assign(Object.assign({}, ac.params), { disabled: params === null || params === void 0 ? void 0 : params.disabled, hidden: params === null || params === void 0 ? void 0 : params.hidden })),\n        viewProps: ViewProps.create({\n            disabled: params === null || params === void 0 ? void 0 : params.disabled,\n            hidden: params === null || params === void 0 ? void 0 : params.hidden,\n        }),\n    });\n}\n\nclass ListInputBindingApi extends BindingApi {\n    get options() {\n        return this.controller.valueController.props.get('options');\n    }\n    set options(options) {\n        this.controller.valueController.props.set('options', options);\n    }\n}\n\nclass ManualTicker {\n    constructor() {\n        this.disabled = false;\n        this.emitter = new Emitter();\n    }\n    dispose() { }\n    tick() {\n        if (this.disabled) {\n            return;\n        }\n        this.emitter.emit('tick', {\n            sender: this,\n        });\n    }\n}\n\nclass IntervalTicker {\n    constructor(doc, interval) {\n        this.disabled_ = false;\n        this.timerId_ = null;\n        this.onTick_ = this.onTick_.bind(this);\n        this.doc_ = doc;\n        this.emitter = new Emitter();\n        this.interval_ = interval;\n        this.setTimer_();\n    }\n    get disabled() {\n        return this.disabled_;\n    }\n    set disabled(inactive) {\n        this.disabled_ = inactive;\n        if (this.disabled_) {\n            this.clearTimer_();\n        }\n        else {\n            this.setTimer_();\n        }\n    }\n    dispose() {\n        this.clearTimer_();\n    }\n    clearTimer_() {\n        if (this.timerId_ === null) {\n            return;\n        }\n        const win = this.doc_.defaultView;\n        if (win) {\n            win.clearInterval(this.timerId_);\n        }\n        this.timerId_ = null;\n    }\n    setTimer_() {\n        this.clearTimer_();\n        if (this.interval_ <= 0) {\n            return;\n        }\n        const win = this.doc_.defaultView;\n        if (win) {\n            this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n        }\n    }\n    onTick_() {\n        if (this.disabled_) {\n            return;\n        }\n        this.emitter.emit('tick', {\n            sender: this,\n        });\n    }\n}\n\nclass CompositeConstraint {\n    constructor(constraints) {\n        this.constraints = constraints;\n    }\n    constrain(value) {\n        return this.constraints.reduce((result, c) => {\n            return c.constrain(result);\n        }, value);\n    }\n}\nfunction findConstraint(c, constraintClass) {\n    if (c instanceof constraintClass) {\n        return c;\n    }\n    if (c instanceof CompositeConstraint) {\n        const result = c.constraints.reduce((tmpResult, sc) => {\n            if (tmpResult) {\n                return tmpResult;\n            }\n            return sc instanceof constraintClass ? sc : null;\n        }, null);\n        if (result) {\n            return result;\n        }\n    }\n    return null;\n}\n\nclass ListConstraint {\n    constructor(options) {\n        this.values = ValueMap.fromObject({\n            options: options,\n        });\n    }\n    constrain(value) {\n        const opts = this.values.get('options');\n        if (opts.length === 0) {\n            return value;\n        }\n        const matched = opts.filter((item) => {\n            return item.value === value;\n        }).length > 0;\n        return matched ? value : opts[0].value;\n    }\n}\n\nfunction parseListOptions(value) {\n    var _a;\n    const p = MicroParsers;\n    if (Array.isArray(value)) {\n        return (_a = parseRecord({ items: value }, (p) => ({\n            items: p.required.array(p.required.object({\n                text: p.required.string,\n                value: p.required.raw,\n            })),\n        }))) === null || _a === void 0 ? void 0 : _a.items;\n    }\n    if (typeof value === 'object') {\n        return p.required.raw(value)\n            .value;\n    }\n    return undefined;\n}\nfunction normalizeListOptions(options) {\n    if (Array.isArray(options)) {\n        return options;\n    }\n    const items = [];\n    Object.keys(options).forEach((text) => {\n        items.push({ text: text, value: options[text] });\n    });\n    return items;\n}\nfunction createListConstraint(options) {\n    return !isEmpty(options)\n        ? new ListConstraint(normalizeListOptions(forceCast(options)))\n        : null;\n}\n\nconst cn$k = ClassName('lst');\nclass ListView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.props_ = config.props;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$k());\n        config.viewProps.bindClassModifiers(this.element);\n        const selectElem = doc.createElement('select');\n        selectElem.classList.add(cn$k('s'));\n        config.viewProps.bindDisabled(selectElem);\n        this.element.appendChild(selectElem);\n        this.selectElement = selectElem;\n        const markElem = doc.createElement('div');\n        markElem.classList.add(cn$k('m'));\n        markElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n        this.element.appendChild(markElem);\n        config.value.emitter.on('change', this.onValueChange_);\n        this.value_ = config.value;\n        bindValueMap(this.props_, 'options', (opts) => {\n            removeChildElements(this.selectElement);\n            opts.forEach((item) => {\n                const optionElem = doc.createElement('option');\n                optionElem.textContent = item.text;\n                this.selectElement.appendChild(optionElem);\n            });\n            this.update_();\n        });\n    }\n    update_() {\n        const values = this.props_.get('options').map((o) => o.value);\n        this.selectElement.selectedIndex = values.indexOf(this.value_.rawValue);\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass ListController {\n    constructor(doc, config) {\n        this.onSelectChange_ = this.onSelectChange_.bind(this);\n        this.props = config.props;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new ListView(doc, {\n            props: this.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view.selectElement.addEventListener('change', this.onSelectChange_);\n    }\n    onSelectChange_(e) {\n        const selectElem = forceCast(e.currentTarget);\n        this.value.rawValue =\n            this.props.get('options')[selectElem.selectedIndex].value;\n    }\n    importProps(state) {\n        return importBladeState(state, null, (p) => ({\n            options: p.required.custom(parseListOptions),\n        }), (result) => {\n            this.props.set('options', normalizeListOptions(result.options));\n            return true;\n        });\n    }\n    exportProps() {\n        return exportBladeState(null, {\n            options: this.props.get('options'),\n        });\n    }\n}\n\nconst cn$j = ClassName('pop');\nclass PopupView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$j());\n        config.viewProps.bindClassModifiers(this.element);\n        bindValue(config.shows, valueToClassName(this.element, cn$j(undefined, 'v')));\n    }\n}\n\nclass PopupController {\n    constructor(doc, config) {\n        this.shows = createValue(false);\n        this.viewProps = config.viewProps;\n        this.view = new PopupView(doc, {\n            shows: this.shows,\n            viewProps: this.viewProps,\n        });\n    }\n}\n\nconst cn$i = ClassName('txt');\nclass TextView {\n    constructor(doc, config) {\n        this.onChange_ = this.onChange_.bind(this);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$i());\n        config.viewProps.bindClassModifiers(this.element);\n        this.props_ = config.props;\n        this.props_.emitter.on('change', this.onChange_);\n        const inputElem = doc.createElement('input');\n        inputElem.classList.add(cn$i('i'));\n        inputElem.type = 'text';\n        config.viewProps.bindDisabled(inputElem);\n        this.element.appendChild(inputElem);\n        this.inputElement = inputElem;\n        config.value.emitter.on('change', this.onChange_);\n        this.value_ = config.value;\n        this.refresh();\n    }\n    refresh() {\n        const formatter = this.props_.get('formatter');\n        this.inputElement.value = formatter(this.value_.rawValue);\n    }\n    onChange_() {\n        this.refresh();\n    }\n}\n\nclass TextController {\n    constructor(doc, config) {\n        this.onInputChange_ = this.onInputChange_.bind(this);\n        this.parser_ = config.parser;\n        this.props = config.props;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new TextView(doc, {\n            props: config.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view.inputElement.addEventListener('change', this.onInputChange_);\n    }\n    onInputChange_(e) {\n        const inputElem = forceCast(e.currentTarget);\n        const value = inputElem.value;\n        const parsedValue = this.parser_(value);\n        if (!isEmpty(parsedValue)) {\n            this.value.rawValue = parsedValue;\n        }\n        this.view.refresh();\n    }\n}\n\nfunction boolToString(value) {\n    return String(value);\n}\nfunction boolFromUnknown(value) {\n    if (value === 'false') {\n        return false;\n    }\n    return !!value;\n}\nfunction BooleanFormatter(value) {\n    return boolToString(value);\n}\n\nfunction composeParsers(parsers) {\n    return (text) => {\n        return parsers.reduce((result, parser) => {\n            if (result !== null) {\n                return result;\n            }\n            return parser(text);\n        }, null);\n    };\n}\n\nconst innerFormatter = createNumberFormatter(0);\nfunction formatPercentage(value) {\n    return innerFormatter(value) + '%';\n}\n\nfunction stringFromUnknown(value) {\n    return String(value);\n}\nfunction formatString(value) {\n    return value;\n}\n\nfunction connectValues({ primary, secondary, forward, backward, }) {\n    let changing = false;\n    function preventFeedback(callback) {\n        if (changing) {\n            return;\n        }\n        changing = true;\n        callback();\n        changing = false;\n    }\n    primary.emitter.on('change', (ev) => {\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary.rawValue, secondary.rawValue), ev.options);\n        });\n    });\n    secondary.emitter.on('change', (ev) => {\n        preventFeedback(() => {\n            primary.setRawValue(backward(primary.rawValue, secondary.rawValue), ev.options);\n        });\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary.rawValue, secondary.rawValue), ev.options);\n        });\n    });\n    preventFeedback(() => {\n        secondary.setRawValue(forward(primary.rawValue, secondary.rawValue), {\n            forceEmit: false,\n            last: true,\n        });\n    });\n}\n\nfunction getStepForKey(keyScale, keys) {\n    const step = keyScale * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n    if (keys.upKey) {\n        return +step;\n    }\n    else if (keys.downKey) {\n        return -step;\n    }\n    return 0;\n}\nfunction getVerticalStepKeys(ev) {\n    return {\n        altKey: ev.altKey,\n        downKey: ev.key === 'ArrowDown',\n        shiftKey: ev.shiftKey,\n        upKey: ev.key === 'ArrowUp',\n    };\n}\nfunction getHorizontalStepKeys(ev) {\n    return {\n        altKey: ev.altKey,\n        downKey: ev.key === 'ArrowLeft',\n        shiftKey: ev.shiftKey,\n        upKey: ev.key === 'ArrowRight',\n    };\n}\nfunction isVerticalArrowKey(key) {\n    return key === 'ArrowUp' || key === 'ArrowDown';\n}\nfunction isArrowKey(key) {\n    return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\n}\n\nfunction computeOffset$1(ev, elem) {\n    var _a, _b;\n    const win = elem.ownerDocument.defaultView;\n    const rect = elem.getBoundingClientRect();\n    return {\n        x: ev.pageX - (((_a = (win && win.scrollX)) !== null && _a !== void 0 ? _a : 0) + rect.left),\n        y: ev.pageY - (((_b = (win && win.scrollY)) !== null && _b !== void 0 ? _b : 0) + rect.top),\n    };\n}\nclass PointerHandler {\n    constructor(element) {\n        this.lastTouch_ = null;\n        this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n        this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n        this.onMouseDown_ = this.onMouseDown_.bind(this);\n        this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n        this.onTouchMove_ = this.onTouchMove_.bind(this);\n        this.onTouchStart_ = this.onTouchStart_.bind(this);\n        this.elem_ = element;\n        this.emitter = new Emitter();\n        element.addEventListener('touchstart', this.onTouchStart_, {\n            passive: false,\n        });\n        element.addEventListener('touchmove', this.onTouchMove_, {\n            passive: true,\n        });\n        element.addEventListener('touchend', this.onTouchEnd_);\n        element.addEventListener('mousedown', this.onMouseDown_);\n    }\n    computePosition_(offset) {\n        const rect = this.elem_.getBoundingClientRect();\n        return {\n            bounds: {\n                width: rect.width,\n                height: rect.height,\n            },\n            point: offset\n                ? {\n                    x: offset.x,\n                    y: offset.y,\n                }\n                : null,\n        };\n    }\n    onMouseDown_(ev) {\n        var _a;\n        ev.preventDefault();\n        (_a = ev.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n        const doc = this.elem_.ownerDocument;\n        doc.addEventListener('mousemove', this.onDocumentMouseMove_);\n        doc.addEventListener('mouseup', this.onDocumentMouseUp_);\n        this.emitter.emit('down', {\n            altKey: ev.altKey,\n            data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n    }\n    onDocumentMouseMove_(ev) {\n        this.emitter.emit('move', {\n            altKey: ev.altKey,\n            data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n    }\n    onDocumentMouseUp_(ev) {\n        const doc = this.elem_.ownerDocument;\n        doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\n        doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\n        this.emitter.emit('up', {\n            altKey: ev.altKey,\n            data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n    }\n    onTouchStart_(ev) {\n        ev.preventDefault();\n        const touch = ev.targetTouches.item(0);\n        const rect = this.elem_.getBoundingClientRect();\n        this.emitter.emit('down', {\n            altKey: ev.altKey,\n            data: this.computePosition_(touch\n                ? {\n                    x: touch.clientX - rect.left,\n                    y: touch.clientY - rect.top,\n                }\n                : undefined),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n        this.lastTouch_ = touch;\n    }\n    onTouchMove_(ev) {\n        const touch = ev.targetTouches.item(0);\n        const rect = this.elem_.getBoundingClientRect();\n        this.emitter.emit('move', {\n            altKey: ev.altKey,\n            data: this.computePosition_(touch\n                ? {\n                    x: touch.clientX - rect.left,\n                    y: touch.clientY - rect.top,\n                }\n                : undefined),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n        this.lastTouch_ = touch;\n    }\n    onTouchEnd_(ev) {\n        var _a;\n        const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n        const rect = this.elem_.getBoundingClientRect();\n        this.emitter.emit('up', {\n            altKey: ev.altKey,\n            data: this.computePosition_(touch\n                ? {\n                    x: touch.clientX - rect.left,\n                    y: touch.clientY - rect.top,\n                }\n                : undefined),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n    }\n}\n\nconst cn$h = ClassName('txt');\nclass NumberTextView {\n    constructor(doc, config) {\n        this.onChange_ = this.onChange_.bind(this);\n        this.props_ = config.props;\n        this.props_.emitter.on('change', this.onChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$h(), cn$h(undefined, 'num'));\n        if (config.arrayPosition) {\n            this.element.classList.add(cn$h(undefined, config.arrayPosition));\n        }\n        config.viewProps.bindClassModifiers(this.element);\n        const inputElem = doc.createElement('input');\n        inputElem.classList.add(cn$h('i'));\n        inputElem.type = 'text';\n        config.viewProps.bindDisabled(inputElem);\n        this.element.appendChild(inputElem);\n        this.inputElement = inputElem;\n        this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n        this.dragging_ = config.dragging;\n        this.dragging_.emitter.on('change', this.onDraggingChange_);\n        this.element.classList.add(cn$h());\n        this.inputElement.classList.add(cn$h('i'));\n        const knobElem = doc.createElement('div');\n        knobElem.classList.add(cn$h('k'));\n        this.element.appendChild(knobElem);\n        this.knobElement = knobElem;\n        const guideElem = doc.createElementNS(SVG_NS, 'svg');\n        guideElem.classList.add(cn$h('g'));\n        this.knobElement.appendChild(guideElem);\n        const bodyElem = doc.createElementNS(SVG_NS, 'path');\n        bodyElem.classList.add(cn$h('gb'));\n        guideElem.appendChild(bodyElem);\n        this.guideBodyElem_ = bodyElem;\n        const headElem = doc.createElementNS(SVG_NS, 'path');\n        headElem.classList.add(cn$h('gh'));\n        guideElem.appendChild(headElem);\n        this.guideHeadElem_ = headElem;\n        const tooltipElem = doc.createElement('div');\n        tooltipElem.classList.add(ClassName('tt')());\n        this.knobElement.appendChild(tooltipElem);\n        this.tooltipElem_ = tooltipElem;\n        config.value.emitter.on('change', this.onChange_);\n        this.value = config.value;\n        this.refresh();\n    }\n    onDraggingChange_(ev) {\n        if (ev.rawValue === null) {\n            this.element.classList.remove(cn$h(undefined, 'drg'));\n            return;\n        }\n        this.element.classList.add(cn$h(undefined, 'drg'));\n        const x = ev.rawValue / this.props_.get('pointerScale');\n        const aox = x + (x > 0 ? -1 : x < 0 ? +1 : 0);\n        const adx = constrainRange(-aox, -4, +4);\n        this.guideHeadElem_.setAttributeNS(null, 'd', [`M ${aox + adx},0 L${aox},4 L${aox + adx},8`, `M ${x},-1 L${x},9`].join(' '));\n        this.guideBodyElem_.setAttributeNS(null, 'd', `M 0,4 L${x},4`);\n        const formatter = this.props_.get('formatter');\n        this.tooltipElem_.textContent = formatter(this.value.rawValue);\n        this.tooltipElem_.style.left = `${x}px`;\n    }\n    refresh() {\n        const formatter = this.props_.get('formatter');\n        this.inputElement.value = formatter(this.value.rawValue);\n    }\n    onChange_() {\n        this.refresh();\n    }\n}\n\nclass NumberTextController {\n    constructor(doc, config) {\n        var _a;\n        this.originRawValue_ = 0;\n        this.onInputChange_ = this.onInputChange_.bind(this);\n        this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n        this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.parser_ = config.parser;\n        this.props = config.props;\n        this.sliderProps_ = (_a = config.sliderProps) !== null && _a !== void 0 ? _a : null;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.dragging_ = createValue(null);\n        this.view = new NumberTextView(doc, {\n            arrayPosition: config.arrayPosition,\n            dragging: this.dragging_,\n            props: this.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view.inputElement.addEventListener('change', this.onInputChange_);\n        this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\n        this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\n        const ph = new PointerHandler(this.view.knobElement);\n        ph.emitter.on('down', this.onPointerDown_);\n        ph.emitter.on('move', this.onPointerMove_);\n        ph.emitter.on('up', this.onPointerUp_);\n    }\n    constrainValue_(value) {\n        var _a, _b;\n        const min = (_a = this.sliderProps_) === null || _a === void 0 ? void 0 : _a.get('min');\n        const max = (_b = this.sliderProps_) === null || _b === void 0 ? void 0 : _b.get('max');\n        let v = value;\n        if (min !== undefined) {\n            v = Math.max(v, min);\n        }\n        if (max !== undefined) {\n            v = Math.min(v, max);\n        }\n        return v;\n    }\n    onInputChange_(e) {\n        const inputElem = forceCast(e.currentTarget);\n        const value = inputElem.value;\n        const parsedValue = this.parser_(value);\n        if (!isEmpty(parsedValue)) {\n            this.value.rawValue = this.constrainValue_(parsedValue);\n        }\n        this.view.refresh();\n    }\n    onInputKeyDown_(ev) {\n        const step = getStepForKey(this.props.get('keyScale'), getVerticalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.constrainValue_(this.value.rawValue + step), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onInputKeyUp_(ev) {\n        const step = getStepForKey(this.props.get('keyScale'), getVerticalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onPointerDown_() {\n        this.originRawValue_ = this.value.rawValue;\n        this.dragging_.rawValue = 0;\n    }\n    computeDraggingValue_(data) {\n        if (!data.point) {\n            return null;\n        }\n        const dx = data.point.x - data.bounds.width / 2;\n        return this.constrainValue_(this.originRawValue_ + dx * this.props.get('pointerScale'));\n    }\n    onPointerMove_(ev) {\n        const v = this.computeDraggingValue_(ev.data);\n        if (v === null) {\n            return;\n        }\n        this.value.setRawValue(v, {\n            forceEmit: false,\n            last: false,\n        });\n        this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n    }\n    onPointerUp_(ev) {\n        const v = this.computeDraggingValue_(ev.data);\n        if (v === null) {\n            return;\n        }\n        this.value.setRawValue(v, {\n            forceEmit: true,\n            last: true,\n        });\n        this.dragging_.rawValue = null;\n    }\n}\n\nconst cn$g = ClassName('sld');\nclass SliderView {\n    constructor(doc, config) {\n        this.onChange_ = this.onChange_.bind(this);\n        this.props_ = config.props;\n        this.props_.emitter.on('change', this.onChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$g());\n        config.viewProps.bindClassModifiers(this.element);\n        const trackElem = doc.createElement('div');\n        trackElem.classList.add(cn$g('t'));\n        config.viewProps.bindTabIndex(trackElem);\n        this.element.appendChild(trackElem);\n        this.trackElement = trackElem;\n        const knobElem = doc.createElement('div');\n        knobElem.classList.add(cn$g('k'));\n        this.trackElement.appendChild(knobElem);\n        this.knobElement = knobElem;\n        config.value.emitter.on('change', this.onChange_);\n        this.value = config.value;\n        this.update_();\n    }\n    update_() {\n        const p = constrainRange(mapRange(this.value.rawValue, this.props_.get('min'), this.props_.get('max'), 0, 100), 0, 100);\n        this.knobElement.style.width = `${p}%`;\n    }\n    onChange_() {\n        this.update_();\n    }\n}\n\nclass SliderController {\n    constructor(doc, config) {\n        this.onKeyDown_ = this.onKeyDown_.bind(this);\n        this.onKeyUp_ = this.onKeyUp_.bind(this);\n        this.onPointerDownOrMove_ = this.onPointerDownOrMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.props = config.props;\n        this.view = new SliderView(doc, {\n            props: this.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.trackElement);\n        this.ptHandler_.emitter.on('down', this.onPointerDownOrMove_);\n        this.ptHandler_.emitter.on('move', this.onPointerDownOrMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.trackElement.addEventListener('keydown', this.onKeyDown_);\n        this.view.trackElement.addEventListener('keyup', this.onKeyUp_);\n    }\n    handlePointerEvent_(d, opts) {\n        if (!d.point) {\n            return;\n        }\n        this.value.setRawValue(mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, this.props.get('min'), this.props.get('max')), opts);\n    }\n    onPointerDownOrMove_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onKeyDown_(ev) {\n        const step = getStepForKey(this.props.get('keyScale'), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue + step, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onKeyUp_(ev) {\n        const step = getStepForKey(this.props.get('keyScale'), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n\nconst cn$f = ClassName('sldtxt');\nclass SliderTextView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$f());\n        const sliderElem = doc.createElement('div');\n        sliderElem.classList.add(cn$f('s'));\n        this.sliderView_ = config.sliderView;\n        sliderElem.appendChild(this.sliderView_.element);\n        this.element.appendChild(sliderElem);\n        const textElem = doc.createElement('div');\n        textElem.classList.add(cn$f('t'));\n        this.textView_ = config.textView;\n        textElem.appendChild(this.textView_.element);\n        this.element.appendChild(textElem);\n    }\n}\n\nclass SliderTextController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.sliderC_ = new SliderController(doc, {\n            props: config.sliderProps,\n            value: config.value,\n            viewProps: this.viewProps,\n        });\n        this.textC_ = new NumberTextController(doc, {\n            parser: config.parser,\n            props: config.textProps,\n            sliderProps: config.sliderProps,\n            value: config.value,\n            viewProps: config.viewProps,\n        });\n        this.view = new SliderTextView(doc, {\n            sliderView: this.sliderC_.view,\n            textView: this.textC_.view,\n        });\n    }\n    get sliderController() {\n        return this.sliderC_;\n    }\n    get textController() {\n        return this.textC_;\n    }\n    importProps(state) {\n        return importBladeState(state, null, (p) => ({\n            max: p.required.number,\n            min: p.required.number,\n        }), (result) => {\n            const sliderProps = this.sliderC_.props;\n            sliderProps.set('max', result.max);\n            sliderProps.set('min', result.min);\n            return true;\n        });\n    }\n    exportProps() {\n        const sliderProps = this.sliderC_.props;\n        return exportBladeState(null, {\n            max: sliderProps.get('max'),\n            min: sliderProps.get('min'),\n        });\n    }\n}\nfunction createSliderTextProps(config) {\n    return {\n        sliderProps: new ValueMap({\n            keyScale: config.keyScale,\n            max: config.max,\n            min: config.min,\n        }),\n        textProps: new ValueMap({\n            formatter: createValue(config.formatter),\n            keyScale: config.keyScale,\n            pointerScale: createValue(config.pointerScale),\n        }),\n    };\n}\n\nconst CSS_VAR_MAP = {\n    containerUnitSize: 'cnt-usz',\n};\nfunction getCssVar(key) {\n    return `--${CSS_VAR_MAP[key]}`;\n}\n\nfunction createPointDimensionParser(p) {\n    return createNumberTextInputParamsParser(p);\n}\nfunction parsePointDimensionParams(value) {\n    if (!isRecord(value)) {\n        return undefined;\n    }\n    return parseRecord(value, createPointDimensionParser);\n}\nfunction createDimensionConstraint(params, initialValue) {\n    if (!params) {\n        return undefined;\n    }\n    const constraints = [];\n    const cs = createStepConstraint(params, initialValue);\n    if (cs) {\n        constraints.push(cs);\n    }\n    const rs = createRangeConstraint(params);\n    if (rs) {\n        constraints.push(rs);\n    }\n    return new CompositeConstraint(constraints);\n}\n\nfunction isCompatible(ver) {\n    if (!ver) {\n        return false;\n    }\n    return ver.major === VERSION$1.major;\n}\n\nfunction parsePickerLayout(value) {\n    if (value === 'inline' || value === 'popup') {\n        return value;\n    }\n    return undefined;\n}\n\nfunction writePrimitive(target, value) {\n    target.write(value);\n}\n\nconst cn$e = ClassName('ckb');\nclass CheckboxView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$e());\n        config.viewProps.bindClassModifiers(this.element);\n        const labelElem = doc.createElement('label');\n        labelElem.classList.add(cn$e('l'));\n        this.element.appendChild(labelElem);\n        const inputElem = doc.createElement('input');\n        inputElem.classList.add(cn$e('i'));\n        inputElem.type = 'checkbox';\n        labelElem.appendChild(inputElem);\n        this.inputElement = inputElem;\n        config.viewProps.bindDisabled(this.inputElement);\n        const wrapperElem = doc.createElement('div');\n        wrapperElem.classList.add(cn$e('w'));\n        labelElem.appendChild(wrapperElem);\n        const markElem = createSvgIconElement(doc, 'check');\n        wrapperElem.appendChild(markElem);\n        config.value.emitter.on('change', this.onValueChange_);\n        this.value = config.value;\n        this.update_();\n    }\n    update_() {\n        this.inputElement.checked = this.value.rawValue;\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass CheckboxController {\n    constructor(doc, config) {\n        this.onInputChange_ = this.onInputChange_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new CheckboxView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view.inputElement.addEventListener('change', this.onInputChange_);\n    }\n    onInputChange_(e) {\n        const inputElem = forceCast(e.currentTarget);\n        this.value.rawValue = inputElem.checked;\n    }\n}\n\nfunction createConstraint$6(params) {\n    const constraints = [];\n    const lc = createListConstraint(params.options);\n    if (lc) {\n        constraints.push(lc);\n    }\n    return new CompositeConstraint(constraints);\n}\nconst BooleanInputPlugin = createPlugin({\n    id: 'input-bool',\n    type: 'input',\n    accept: (value, params) => {\n        if (typeof value !== 'boolean') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            options: p.optional.custom(parseListOptions),\n            readonly: p.optional.constant(false),\n        }));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => boolFromUnknown,\n        constraint: (args) => createConstraint$6(args.params),\n        writer: (_args) => writePrimitive,\n    },\n    controller: (args) => {\n        const doc = args.document;\n        const value = args.value;\n        const c = args.constraint;\n        const lc = c && findConstraint(c, ListConstraint);\n        if (lc) {\n            return new ListController(doc, {\n                props: new ValueMap({\n                    options: lc.values.value('options'),\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new CheckboxController(doc, {\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (typeof args.controller.value.rawValue !== 'boolean') {\n            return null;\n        }\n        if (args.controller.valueController instanceof ListController) {\n            return new ListInputBindingApi(args.controller);\n        }\n        return null;\n    },\n});\n\nconst cn$d = ClassName('col');\nclass ColorView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$d());\n        config.foldable.bindExpandedClass(this.element, cn$d(undefined, 'expanded'));\n        bindValueMap(config.foldable, 'completed', valueToClassName(this.element, cn$d(undefined, 'cpl')));\n        const headElem = doc.createElement('div');\n        headElem.classList.add(cn$d('h'));\n        this.element.appendChild(headElem);\n        const swatchElem = doc.createElement('div');\n        swatchElem.classList.add(cn$d('s'));\n        headElem.appendChild(swatchElem);\n        this.swatchElement = swatchElem;\n        const textElem = doc.createElement('div');\n        textElem.classList.add(cn$d('t'));\n        headElem.appendChild(textElem);\n        this.textElement = textElem;\n        if (config.pickerLayout === 'inline') {\n            const pickerElem = doc.createElement('div');\n            pickerElem.classList.add(cn$d('p'));\n            this.element.appendChild(pickerElem);\n            this.pickerElement = pickerElem;\n        }\n        else {\n            this.pickerElement = null;\n        }\n    }\n}\n\nfunction rgbToHslInt(r, g, b) {\n    const rp = constrainRange(r / 255, 0, 1);\n    const gp = constrainRange(g / 255, 0, 1);\n    const bp = constrainRange(b / 255, 0, 1);\n    const cmax = Math.max(rp, gp, bp);\n    const cmin = Math.min(rp, gp, bp);\n    const c = cmax - cmin;\n    let h = 0;\n    let s = 0;\n    const l = (cmin + cmax) / 2;\n    if (c !== 0) {\n        s = c / (1 - Math.abs(cmax + cmin - 1));\n        if (rp === cmax) {\n            h = (gp - bp) / c;\n        }\n        else if (gp === cmax) {\n            h = 2 + (bp - rp) / c;\n        }\n        else {\n            h = 4 + (rp - gp) / c;\n        }\n        h = h / 6 + (h < 0 ? 1 : 0);\n    }\n    return [h * 360, s * 100, l * 100];\n}\nfunction hslToRgbInt(h, s, l) {\n    const hp = ((h % 360) + 360) % 360;\n    const sp = constrainRange(s / 100, 0, 1);\n    const lp = constrainRange(l / 100, 0, 1);\n    const c = (1 - Math.abs(2 * lp - 1)) * sp;\n    const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n    const m = lp - c / 2;\n    let rp, gp, bp;\n    if (hp >= 0 && hp < 60) {\n        [rp, gp, bp] = [c, x, 0];\n    }\n    else if (hp >= 60 && hp < 120) {\n        [rp, gp, bp] = [x, c, 0];\n    }\n    else if (hp >= 120 && hp < 180) {\n        [rp, gp, bp] = [0, c, x];\n    }\n    else if (hp >= 180 && hp < 240) {\n        [rp, gp, bp] = [0, x, c];\n    }\n    else if (hp >= 240 && hp < 300) {\n        [rp, gp, bp] = [x, 0, c];\n    }\n    else {\n        [rp, gp, bp] = [c, 0, x];\n    }\n    return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n}\nfunction rgbToHsvInt(r, g, b) {\n    const rp = constrainRange(r / 255, 0, 1);\n    const gp = constrainRange(g / 255, 0, 1);\n    const bp = constrainRange(b / 255, 0, 1);\n    const cmax = Math.max(rp, gp, bp);\n    const cmin = Math.min(rp, gp, bp);\n    const d = cmax - cmin;\n    let h;\n    if (d === 0) {\n        h = 0;\n    }\n    else if (cmax === rp) {\n        h = 60 * (((((gp - bp) / d) % 6) + 6) % 6);\n    }\n    else if (cmax === gp) {\n        h = 60 * ((bp - rp) / d + 2);\n    }\n    else {\n        h = 60 * ((rp - gp) / d + 4);\n    }\n    const s = cmax === 0 ? 0 : d / cmax;\n    const v = cmax;\n    return [h, s * 100, v * 100];\n}\nfunction hsvToRgbInt(h, s, v) {\n    const hp = loopRange(h, 360);\n    const sp = constrainRange(s / 100, 0, 1);\n    const vp = constrainRange(v / 100, 0, 1);\n    const c = vp * sp;\n    const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n    const m = vp - c;\n    let rp, gp, bp;\n    if (hp >= 0 && hp < 60) {\n        [rp, gp, bp] = [c, x, 0];\n    }\n    else if (hp >= 60 && hp < 120) {\n        [rp, gp, bp] = [x, c, 0];\n    }\n    else if (hp >= 120 && hp < 180) {\n        [rp, gp, bp] = [0, c, x];\n    }\n    else if (hp >= 180 && hp < 240) {\n        [rp, gp, bp] = [0, x, c];\n    }\n    else if (hp >= 240 && hp < 300) {\n        [rp, gp, bp] = [x, 0, c];\n    }\n    else {\n        [rp, gp, bp] = [c, 0, x];\n    }\n    return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n}\nfunction hslToHsvInt(h, s, l) {\n    const sd = l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100);\n    return [\n        h,\n        sd !== 0 ? (s * (100 - Math.abs(2 * l - 100))) / sd : 0,\n        l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100),\n    ];\n}\nfunction hsvToHslInt(h, s, v) {\n    const sd = 100 - Math.abs((v * (200 - s)) / 100 - 100);\n    return [h, sd !== 0 ? (s * v) / sd : 0, (v * (200 - s)) / (2 * 100)];\n}\nfunction removeAlphaComponent(comps) {\n    return [comps[0], comps[1], comps[2]];\n}\nfunction appendAlphaComponent(comps, alpha) {\n    return [comps[0], comps[1], comps[2], alpha];\n}\nconst MODE_CONVERTER_MAP = {\n    hsl: {\n        hsl: (h, s, l) => [h, s, l],\n        hsv: hslToHsvInt,\n        rgb: hslToRgbInt,\n    },\n    hsv: {\n        hsl: hsvToHslInt,\n        hsv: (h, s, v) => [h, s, v],\n        rgb: hsvToRgbInt,\n    },\n    rgb: {\n        hsl: rgbToHslInt,\n        hsv: rgbToHsvInt,\n        rgb: (r, g, b) => [r, g, b],\n    },\n};\nfunction getColorMaxComponents(mode, type) {\n    return [\n        type === 'float' ? 1 : mode === 'rgb' ? 255 : 360,\n        type === 'float' ? 1 : mode === 'rgb' ? 255 : 100,\n        type === 'float' ? 1 : mode === 'rgb' ? 255 : 100,\n    ];\n}\nfunction loopHueRange(hue, max) {\n    return hue === max ? max : loopRange(hue, max);\n}\nfunction constrainColorComponents(components, mode, type) {\n    var _a;\n    const ms = getColorMaxComponents(mode, type);\n    return [\n        mode === 'rgb'\n            ? constrainRange(components[0], 0, ms[0])\n            : loopHueRange(components[0], ms[0]),\n        constrainRange(components[1], 0, ms[1]),\n        constrainRange(components[2], 0, ms[2]),\n        constrainRange((_a = components[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n    ];\n}\nfunction convertColorType(comps, mode, from, to) {\n    const fms = getColorMaxComponents(mode, from);\n    const tms = getColorMaxComponents(mode, to);\n    return comps.map((c, index) => (c / fms[index]) * tms[index]);\n}\nfunction convertColor(components, from, to) {\n    const intComps = convertColorType(components, from.mode, from.type, 'int');\n    const result = MODE_CONVERTER_MAP[from.mode][to.mode](...intComps);\n    return convertColorType(result, to.mode, 'int', to.type);\n}\n\nclass IntColor {\n    static black() {\n        return new IntColor([0, 0, 0], 'rgb');\n    }\n    constructor(comps, mode) {\n        this.type = 'int';\n        this.mode = mode;\n        this.comps_ = constrainColorComponents(comps, mode, this.type);\n    }\n    getComponents(opt_mode) {\n        return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_), { mode: this.mode, type: this.type }, { mode: opt_mode !== null && opt_mode !== void 0 ? opt_mode : this.mode, type: this.type }), this.comps_[3]);\n    }\n    toRgbaObject() {\n        const rgbComps = this.getComponents('rgb');\n        return {\n            r: rgbComps[0],\n            g: rgbComps[1],\n            b: rgbComps[2],\n            a: rgbComps[3],\n        };\n    }\n}\n\nconst cn$c = ClassName('colp');\nclass ColorPickerView {\n    constructor(doc, config) {\n        this.alphaViews_ = null;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$c());\n        config.viewProps.bindClassModifiers(this.element);\n        const hsvElem = doc.createElement('div');\n        hsvElem.classList.add(cn$c('hsv'));\n        const svElem = doc.createElement('div');\n        svElem.classList.add(cn$c('sv'));\n        this.svPaletteView_ = config.svPaletteView;\n        svElem.appendChild(this.svPaletteView_.element);\n        hsvElem.appendChild(svElem);\n        const hElem = doc.createElement('div');\n        hElem.classList.add(cn$c('h'));\n        this.hPaletteView_ = config.hPaletteView;\n        hElem.appendChild(this.hPaletteView_.element);\n        hsvElem.appendChild(hElem);\n        this.element.appendChild(hsvElem);\n        const rgbElem = doc.createElement('div');\n        rgbElem.classList.add(cn$c('rgb'));\n        this.textsView_ = config.textsView;\n        rgbElem.appendChild(this.textsView_.element);\n        this.element.appendChild(rgbElem);\n        if (config.alphaViews) {\n            this.alphaViews_ = {\n                palette: config.alphaViews.palette,\n                text: config.alphaViews.text,\n            };\n            const aElem = doc.createElement('div');\n            aElem.classList.add(cn$c('a'));\n            const apElem = doc.createElement('div');\n            apElem.classList.add(cn$c('ap'));\n            apElem.appendChild(this.alphaViews_.palette.element);\n            aElem.appendChild(apElem);\n            const atElem = doc.createElement('div');\n            atElem.classList.add(cn$c('at'));\n            atElem.appendChild(this.alphaViews_.text.element);\n            aElem.appendChild(atElem);\n            this.element.appendChild(aElem);\n        }\n    }\n    get allFocusableElements() {\n        const elems = [\n            this.svPaletteView_.element,\n            this.hPaletteView_.element,\n            this.textsView_.modeSelectElement,\n            ...this.textsView_.inputViews.map((v) => v.inputElement),\n        ];\n        if (this.alphaViews_) {\n            elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);\n        }\n        return elems;\n    }\n}\n\nfunction parseColorType(value) {\n    return value === 'int' ? 'int' : value === 'float' ? 'float' : undefined;\n}\nfunction parseColorInputParams(params) {\n    return parseRecord(params, (p) => ({\n        color: p.optional.object({\n            alpha: p.optional.boolean,\n            type: p.optional.custom(parseColorType),\n        }),\n        expanded: p.optional.boolean,\n        picker: p.optional.custom(parsePickerLayout),\n        readonly: p.optional.constant(false),\n    }));\n}\nfunction getKeyScaleForColor(forAlpha) {\n    return forAlpha ? 0.1 : 1;\n}\nfunction extractColorType(params) {\n    var _a;\n    return (_a = params.color) === null || _a === void 0 ? void 0 : _a.type;\n}\n\nclass FloatColor {\n    constructor(comps, mode) {\n        this.type = 'float';\n        this.mode = mode;\n        this.comps_ = constrainColorComponents(comps, mode, this.type);\n    }\n    getComponents(opt_mode) {\n        return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_), { mode: this.mode, type: this.type }, { mode: opt_mode !== null && opt_mode !== void 0 ? opt_mode : this.mode, type: this.type }), this.comps_[3]);\n    }\n    toRgbaObject() {\n        const rgbComps = this.getComponents('rgb');\n        return {\n            r: rgbComps[0],\n            g: rgbComps[1],\n            b: rgbComps[2],\n            a: rgbComps[3],\n        };\n    }\n}\n\nconst TYPE_TO_CONSTRUCTOR_MAP = {\n    int: (comps, mode) => new IntColor(comps, mode),\n    float: (comps, mode) => new FloatColor(comps, mode),\n};\nfunction createColor(comps, mode, type) {\n    return TYPE_TO_CONSTRUCTOR_MAP[type](comps, mode);\n}\nfunction isFloatColor(c) {\n    return c.type === 'float';\n}\nfunction isIntColor(c) {\n    return c.type === 'int';\n}\nfunction convertFloatToInt(cf) {\n    const comps = cf.getComponents();\n    const ms = getColorMaxComponents(cf.mode, 'int');\n    return new IntColor([\n        Math.round(mapRange(comps[0], 0, 1, 0, ms[0])),\n        Math.round(mapRange(comps[1], 0, 1, 0, ms[1])),\n        Math.round(mapRange(comps[2], 0, 1, 0, ms[2])),\n        comps[3],\n    ], cf.mode);\n}\nfunction convertIntToFloat(ci) {\n    const comps = ci.getComponents();\n    const ms = getColorMaxComponents(ci.mode, 'int');\n    return new FloatColor([\n        mapRange(comps[0], 0, ms[0], 0, 1),\n        mapRange(comps[1], 0, ms[1], 0, 1),\n        mapRange(comps[2], 0, ms[2], 0, 1),\n        comps[3],\n    ], ci.mode);\n}\nfunction mapColorType(c, type) {\n    if (c.type === type) {\n        return c;\n    }\n    if (isIntColor(c) && type === 'float') {\n        return convertIntToFloat(c);\n    }\n    if (isFloatColor(c) && type === 'int') {\n        return convertFloatToInt(c);\n    }\n    throw TpError.shouldNeverHappen();\n}\n\nfunction equalsStringColorFormat(f1, f2) {\n    return (f1.alpha === f2.alpha &&\n        f1.mode === f2.mode &&\n        f1.notation === f2.notation &&\n        f1.type === f2.type);\n}\nfunction parseCssNumberOrPercentage(text, max) {\n    const m = text.match(/^(.+)%$/);\n    if (!m) {\n        return Math.min(parseFloat(text), max);\n    }\n    return Math.min(parseFloat(m[1]) * 0.01 * max, max);\n}\nconst ANGLE_TO_DEG_MAP = {\n    deg: (angle) => angle,\n    grad: (angle) => (angle * 360) / 400,\n    rad: (angle) => (angle * 360) / (2 * Math.PI),\n    turn: (angle) => angle * 360,\n};\nfunction parseCssNumberOrAngle(text) {\n    const m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);\n    if (!m) {\n        return parseFloat(text);\n    }\n    const angle = parseFloat(m[1]);\n    const unit = m[2];\n    return ANGLE_TO_DEG_MAP[unit](angle);\n}\nfunction parseFunctionalRgbColorComponents(text) {\n    const m = text.match(/^rgb\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseCssNumberOrPercentage(m[1], 255),\n        parseCssNumberOrPercentage(m[2], 255),\n        parseCssNumberOrPercentage(m[3], 255),\n    ];\n    if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n        return null;\n    }\n    return comps;\n}\nfunction parseFunctionalRgbColor(text) {\n    const comps = parseFunctionalRgbColorComponents(text);\n    return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseFunctionalRgbaColorComponents(text) {\n    const m = text.match(/^rgba\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseCssNumberOrPercentage(m[1], 255),\n        parseCssNumberOrPercentage(m[2], 255),\n        parseCssNumberOrPercentage(m[3], 255),\n        parseCssNumberOrPercentage(m[4], 1),\n    ];\n    if (isNaN(comps[0]) ||\n        isNaN(comps[1]) ||\n        isNaN(comps[2]) ||\n        isNaN(comps[3])) {\n        return null;\n    }\n    return comps;\n}\nfunction parseFunctionalRgbaColor(text) {\n    const comps = parseFunctionalRgbaColorComponents(text);\n    return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseFunctionalHslColorComponents(text) {\n    const m = text.match(/^hsl\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseCssNumberOrAngle(m[1]),\n        parseCssNumberOrPercentage(m[2], 100),\n        parseCssNumberOrPercentage(m[3], 100),\n    ];\n    if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n        return null;\n    }\n    return comps;\n}\nfunction parseFunctionalHslColor(text) {\n    const comps = parseFunctionalHslColorComponents(text);\n    return comps ? new IntColor(comps, 'hsl') : null;\n}\nfunction parseHslaColorComponents(text) {\n    const m = text.match(/^hsla\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseCssNumberOrAngle(m[1]),\n        parseCssNumberOrPercentage(m[2], 100),\n        parseCssNumberOrPercentage(m[3], 100),\n        parseCssNumberOrPercentage(m[4], 1),\n    ];\n    if (isNaN(comps[0]) ||\n        isNaN(comps[1]) ||\n        isNaN(comps[2]) ||\n        isNaN(comps[3])) {\n        return null;\n    }\n    return comps;\n}\nfunction parseFunctionalHslaColor(text) {\n    const comps = parseHslaColorComponents(text);\n    return comps ? new IntColor(comps, 'hsl') : null;\n}\nfunction parseHexRgbColorComponents(text) {\n    const mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n    if (mRgb) {\n        return [\n            parseInt(mRgb[1] + mRgb[1], 16),\n            parseInt(mRgb[2] + mRgb[2], 16),\n            parseInt(mRgb[3] + mRgb[3], 16),\n        ];\n    }\n    const mRrggbb = text.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n    if (mRrggbb) {\n        return [\n            parseInt(mRrggbb[1], 16),\n            parseInt(mRrggbb[2], 16),\n            parseInt(mRrggbb[3], 16),\n        ];\n    }\n    return null;\n}\nfunction parseHexRgbColor(text) {\n    const comps = parseHexRgbColorComponents(text);\n    return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseHexRgbaColorComponents(text) {\n    const mRgb = text.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n    if (mRgb) {\n        return [\n            parseInt(mRgb[1] + mRgb[1], 16),\n            parseInt(mRgb[2] + mRgb[2], 16),\n            parseInt(mRgb[3] + mRgb[3], 16),\n            mapRange(parseInt(mRgb[4] + mRgb[4], 16), 0, 255, 0, 1),\n        ];\n    }\n    const mRrggbb = text.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n    if (mRrggbb) {\n        return [\n            parseInt(mRrggbb[1], 16),\n            parseInt(mRrggbb[2], 16),\n            parseInt(mRrggbb[3], 16),\n            mapRange(parseInt(mRrggbb[4], 16), 0, 255, 0, 1),\n        ];\n    }\n    return null;\n}\nfunction parseHexRgbaColor(text) {\n    const comps = parseHexRgbaColorComponents(text);\n    return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseObjectRgbColorComponents(text) {\n    const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseFloat(m[1]),\n        parseFloat(m[2]),\n        parseFloat(m[3]),\n    ];\n    if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n        return null;\n    }\n    return comps;\n}\nfunction createObjectRgbColorParser(type) {\n    return (text) => {\n        const comps = parseObjectRgbColorComponents(text);\n        return comps ? createColor(comps, 'rgb', type) : null;\n    };\n}\nfunction parseObjectRgbaColorComponents(text) {\n    const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*a\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseFloat(m[1]),\n        parseFloat(m[2]),\n        parseFloat(m[3]),\n        parseFloat(m[4]),\n    ];\n    if (isNaN(comps[0]) ||\n        isNaN(comps[1]) ||\n        isNaN(comps[2]) ||\n        isNaN(comps[3])) {\n        return null;\n    }\n    return comps;\n}\nfunction createObjectRgbaColorParser(type) {\n    return (text) => {\n        const comps = parseObjectRgbaColorComponents(text);\n        return comps ? createColor(comps, 'rgb', type) : null;\n    };\n}\nconst PARSER_AND_RESULT = [\n    {\n        parser: parseHexRgbColorComponents,\n        result: {\n            alpha: false,\n            mode: 'rgb',\n            notation: 'hex',\n        },\n    },\n    {\n        parser: parseHexRgbaColorComponents,\n        result: {\n            alpha: true,\n            mode: 'rgb',\n            notation: 'hex',\n        },\n    },\n    {\n        parser: parseFunctionalRgbColorComponents,\n        result: {\n            alpha: false,\n            mode: 'rgb',\n            notation: 'func',\n        },\n    },\n    {\n        parser: parseFunctionalRgbaColorComponents,\n        result: {\n            alpha: true,\n            mode: 'rgb',\n            notation: 'func',\n        },\n    },\n    {\n        parser: parseFunctionalHslColorComponents,\n        result: {\n            alpha: false,\n            mode: 'hsl',\n            notation: 'func',\n        },\n    },\n    {\n        parser: parseHslaColorComponents,\n        result: {\n            alpha: true,\n            mode: 'hsl',\n            notation: 'func',\n        },\n    },\n    {\n        parser: parseObjectRgbColorComponents,\n        result: {\n            alpha: false,\n            mode: 'rgb',\n            notation: 'object',\n        },\n    },\n    {\n        parser: parseObjectRgbaColorComponents,\n        result: {\n            alpha: true,\n            mode: 'rgb',\n            notation: 'object',\n        },\n    },\n];\nfunction detectStringColor(text) {\n    return PARSER_AND_RESULT.reduce((prev, { parser, result: detection }) => {\n        if (prev) {\n            return prev;\n        }\n        return parser(text) ? detection : null;\n    }, null);\n}\nfunction detectStringColorFormat(text, type = 'int') {\n    const r = detectStringColor(text);\n    if (!r) {\n        return null;\n    }\n    if (r.notation === 'hex' && type !== 'float') {\n        return Object.assign(Object.assign({}, r), { type: 'int' });\n    }\n    if (r.notation === 'func') {\n        return Object.assign(Object.assign({}, r), { type: type });\n    }\n    return null;\n}\nfunction createColorStringParser(type) {\n    const parsers = [\n        parseHexRgbColor,\n        parseHexRgbaColor,\n        parseFunctionalRgbColor,\n        parseFunctionalRgbaColor,\n        parseFunctionalHslColor,\n        parseFunctionalHslaColor,\n    ];\n    if (type === 'int') {\n        parsers.push(createObjectRgbColorParser('int'), createObjectRgbaColorParser('int'));\n    }\n    if (type === 'float') {\n        parsers.push(createObjectRgbColorParser('float'), createObjectRgbaColorParser('float'));\n    }\n    const parser = composeParsers(parsers);\n    return (text) => {\n        const result = parser(text);\n        return result ? mapColorType(result, type) : null;\n    };\n}\nfunction readIntColorString(value) {\n    const parser = createColorStringParser('int');\n    if (typeof value !== 'string') {\n        return IntColor.black();\n    }\n    const result = parser(value);\n    return result !== null && result !== void 0 ? result : IntColor.black();\n}\nfunction zerofill(comp) {\n    const hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n    return hex.length === 1 ? `0${hex}` : hex;\n}\nfunction colorToHexRgbString(value, prefix = '#') {\n    const hexes = removeAlphaComponent(value.getComponents('rgb'))\n        .map(zerofill)\n        .join('');\n    return `${prefix}${hexes}`;\n}\nfunction colorToHexRgbaString(value, prefix = '#') {\n    const rgbaComps = value.getComponents('rgb');\n    const hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255]\n        .map(zerofill)\n        .join('');\n    return `${prefix}${hexes}`;\n}\nfunction colorToFunctionalRgbString(value) {\n    const formatter = createNumberFormatter(0);\n    const ci = mapColorType(value, 'int');\n    const comps = removeAlphaComponent(ci.getComponents('rgb')).map((comp) => formatter(comp));\n    return `rgb(${comps.join(', ')})`;\n}\nfunction colorToFunctionalRgbaString(value) {\n    const aFormatter = createNumberFormatter(2);\n    const rgbFormatter = createNumberFormatter(0);\n    const ci = mapColorType(value, 'int');\n    const comps = ci.getComponents('rgb').map((comp, index) => {\n        const formatter = index === 3 ? aFormatter : rgbFormatter;\n        return formatter(comp);\n    });\n    return `rgba(${comps.join(', ')})`;\n}\nfunction colorToFunctionalHslString(value) {\n    const formatters = [\n        createNumberFormatter(0),\n        formatPercentage,\n        formatPercentage,\n    ];\n    const ci = mapColorType(value, 'int');\n    const comps = removeAlphaComponent(ci.getComponents('hsl')).map((comp, index) => formatters[index](comp));\n    return `hsl(${comps.join(', ')})`;\n}\nfunction colorToFunctionalHslaString(value) {\n    const formatters = [\n        createNumberFormatter(0),\n        formatPercentage,\n        formatPercentage,\n        createNumberFormatter(2),\n    ];\n    const ci = mapColorType(value, 'int');\n    const comps = ci\n        .getComponents('hsl')\n        .map((comp, index) => formatters[index](comp));\n    return `hsla(${comps.join(', ')})`;\n}\nfunction colorToObjectRgbString(value, type) {\n    const formatter = createNumberFormatter(type === 'float' ? 2 : 0);\n    const names = ['r', 'g', 'b'];\n    const cc = mapColorType(value, type);\n    const comps = removeAlphaComponent(cc.getComponents('rgb')).map((comp, index) => `${names[index]}: ${formatter(comp)}`);\n    return `{${comps.join(', ')}}`;\n}\nfunction createObjectRgbColorFormatter(type) {\n    return (value) => colorToObjectRgbString(value, type);\n}\nfunction colorToObjectRgbaString(value, type) {\n    const aFormatter = createNumberFormatter(2);\n    const rgbFormatter = createNumberFormatter(type === 'float' ? 2 : 0);\n    const names = ['r', 'g', 'b', 'a'];\n    const cc = mapColorType(value, type);\n    const comps = cc.getComponents('rgb').map((comp, index) => {\n        const formatter = index === 3 ? aFormatter : rgbFormatter;\n        return `${names[index]}: ${formatter(comp)}`;\n    });\n    return `{${comps.join(', ')}}`;\n}\nfunction createObjectRgbaColorFormatter(type) {\n    return (value) => colorToObjectRgbaString(value, type);\n}\nconst FORMAT_AND_STRINGIFIERS = [\n    {\n        format: {\n            alpha: false,\n            mode: 'rgb',\n            notation: 'hex',\n            type: 'int',\n        },\n        stringifier: colorToHexRgbString,\n    },\n    {\n        format: {\n            alpha: true,\n            mode: 'rgb',\n            notation: 'hex',\n            type: 'int',\n        },\n        stringifier: colorToHexRgbaString,\n    },\n    {\n        format: {\n            alpha: false,\n            mode: 'rgb',\n            notation: 'func',\n            type: 'int',\n        },\n        stringifier: colorToFunctionalRgbString,\n    },\n    {\n        format: {\n            alpha: true,\n            mode: 'rgb',\n            notation: 'func',\n            type: 'int',\n        },\n        stringifier: colorToFunctionalRgbaString,\n    },\n    {\n        format: {\n            alpha: false,\n            mode: 'hsl',\n            notation: 'func',\n            type: 'int',\n        },\n        stringifier: colorToFunctionalHslString,\n    },\n    {\n        format: {\n            alpha: true,\n            mode: 'hsl',\n            notation: 'func',\n            type: 'int',\n        },\n        stringifier: colorToFunctionalHslaString,\n    },\n    ...['int', 'float'].reduce((prev, type) => {\n        return [\n            ...prev,\n            {\n                format: {\n                    alpha: false,\n                    mode: 'rgb',\n                    notation: 'object',\n                    type: type,\n                },\n                stringifier: createObjectRgbColorFormatter(type),\n            },\n            {\n                format: {\n                    alpha: true,\n                    mode: 'rgb',\n                    notation: 'object',\n                    type: type,\n                },\n                stringifier: createObjectRgbaColorFormatter(type),\n            },\n        ];\n    }, []),\n];\nfunction findColorStringifier(format) {\n    return FORMAT_AND_STRINGIFIERS.reduce((prev, fas) => {\n        if (prev) {\n            return prev;\n        }\n        return equalsStringColorFormat(fas.format, format)\n            ? fas.stringifier\n            : null;\n    }, null);\n}\n\nconst cn$b = ClassName('apl');\nclass APaletteView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.value = config.value;\n        this.value.emitter.on('change', this.onValueChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$b());\n        config.viewProps.bindClassModifiers(this.element);\n        config.viewProps.bindTabIndex(this.element);\n        const barElem = doc.createElement('div');\n        barElem.classList.add(cn$b('b'));\n        this.element.appendChild(barElem);\n        const colorElem = doc.createElement('div');\n        colorElem.classList.add(cn$b('c'));\n        barElem.appendChild(colorElem);\n        this.colorElem_ = colorElem;\n        const markerElem = doc.createElement('div');\n        markerElem.classList.add(cn$b('m'));\n        this.element.appendChild(markerElem);\n        this.markerElem_ = markerElem;\n        const previewElem = doc.createElement('div');\n        previewElem.classList.add(cn$b('p'));\n        this.markerElem_.appendChild(previewElem);\n        this.previewElem_ = previewElem;\n        this.update_();\n    }\n    update_() {\n        const c = this.value.rawValue;\n        const rgbaComps = c.getComponents('rgb');\n        const leftColor = new IntColor([rgbaComps[0], rgbaComps[1], rgbaComps[2], 0], 'rgb');\n        const rightColor = new IntColor([rgbaComps[0], rgbaComps[1], rgbaComps[2], 255], 'rgb');\n        const gradientComps = [\n            'to right',\n            colorToFunctionalRgbaString(leftColor),\n            colorToFunctionalRgbaString(rightColor),\n        ];\n        this.colorElem_.style.background = `linear-gradient(${gradientComps.join(',')})`;\n        this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);\n        const left = mapRange(rgbaComps[3], 0, 1, 0, 100);\n        this.markerElem_.style.left = `${left}%`;\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass APaletteController {\n    constructor(doc, config) {\n        this.onKeyDown_ = this.onKeyDown_.bind(this);\n        this.onKeyUp_ = this.onKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new APaletteView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.element);\n        this.ptHandler_.emitter.on('down', this.onPointerDown_);\n        this.ptHandler_.emitter.on('move', this.onPointerMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.element.addEventListener('keydown', this.onKeyDown_);\n        this.view.element.addEventListener('keyup', this.onKeyUp_);\n    }\n    handlePointerEvent_(d, opts) {\n        if (!d.point) {\n            return;\n        }\n        const alpha = d.point.x / d.bounds.width;\n        const c = this.value.rawValue;\n        const [h, s, v] = c.getComponents('hsv');\n        this.value.setRawValue(new IntColor([h, s, v, alpha], 'hsv'), opts);\n    }\n    onPointerDown_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerMove_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onKeyDown_(ev) {\n        const step = getStepForKey(getKeyScaleForColor(true), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        const c = this.value.rawValue;\n        const [h, s, v, a] = c.getComponents('hsv');\n        this.value.setRawValue(new IntColor([h, s, v, a + step], 'hsv'), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onKeyUp_(ev) {\n        const step = getStepForKey(getKeyScaleForColor(true), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n\nconst cn$a = ClassName('coltxt');\nfunction createModeSelectElement(doc) {\n    const selectElem = doc.createElement('select');\n    const items = [\n        { text: 'RGB', value: 'rgb' },\n        { text: 'HSL', value: 'hsl' },\n        { text: 'HSV', value: 'hsv' },\n        { text: 'HEX', value: 'hex' },\n    ];\n    selectElem.appendChild(items.reduce((frag, item) => {\n        const optElem = doc.createElement('option');\n        optElem.textContent = item.text;\n        optElem.value = item.value;\n        frag.appendChild(optElem);\n        return frag;\n    }, doc.createDocumentFragment()));\n    return selectElem;\n}\nclass ColorTextsView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$a());\n        config.viewProps.bindClassModifiers(this.element);\n        const modeElem = doc.createElement('div');\n        modeElem.classList.add(cn$a('m'));\n        this.modeElem_ = createModeSelectElement(doc);\n        this.modeElem_.classList.add(cn$a('ms'));\n        modeElem.appendChild(this.modeSelectElement);\n        config.viewProps.bindDisabled(this.modeElem_);\n        const modeMarkerElem = doc.createElement('div');\n        modeMarkerElem.classList.add(cn$a('mm'));\n        modeMarkerElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n        modeElem.appendChild(modeMarkerElem);\n        this.element.appendChild(modeElem);\n        const inputsElem = doc.createElement('div');\n        inputsElem.classList.add(cn$a('w'));\n        this.element.appendChild(inputsElem);\n        this.inputsElem_ = inputsElem;\n        this.inputViews_ = config.inputViews;\n        this.applyInputViews_();\n        bindValue(config.mode, (mode) => {\n            this.modeElem_.value = mode;\n        });\n    }\n    get modeSelectElement() {\n        return this.modeElem_;\n    }\n    get inputViews() {\n        return this.inputViews_;\n    }\n    set inputViews(inputViews) {\n        this.inputViews_ = inputViews;\n        this.applyInputViews_();\n    }\n    applyInputViews_() {\n        removeChildElements(this.inputsElem_);\n        const doc = this.element.ownerDocument;\n        this.inputViews_.forEach((v) => {\n            const compElem = doc.createElement('div');\n            compElem.classList.add(cn$a('c'));\n            compElem.appendChild(v.element);\n            this.inputsElem_.appendChild(compElem);\n        });\n    }\n}\n\nfunction createFormatter$2(type) {\n    return createNumberFormatter(type === 'float' ? 2 : 0);\n}\nfunction createConstraint$5(mode, type, index) {\n    const max = getColorMaxComponents(mode, type)[index];\n    return new DefiniteRangeConstraint({\n        min: 0,\n        max: max,\n    });\n}\nfunction createComponentController(doc, config, index) {\n    return new NumberTextController(doc, {\n        arrayPosition: index === 0 ? 'fst' : index === 3 - 1 ? 'lst' : 'mid',\n        parser: config.parser,\n        props: ValueMap.fromObject({\n            formatter: createFormatter$2(config.colorType),\n            keyScale: getKeyScaleForColor(false),\n            pointerScale: config.colorType === 'float' ? 0.01 : 1,\n        }),\n        value: createValue(0, {\n            constraint: createConstraint$5(config.colorMode, config.colorType, index),\n        }),\n        viewProps: config.viewProps,\n    });\n}\nfunction createComponentControllers(doc, config) {\n    const cc = {\n        colorMode: config.colorMode,\n        colorType: config.colorType,\n        parser: parseNumber,\n        viewProps: config.viewProps,\n    };\n    return [0, 1, 2].map((i) => {\n        const c = createComponentController(doc, cc, i);\n        connectValues({\n            primary: config.value,\n            secondary: c.value,\n            forward(p) {\n                const mc = mapColorType(p, config.colorType);\n                return mc.getComponents(config.colorMode)[i];\n            },\n            backward(p, s) {\n                const pickedMode = config.colorMode;\n                const mc = mapColorType(p, config.colorType);\n                const comps = mc.getComponents(pickedMode);\n                comps[i] = s;\n                const c = createColor(appendAlphaComponent(removeAlphaComponent(comps), comps[3]), pickedMode, config.colorType);\n                return mapColorType(c, 'int');\n            },\n        });\n        return c;\n    });\n}\nfunction createHexController(doc, config) {\n    const c = new TextController(doc, {\n        parser: createColorStringParser('int'),\n        props: ValueMap.fromObject({\n            formatter: colorToHexRgbString,\n        }),\n        value: createValue(IntColor.black()),\n        viewProps: config.viewProps,\n    });\n    connectValues({\n        primary: config.value,\n        secondary: c.value,\n        forward: (p) => new IntColor(removeAlphaComponent(p.getComponents()), p.mode),\n        backward: (p, s) => new IntColor(appendAlphaComponent(removeAlphaComponent(s.getComponents(p.mode)), p.getComponents()[3]), p.mode),\n    });\n    return [c];\n}\nfunction isColorMode(mode) {\n    return mode !== 'hex';\n}\nclass ColorTextsController {\n    constructor(doc, config) {\n        this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);\n        this.colorType_ = config.colorType;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.colorMode = createValue(this.value.rawValue.mode);\n        this.ccs_ = this.createComponentControllers_(doc);\n        this.view = new ColorTextsView(doc, {\n            mode: this.colorMode,\n            inputViews: [this.ccs_[0].view, this.ccs_[1].view, this.ccs_[2].view],\n            viewProps: this.viewProps,\n        });\n        this.view.modeSelectElement.addEventListener('change', this.onModeSelectChange_);\n    }\n    createComponentControllers_(doc) {\n        const mode = this.colorMode.rawValue;\n        if (isColorMode(mode)) {\n            return createComponentControllers(doc, {\n                colorMode: mode,\n                colorType: this.colorType_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n        return createHexController(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n    }\n    onModeSelectChange_(ev) {\n        const selectElem = ev.currentTarget;\n        this.colorMode.rawValue = selectElem.value;\n        this.ccs_ = this.createComponentControllers_(this.view.element.ownerDocument);\n        this.view.inputViews = this.ccs_.map((cc) => cc.view);\n    }\n}\n\nconst cn$9 = ClassName('hpl');\nclass HPaletteView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.value = config.value;\n        this.value.emitter.on('change', this.onValueChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$9());\n        config.viewProps.bindClassModifiers(this.element);\n        config.viewProps.bindTabIndex(this.element);\n        const colorElem = doc.createElement('div');\n        colorElem.classList.add(cn$9('c'));\n        this.element.appendChild(colorElem);\n        const markerElem = doc.createElement('div');\n        markerElem.classList.add(cn$9('m'));\n        this.element.appendChild(markerElem);\n        this.markerElem_ = markerElem;\n        this.update_();\n    }\n    update_() {\n        const c = this.value.rawValue;\n        const [h] = c.getComponents('hsv');\n        this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new IntColor([h, 100, 100], 'hsv'));\n        const left = mapRange(h, 0, 360, 0, 100);\n        this.markerElem_.style.left = `${left}%`;\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass HPaletteController {\n    constructor(doc, config) {\n        this.onKeyDown_ = this.onKeyDown_.bind(this);\n        this.onKeyUp_ = this.onKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new HPaletteView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.element);\n        this.ptHandler_.emitter.on('down', this.onPointerDown_);\n        this.ptHandler_.emitter.on('move', this.onPointerMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.element.addEventListener('keydown', this.onKeyDown_);\n        this.view.element.addEventListener('keyup', this.onKeyUp_);\n    }\n    handlePointerEvent_(d, opts) {\n        if (!d.point) {\n            return;\n        }\n        const hue = mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, 0, 360);\n        const c = this.value.rawValue;\n        const [, s, v, a] = c.getComponents('hsv');\n        this.value.setRawValue(new IntColor([hue, s, v, a], 'hsv'), opts);\n    }\n    onPointerDown_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerMove_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onKeyDown_(ev) {\n        const step = getStepForKey(getKeyScaleForColor(false), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        const c = this.value.rawValue;\n        const [h, s, v, a] = c.getComponents('hsv');\n        this.value.setRawValue(new IntColor([h + step, s, v, a], 'hsv'), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onKeyUp_(ev) {\n        const step = getStepForKey(getKeyScaleForColor(false), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n\nconst cn$8 = ClassName('svp');\nconst CANVAS_RESOL = 64;\nclass SvPaletteView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.value = config.value;\n        this.value.emitter.on('change', this.onValueChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$8());\n        config.viewProps.bindClassModifiers(this.element);\n        config.viewProps.bindTabIndex(this.element);\n        const canvasElem = doc.createElement('canvas');\n        canvasElem.height = CANVAS_RESOL;\n        canvasElem.width = CANVAS_RESOL;\n        canvasElem.classList.add(cn$8('c'));\n        this.element.appendChild(canvasElem);\n        this.canvasElement = canvasElem;\n        const markerElem = doc.createElement('div');\n        markerElem.classList.add(cn$8('m'));\n        this.element.appendChild(markerElem);\n        this.markerElem_ = markerElem;\n        this.update_();\n    }\n    update_() {\n        const ctx = getCanvasContext(this.canvasElement);\n        if (!ctx) {\n            return;\n        }\n        const c = this.value.rawValue;\n        const hsvComps = c.getComponents('hsv');\n        const width = this.canvasElement.width;\n        const height = this.canvasElement.height;\n        const imgData = ctx.getImageData(0, 0, width, height);\n        const data = imgData.data;\n        for (let iy = 0; iy < height; iy++) {\n            for (let ix = 0; ix < width; ix++) {\n                const s = mapRange(ix, 0, width, 0, 100);\n                const v = mapRange(iy, 0, height, 100, 0);\n                const rgbComps = hsvToRgbInt(hsvComps[0], s, v);\n                const i = (iy * width + ix) * 4;\n                data[i] = rgbComps[0];\n                data[i + 1] = rgbComps[1];\n                data[i + 2] = rgbComps[2];\n                data[i + 3] = 255;\n            }\n        }\n        ctx.putImageData(imgData, 0, 0);\n        const left = mapRange(hsvComps[1], 0, 100, 0, 100);\n        this.markerElem_.style.left = `${left}%`;\n        const top = mapRange(hsvComps[2], 0, 100, 100, 0);\n        this.markerElem_.style.top = `${top}%`;\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass SvPaletteController {\n    constructor(doc, config) {\n        this.onKeyDown_ = this.onKeyDown_.bind(this);\n        this.onKeyUp_ = this.onKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new SvPaletteView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.element);\n        this.ptHandler_.emitter.on('down', this.onPointerDown_);\n        this.ptHandler_.emitter.on('move', this.onPointerMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.element.addEventListener('keydown', this.onKeyDown_);\n        this.view.element.addEventListener('keyup', this.onKeyUp_);\n    }\n    handlePointerEvent_(d, opts) {\n        if (!d.point) {\n            return;\n        }\n        const saturation = mapRange(d.point.x, 0, d.bounds.width, 0, 100);\n        const value = mapRange(d.point.y, 0, d.bounds.height, 100, 0);\n        const [h, , , a] = this.value.rawValue.getComponents('hsv');\n        this.value.setRawValue(new IntColor([h, saturation, value, a], 'hsv'), opts);\n    }\n    onPointerDown_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerMove_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onKeyDown_(ev) {\n        if (isArrowKey(ev.key)) {\n            ev.preventDefault();\n        }\n        const [h, s, v, a] = this.value.rawValue.getComponents('hsv');\n        const keyScale = getKeyScaleForColor(false);\n        const ds = getStepForKey(keyScale, getHorizontalStepKeys(ev));\n        const dv = getStepForKey(keyScale, getVerticalStepKeys(ev));\n        if (ds === 0 && dv === 0) {\n            return;\n        }\n        this.value.setRawValue(new IntColor([h, s + ds, v + dv, a], 'hsv'), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onKeyUp_(ev) {\n        const keyScale = getKeyScaleForColor(false);\n        const ds = getStepForKey(keyScale, getHorizontalStepKeys(ev));\n        const dv = getStepForKey(keyScale, getVerticalStepKeys(ev));\n        if (ds === 0 && dv === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n\nclass ColorPickerController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.hPaletteC_ = new HPaletteController(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.svPaletteC_ = new SvPaletteController(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.alphaIcs_ = config.supportsAlpha\n            ? {\n                palette: new APaletteController(doc, {\n                    value: this.value,\n                    viewProps: this.viewProps,\n                }),\n                text: new NumberTextController(doc, {\n                    parser: parseNumber,\n                    props: ValueMap.fromObject({\n                        pointerScale: 0.01,\n                        keyScale: 0.1,\n                        formatter: createNumberFormatter(2),\n                    }),\n                    value: createValue(0, {\n                        constraint: new DefiniteRangeConstraint({ min: 0, max: 1 }),\n                    }),\n                    viewProps: this.viewProps,\n                }),\n            }\n            : null;\n        if (this.alphaIcs_) {\n            connectValues({\n                primary: this.value,\n                secondary: this.alphaIcs_.text.value,\n                forward: (p) => p.getComponents()[3],\n                backward: (p, s) => {\n                    const comps = p.getComponents();\n                    comps[3] = s;\n                    return new IntColor(comps, p.mode);\n                },\n            });\n        }\n        this.textsC_ = new ColorTextsController(doc, {\n            colorType: config.colorType,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view = new ColorPickerView(doc, {\n            alphaViews: this.alphaIcs_\n                ? {\n                    palette: this.alphaIcs_.palette.view,\n                    text: this.alphaIcs_.text.view,\n                }\n                : null,\n            hPaletteView: this.hPaletteC_.view,\n            supportsAlpha: config.supportsAlpha,\n            svPaletteView: this.svPaletteC_.view,\n            textsView: this.textsC_.view,\n            viewProps: this.viewProps,\n        });\n    }\n    get textsController() {\n        return this.textsC_;\n    }\n}\n\nconst cn$7 = ClassName('colsw');\nclass ColorSwatchView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        config.value.emitter.on('change', this.onValueChange_);\n        this.value = config.value;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$7());\n        config.viewProps.bindClassModifiers(this.element);\n        const swatchElem = doc.createElement('div');\n        swatchElem.classList.add(cn$7('sw'));\n        this.element.appendChild(swatchElem);\n        this.swatchElem_ = swatchElem;\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(cn$7('b'));\n        config.viewProps.bindDisabled(buttonElem);\n        this.element.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        this.update_();\n    }\n    update_() {\n        const value = this.value.rawValue;\n        this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass ColorSwatchController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new ColorSwatchView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n    }\n}\n\nclass ColorController {\n    constructor(doc, config) {\n        this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n        this.onButtonClick_ = this.onButtonClick_.bind(this);\n        this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n        this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.foldable_ = Foldable.create(config.expanded);\n        this.swatchC_ = new ColorSwatchController(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        const buttonElem = this.swatchC_.view.buttonElement;\n        buttonElem.addEventListener('blur', this.onButtonBlur_);\n        buttonElem.addEventListener('click', this.onButtonClick_);\n        this.textC_ = new TextController(doc, {\n            parser: config.parser,\n            props: ValueMap.fromObject({\n                formatter: config.formatter,\n            }),\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view = new ColorView(doc, {\n            foldable: this.foldable_,\n            pickerLayout: config.pickerLayout,\n        });\n        this.view.swatchElement.appendChild(this.swatchC_.view.element);\n        this.view.textElement.appendChild(this.textC_.view.element);\n        this.popC_ =\n            config.pickerLayout === 'popup'\n                ? new PopupController(doc, {\n                    viewProps: this.viewProps,\n                })\n                : null;\n        const pickerC = new ColorPickerController(doc, {\n            colorType: config.colorType,\n            supportsAlpha: config.supportsAlpha,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        pickerC.view.allFocusableElements.forEach((elem) => {\n            elem.addEventListener('blur', this.onPopupChildBlur_);\n            elem.addEventListener('keydown', this.onPopupChildKeydown_);\n        });\n        this.pickerC_ = pickerC;\n        if (this.popC_) {\n            this.view.element.appendChild(this.popC_.view.element);\n            this.popC_.view.element.appendChild(pickerC.view.element);\n            connectValues({\n                primary: this.foldable_.value('expanded'),\n                secondary: this.popC_.shows,\n                forward: (p) => p,\n                backward: (_, s) => s,\n            });\n        }\n        else if (this.view.pickerElement) {\n            this.view.pickerElement.appendChild(this.pickerC_.view.element);\n            bindFoldable(this.foldable_, this.view.pickerElement);\n        }\n    }\n    get textController() {\n        return this.textC_;\n    }\n    onButtonBlur_(e) {\n        if (!this.popC_) {\n            return;\n        }\n        const elem = this.view.element;\n        const nextTarget = forceCast(e.relatedTarget);\n        if (!nextTarget || !elem.contains(nextTarget)) {\n            this.popC_.shows.rawValue = false;\n        }\n    }\n    onButtonClick_() {\n        this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n        if (this.foldable_.get('expanded')) {\n            this.pickerC_.view.allFocusableElements[0].focus();\n        }\n    }\n    onPopupChildBlur_(ev) {\n        if (!this.popC_) {\n            return;\n        }\n        const elem = this.popC_.view.element;\n        const nextTarget = findNextTarget(ev);\n        if (nextTarget && elem.contains(nextTarget)) {\n            return;\n        }\n        if (nextTarget &&\n            nextTarget === this.swatchC_.view.buttonElement &&\n            !supportsTouch(elem.ownerDocument)) {\n            return;\n        }\n        this.popC_.shows.rawValue = false;\n    }\n    onPopupChildKeydown_(ev) {\n        if (this.popC_) {\n            if (ev.key === 'Escape') {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        else if (this.view.pickerElement) {\n            if (ev.key === 'Escape') {\n                this.swatchC_.view.buttonElement.focus();\n            }\n        }\n    }\n}\n\nfunction colorToRgbNumber(value) {\n    return removeAlphaComponent(value.getComponents('rgb')).reduce((result, comp) => {\n        return (result << 8) | (Math.floor(comp) & 0xff);\n    }, 0);\n}\nfunction colorToRgbaNumber(value) {\n    return (value.getComponents('rgb').reduce((result, comp, index) => {\n        const hex = Math.floor(index === 3 ? comp * 255 : comp) & 0xff;\n        return (result << 8) | hex;\n    }, 0) >>> 0);\n}\nfunction numberToRgbColor(num) {\n    return new IntColor([(num >> 16) & 0xff, (num >> 8) & 0xff, num & 0xff], 'rgb');\n}\nfunction numberToRgbaColor(num) {\n    return new IntColor([\n        (num >> 24) & 0xff,\n        (num >> 16) & 0xff,\n        (num >> 8) & 0xff,\n        mapRange(num & 0xff, 0, 255, 0, 1),\n    ], 'rgb');\n}\nfunction colorFromRgbNumber(value) {\n    if (typeof value !== 'number') {\n        return IntColor.black();\n    }\n    return numberToRgbColor(value);\n}\nfunction colorFromRgbaNumber(value) {\n    if (typeof value !== 'number') {\n        return IntColor.black();\n    }\n    return numberToRgbaColor(value);\n}\n\nfunction isRgbColorComponent(obj, key) {\n    if (typeof obj !== 'object' || isEmpty(obj)) {\n        return false;\n    }\n    return key in obj && typeof obj[key] === 'number';\n}\nfunction isRgbColorObject(obj) {\n    return (isRgbColorComponent(obj, 'r') &&\n        isRgbColorComponent(obj, 'g') &&\n        isRgbColorComponent(obj, 'b'));\n}\nfunction isRgbaColorObject(obj) {\n    return isRgbColorObject(obj) && isRgbColorComponent(obj, 'a');\n}\nfunction isColorObject(obj) {\n    return isRgbColorObject(obj);\n}\nfunction equalsColor(v1, v2) {\n    if (v1.mode !== v2.mode) {\n        return false;\n    }\n    if (v1.type !== v2.type) {\n        return false;\n    }\n    const comps1 = v1.getComponents();\n    const comps2 = v2.getComponents();\n    for (let i = 0; i < comps1.length; i++) {\n        if (comps1[i] !== comps2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction createColorComponentsFromRgbObject(obj) {\n    return 'a' in obj ? [obj.r, obj.g, obj.b, obj.a] : [obj.r, obj.g, obj.b];\n}\n\nfunction createColorStringWriter(format) {\n    const stringify = findColorStringifier(format);\n    return stringify\n        ? (target, value) => {\n            writePrimitive(target, stringify(value));\n        }\n        : null;\n}\nfunction createColorNumberWriter(supportsAlpha) {\n    const colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;\n    return (target, value) => {\n        writePrimitive(target, colorToNumber(value));\n    };\n}\nfunction writeRgbaColorObject(target, value, type) {\n    const cc = mapColorType(value, type);\n    const obj = cc.toRgbaObject();\n    target.writeProperty('r', obj.r);\n    target.writeProperty('g', obj.g);\n    target.writeProperty('b', obj.b);\n    target.writeProperty('a', obj.a);\n}\nfunction writeRgbColorObject(target, value, type) {\n    const cc = mapColorType(value, type);\n    const obj = cc.toRgbaObject();\n    target.writeProperty('r', obj.r);\n    target.writeProperty('g', obj.g);\n    target.writeProperty('b', obj.b);\n}\nfunction createColorObjectWriter(supportsAlpha, type) {\n    return (target, inValue) => {\n        if (supportsAlpha) {\n            writeRgbaColorObject(target, inValue, type);\n        }\n        else {\n            writeRgbColorObject(target, inValue, type);\n        }\n    };\n}\n\nfunction shouldSupportAlpha$1(inputParams) {\n    var _a;\n    if ((_a = inputParams === null || inputParams === void 0 ? void 0 : inputParams.color) === null || _a === void 0 ? void 0 : _a.alpha) {\n        return true;\n    }\n    return false;\n}\nfunction createFormatter$1(supportsAlpha) {\n    return supportsAlpha\n        ? (v) => colorToHexRgbaString(v, '0x')\n        : (v) => colorToHexRgbString(v, '0x');\n}\nfunction isForColor(params) {\n    if ('color' in params) {\n        return true;\n    }\n    if (params.view === 'color') {\n        return true;\n    }\n    return false;\n}\nconst NumberColorInputPlugin = createPlugin({\n    id: 'input-color-number',\n    type: 'input',\n    accept: (value, params) => {\n        if (typeof value !== 'number') {\n            return null;\n        }\n        if (!isForColor(params)) {\n            return null;\n        }\n        const result = parseColorInputParams(params);\n        return result\n            ? {\n                initialValue: value,\n                params: Object.assign(Object.assign({}, result), { supportsAlpha: shouldSupportAlpha$1(params) }),\n            }\n            : null;\n    },\n    binding: {\n        reader: (args) => {\n            return args.params.supportsAlpha\n                ? colorFromRgbaNumber\n                : colorFromRgbNumber;\n        },\n        equals: equalsColor,\n        writer: (args) => {\n            return createColorNumberWriter(args.params.supportsAlpha);\n        },\n    },\n    controller: (args) => {\n        var _a, _b;\n        return new ColorController(args.document, {\n            colorType: 'int',\n            expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n            formatter: createFormatter$1(args.params.supportsAlpha),\n            parser: createColorStringParser('int'),\n            pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n            supportsAlpha: args.params.supportsAlpha,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nfunction colorFromObject(value, type) {\n    if (!isColorObject(value)) {\n        return mapColorType(IntColor.black(), type);\n    }\n    if (type === 'int') {\n        const comps = createColorComponentsFromRgbObject(value);\n        return new IntColor(comps, 'rgb');\n    }\n    if (type === 'float') {\n        const comps = createColorComponentsFromRgbObject(value);\n        return new FloatColor(comps, 'rgb');\n    }\n    return mapColorType(IntColor.black(), 'int');\n}\n\nfunction shouldSupportAlpha(initialValue) {\n    return isRgbaColorObject(initialValue);\n}\nfunction createColorObjectBindingReader(type) {\n    return (value) => {\n        const c = colorFromObject(value, type);\n        return mapColorType(c, 'int');\n    };\n}\nfunction createColorObjectFormatter(supportsAlpha, type) {\n    return (value) => {\n        if (supportsAlpha) {\n            return colorToObjectRgbaString(value, type);\n        }\n        return colorToObjectRgbString(value, type);\n    };\n}\nconst ObjectColorInputPlugin = createPlugin({\n    id: 'input-color-object',\n    type: 'input',\n    accept: (value, params) => {\n        var _a;\n        if (!isColorObject(value)) {\n            return null;\n        }\n        const result = parseColorInputParams(params);\n        return result\n            ? {\n                initialValue: value,\n                params: Object.assign(Object.assign({}, result), { colorType: (_a = extractColorType(params)) !== null && _a !== void 0 ? _a : 'int' }),\n            }\n            : null;\n    },\n    binding: {\n        reader: (args) => createColorObjectBindingReader(args.params.colorType),\n        equals: equalsColor,\n        writer: (args) => createColorObjectWriter(shouldSupportAlpha(args.initialValue), args.params.colorType),\n    },\n    controller: (args) => {\n        var _a, _b;\n        const supportsAlpha = isRgbaColorObject(args.initialValue);\n        return new ColorController(args.document, {\n            colorType: args.params.colorType,\n            expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n            formatter: createColorObjectFormatter(supportsAlpha, args.params.colorType),\n            parser: createColorStringParser('int'),\n            pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n            supportsAlpha: supportsAlpha,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nconst StringColorInputPlugin = createPlugin({\n    id: 'input-color-string',\n    type: 'input',\n    accept: (value, params) => {\n        if (typeof value !== 'string') {\n            return null;\n        }\n        if (params.view === 'text') {\n            return null;\n        }\n        const format = detectStringColorFormat(value, extractColorType(params));\n        if (!format) {\n            return null;\n        }\n        const stringifier = findColorStringifier(format);\n        if (!stringifier) {\n            return null;\n        }\n        const result = parseColorInputParams(params);\n        return result\n            ? {\n                initialValue: value,\n                params: Object.assign(Object.assign({}, result), { format: format, stringifier: stringifier }),\n            }\n            : null;\n    },\n    binding: {\n        reader: () => readIntColorString,\n        equals: equalsColor,\n        writer: (args) => {\n            const writer = createColorStringWriter(args.params.format);\n            if (!writer) {\n                throw TpError.notBindable();\n            }\n            return writer;\n        },\n    },\n    controller: (args) => {\n        var _a, _b;\n        return new ColorController(args.document, {\n            colorType: args.params.format.type,\n            expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n            formatter: args.params.stringifier,\n            parser: createColorStringParser('int'),\n            pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n            supportsAlpha: args.params.format.alpha,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nclass PointNdConstraint {\n    constructor(config) {\n        this.components = config.components;\n        this.asm_ = config.assembly;\n    }\n    constrain(value) {\n        const comps = this.asm_\n            .toComponents(value)\n            .map((comp, index) => { var _a, _b; return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp; });\n        return this.asm_.fromComponents(comps);\n    }\n}\n\nconst cn$6 = ClassName('pndtxt');\nclass PointNdTextView {\n    constructor(doc, config) {\n        this.textViews = config.textViews;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$6());\n        this.textViews.forEach((v) => {\n            const axisElem = doc.createElement('div');\n            axisElem.classList.add(cn$6('a'));\n            axisElem.appendChild(v.element);\n            this.element.appendChild(axisElem);\n        });\n    }\n}\n\nfunction createAxisController(doc, config, index) {\n    return new NumberTextController(doc, {\n        arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\n        parser: config.parser,\n        props: config.axes[index].textProps,\n        value: createValue(0, {\n            constraint: config.axes[index].constraint,\n        }),\n        viewProps: config.viewProps,\n    });\n}\nclass PointNdTextController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.acs_ = config.axes.map((_, index) => createAxisController(doc, config, index));\n        this.acs_.forEach((c, index) => {\n            connectValues({\n                primary: this.value,\n                secondary: c.value,\n                forward: (p) => config.assembly.toComponents(p)[index],\n                backward: (p, s) => {\n                    const comps = config.assembly.toComponents(p);\n                    comps[index] = s;\n                    return config.assembly.fromComponents(comps);\n                },\n            });\n        });\n        this.view = new PointNdTextView(doc, {\n            textViews: this.acs_.map((ac) => ac.view),\n        });\n    }\n    get textControllers() {\n        return this.acs_;\n    }\n}\n\nclass SliderInputBindingApi extends BindingApi {\n    get max() {\n        return this.controller.valueController.sliderController.props.get('max');\n    }\n    set max(max) {\n        this.controller.valueController.sliderController.props.set('max', max);\n    }\n    get min() {\n        return this.controller.valueController.sliderController.props.get('min');\n    }\n    set min(max) {\n        this.controller.valueController.sliderController.props.set('min', max);\n    }\n}\n\nfunction createConstraint$4(params, initialValue) {\n    const constraints = [];\n    const sc = createStepConstraint(params, initialValue);\n    if (sc) {\n        constraints.push(sc);\n    }\n    const rc = createRangeConstraint(params);\n    if (rc) {\n        constraints.push(rc);\n    }\n    const lc = createListConstraint(params.options);\n    if (lc) {\n        constraints.push(lc);\n    }\n    return new CompositeConstraint(constraints);\n}\nconst NumberInputPlugin = createPlugin({\n    id: 'input-number',\n    type: 'input',\n    accept: (value, params) => {\n        if (typeof value !== 'number') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => (Object.assign(Object.assign({}, createNumberTextInputParamsParser(p)), { options: p.optional.custom(parseListOptions), readonly: p.optional.constant(false) })));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => numberFromUnknown,\n        constraint: (args) => createConstraint$4(args.params, args.initialValue),\n        writer: (_args) => writePrimitive,\n    },\n    controller: (args) => {\n        const value = args.value;\n        const c = args.constraint;\n        const lc = c && findConstraint(c, ListConstraint);\n        if (lc) {\n            return new ListController(args.document, {\n                props: new ValueMap({\n                    options: lc.values.value('options'),\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        }\n        const textPropsObj = createNumberTextPropsObject(args.params, value.rawValue);\n        const drc = c && findConstraint(c, DefiniteRangeConstraint);\n        if (drc) {\n            return new SliderTextController(args.document, Object.assign(Object.assign({}, createSliderTextProps(Object.assign(Object.assign({}, textPropsObj), { keyScale: createValue(textPropsObj.keyScale), max: drc.values.value('max'), min: drc.values.value('min') }))), { parser: parseNumber, value: value, viewProps: args.viewProps }));\n        }\n        return new NumberTextController(args.document, {\n            parser: parseNumber,\n            props: ValueMap.fromObject(textPropsObj),\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (typeof args.controller.value.rawValue !== 'number') {\n            return null;\n        }\n        if (args.controller.valueController instanceof SliderTextController) {\n            return new SliderInputBindingApi(args.controller);\n        }\n        if (args.controller.valueController instanceof ListController) {\n            return new ListInputBindingApi(args.controller);\n        }\n        return null;\n    },\n});\n\nclass Point2d {\n    constructor(x = 0, y = 0) {\n        this.x = x;\n        this.y = y;\n    }\n    getComponents() {\n        return [this.x, this.y];\n    }\n    static isObject(obj) {\n        if (isEmpty(obj)) {\n            return false;\n        }\n        const x = obj.x;\n        const y = obj.y;\n        if (typeof x !== 'number' || typeof y !== 'number') {\n            return false;\n        }\n        return true;\n    }\n    static equals(v1, v2) {\n        return v1.x === v2.x && v1.y === v2.y;\n    }\n    toObject() {\n        return {\n            x: this.x,\n            y: this.y,\n        };\n    }\n}\nconst Point2dAssembly = {\n    toComponents: (p) => p.getComponents(),\n    fromComponents: (comps) => new Point2d(...comps),\n};\n\nconst cn$5 = ClassName('p2d');\nclass Point2dView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$5());\n        config.viewProps.bindClassModifiers(this.element);\n        bindValue(config.expanded, valueToClassName(this.element, cn$5(undefined, 'expanded')));\n        const headElem = doc.createElement('div');\n        headElem.classList.add(cn$5('h'));\n        this.element.appendChild(headElem);\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(cn$5('b'));\n        buttonElem.appendChild(createSvgIconElement(doc, 'p2dpad'));\n        config.viewProps.bindDisabled(buttonElem);\n        headElem.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        const textElem = doc.createElement('div');\n        textElem.classList.add(cn$5('t'));\n        headElem.appendChild(textElem);\n        this.textElement = textElem;\n        if (config.pickerLayout === 'inline') {\n            const pickerElem = doc.createElement('div');\n            pickerElem.classList.add(cn$5('p'));\n            this.element.appendChild(pickerElem);\n            this.pickerElement = pickerElem;\n        }\n        else {\n            this.pickerElement = null;\n        }\n    }\n}\n\nconst cn$4 = ClassName('p2dp');\nclass Point2dPickerView {\n    constructor(doc, config) {\n        this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n        this.onPropsChange_ = this.onPropsChange_.bind(this);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.props_ = config.props;\n        this.props_.emitter.on('change', this.onPropsChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$4());\n        if (config.layout === 'popup') {\n            this.element.classList.add(cn$4(undefined, 'p'));\n        }\n        config.viewProps.bindClassModifiers(this.element);\n        const padElem = doc.createElement('div');\n        padElem.classList.add(cn$4('p'));\n        config.viewProps.bindTabIndex(padElem);\n        this.element.appendChild(padElem);\n        this.padElement = padElem;\n        const svgElem = doc.createElementNS(SVG_NS, 'svg');\n        svgElem.classList.add(cn$4('g'));\n        this.padElement.appendChild(svgElem);\n        this.svgElem_ = svgElem;\n        const xAxisElem = doc.createElementNS(SVG_NS, 'line');\n        xAxisElem.classList.add(cn$4('ax'));\n        xAxisElem.setAttributeNS(null, 'x1', '0');\n        xAxisElem.setAttributeNS(null, 'y1', '50%');\n        xAxisElem.setAttributeNS(null, 'x2', '100%');\n        xAxisElem.setAttributeNS(null, 'y2', '50%');\n        this.svgElem_.appendChild(xAxisElem);\n        const yAxisElem = doc.createElementNS(SVG_NS, 'line');\n        yAxisElem.classList.add(cn$4('ax'));\n        yAxisElem.setAttributeNS(null, 'x1', '50%');\n        yAxisElem.setAttributeNS(null, 'y1', '0');\n        yAxisElem.setAttributeNS(null, 'x2', '50%');\n        yAxisElem.setAttributeNS(null, 'y2', '100%');\n        this.svgElem_.appendChild(yAxisElem);\n        const lineElem = doc.createElementNS(SVG_NS, 'line');\n        lineElem.classList.add(cn$4('l'));\n        lineElem.setAttributeNS(null, 'x1', '50%');\n        lineElem.setAttributeNS(null, 'y1', '50%');\n        this.svgElem_.appendChild(lineElem);\n        this.lineElem_ = lineElem;\n        const markerElem = doc.createElement('div');\n        markerElem.classList.add(cn$4('m'));\n        this.padElement.appendChild(markerElem);\n        this.markerElem_ = markerElem;\n        config.value.emitter.on('change', this.onValueChange_);\n        this.value = config.value;\n        this.update_();\n    }\n    get allFocusableElements() {\n        return [this.padElement];\n    }\n    update_() {\n        const [x, y] = this.value.rawValue.getComponents();\n        const max = this.props_.get('max');\n        const px = mapRange(x, -max, +max, 0, 100);\n        const py = mapRange(y, -max, +max, 0, 100);\n        const ipy = this.props_.get('invertsY') ? 100 - py : py;\n        this.lineElem_.setAttributeNS(null, 'x2', `${px}%`);\n        this.lineElem_.setAttributeNS(null, 'y2', `${ipy}%`);\n        this.markerElem_.style.left = `${px}%`;\n        this.markerElem_.style.top = `${ipy}%`;\n    }\n    onValueChange_() {\n        this.update_();\n    }\n    onPropsChange_() {\n        this.update_();\n    }\n    onFoldableChange_() {\n        this.update_();\n    }\n}\n\nfunction computeOffset(ev, keyScales, invertsY) {\n    return [\n        getStepForKey(keyScales[0], getHorizontalStepKeys(ev)),\n        getStepForKey(keyScales[1], getVerticalStepKeys(ev)) * (invertsY ? 1 : -1),\n    ];\n}\nclass Point2dPickerController {\n    constructor(doc, config) {\n        this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\n        this.onPadKeyUp_ = this.onPadKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.props = config.props;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new Point2dPickerView(doc, {\n            layout: config.layout,\n            props: this.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.padElement);\n        this.ptHandler_.emitter.on('down', this.onPointerDown_);\n        this.ptHandler_.emitter.on('move', this.onPointerMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.padElement.addEventListener('keydown', this.onPadKeyDown_);\n        this.view.padElement.addEventListener('keyup', this.onPadKeyUp_);\n    }\n    handlePointerEvent_(d, opts) {\n        if (!d.point) {\n            return;\n        }\n        const max = this.props.get('max');\n        const px = mapRange(d.point.x, 0, d.bounds.width, -max, +max);\n        const py = mapRange(this.props.get('invertsY') ? d.bounds.height - d.point.y : d.point.y, 0, d.bounds.height, -max, +max);\n        this.value.setRawValue(new Point2d(px, py), opts);\n    }\n    onPointerDown_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerMove_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onPadKeyDown_(ev) {\n        if (isArrowKey(ev.key)) {\n            ev.preventDefault();\n        }\n        const [dx, dy] = computeOffset(ev, [this.props.get('xKeyScale'), this.props.get('yKeyScale')], this.props.get('invertsY'));\n        if (dx === 0 && dy === 0) {\n            return;\n        }\n        this.value.setRawValue(new Point2d(this.value.rawValue.x + dx, this.value.rawValue.y + dy), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPadKeyUp_(ev) {\n        const [dx, dy] = computeOffset(ev, [this.props.get('xKeyScale'), this.props.get('yKeyScale')], this.props.get('invertsY'));\n        if (dx === 0 && dy === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n\nclass Point2dController {\n    constructor(doc, config) {\n        var _a, _b;\n        this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n        this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n        this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);\n        this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.foldable_ = Foldable.create(config.expanded);\n        this.popC_ =\n            config.pickerLayout === 'popup'\n                ? new PopupController(doc, {\n                    viewProps: this.viewProps,\n                })\n                : null;\n        const padC = new Point2dPickerController(doc, {\n            layout: config.pickerLayout,\n            props: new ValueMap({\n                invertsY: createValue(config.invertsY),\n                max: createValue(config.max),\n                xKeyScale: config.axes[0].textProps.value('keyScale'),\n                yKeyScale: config.axes[1].textProps.value('keyScale'),\n            }),\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        padC.view.allFocusableElements.forEach((elem) => {\n            elem.addEventListener('blur', this.onPopupChildBlur_);\n            elem.addEventListener('keydown', this.onPopupChildKeydown_);\n        });\n        this.pickerC_ = padC;\n        this.textC_ = new PointNdTextController(doc, {\n            assembly: Point2dAssembly,\n            axes: config.axes,\n            parser: config.parser,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view = new Point2dView(doc, {\n            expanded: this.foldable_.value('expanded'),\n            pickerLayout: config.pickerLayout,\n            viewProps: this.viewProps,\n        });\n        this.view.textElement.appendChild(this.textC_.view.element);\n        (_a = this.view.buttonElement) === null || _a === void 0 ? void 0 : _a.addEventListener('blur', this.onPadButtonBlur_);\n        (_b = this.view.buttonElement) === null || _b === void 0 ? void 0 : _b.addEventListener('click', this.onPadButtonClick_);\n        if (this.popC_) {\n            this.view.element.appendChild(this.popC_.view.element);\n            this.popC_.view.element.appendChild(this.pickerC_.view.element);\n            connectValues({\n                primary: this.foldable_.value('expanded'),\n                secondary: this.popC_.shows,\n                forward: (p) => p,\n                backward: (_, s) => s,\n            });\n        }\n        else if (this.view.pickerElement) {\n            this.view.pickerElement.appendChild(this.pickerC_.view.element);\n            bindFoldable(this.foldable_, this.view.pickerElement);\n        }\n    }\n    get textController() {\n        return this.textC_;\n    }\n    onPadButtonBlur_(e) {\n        if (!this.popC_) {\n            return;\n        }\n        const elem = this.view.element;\n        const nextTarget = forceCast(e.relatedTarget);\n        if (!nextTarget || !elem.contains(nextTarget)) {\n            this.popC_.shows.rawValue = false;\n        }\n    }\n    onPadButtonClick_() {\n        this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n        if (this.foldable_.get('expanded')) {\n            this.pickerC_.view.allFocusableElements[0].focus();\n        }\n    }\n    onPopupChildBlur_(ev) {\n        if (!this.popC_) {\n            return;\n        }\n        const elem = this.popC_.view.element;\n        const nextTarget = findNextTarget(ev);\n        if (nextTarget && elem.contains(nextTarget)) {\n            return;\n        }\n        if (nextTarget &&\n            nextTarget === this.view.buttonElement &&\n            !supportsTouch(elem.ownerDocument)) {\n            return;\n        }\n        this.popC_.shows.rawValue = false;\n    }\n    onPopupChildKeydown_(ev) {\n        if (this.popC_) {\n            if (ev.key === 'Escape') {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        else if (this.view.pickerElement) {\n            if (ev.key === 'Escape') {\n                this.view.buttonElement.focus();\n            }\n        }\n    }\n}\n\nfunction point2dFromUnknown(value) {\n    return Point2d.isObject(value)\n        ? new Point2d(value.x, value.y)\n        : new Point2d();\n}\nfunction writePoint2d(target, value) {\n    target.writeProperty('x', value.x);\n    target.writeProperty('y', value.y);\n}\n\nfunction createConstraint$3(params, initialValue) {\n    return new PointNdConstraint({\n        assembly: Point2dAssembly,\n        components: [\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.x), initialValue.x),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.y), initialValue.y),\n        ],\n    });\n}\nfunction getSuitableMaxDimensionValue(params, rawValue) {\n    var _a, _b;\n    if (!isEmpty(params.min) || !isEmpty(params.max)) {\n        return Math.max(Math.abs((_a = params.min) !== null && _a !== void 0 ? _a : 0), Math.abs((_b = params.max) !== null && _b !== void 0 ? _b : 0));\n    }\n    const step = getSuitableKeyScale(params);\n    return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);\n}\nfunction getSuitableMax(params, initialValue) {\n    var _a, _b;\n    const xr = getSuitableMaxDimensionValue(deepMerge(params, ((_a = params.x) !== null && _a !== void 0 ? _a : {})), initialValue.x);\n    const yr = getSuitableMaxDimensionValue(deepMerge(params, ((_b = params.y) !== null && _b !== void 0 ? _b : {})), initialValue.y);\n    return Math.max(xr, yr);\n}\nfunction shouldInvertY(params) {\n    if (!('y' in params)) {\n        return false;\n    }\n    const yParams = params.y;\n    if (!yParams) {\n        return false;\n    }\n    return 'inverted' in yParams ? !!yParams.inverted : false;\n}\nconst Point2dInputPlugin = createPlugin({\n    id: 'input-point2d',\n    type: 'input',\n    accept: (value, params) => {\n        if (!Point2d.isObject(value)) {\n            return null;\n        }\n        const result = parseRecord(params, (p) => (Object.assign(Object.assign({}, createPointDimensionParser(p)), { expanded: p.optional.boolean, picker: p.optional.custom(parsePickerLayout), readonly: p.optional.constant(false), x: p.optional.custom(parsePointDimensionParams), y: p.optional.object(Object.assign(Object.assign({}, createPointDimensionParser(p)), { inverted: p.optional.boolean })) })));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: () => point2dFromUnknown,\n        constraint: (args) => createConstraint$3(args.params, args.initialValue),\n        equals: Point2d.equals,\n        writer: () => writePoint2d,\n    },\n    controller: (args) => {\n        var _a, _b;\n        const doc = args.document;\n        const value = args.value;\n        const c = args.constraint;\n        const dParams = [args.params.x, args.params.y];\n        return new Point2dController(doc, {\n            axes: value.rawValue.getComponents().map((comp, i) => {\n                var _a;\n                return createPointAxis({\n                    constraint: c.components[i],\n                    initialValue: comp,\n                    params: deepMerge(args.params, ((_a = dParams[i]) !== null && _a !== void 0 ? _a : {})),\n                });\n            }),\n            expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n            invertsY: shouldInvertY(args.params),\n            max: getSuitableMax(args.params, value.rawValue),\n            parser: parseNumber,\n            pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nclass Point3d {\n    constructor(x = 0, y = 0, z = 0) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    }\n    getComponents() {\n        return [this.x, this.y, this.z];\n    }\n    static isObject(obj) {\n        if (isEmpty(obj)) {\n            return false;\n        }\n        const x = obj.x;\n        const y = obj.y;\n        const z = obj.z;\n        if (typeof x !== 'number' ||\n            typeof y !== 'number' ||\n            typeof z !== 'number') {\n            return false;\n        }\n        return true;\n    }\n    static equals(v1, v2) {\n        return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;\n    }\n    toObject() {\n        return {\n            x: this.x,\n            y: this.y,\n            z: this.z,\n        };\n    }\n}\nconst Point3dAssembly = {\n    toComponents: (p) => p.getComponents(),\n    fromComponents: (comps) => new Point3d(...comps),\n};\n\nfunction point3dFromUnknown(value) {\n    return Point3d.isObject(value)\n        ? new Point3d(value.x, value.y, value.z)\n        : new Point3d();\n}\nfunction writePoint3d(target, value) {\n    target.writeProperty('x', value.x);\n    target.writeProperty('y', value.y);\n    target.writeProperty('z', value.z);\n}\n\nfunction createConstraint$2(params, initialValue) {\n    return new PointNdConstraint({\n        assembly: Point3dAssembly,\n        components: [\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.x), initialValue.x),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.y), initialValue.y),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.z), initialValue.z),\n        ],\n    });\n}\nconst Point3dInputPlugin = createPlugin({\n    id: 'input-point3d',\n    type: 'input',\n    accept: (value, params) => {\n        if (!Point3d.isObject(value)) {\n            return null;\n        }\n        const result = parseRecord(params, (p) => (Object.assign(Object.assign({}, createPointDimensionParser(p)), { readonly: p.optional.constant(false), x: p.optional.custom(parsePointDimensionParams), y: p.optional.custom(parsePointDimensionParams), z: p.optional.custom(parsePointDimensionParams) })));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => point3dFromUnknown,\n        constraint: (args) => createConstraint$2(args.params, args.initialValue),\n        equals: Point3d.equals,\n        writer: (_args) => writePoint3d,\n    },\n    controller: (args) => {\n        const value = args.value;\n        const c = args.constraint;\n        const dParams = [args.params.x, args.params.y, args.params.z];\n        return new PointNdTextController(args.document, {\n            assembly: Point3dAssembly,\n            axes: value.rawValue.getComponents().map((comp, i) => {\n                var _a;\n                return createPointAxis({\n                    constraint: c.components[i],\n                    initialValue: comp,\n                    params: deepMerge(args.params, ((_a = dParams[i]) !== null && _a !== void 0 ? _a : {})),\n                });\n            }),\n            parser: parseNumber,\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nclass Point4d {\n    constructor(x = 0, y = 0, z = 0, w = 0) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        this.w = w;\n    }\n    getComponents() {\n        return [this.x, this.y, this.z, this.w];\n    }\n    static isObject(obj) {\n        if (isEmpty(obj)) {\n            return false;\n        }\n        const x = obj.x;\n        const y = obj.y;\n        const z = obj.z;\n        const w = obj.w;\n        if (typeof x !== 'number' ||\n            typeof y !== 'number' ||\n            typeof z !== 'number' ||\n            typeof w !== 'number') {\n            return false;\n        }\n        return true;\n    }\n    static equals(v1, v2) {\n        return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z && v1.w === v2.w;\n    }\n    toObject() {\n        return {\n            x: this.x,\n            y: this.y,\n            z: this.z,\n            w: this.w,\n        };\n    }\n}\nconst Point4dAssembly = {\n    toComponents: (p) => p.getComponents(),\n    fromComponents: (comps) => new Point4d(...comps),\n};\n\nfunction point4dFromUnknown(value) {\n    return Point4d.isObject(value)\n        ? new Point4d(value.x, value.y, value.z, value.w)\n        : new Point4d();\n}\nfunction writePoint4d(target, value) {\n    target.writeProperty('x', value.x);\n    target.writeProperty('y', value.y);\n    target.writeProperty('z', value.z);\n    target.writeProperty('w', value.w);\n}\n\nfunction createConstraint$1(params, initialValue) {\n    return new PointNdConstraint({\n        assembly: Point4dAssembly,\n        components: [\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.x), initialValue.x),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.y), initialValue.y),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.z), initialValue.z),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.w), initialValue.w),\n        ],\n    });\n}\nconst Point4dInputPlugin = createPlugin({\n    id: 'input-point4d',\n    type: 'input',\n    accept: (value, params) => {\n        if (!Point4d.isObject(value)) {\n            return null;\n        }\n        const result = parseRecord(params, (p) => (Object.assign(Object.assign({}, createPointDimensionParser(p)), { readonly: p.optional.constant(false), w: p.optional.custom(parsePointDimensionParams), x: p.optional.custom(parsePointDimensionParams), y: p.optional.custom(parsePointDimensionParams), z: p.optional.custom(parsePointDimensionParams) })));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => point4dFromUnknown,\n        constraint: (args) => createConstraint$1(args.params, args.initialValue),\n        equals: Point4d.equals,\n        writer: (_args) => writePoint4d,\n    },\n    controller: (args) => {\n        const value = args.value;\n        const c = args.constraint;\n        const dParams = [\n            args.params.x,\n            args.params.y,\n            args.params.z,\n            args.params.w,\n        ];\n        return new PointNdTextController(args.document, {\n            assembly: Point4dAssembly,\n            axes: value.rawValue.getComponents().map((comp, i) => {\n                var _a;\n                return createPointAxis({\n                    constraint: c.components[i],\n                    initialValue: comp,\n                    params: deepMerge(args.params, ((_a = dParams[i]) !== null && _a !== void 0 ? _a : {})),\n                });\n            }),\n            parser: parseNumber,\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nfunction createConstraint(params) {\n    const constraints = [];\n    const lc = createListConstraint(params.options);\n    if (lc) {\n        constraints.push(lc);\n    }\n    return new CompositeConstraint(constraints);\n}\nconst StringInputPlugin = createPlugin({\n    id: 'input-string',\n    type: 'input',\n    accept: (value, params) => {\n        if (typeof value !== 'string') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            readonly: p.optional.constant(false),\n            options: p.optional.custom(parseListOptions),\n        }));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => stringFromUnknown,\n        constraint: (args) => createConstraint(args.params),\n        writer: (_args) => writePrimitive,\n    },\n    controller: (args) => {\n        const doc = args.document;\n        const value = args.value;\n        const c = args.constraint;\n        const lc = c && findConstraint(c, ListConstraint);\n        if (lc) {\n            return new ListController(doc, {\n                props: new ValueMap({\n                    options: lc.values.value('options'),\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new TextController(doc, {\n            parser: (v) => v,\n            props: ValueMap.fromObject({\n                formatter: formatString,\n            }),\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (typeof args.controller.value.rawValue !== 'string') {\n            return null;\n        }\n        if (args.controller.valueController instanceof ListController) {\n            return new ListInputBindingApi(args.controller);\n        }\n        return null;\n    },\n});\n\nconst Constants = {\n    monitor: {\n        defaultInterval: 200,\n        defaultRows: 3,\n    },\n};\n\nconst cn$3 = ClassName('mll');\nclass MultiLogView {\n    constructor(doc, config) {\n        this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n        this.formatter_ = config.formatter;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$3());\n        config.viewProps.bindClassModifiers(this.element);\n        const textareaElem = doc.createElement('textarea');\n        textareaElem.classList.add(cn$3('i'));\n        textareaElem.style.height = `calc(var(${getCssVar('containerUnitSize')}) * ${config.rows})`;\n        textareaElem.readOnly = true;\n        config.viewProps.bindDisabled(textareaElem);\n        this.element.appendChild(textareaElem);\n        this.textareaElem_ = textareaElem;\n        config.value.emitter.on('change', this.onValueUpdate_);\n        this.value = config.value;\n        this.update_();\n    }\n    update_() {\n        const elem = this.textareaElem_;\n        const shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;\n        const lines = [];\n        this.value.rawValue.forEach((value) => {\n            if (value !== undefined) {\n                lines.push(this.formatter_(value));\n            }\n        });\n        elem.textContent = lines.join('\\n');\n        if (shouldScroll) {\n            elem.scrollTop = elem.scrollHeight;\n        }\n    }\n    onValueUpdate_() {\n        this.update_();\n    }\n}\n\nclass MultiLogController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new MultiLogView(doc, {\n            formatter: config.formatter,\n            rows: config.rows,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n    }\n}\n\nconst cn$2 = ClassName('sgl');\nclass SingleLogView {\n    constructor(doc, config) {\n        this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n        this.formatter_ = config.formatter;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$2());\n        config.viewProps.bindClassModifiers(this.element);\n        const inputElem = doc.createElement('input');\n        inputElem.classList.add(cn$2('i'));\n        inputElem.readOnly = true;\n        inputElem.type = 'text';\n        config.viewProps.bindDisabled(inputElem);\n        this.element.appendChild(inputElem);\n        this.inputElement = inputElem;\n        config.value.emitter.on('change', this.onValueUpdate_);\n        this.value = config.value;\n        this.update_();\n    }\n    update_() {\n        const values = this.value.rawValue;\n        const lastValue = values[values.length - 1];\n        this.inputElement.value =\n            lastValue !== undefined ? this.formatter_(lastValue) : '';\n    }\n    onValueUpdate_() {\n        this.update_();\n    }\n}\n\nclass SingleLogController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new SingleLogView(doc, {\n            formatter: config.formatter,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n    }\n}\n\nconst BooleanMonitorPlugin = createPlugin({\n    id: 'monitor-bool',\n    type: 'monitor',\n    accept: (value, params) => {\n        if (typeof value !== 'boolean') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            readonly: p.required.constant(true),\n            rows: p.optional.number,\n        }));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => boolFromUnknown,\n    },\n    controller: (args) => {\n        var _a;\n        if (args.value.rawValue.length === 1) {\n            return new SingleLogController(args.document, {\n                formatter: BooleanFormatter,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new MultiLogController(args.document, {\n            formatter: BooleanFormatter,\n            rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nclass GraphLogMonitorBindingApi extends BindingApi {\n    get max() {\n        return this.controller.valueController.props.get('max');\n    }\n    set max(max) {\n        this.controller.valueController.props.set('max', max);\n    }\n    get min() {\n        return this.controller.valueController.props.get('min');\n    }\n    set min(min) {\n        this.controller.valueController.props.set('min', min);\n    }\n}\n\nconst cn$1 = ClassName('grl');\nclass GraphLogView {\n    constructor(doc, config) {\n        this.onCursorChange_ = this.onCursorChange_.bind(this);\n        this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$1());\n        config.viewProps.bindClassModifiers(this.element);\n        this.formatter_ = config.formatter;\n        this.props_ = config.props;\n        this.cursor_ = config.cursor;\n        this.cursor_.emitter.on('change', this.onCursorChange_);\n        const svgElem = doc.createElementNS(SVG_NS, 'svg');\n        svgElem.classList.add(cn$1('g'));\n        svgElem.style.height = `calc(var(${getCssVar('containerUnitSize')}) * ${config.rows})`;\n        this.element.appendChild(svgElem);\n        this.svgElem_ = svgElem;\n        const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n        this.svgElem_.appendChild(lineElem);\n        this.lineElem_ = lineElem;\n        const tooltipElem = doc.createElement('div');\n        tooltipElem.classList.add(cn$1('t'), ClassName('tt')());\n        this.element.appendChild(tooltipElem);\n        this.tooltipElem_ = tooltipElem;\n        config.value.emitter.on('change', this.onValueUpdate_);\n        this.value = config.value;\n        this.update_();\n    }\n    get graphElement() {\n        return this.svgElem_;\n    }\n    update_() {\n        const bounds = this.svgElem_.getBoundingClientRect();\n        const maxIndex = this.value.rawValue.length - 1;\n        const min = this.props_.get('min');\n        const max = this.props_.get('max');\n        const points = [];\n        this.value.rawValue.forEach((v, index) => {\n            if (v === undefined) {\n                return;\n            }\n            const x = mapRange(index, 0, maxIndex, 0, bounds.width);\n            const y = mapRange(v, min, max, bounds.height, 0);\n            points.push([x, y].join(','));\n        });\n        this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n        const tooltipElem = this.tooltipElem_;\n        const value = this.value.rawValue[this.cursor_.rawValue];\n        if (value === undefined) {\n            tooltipElem.classList.remove(cn$1('t', 'a'));\n            return;\n        }\n        const tx = mapRange(this.cursor_.rawValue, 0, maxIndex, 0, bounds.width);\n        const ty = mapRange(value, min, max, bounds.height, 0);\n        tooltipElem.style.left = `${tx}px`;\n        tooltipElem.style.top = `${ty}px`;\n        tooltipElem.textContent = `${this.formatter_(value)}`;\n        if (!tooltipElem.classList.contains(cn$1('t', 'a'))) {\n            tooltipElem.classList.add(cn$1('t', 'a'), cn$1('t', 'in'));\n            forceReflow(tooltipElem);\n            tooltipElem.classList.remove(cn$1('t', 'in'));\n        }\n    }\n    onValueUpdate_() {\n        this.update_();\n    }\n    onCursorChange_() {\n        this.update_();\n    }\n}\n\nclass GraphLogController {\n    constructor(doc, config) {\n        this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n        this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n        this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n        this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n        this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n        this.props = config.props;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.cursor_ = createValue(-1);\n        this.view = new GraphLogView(doc, {\n            cursor: this.cursor_,\n            formatter: config.formatter,\n            rows: config.rows,\n            props: this.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        if (!supportsTouch(doc)) {\n            this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n            this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n        }\n        else {\n            const ph = new PointerHandler(this.view.element);\n            ph.emitter.on('down', this.onGraphPointerDown_);\n            ph.emitter.on('move', this.onGraphPointerMove_);\n            ph.emitter.on('up', this.onGraphPointerUp_);\n        }\n    }\n    importProps(state) {\n        return importBladeState(state, null, (p) => ({\n            max: p.required.number,\n            min: p.required.number,\n        }), (result) => {\n            this.props.set('max', result.max);\n            this.props.set('min', result.min);\n            return true;\n        });\n    }\n    exportProps() {\n        return exportBladeState(null, {\n            max: this.props.get('max'),\n            min: this.props.get('min'),\n        });\n    }\n    onGraphMouseLeave_() {\n        this.cursor_.rawValue = -1;\n    }\n    onGraphMouseMove_(ev) {\n        const bounds = this.view.element.getBoundingClientRect();\n        this.cursor_.rawValue = Math.floor(mapRange(ev.offsetX, 0, bounds.width, 0, this.value.rawValue.length));\n    }\n    onGraphPointerDown_(ev) {\n        this.onGraphPointerMove_(ev);\n    }\n    onGraphPointerMove_(ev) {\n        if (!ev.data.point) {\n            this.cursor_.rawValue = -1;\n            return;\n        }\n        this.cursor_.rawValue = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n    }\n    onGraphPointerUp_() {\n        this.cursor_.rawValue = -1;\n    }\n}\n\nfunction createFormatter(params) {\n    return !isEmpty(params.format) ? params.format : createNumberFormatter(2);\n}\nfunction createTextMonitor(args) {\n    var _a;\n    if (args.value.rawValue.length === 1) {\n        return new SingleLogController(args.document, {\n            formatter: createFormatter(args.params),\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    return new MultiLogController(args.document, {\n        formatter: createFormatter(args.params),\n        rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n        value: args.value,\n        viewProps: args.viewProps,\n    });\n}\nfunction createGraphMonitor(args) {\n    var _a, _b, _c;\n    return new GraphLogController(args.document, {\n        formatter: createFormatter(args.params),\n        rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n        props: ValueMap.fromObject({\n            max: (_b = args.params.max) !== null && _b !== void 0 ? _b : 100,\n            min: (_c = args.params.min) !== null && _c !== void 0 ? _c : 0,\n        }),\n        value: args.value,\n        viewProps: args.viewProps,\n    });\n}\nfunction shouldShowGraph(params) {\n    return params.view === 'graph';\n}\nconst NumberMonitorPlugin = createPlugin({\n    id: 'monitor-number',\n    type: 'monitor',\n    accept: (value, params) => {\n        if (typeof value !== 'number') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            format: p.optional.function,\n            max: p.optional.number,\n            min: p.optional.number,\n            readonly: p.required.constant(true),\n            rows: p.optional.number,\n            view: p.optional.string,\n        }));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        defaultBufferSize: (params) => (shouldShowGraph(params) ? 64 : 1),\n        reader: (_args) => numberFromUnknown,\n    },\n    controller: (args) => {\n        if (shouldShowGraph(args.params)) {\n            return createGraphMonitor(args);\n        }\n        return createTextMonitor(args);\n    },\n    api: (args) => {\n        if (args.controller.valueController instanceof GraphLogController) {\n            return new GraphLogMonitorBindingApi(args.controller);\n        }\n        return null;\n    },\n});\n\nconst StringMonitorPlugin = createPlugin({\n    id: 'monitor-string',\n    type: 'monitor',\n    accept: (value, params) => {\n        if (typeof value !== 'string') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            multiline: p.optional.boolean,\n            readonly: p.required.constant(true),\n            rows: p.optional.number,\n        }));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => stringFromUnknown,\n    },\n    controller: (args) => {\n        var _a;\n        const value = args.value;\n        const multiline = value.rawValue.length > 1 || args.params.multiline;\n        if (multiline) {\n            return new MultiLogController(args.document, {\n                formatter: formatString,\n                rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new SingleLogController(args.document, {\n            formatter: formatString,\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nclass BladeApiCache {\n    constructor() {\n        this.map_ = new Map();\n    }\n    get(bc) {\n        var _a;\n        return (_a = this.map_.get(bc)) !== null && _a !== void 0 ? _a : null;\n    }\n    has(bc) {\n        return this.map_.has(bc);\n    }\n    add(bc, api) {\n        this.map_.set(bc, api);\n        bc.viewProps.handleDispose(() => {\n            this.map_.delete(bc);\n        });\n        return api;\n    }\n}\n\nclass ReadWriteBinding {\n    constructor(config) {\n        this.target = config.target;\n        this.reader_ = config.reader;\n        this.writer_ = config.writer;\n    }\n    read() {\n        return this.reader_(this.target.read());\n    }\n    write(value) {\n        this.writer_(this.target, value);\n    }\n    inject(value) {\n        this.write(this.reader_(value));\n    }\n}\n\nfunction createInputBindingController(plugin, args) {\n    var _a;\n    const result = plugin.accept(args.target.read(), args.params);\n    if (isEmpty(result)) {\n        return null;\n    }\n    const valueArgs = {\n        target: args.target,\n        initialValue: result.initialValue,\n        params: result.params,\n    };\n    const params = parseRecord(args.params, (p) => ({\n        disabled: p.optional.boolean,\n        hidden: p.optional.boolean,\n        label: p.optional.string,\n        tag: p.optional.string,\n    }));\n    const reader = plugin.binding.reader(valueArgs);\n    const constraint = plugin.binding.constraint\n        ? plugin.binding.constraint(valueArgs)\n        : undefined;\n    const binding = new ReadWriteBinding({\n        reader: reader,\n        target: args.target,\n        writer: plugin.binding.writer(valueArgs),\n    });\n    const value = new InputBindingValue(createValue(reader(result.initialValue), {\n        constraint: constraint,\n        equals: plugin.binding.equals,\n    }), binding);\n    const controller = plugin.controller({\n        constraint: constraint,\n        document: args.document,\n        initialValue: result.initialValue,\n        params: result.params,\n        value: value,\n        viewProps: ViewProps.create({\n            disabled: params === null || params === void 0 ? void 0 : params.disabled,\n            hidden: params === null || params === void 0 ? void 0 : params.hidden,\n        }),\n    });\n    return new InputBindingController(args.document, {\n        blade: createBlade(),\n        props: ValueMap.fromObject({\n            label: 'label' in args.params ? (_a = params === null || params === void 0 ? void 0 : params.label) !== null && _a !== void 0 ? _a : null : args.target.key,\n        }),\n        tag: params === null || params === void 0 ? void 0 : params.tag,\n        value: value,\n        valueController: controller,\n    });\n}\n\nclass ReadonlyBinding {\n    constructor(config) {\n        this.target = config.target;\n        this.reader_ = config.reader;\n    }\n    read() {\n        return this.reader_(this.target.read());\n    }\n}\n\nfunction createTicker(document, interval) {\n    return interval === 0\n        ? new ManualTicker()\n        : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n}\nfunction createMonitorBindingController(plugin, args) {\n    var _a, _b, _c;\n    const result = plugin.accept(args.target.read(), args.params);\n    if (isEmpty(result)) {\n        return null;\n    }\n    const bindingArgs = {\n        target: args.target,\n        initialValue: result.initialValue,\n        params: result.params,\n    };\n    const params = parseRecord(args.params, (p) => ({\n        bufferSize: p.optional.number,\n        disabled: p.optional.boolean,\n        hidden: p.optional.boolean,\n        interval: p.optional.number,\n        label: p.optional.string,\n    }));\n    const reader = plugin.binding.reader(bindingArgs);\n    const bufferSize = (_b = (_a = params === null || params === void 0 ? void 0 : params.bufferSize) !== null && _a !== void 0 ? _a : (plugin.binding.defaultBufferSize &&\n        plugin.binding.defaultBufferSize(result.params))) !== null && _b !== void 0 ? _b : 1;\n    const value = new MonitorBindingValue({\n        binding: new ReadonlyBinding({\n            reader: reader,\n            target: args.target,\n        }),\n        bufferSize: bufferSize,\n        ticker: createTicker(args.document, params === null || params === void 0 ? void 0 : params.interval),\n    });\n    const controller = plugin.controller({\n        document: args.document,\n        params: result.params,\n        value: value,\n        viewProps: ViewProps.create({\n            disabled: params === null || params === void 0 ? void 0 : params.disabled,\n            hidden: params === null || params === void 0 ? void 0 : params.hidden,\n        }),\n    });\n    controller.viewProps.bindDisabled(value.ticker);\n    controller.viewProps.handleDispose(() => {\n        value.ticker.dispose();\n    });\n    return new MonitorBindingController(args.document, {\n        blade: createBlade(),\n        props: ValueMap.fromObject({\n            label: 'label' in args.params ? (_c = params === null || params === void 0 ? void 0 : params.label) !== null && _c !== void 0 ? _c : null : args.target.key,\n        }),\n        value: value,\n        valueController: controller,\n    });\n}\n\nclass PluginPool {\n    constructor(apiCache) {\n        this.pluginsMap_ = {\n            blades: [],\n            inputs: [],\n            monitors: [],\n        };\n        this.apiCache_ = apiCache;\n    }\n    getAll() {\n        return [\n            ...this.pluginsMap_.blades,\n            ...this.pluginsMap_.inputs,\n            ...this.pluginsMap_.monitors,\n        ];\n    }\n    register(bundleId, r) {\n        if (!isCompatible(r.core)) {\n            throw TpError.notCompatible(bundleId, r.id);\n        }\n        if (r.type === 'blade') {\n            this.pluginsMap_.blades.unshift(r);\n        }\n        else if (r.type === 'input') {\n            this.pluginsMap_.inputs.unshift(r);\n        }\n        else if (r.type === 'monitor') {\n            this.pluginsMap_.monitors.unshift(r);\n        }\n    }\n    createInput_(document, target, params) {\n        return this.pluginsMap_.inputs.reduce((result, plugin) => result !== null && result !== void 0 ? result : createInputBindingController(plugin, {\n            document: document,\n            target: target,\n            params: params,\n        }), null);\n    }\n    createMonitor_(document, target, params) {\n        return this.pluginsMap_.monitors.reduce((result, plugin) => result !== null && result !== void 0 ? result : createMonitorBindingController(plugin, {\n            document: document,\n            params: params,\n            target: target,\n        }), null);\n    }\n    createBinding(doc, target, params) {\n        const initialValue = target.read();\n        if (isEmpty(initialValue)) {\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        const ic = this.createInput_(doc, target, params);\n        if (ic) {\n            return ic;\n        }\n        const mc = this.createMonitor_(doc, target, params);\n        if (mc) {\n            return mc;\n        }\n        throw new TpError({\n            context: {\n                key: target.key,\n            },\n            type: 'nomatchingcontroller',\n        });\n    }\n    createBlade(document, params) {\n        const bc = this.pluginsMap_.blades.reduce((result, plugin) => result !== null && result !== void 0 ? result : createBladeController(plugin, {\n            document: document,\n            params: params,\n        }), null);\n        if (!bc) {\n            throw new TpError({\n                type: 'nomatchingview',\n                context: {\n                    params: params,\n                },\n            });\n        }\n        return bc;\n    }\n    createInputBindingApi_(bc) {\n        const api = this.pluginsMap_.inputs.reduce((result, plugin) => {\n            var _a, _b;\n            if (result) {\n                return result;\n            }\n            return ((_b = (_a = plugin.api) === null || _a === void 0 ? void 0 : _a.call(plugin, {\n                controller: bc,\n            })) !== null && _b !== void 0 ? _b : null);\n        }, null);\n        return this.apiCache_.add(bc, api !== null && api !== void 0 ? api : new BindingApi(bc));\n    }\n    createMonitorBindingApi_(bc) {\n        const api = this.pluginsMap_.monitors.reduce((result, plugin) => {\n            var _a, _b;\n            if (result) {\n                return result;\n            }\n            return ((_b = (_a = plugin.api) === null || _a === void 0 ? void 0 : _a.call(plugin, {\n                controller: bc,\n            })) !== null && _b !== void 0 ? _b : null);\n        }, null);\n        return this.apiCache_.add(bc, api !== null && api !== void 0 ? api : new BindingApi(bc));\n    }\n    createBindingApi(bc) {\n        if (this.apiCache_.has(bc)) {\n            return this.apiCache_.get(bc);\n        }\n        if (isInputBindingController(bc)) {\n            return this.createInputBindingApi_(bc);\n        }\n        if (isMonitorBindingController(bc)) {\n            return this.createMonitorBindingApi_(bc);\n        }\n        throw TpError.shouldNeverHappen();\n    }\n    createApi(bc) {\n        if (this.apiCache_.has(bc)) {\n            return this.apiCache_.get(bc);\n        }\n        if (isBindingController(bc)) {\n            return this.createBindingApi(bc);\n        }\n        const api = this.pluginsMap_.blades.reduce((result, plugin) => result !== null && result !== void 0 ? result : plugin.api({\n            controller: bc,\n            pool: this,\n        }), null);\n        if (!api) {\n            throw TpError.shouldNeverHappen();\n        }\n        return this.apiCache_.add(bc, api);\n    }\n}\n\nconst sharedCache = new BladeApiCache();\nfunction createDefaultPluginPool() {\n    const pool = new PluginPool(sharedCache);\n    [\n        Point2dInputPlugin,\n        Point3dInputPlugin,\n        Point4dInputPlugin,\n        StringInputPlugin,\n        NumberInputPlugin,\n        StringColorInputPlugin,\n        ObjectColorInputPlugin,\n        NumberColorInputPlugin,\n        BooleanInputPlugin,\n        BooleanMonitorPlugin,\n        StringMonitorPlugin,\n        NumberMonitorPlugin,\n        ButtonBladePlugin,\n        FolderBladePlugin,\n        TabBladePlugin,\n    ].forEach((p) => {\n        pool.register('core', p);\n    });\n    return pool;\n}\n\nclass ListBladeApi extends BladeApi {\n    /**\n     * @hidden\n     */\n    constructor(controller) {\n        super(controller);\n        this.emitter_ = new Emitter();\n        this.controller.value.emitter.on('change', (ev) => {\n            this.emitter_.emit('change', new TpChangeEvent(this, ev.rawValue));\n        });\n    }\n    get label() {\n        return this.controller.labelController.props.get('label');\n    }\n    set label(label) {\n        this.controller.labelController.props.set('label', label);\n    }\n    get options() {\n        return this.controller.valueController.props.get('options');\n    }\n    set options(options) {\n        this.controller.valueController.props.set('options', options);\n    }\n    get value() {\n        return this.controller.value.rawValue;\n    }\n    set value(value) {\n        this.controller.value.rawValue = value;\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        });\n        return this;\n    }\n}\n\nclass SeparatorBladeApi extends BladeApi {\n}\n\nclass SliderBladeApi extends BladeApi {\n    /**\n     * @hidden\n     */\n    constructor(controller) {\n        super(controller);\n        this.emitter_ = new Emitter();\n        this.controller.value.emitter.on('change', (ev) => {\n            this.emitter_.emit('change', new TpChangeEvent(this, ev.rawValue));\n        });\n    }\n    get label() {\n        return this.controller.labelController.props.get('label');\n    }\n    set label(label) {\n        this.controller.labelController.props.set('label', label);\n    }\n    get max() {\n        return this.controller.valueController.sliderController.props.get('max');\n    }\n    set max(max) {\n        this.controller.valueController.sliderController.props.set('max', max);\n    }\n    get min() {\n        return this.controller.valueController.sliderController.props.get('min');\n    }\n    set min(min) {\n        this.controller.valueController.sliderController.props.set('min', min);\n    }\n    get value() {\n        return this.controller.value.rawValue;\n    }\n    set value(value) {\n        this.controller.value.rawValue = value;\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        });\n        return this;\n    }\n}\n\nclass TextBladeApi extends BladeApi {\n    /**\n     * @hidden\n     */\n    constructor(controller) {\n        super(controller);\n        this.emitter_ = new Emitter();\n        this.controller.value.emitter.on('change', (ev) => {\n            this.emitter_.emit('change', new TpChangeEvent(this, ev.rawValue));\n        });\n    }\n    get label() {\n        return this.controller.labelController.props.get('label');\n    }\n    set label(label) {\n        this.controller.labelController.props.set('label', label);\n    }\n    get formatter() {\n        return this.controller.valueController.props.get('formatter');\n    }\n    set formatter(formatter) {\n        this.controller.valueController.props.set('formatter', formatter);\n    }\n    get value() {\n        return this.controller.value.rawValue;\n    }\n    set value(value) {\n        this.controller.value.rawValue = value;\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        });\n        return this;\n    }\n}\n\nconst ListBladePlugin = (function () {\n    return {\n        id: 'list',\n        type: 'blade',\n        core: VERSION$1,\n        accept(params) {\n            const result = parseRecord(params, (p) => ({\n                options: p.required.custom(parseListOptions),\n                value: p.required.raw,\n                view: p.required.constant('list'),\n                label: p.optional.string,\n            }));\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            const lc = new ListConstraint(normalizeListOptions(args.params.options));\n            const value = createValue(args.params.value, {\n                constraint: lc,\n            });\n            const ic = new ListController(args.document, {\n                props: new ValueMap({\n                    options: lc.values.value('options'),\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n            return new LabeledValueBladeController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                value: value,\n                valueController: ic,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueBladeController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof ListController)) {\n                return null;\n            }\n            return new ListBladeApi(args.controller);\n        },\n    };\n})();\n\nclass RootApi extends FolderApi {\n    /**\n     * @hidden\n     */\n    constructor(controller, pool) {\n        super(controller, pool);\n    }\n    get element() {\n        return this.controller.view.element;\n    }\n}\n\n/**\n * @hidden\n */\nclass RootController extends FolderController {\n    constructor(doc, config) {\n        super(doc, {\n            expanded: config.expanded,\n            blade: config.blade,\n            props: config.props,\n            root: true,\n            viewProps: config.viewProps,\n        });\n    }\n}\n\nconst cn = ClassName('spr');\n/**\n * @hidden\n */\nclass SeparatorView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        config.viewProps.bindClassModifiers(this.element);\n        const hrElem = doc.createElement('hr');\n        hrElem.classList.add(cn('r'));\n        this.element.appendChild(hrElem);\n    }\n}\n\n/**\n * @hidden\n */\nclass SeparatorController extends BladeController {\n    /**\n     * @hidden\n     */\n    constructor(doc, config) {\n        super(Object.assign(Object.assign({}, config), { view: new SeparatorView(doc, {\n                viewProps: config.viewProps,\n            }) }));\n    }\n}\n\nconst SeparatorBladePlugin = {\n    id: 'separator',\n    type: 'blade',\n    core: VERSION$1,\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            view: p.required.constant('separator'),\n        }));\n        return result ? { params: result } : null;\n    },\n    controller(args) {\n        return new SeparatorController(args.document, {\n            blade: args.blade,\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (!(args.controller instanceof SeparatorController)) {\n            return null;\n        }\n        return new SeparatorBladeApi(args.controller);\n    },\n};\n\nconst SliderBladePlugin = {\n    id: 'slider',\n    type: 'blade',\n    core: VERSION$1,\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            max: p.required.number,\n            min: p.required.number,\n            view: p.required.constant('slider'),\n            format: p.optional.function,\n            label: p.optional.string,\n            value: p.optional.number,\n        }));\n        return result ? { params: result } : null;\n    },\n    controller(args) {\n        var _a, _b;\n        const initialValue = (_a = args.params.value) !== null && _a !== void 0 ? _a : 0;\n        const drc = new DefiniteRangeConstraint({\n            max: args.params.max,\n            min: args.params.min,\n        });\n        const v = createValue(initialValue, {\n            constraint: drc,\n        });\n        const vc = new SliderTextController(args.document, Object.assign(Object.assign({}, createSliderTextProps({\n            formatter: (_b = args.params.format) !== null && _b !== void 0 ? _b : numberToString,\n            keyScale: createValue(1),\n            max: drc.values.value('max'),\n            min: drc.values.value('min'),\n            pointerScale: getSuitablePointerScale(args.params, initialValue),\n        })), { parser: parseNumber, value: v, viewProps: args.viewProps }));\n        return new LabeledValueBladeController(args.document, {\n            blade: args.blade,\n            props: ValueMap.fromObject({\n                label: args.params.label,\n            }),\n            value: v,\n            valueController: vc,\n        });\n    },\n    api(args) {\n        if (!(args.controller instanceof LabeledValueBladeController)) {\n            return null;\n        }\n        if (!(args.controller.valueController instanceof SliderTextController)) {\n            return null;\n        }\n        return new SliderBladeApi(args.controller);\n    },\n};\n\nconst TextBladePlugin = (function () {\n    return {\n        id: 'text',\n        type: 'blade',\n        core: VERSION$1,\n        accept(params) {\n            const result = parseRecord(params, (p) => ({\n                parse: p.required.function,\n                value: p.required.raw,\n                view: p.required.constant('text'),\n                format: p.optional.function,\n                label: p.optional.string,\n            }));\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            var _a;\n            const v = createValue(args.params.value);\n            const ic = new TextController(args.document, {\n                parser: args.params.parse,\n                props: ValueMap.fromObject({\n                    formatter: (_a = args.params.format) !== null && _a !== void 0 ? _a : ((v) => String(v)),\n                }),\n                value: v,\n                viewProps: args.viewProps,\n            });\n            return new LabeledValueBladeController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                value: v,\n                valueController: ic,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueBladeController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof TextController)) {\n                return null;\n            }\n            return new TextBladeApi(args.controller);\n        },\n    };\n})();\n\nfunction createDefaultWrapperElement(doc) {\n    const elem = doc.createElement('div');\n    elem.classList.add(ClassName('dfw')());\n    if (doc.body) {\n        doc.body.appendChild(elem);\n    }\n    return elem;\n}\nfunction embedStyle(doc, id, css) {\n    if (doc.querySelector(`style[data-tp-style=${id}]`)) {\n        return;\n    }\n    const styleElem = doc.createElement('style');\n    styleElem.dataset.tpStyle = id;\n    styleElem.textContent = css;\n    doc.head.appendChild(styleElem);\n}\n/**\n * The root pane of Tweakpane.\n */\nclass Pane extends RootApi {\n    constructor(opt_config) {\n        var _a, _b;\n        const config = opt_config !== null && opt_config !== void 0 ? opt_config : {};\n        const doc = (_a = config.document) !== null && _a !== void 0 ? _a : getWindowDocument();\n        const pool = createDefaultPluginPool();\n        const rootController = new RootController(doc, {\n            expanded: config.expanded,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                title: config.title,\n            }),\n            viewProps: ViewProps.create(),\n        });\n        super(rootController, pool);\n        this.pool_ = pool;\n        this.containerElem_ = (_b = config.container) !== null && _b !== void 0 ? _b : createDefaultWrapperElement(doc);\n        this.containerElem_.appendChild(this.element);\n        this.doc_ = doc;\n        this.usesDefaultWrapper_ = !config.container;\n        this.setUpDefaultPlugins_();\n    }\n    get document() {\n        if (!this.doc_) {\n            throw TpError.alreadyDisposed();\n        }\n        return this.doc_;\n    }\n    dispose() {\n        const containerElem = this.containerElem_;\n        if (!containerElem) {\n            throw TpError.alreadyDisposed();\n        }\n        if (this.usesDefaultWrapper_) {\n            const parentElem = containerElem.parentElement;\n            if (parentElem) {\n                parentElem.removeChild(containerElem);\n            }\n        }\n        this.containerElem_ = null;\n        this.doc_ = null;\n        super.dispose();\n    }\n    registerPlugin(bundle) {\n        if (bundle.css) {\n            embedStyle(this.document, `plugin-${bundle.id}`, bundle.css);\n        }\n        const plugins = 'plugin' in bundle\n            ? [bundle.plugin]\n            : 'plugins' in bundle\n                ? bundle.plugins\n                : [];\n        plugins.forEach((p) => {\n            this.pool_.register(bundle.id, p);\n        });\n    }\n    setUpDefaultPlugins_() {\n        this.registerPlugin({\n            id: 'default',\n            // NOTE: This string literal will be replaced with the default CSS by Rollup at the compilation time\n            css: '.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1 * var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(\t\t2px * 2 + var(--cnt-usz) + var(--cnt-hp)\t);position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:\"\";display:block;height:6px;right:calc(\t\tvar(--cnt-hp) + (\t\t\t\tvar(--cnt-usz) + 4px - 6px\t\t\t) / 2 - 2px\t);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1 * var(--cnt-hp));right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(\t\t\tvar(--cnt-vp) + 2px\t\t);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:\"\";height:2px;left:calc(-1 * var(--cnt-hp));position:absolute;right:calc(-1 * var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);bottom:0;content:\"\";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz) * 3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1 * var(--cnt-hp));right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:\"\";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:\"\";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:\"\";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:\"\";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(\t\t\tvar(--bld-hp) - 5px\t\t);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:\"\";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(\t\t\t2px * 2 + var(--cnt-usz) + var(--cnt-hp)\t\t);text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1 * var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1 * var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',\n            plugins: [\n                ListBladePlugin,\n                SeparatorBladePlugin,\n                SliderBladePlugin,\n                TabBladePlugin,\n                TextBladePlugin,\n            ],\n        });\n    }\n}\n\nconst VERSION = new Semver('4.0.1');\n\nexport { BladeApi, ButtonApi, FolderApi, ListBladeApi, ListInputBindingApi, Pane, Semver, SeparatorBladeApi, SliderBladeApi, SliderInputBindingApi, TabApi, TabPageApi, TextBladeApi, TpChangeEvent, VERSION };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}