{"ast":null,"code":"import * as THREE from 'three';\nimport AudioController from '../../components/utils/AudioController';\nexport default class Sphere {\n  constructor() {\n    this.geometry = new THREE.BufferGeometry();\n\n    // Augmentez le nombre de segments et d'anneaux pour plus de particules.\n    const segments = 64;\n    const rings = 32;\n    const positions = new Float32Array(segments * rings * 3);\n    this.originalPositions = new Float32Array(segments * rings * 3);\n    for (let i = 0; i < segments; i++) {\n      for (let j = 0; j < rings; j++) {\n        const index = (i * rings + j) * 3;\n        const phi = i / segments * Math.PI * 2;\n        const theta = j / rings * Math.PI;\n        const radius = 15;\n        positions[index] = radius * Math.sin(theta) * Math.cos(phi);\n        positions[index + 1] = radius * Math.sin(theta) * Math.sin(phi);\n        positions[index + 2] = radius * Math.cos(theta);\n\n        // Stockez les positions d'origine.\n        this.originalPositions[index] = positions[index];\n        this.originalPositions[index + 1] = positions[index + 1];\n        this.originalPositions[index + 2] = positions[index + 2];\n      }\n    }\n    this.geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));\n    this.material = new THREE.PointsMaterial({\n      color: 0x00ff00\n    });\n    this.mesh = new THREE.Points(this.geometry, this.material);\n    this.group = new THREE.Group();\n    this.group.add(this.mesh);\n\n    // Appliquez une rotation de 90 degrés autour de l'axe X.\n    this.group.rotation.x = Math.PI / 2;\n  }\n  tick() {\n    const remapped = AudioController.fdata[0] / 255;\n\n    // Récupérez la position des particules.\n    const positions = this.geometry.attributes.position.array;\n    if (remapped > 0) {\n      // Faites bouger les points en fonction de la valeur de remapped.\n      for (let i = 0; i < positions.length; i += 3) {\n        positions[i] += (Math.random() - 0.5) * remapped * 10;\n        positions[i + 1] += (Math.random() - 0.5) * remapped * 10;\n        positions[i + 2] += (Math.random() - 0.5) * remapped * 10;\n      }\n    } else {\n      // Réinitialisez les positions des particules aux positions d'origine.\n      for (let i = 0; i < positions.length; i += 3) {\n        positions[i] = this.originalPositions[i];\n        positions[i + 1] = this.originalPositions[i + 1];\n        positions[i + 2] = this.originalPositions[i + 2];\n      }\n    }\n\n    // Mettez à jour la géométrie des particules.\n    this.geometry.attributes.position.needsUpdate = true;\n  }\n}","map":{"version":3,"names":["THREE","AudioController","Sphere","constructor","geometry","BufferGeometry","segments","rings","positions","Float32Array","originalPositions","i","j","index","phi","Math","PI","theta","radius","sin","cos","setAttribute","BufferAttribute","material","PointsMaterial","color","mesh","Points","group","Group","add","rotation","x","tick","remapped","fdata","attributes","position","array","length","random","needsUpdate"],"sources":["/Users/noamsebahoun/Documents/MMI/MMI_3/karl/three-reader-live/src/webgl/objects/Sphere.js"],"sourcesContent":["import * as THREE from 'three';\nimport AudioController from '../../components/utils/AudioController';\n\nexport default class Sphere {\n    constructor() {\n        this.geometry = new THREE.BufferGeometry();\n\n        // Augmentez le nombre de segments et d'anneaux pour plus de particules.\n        const segments = 64;\n        const rings = 32;\n        const positions = new Float32Array(segments * rings * 3);\n        this.originalPositions = new Float32Array(segments * rings * 3);\n\n        for (let i = 0; i < segments; i++) {\n            for (let j = 0; j < rings; j++) {\n                const index = (i * rings + j) * 3;\n                const phi = (i / segments) * Math.PI * 2;\n                const theta = (j / rings) * Math.PI;\n                const radius = 15;\n                positions[index] = radius * Math.sin(theta) * Math.cos(phi);\n                positions[index + 1] = radius * Math.sin(theta) * Math.sin(phi);\n                positions[index + 2] = radius * Math.cos(theta);\n\n                // Stockez les positions d'origine.\n                this.originalPositions[index] = positions[index];\n                this.originalPositions[index + 1] = positions[index + 1];\n                this.originalPositions[index + 2] = positions[index + 2];\n            }\n        }\n\n        this.geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));\n        this.material = new THREE.PointsMaterial({ color: 0x00ff00 });\n        this.mesh = new THREE.Points(this.geometry, this.material);\n        this.group = new THREE.Group();\n        this.group.add(this.mesh);\n\n        // Appliquez une rotation de 90 degrés autour de l'axe X.\n        this.group.rotation.x = Math.PI / 2;\n    }\n\n    tick() {\n        const remapped = AudioController.fdata[0] / 255;\n\n        // Récupérez la position des particules.\n        const positions = this.geometry.attributes.position.array;\n\n        if (remapped > 0) {\n            // Faites bouger les points en fonction de la valeur de remapped.\n            for (let i = 0; i < positions.length; i += 3) {\n                positions[i] += (Math.random() - 0.5) * remapped * 10;\n                positions[i + 1] += (Math.random() - 0.5) * remapped * 10;\n                positions[i + 2] += (Math.random() - 0.5) * remapped * 10;\n            }\n        } else {\n            // Réinitialisez les positions des particules aux positions d'origine.\n            for (let i = 0; i < positions.length; i += 3) {\n                positions[i] = this.originalPositions[i];\n                positions[i + 1] = this.originalPositions[i + 1];\n                positions[i + 2] = this.originalPositions[i + 2];\n            }\n        }\n\n        // Mettez à jour la géométrie des particules.\n        this.geometry.attributes.position.needsUpdate = true;\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}